/*! MokodeskBundle - v1.5.0 - 2013-11-27
* http://www.coactum.de
* Copyright (c) 2013 ; Licensed  */
function setStylesheet(a){var b="AMMLcustomStyleSheet",c=document.getElementById(b);document.createStyleSheet?(c&&c.parentNode.removeChild(c),document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style id='"+b+"'>"+a+"</style>")):c?c.replaceChild(document.createTextNode(a),c.firstChild):(c=document.createElement("style"),c.type="text/css",c.id=b,c.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(c))}function init(){var a,b=new Array;return null==document.getElementById?(alert("This webpage requires a recent browser such as Mozilla Firefox/Netscape 7+ or Internet Explorer 6+ with MathPlayer and Adobe SVGviewer"),null):(checkForMathML&&(a=checkMathML())&&b.push(a),checkIfSVGavailable&&(a=checkSVG())&&b.push(a),b.length>0&&displayWarnings(b),initSymbols(),!0)}function checkMathML(){if(navigator.product&&"Gecko"==navigator.product){var a=navigator.userAgent.toLowerCase().match(/rv:\s*([\d\.]+)/);null!=a&&(a=a[1].split("."),a.length<3&&(a[2]=0),a.length<2&&(a[1]=0)),noMathML=null!=a&&1e4*a[0]+100*a[1]+1*a[2]>=10100?null:!0}else if("Microsoft"==navigator.appName.slice(0,9))try{{new ActiveXObject("MathPlayer.Factory.1")}noMathML=null}catch(b){noMathML=!0}else noMathML=!0;if(noMathML&&notifyIfNoMathML){var c="To view the ASCIIMathML notation use Internet Explorer + MathPlayer or Mozilla Firefox 2.0 or later.";if(!alertIfNoMathML)return c;alert(c)}}function hideWarning(){var a=document.getElementsByTagName("body")[0];a.removeChild(document.getElementById("AMMLwarningBox")),a.onclick=null}function displayWarnings(a){var b,c,d=createElementXHTML("div"),e=document.getElementsByTagName("body")[0];for(e.onclick=hideWarning,d.id="AMMLwarningBox",b=0;b<a.length;b++)c=createElementXHTML("div"),c.appendChild(document.createTextNode(a[b])),c.style.paddingBottom="1.0em",d.appendChild(c);d.appendChild(createElementXHTML("p")),d.appendChild(document.createTextNode("For instructions see the "));var f=createElementXHTML("a");f.appendChild(document.createTextNode("ASCIIMathML")),f.setAttribute("href","http://www.chapman.edu/~jipsen/asciimath.html"),d.appendChild(f),d.appendChild(document.createTextNode(" homepage")),f=createElementXHTML("div"),f.id="AMMLcloseDiv",f.appendChild(document.createTextNode("(click anywhere to close this warning)")),d.appendChild(f);var e=document.getElementsByTagName("body")[0];e.insertBefore(d,e.childNodes[0])}function translate(a){if(!translated){translated=!0;var b=document.getElementsByTagName("body")[0],c=document.getElementById(AMdocumentId);translateLaTeX&&LMprocessNode(null!=c?c:b),translateASCIIMath&&AMprocessNode(null!=c?c:b,!1,a)}}function createElementXHTML(a){return isIE?document.createElement(a):document.createElementNS("http://www.w3.org/1999/xhtml",a)}function createMmlNode(a,b){if(isIE)var c=document.createElement("m:"+a);else var c=document.createElementNS("http://www.w3.org/1998/Math/MathML",a);return b&&c.appendChild(b),c}function compareNames(a,b){return a.input>b.input?1:-1}function initSymbols(){var a,b=[];for(a=0;a<AMsymbols.length;a++)!AMsymbols[a].tex||"boolean"==typeof AMsymbols[a].notexcopy&&AMsymbols[a].notexcopy||(b[b.length]={input:AMsymbols[a].tex,tag:AMsymbols[a].tag,output:AMsymbols[a].output,ttype:AMsymbols[a].ttype});AMsymbols=AMsymbols.concat(b),refreshSymbols()}function refreshSymbols(){var a;for(AMsymbols.sort(compareNames),a=0;a<AMsymbols.length;a++)AMnames[a]=AMsymbols[a].input;for(LMsymbols.sort(compareNames),a=0;a<LMsymbols.length;a++)LMnames[a]=LMsymbols[a].input}function define(a,b){"\\"==a.substr(0,1)?LMsymbols=LMsymbols.concat([{input:a,tag:"mo",output:b,ttype:DEFINITION}]):AMsymbols=AMsymbols.concat([{input:a,tag:"mo",output:b,tex:null,ttype:DEFINITION}]),refreshSymbols()}function AMremoveCharsAndBlanks(a,b){var c;c="\\"==a.charAt(b)&&"\\"!=a.charAt(b+1)&&" "!=a.charAt(b+1)?a.slice(b+1):a.slice(b);for(var d=0;d<c.length&&c.charCodeAt(d)<=32;d+=1);return c.slice(d)}function position(a,b,c){if(0==c){var d,e;for(c=-1,d=a.length;d>c+1;)e=c+d>>1,a[e]<b?c=e:d=e;return d}for(var f=c;f<a.length&&a[f]<b;f++);return f}function AMgetSymbol(a){for(var b,c,d,e=0,f=0,g="",h=!0,i=1;i<=a.length&&h;i++)c=a.slice(0,i),f=e,e=position(AMnames,c,f),e<AMnames.length&&a.slice(0,AMnames[e].length)==AMnames[e]&&(g=AMnames[e],b=e,i=g.length),h=e<AMnames.length&&a.slice(0,AMnames[e].length)>=AMnames[e];if(AMpreviousSymbol=AMcurrentSymbol,""!=g)return AMcurrentSymbol=AMsymbols[b].ttype,AMsymbols[b];AMcurrentSymbol=CONST,e=1,c=a.slice(0,1);for(var j=!0;c>="0"&&"9">=c&&e<=a.length;)c=a.slice(e,e+1),e++;if(c==decimalsign&&(c=a.slice(e,e+1),c>="0"&&"9">=c))for(j=!1,e++;c>="0"&&"9">=c&&e<=a.length;)c=a.slice(e,e+1),e++;return j&&e>1||e>2?(c=a.slice(0,e-1),d="mn"):(e=2,c=a.slice(0,1),d=("A">c||c>"Z")&&("a">c||c>"z")?"mo":"mi"),"-"==c&&AMpreviousSymbol==INFIX?(AMcurrentSymbol=INFIX,{input:c,tag:d,output:c,ttype:UNARY,func:!0,val:!0}):{input:c,tag:d,output:c,ttype:CONST,val:!0}}function AMremoveBrackets(a){var b;"mrow"==a.nodeName&&(b=a.firstChild.firstChild.nodeValue,("("==b||"["==b||"{"==b)&&a.removeChild(a.firstChild)),"mrow"==a.nodeName&&(b=a.lastChild.firstChild.nodeValue,(")"==b||"]"==b||"}"==b)&&a.removeChild(a.lastChild))}function AMTremoveBrackets(a){var b;return"{"==a.charAt(0)&&"}"==a.charAt(a.length-1)&&(b=a.charAt(1),("("==b||"["==b)&&(a="{"+a.substr(2)),b=a.substr(1,6),("\\left("==b||"\\left["==b||"\\left{"==b)&&(a="{"+a.substr(7)),b=a.substr(1,12),("\\left\\lbrace"==b||"\\left\\langle"==b)&&(a="{"+a.substr(13)),b=a.charAt(a.length-2),(")"==b||"]"==b)&&(a=a.substr(0,a.length-8)+"}"),b=a.substr(a.length-8,7),("\\rbrace"==b||"\\rangle"==b)&&(a=a.substr(0,a.length-14)+"}")),a}function AMTgetTeXsymbol(a){return pre="boolean"==typeof a.val&&a.val?"":"\\",null==a.tex?pre+a.input:pre+a.tex}function AMTgetTeXbracket(a){return null==a.tex?a.input:"\\"+a.tex}function AMTparseSexpr(a){var b,c,d,e,f,g="";if(a=AMremoveCharsAndBlanks(a,0),b=AMgetSymbol(a),null==b||b.ttype==RIGHTBRACKET&&AMnestingDepth>0)return[null,a];switch(b.ttype==DEFINITION&&(a=b.output+AMremoveCharsAndBlanks(a,b.input.length),b=AMgetSymbol(a)),b.ttype){case UNDEROVER:case CONST:a=AMremoveCharsAndBlanks(a,b.input.length);var h=AMTgetTeXsymbol(b);return"\\"==h.charAt(0)||"mo"==b.tag?[h,a]:["{"+h+"}",a];case LEFTBRACKET:return AMnestingDepth++,a=AMremoveCharsAndBlanks(a,b.input.length),d=AMTparseExpr(a,!0),AMnestingDepth--,c="boolean"==typeof b.invisible&&b.invisible?"{\\left."+d[0]+"}":"{\\left"+AMTgetTeXbracket(b)+d[0]+"}",[c,d[1]];case TEXT:return b!=AMquote&&(a=AMremoveCharsAndBlanks(a,b.input.length)),e="{"==a.charAt(0)?a.indexOf("}"):"("==a.charAt(0)?a.indexOf(")"):"["==a.charAt(0)?a.indexOf("]"):b==AMquote?a.slice(1).indexOf('"')+1:0,-1==e&&(e=a.length),f=a.slice(1,e)," "==f.charAt(0)&&(g="\\ "),g+="\\text{"+f+"}"," "==f.charAt(f.length-1)&&(g+="\\ "),a=AMremoveCharsAndBlanks(a,e+1),[g,a];case UNARY:return a=AMremoveCharsAndBlanks(a,b.input.length),d=AMTparseSexpr(a),null==d[0]?["{"+AMTgetTeXsymbol(b)+"}",a]:"boolean"==typeof b.func&&b.func?(f=a.charAt(0),"^"==f||"_"==f||"/"==f||"|"==f||","==f?["{"+AMTgetTeXsymbol(b)+"}",a]:(c="{"+AMTgetTeXsymbol(b)+"{"+d[0]+"}}",[c,d[1]])):(d[0]=AMTremoveBrackets(d[0]),"sqrt"==b.input?["\\sqrt{"+d[0]+"}",d[1]]:"boolean"==typeof b.acc&&b.acc?["{"+AMTgetTeXsymbol(b)+"{"+d[0]+"}}",d[1]]:["{"+AMTgetTeXsymbol(b)+"{"+d[0]+"}}",d[1]]);case BINARY:if(a=AMremoveCharsAndBlanks(a,b.input.length),d=AMTparseSexpr(a),null==d[0])return["{"+AMTgetTeXsymbol(b)+"}",a];d[0]=AMTremoveBrackets(d[0]);var i=AMTparseSexpr(d[1]);return null==i[0]?["{"+AMTgetTeXsymbol(b)+"}",a]:(i[0]=AMTremoveBrackets(i[0]),("root"==b.input||"stackrel"==b.input)&&(g="root"==b.input?"{\\sqrt["+d[0]+"]{"+i[0]+"}}":"{"+AMTgetTeXsymbol(b)+"{"+d[0]+"}{"+i[0]+"}}"),"frac"==b.input&&(g="{\\frac{"+d[0]+"}{"+i[0]+"}}"),[g,i[1]]);case INFIX:return a=AMremoveCharsAndBlanks(a,b.input.length),[b.output,a];case SPACE:return a=AMremoveCharsAndBlanks(a,b.input.length),["{\\quad\\text{"+b.input+"}\\quad}",a];case LEFTRIGHT:AMnestingDepth++,a=AMremoveCharsAndBlanks(a,b.input.length),d=AMTparseExpr(a,!1),AMnestingDepth--;var f="";return f=d[0].charAt(d[0].length-1),"|"==f?(c="{\\left|"+d[0]+"}",[c,d[1]]):(c="{\\mid}",[c,a]);default:return a=AMremoveCharsAndBlanks(a,b.input.length),["{"+AMTgetTeXsymbol(b)+"}",a]}}function AMTparseIexpr(a){var b,c,d,e,f,g;if(a=AMremoveCharsAndBlanks(a,0),c=AMgetSymbol(a),f=AMTparseSexpr(a),e=f[0],a=f[1],b=AMgetSymbol(a),b.ttype==INFIX&&"/"!=b.input)if(a=AMremoveCharsAndBlanks(a,b.input.length),f=AMTparseSexpr(a),f[0]=null==f[0]?"{}":AMTremoveBrackets(f[0]),a=f[1],"_"==b.input)if(d=AMgetSymbol(a),g=c.ttype==UNDEROVER,"^"==d.input){a=AMremoveCharsAndBlanks(a,d.input.length);var h=AMTparseSexpr(a);h[0]=AMTremoveBrackets(h[0]),a=h[1],e="{"+e,e+="_{"+f[0]+"}",e+="^{"+h[0]+"}",e+="}"}else e+="_{"+f[0]+"}";else e="{"+e+"}^{"+f[0]+"}";return[e,a]}function AMTparseExpr(a,b){var c,d,e,f,g="",h=!1;do a=AMremoveCharsAndBlanks(a,0),e=AMTparseIexpr(a),d=e[0],a=e[1],c=AMgetSymbol(a),c.ttype==INFIX&&"/"==c.input?(a=AMremoveCharsAndBlanks(a,c.input.length),e=AMTparseIexpr(a),e[0]=null==e[0]?"{}":AMTremoveBrackets(e[0]),a=e[1],d=AMTremoveBrackets(d),d="\\frac{"+d+"}",d+="{"+e[0]+"}",g+=d,c=AMgetSymbol(a)):void 0!=d&&(g+=d);while((c.ttype!=RIGHTBRACKET&&(c.ttype!=LEFTRIGHT||b)||0==AMnestingDepth)&&null!=c&&""!=c.output);if(c.ttype==RIGHTBRACKET||c.ttype==LEFTRIGHT){var i=g.length;if(i>2&&"{"==g.charAt(0)&&g.indexOf(",")>0){var j=g.charAt(i-2);if(")"==j||"]"==j){var k=g.charAt(6);if("("==k&&")"==j&&"}"!=c.output||"["==k&&"]"==j){var l="\\matrix{",m=new Array;m.push(0);var n=!0,o=0;for(f=1;i-1>f;f++)g.charAt(f)==k&&o++,g.charAt(f)==j&&(o--,0==o&&","==g.charAt(f+2)&&"{"==g.charAt(f+3)&&m.push(f+2));m.push(i);var p=-1;if(0==o&&m.length>0)for(f=0;f<m.length-1;f++){if(f>0&&(l+="\\\\"),0==f)var q=g.substr(m[f]+7,m[f+1]-m[f]-15).split(",");else var q=g.substr(m[f]+8,m[f+1]-m[f]-16).split(",");p>0&&q.length!=p?n=!1:-1==p&&(p=q.length),l+=q.join("&")}l+="}",n&&(g=l)}}}a=AMremoveCharsAndBlanks(a,c.input.length),"boolean"==typeof c.invisible&&c.invisible?(g+="\\right.",h=!0):(d="\\right"+AMTgetTeXbracket(c),g+=d,h=!0)}return AMnestingDepth>0&&!h&&(g+="\\right."),[g,a]}function AMTparseAMtoTeX(a){return AMnestingDepth=0,a=a.replace(/&nbsp;/g,""),a=a.replace(/&gt;/g,">"),a=a.replace(/&lt;/g,"<"),AMTparseExpr(a.replace(/^\s+/g,""),!1)[0]}function AMTparseMath(a,b){if(b)var c=a;else var c=AMTparseAMtoTeX(a);""!=mathcolor&&(c="\\"+mathcolor+c),c=displaystyle?"\\displaystyle"+c:"\\textstyle"+c;var d=createElementXHTML("img");return c="function"==typeof encodeURIComponent?encodeURIComponent(c):escape(c),d.src=AMTcgiloc+"?"+c,d.style.verticalAlign="middle",showasciiformulaonhover&&d.setAttribute("title",a.replace(/\s+/g," ")),d}function AMparseSexpr(a){var b,c,d,e,f,g=document.createDocumentFragment();if(a=AMremoveCharsAndBlanks(a,0),b=AMgetSymbol(a),null==b||b.ttype==RIGHTBRACKET&&AMnestingDepth>0)return[null,a];switch(b.ttype==DEFINITION&&(a=b.output+AMremoveCharsAndBlanks(a,b.input.length),b=AMgetSymbol(a)),b.ttype){case UNDEROVER:case CONST:return a=AMremoveCharsAndBlanks(a,b.input.length),[createMmlNode(b.tag,document.createTextNode(b.output)),a];case LEFTBRACKET:return AMnestingDepth++,a=AMremoveCharsAndBlanks(a,b.input.length),d=AMparseExpr(a,!0),AMnestingDepth--,"boolean"==typeof b.invisible&&b.invisible?c=createMmlNode("mrow",d[0]):(c=createMmlNode("mo",document.createTextNode(b.output)),c=createMmlNode("mrow",c),c.appendChild(d[0])),[c,d[1]];case TEXT:return b!=AMquote&&(a=AMremoveCharsAndBlanks(a,b.input.length)),e="{"==a.charAt(0)?a.indexOf("}"):"("==a.charAt(0)?a.indexOf(")"):"["==a.charAt(0)?a.indexOf("]"):b==AMquote?a.slice(1).indexOf('"')+1:0,-1==e&&(e=a.length),f=a.slice(1,e)," "==f.charAt(0)&&(c=createMmlNode("mspace"),c.setAttribute("width","1ex"),g.appendChild(c)),g.appendChild(createMmlNode(b.tag,document.createTextNode(f)))," "==f.charAt(f.length-1)&&(c=createMmlNode("mspace"),c.setAttribute("width","1ex"),g.appendChild(c)),a=AMremoveCharsAndBlanks(a,e+1),[createMmlNode("mrow",g),a];case UNARY:if(a=AMremoveCharsAndBlanks(a,b.input.length),d=AMparseSexpr(a),null==d[0])return[createMmlNode(b.tag,document.createTextNode(b.output)),a];if("boolean"==typeof b.func&&b.func)return f=a.charAt(0),"^"==f||"_"==f||"/"==f||"|"==f||","==f?[createMmlNode(b.tag,document.createTextNode(b.output)),a]:(c=createMmlNode("mrow",createMmlNode(b.tag,document.createTextNode(b.output))),c.appendChild(d[0]),[c,d[1]]);if(AMremoveBrackets(d[0]),"sqrt"==b.input)return[createMmlNode(b.tag,d[0]),d[1]];if("boolean"==typeof b.acc&&b.acc)return c=createMmlNode(b.tag,d[0]),c.appendChild(createMmlNode("mo",document.createTextNode(b.output))),[c,d[1]];if(!isIE&&"undefined"!=typeof b.codes)for(e=0;e<d[0].childNodes.length;e++)if("mi"==d[0].childNodes[e].nodeName||"mi"==d[0].nodeName){f="mi"==d[0].nodeName?d[0].firstChild.nodeValue:d[0].childNodes[e].firstChild.nodeValue;for(var h=[],i=0;i<f.length;i++)h+=f.charCodeAt(i)>64&&f.charCodeAt(i)<91?String.fromCharCode(b.codes[f.charCodeAt(i)-65]):f.charAt(i);"mi"==d[0].nodeName?d[0]=createMmlNode("mo").appendChild(document.createTextNode(h)):d[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(h)),d[0].childNodes[e])}return c=createMmlNode(b.tag,d[0]),c.setAttribute(b.atname,b.atval),[c,d[1]];case BINARY:if(a=AMremoveCharsAndBlanks(a,b.input.length),d=AMparseSexpr(a),null==d[0])return[createMmlNode("mo",document.createTextNode(b.input)),a];AMremoveBrackets(d[0]);var j=AMparseSexpr(d[1]);return null==j[0]?[createMmlNode("mo",document.createTextNode(b.input)),a]:(AMremoveBrackets(j[0]),("root"==b.input||"stackrel"==b.input)&&g.appendChild(j[0]),g.appendChild(d[0]),"frac"==b.input&&g.appendChild(j[0]),[createMmlNode(b.tag,g),j[1]]);case INFIX:return a=AMremoveCharsAndBlanks(a,b.input.length),[createMmlNode("mo",document.createTextNode(b.output)),a];case SPACE:return a=AMremoveCharsAndBlanks(a,b.input.length),c=createMmlNode("mspace"),c.setAttribute("width","1ex"),g.appendChild(c),g.appendChild(createMmlNode(b.tag,document.createTextNode(b.output))),c=createMmlNode("mspace"),c.setAttribute("width","1ex"),g.appendChild(c),[createMmlNode("mrow",g),a];case LEFTRIGHT:AMnestingDepth++,a=AMremoveCharsAndBlanks(a,b.input.length),d=AMparseExpr(a,!1),AMnestingDepth--;var f="";return null!=d[0].lastChild&&(f=d[0].lastChild.firstChild.nodeValue),"|"==f?(c=createMmlNode("mo",document.createTextNode(b.output)),c=createMmlNode("mrow",c),c.appendChild(d[0]),[c,d[1]]):(c=createMmlNode("mo",document.createTextNode("∣")),c=createMmlNode("mrow",c),[c,a]);default:return a=AMremoveCharsAndBlanks(a,b.input.length),[createMmlNode(b.tag,document.createTextNode(b.output)),a]}}function AMparseIexpr(a){var b,c,d,e,f,g;if(a=AMremoveCharsAndBlanks(a,0),c=AMgetSymbol(a),f=AMparseSexpr(a),e=f[0],a=f[1],b=AMgetSymbol(a),b.ttype==INFIX&&"/"!=b.input)if(a=AMremoveCharsAndBlanks(a,b.input.length),f=AMparseSexpr(a),null==f[0]?f[0]=createMmlNode("mo",document.createTextNode("□")):AMremoveBrackets(f[0]),a=f[1],"_"==b.input)if(d=AMgetSymbol(a),g=c.ttype==UNDEROVER,"^"==d.input){a=AMremoveCharsAndBlanks(a,d.input.length);var h=AMparseSexpr(a);AMremoveBrackets(h[0]),a=h[1],e=createMmlNode(g?"munderover":"msubsup",e),e.appendChild(f[0]),e.appendChild(h[0]),e=createMmlNode("mrow",e)}else e=createMmlNode(g?"munder":"msub",e),e.appendChild(f[0]);else e=createMmlNode(b.tag,e),e.appendChild(f[0]);return[e,a]}function AMparseExpr(a,b){var c,d,e,f,g=document.createDocumentFragment();do a=AMremoveCharsAndBlanks(a,0),e=AMparseIexpr(a),d=e[0],a=e[1],c=AMgetSymbol(a),c.ttype==INFIX&&"/"==c.input?(a=AMremoveCharsAndBlanks(a,c.input.length),e=AMparseIexpr(a),null==e[0]?e[0]=createMmlNode("mo",document.createTextNode("□")):AMremoveBrackets(e[0]),a=e[1],AMremoveBrackets(d),d=createMmlNode(c.tag,d),d.appendChild(e[0]),g.appendChild(d),c=AMgetSymbol(a)):void 0!=d&&g.appendChild(d);while((c.ttype!=RIGHTBRACKET&&(c.ttype!=LEFTRIGHT||b)||0==AMnestingDepth)&&null!=c&&""!=c.output);if(c.ttype==RIGHTBRACKET||c.ttype==LEFTRIGHT){var h=g.childNodes.length;if(h>0&&"mrow"==g.childNodes[h-1].nodeName&&h>1&&"mo"==g.childNodes[h-2].nodeName&&","==g.childNodes[h-2].firstChild.nodeValue){var i=g.childNodes[h-1].lastChild.firstChild.nodeValue;if(")"==i||"]"==i){var j=g.childNodes[h-1].firstChild.firstChild.nodeValue;if("("==j&&")"==i&&"}"!=c.output||"["==j&&"]"==i){var k=[],l=!0,m=g.childNodes.length;for(f=0;l&&m>f;f+=2){if(k[f]=[],d=g.childNodes[f],l&&(l="mrow"==d.nodeName&&(f==m-1||"mo"==d.nextSibling.nodeName&&","==d.nextSibling.firstChild.nodeValue)&&d.firstChild.firstChild.nodeValue==j&&d.lastChild.firstChild.nodeValue==i),l)for(var n=0;n<d.childNodes.length;n++)","==d.childNodes[n].firstChild.nodeValue&&(k[f][k[f].length]=n);l&&f>1&&(l=k[f].length==k[f-2].length)}if(l){var o,p,q,r,s=document.createDocumentFragment();for(f=0;m>f;f+=2){for(o=document.createDocumentFragment(),p=document.createDocumentFragment(),d=g.firstChild,q=d.childNodes.length,r=0,d.removeChild(d.firstChild),n=1;q-1>n;n++)"undefined"!=typeof k[f][r]&&n==k[f][r]?(d.removeChild(d.firstChild),o.appendChild(createMmlNode("mtd",p)),r++):p.appendChild(d.firstChild);o.appendChild(createMmlNode("mtd",p)),g.childNodes.length>2&&(g.removeChild(g.firstChild),g.removeChild(g.firstChild)),s.appendChild(createMmlNode("mtr",o))}d=createMmlNode("mtable",s),"boolean"==typeof c.invisible&&c.invisible&&d.setAttribute("columnalign","left"),g.replaceChild(d,g.firstChild)}}}}a=AMremoveCharsAndBlanks(a,c.input.length),"boolean"==typeof c.invisible&&c.invisible||(d=createMmlNode("mo",document.createTextNode(c.output)),g.appendChild(d))}return[g,a]}function parseMath(a,b){var c,d;return AMnestingDepth=0,c=b?LMparseExpr(a.replace(/^\s+/g,""),!1,!1)[0]:AMparseExpr(a.replace(/^\s+/g,""),!1)[0],d=createMmlNode("mstyle",c),d.setAttribute("mathcolor",mathcolor),d.setAttribute("fontfamily",mathfontfamily),d.setAttribute("mathsize",mathfontsize),displaystyle&&d.setAttribute("displaystyle","true"),d=createMmlNode("math",d),showasciiformulaonhover&&d.setAttribute("title",a.replace(/\s+/g," ")),d}function strarr2docFrag(a,b,c){for(var d=document.createDocumentFragment(),e=!1,f=0;f<a.length;f++){if(e&&noMathML)d.appendChild(AMTparseMath(a[f],c));else if(e&&!noMathML)d.appendChild(parseMath(a[f],c));else{var g=b?a[f].split("\n\n"):[a[f]];d.appendChild(createElementXHTML("span").appendChild(document.createTextNode(g[0])));for(var h=1;h<g.length;h++)d.appendChild(createElementXHTML("p")),d.appendChild(createElementXHTML("span").appendChild(document.createTextNode(g[h])))}e=!e}return d}function AMautomathrec(a){var b="\\\\[a-zA-Z]+|\\\\\\s|",c="\\b(?:oo|lim|ln|int|oint|del|grad|aleph|prod|prop|sinh|cosh|tanh|cos|sec|pi|tt|fr|sf|sube|supe|sub|sup|det|mod|gcd|lcm|min|max|vec|ddot|ul|chi|eta|nu|mu)(?![a-z])|",d="\\b(?:sum|ox|log|sin|tan|dim|hat|bar|dot)(?![a-z])|",e="|\\bI\\b|\\bin\\b|\\btext\\b",f="NN|ZZ|QQ|RR|CC|TT|AA|EE|sqrt|dx|dy|dz|dt|xx|vv|uu|nn|bb|cc|csc|cot|alpha|beta|delta|Delta|epsilon|gamma|Gamma|kappa|lambda|Lambda|omega|phi|Phi|Pi|psi|Psi|rho|sigma|Sigma|tau|theta|Theta|xi|Xi|zeta",g="[a-zA-HJ-Z](?=(?:[^a-zA-Z]|$|"+c+d+f+"))|",h=g+b+"\\d+|[-()[\\]{}+=*&^_%\\@/<>,\\|!:;'~]|\\.(?!(?: |$))|"+c+d+f,j=new RegExp("(^|\\s)((("+h+")\\s?)(("+h+e+")\\s?)+)([,.?]?(?=\\s|$))","g");a=a.replace(j," `$2`$7");var k=a.split(AMdelimiter1),l=new RegExp("(^|\\s)([b-zB-HJ-Z+*<>]|"+b+c+f+")(\\s|\\n|$)","g"),m=new RegExp("(^|\\s)([a-z]|"+b+c+f+")([,.])","g");for(i=0;i<k.length;i++)i%2==0&&(k[i]=k[i].replace(l," `$2`$3"),k[i]=k[i].replace(m," `$2`$3"),k[i]=k[i].replace(/([{}[\]])/,"`$1`"));return a=k.join(AMdelimiter1),a=a.replace(/((^|\s)\([a-zA-Z]{2,}.*?)\)`/g,"$1`)"),a=a.replace(/`(\((a\s|in\s))(.*?[a-zA-Z]{2,}\))/g,"$1`$3"),a=a.replace(/\sin`/g,"` in"),a=a.replace(/`(\(\w\)[,.]?(\s|\n|$))/g,"$1`"),a=a.replace(/`([0-9.]+|e.g|i.e)`(\.?)/gi,"$1$2"),a=a.replace(/`([0-9.]+:)`/g,"$1")}function processNodeR(a,b,c){var d,e,f,g,h;if(0==a.childNodes.length){if(8==a.nodeType&&!b||"form"==a.parentNode.nodeName||"FORM"==a.parentNode.nodeName||"textarea"==a.parentNode.nodeName||"TEXTAREA"==a.parentNode.nodeName)return 0;if(e=a.nodeValue,null!=e){if(e=e.replace(/\r\n\r\n/g,"\n\n"),e=e.replace(/\x20+/g," "),e=e.replace(/\s*\r\n/g," "),c)for(d=-1==e.indexOf("$")?!1:!0,e=e.replace(/([^\\])\$/g,"$1 $"),e=e.replace(/^\$/," $"),f=e.split(" $"),h=0;h<f.length;h++)f[h]=f[h].replace(/\\\$/g,"$");else{if(d=!1,e=e.replace(new RegExp(AMescape1,"g"),function(){return d=!0,"AMescape1"}),e=e.replace(/\\?end{?a?math}?/i,function(){return automathrecognize=!1,d=!0,""}),e=e.replace(/amath\b|\\begin{a?math}/i,function(){return automathrecognize=!0,d=!0,""}),f=e.split(AMdelimiter1),automathrecognize)for(h=0;h<f.length;h++)h%2==0&&(f[h]=AMautomathrec(f[h]));for(e=f.join(AMdelimiter1),f=e.split(AMdelimiter1),h=0;h<f.length;h++)f[h]=f[h].replace(/AMescape1/g,AMdelimiter1)}if(f.length>1||d){g=strarr2docFrag(f,8==a.nodeType,c);var i=g.childNodes.length;return a.parentNode.replaceChild(g,a),i-1}}}else if("math"!=a.nodeName)for(h=0;h<a.childNodes.length;h++)h+=processNodeR(a.childNodes[h],b,c);return 0}function AMprocessNode(a,b,c){var d,e;if(null!=c){d=document.getElementsByTagName("span");for(var f=0;f<d.length;f++)"AM"==d[f].className&&processNodeR(d[f],b,!1)}else{try{e=a.innerHTML}catch(g){}(null==e||/amath\b|\\begin{a?math}/i.test(e)||-1!=e.indexOf(AMdelimiter1+" ")||e.slice(-1)==AMdelimiter1||-1!=e.indexOf(AMdelimiter1+"<")||-1!=e.indexOf(AMdelimiter1+"\n"))&&processNodeR(a,b,!1)}}function LMremoveCharsAndBlanks(a,b){var c;c=a.slice(b);for(var d=0;d<c.length&&c.charCodeAt(d)<=32;d+=1);return c.slice(d)}function LMgetSymbol(a){for(var b,c,d,e=0,f=0,g="",h=!0,i=1;i<=a.length&&h;i++)c=a.slice(0,i),f=e,e=position(LMnames,c,f),e<LMnames.length&&a.slice(0,LMnames[e].length)==LMnames[e]&&(g=LMnames[e],b=e,i=g.length),h=e<LMnames.length&&a.slice(0,LMnames[e].length)>=LMnames[e];return LMpreviousSymbol=LMcurrentSymbol,""!=g?(LMcurrentSymbol=LMsymbols[b].ttype,LMsymbols[b]):(LMcurrentSymbol=CONST,e=1,c=a.slice(0,1),d=c>="0"&&"9">=c?"mn":("A">c||c>"Z")&&("a">c||c>"z")?"mo":"mi",{input:c,tag:d,output:c,ttype:CONST})}function LMparseSexpr(a){var b,c,d,e,f,g,h=document.createDocumentFragment();if(a=LMremoveCharsAndBlanks(a,0),b=LMgetSymbol(a),null==b||b.ttype==RIGHTBRACKET)return[null,a,null];if(b.ttype==DEFINITION&&(a=b.output+LMremoveCharsAndBlanks(a,b.input.length),b=LMgetSymbol(a),null==b||b.ttype==RIGHTBRACKET))return[null,a,null];switch(a=LMremoveCharsAndBlanks(a,b.input.length),b.ttype){case SPACE:return c=createMmlNode(b.tag),c.setAttribute(b.atname,b.atval),[c,a,b.tag];case UNDEROVER:return isIE&&"\\big"==b.input.substr(0,4)&&(a="\\"+b.input.substr(4)+a,b=LMgetSymbol(a),b.ttype=UNDEROVER,a=LMremoveCharsAndBlanks(a,b.input.length)),[createMmlNode(b.tag,document.createTextNode(b.output)),a,b.tag];case CONST:var i=b.output;if(isIE)if("'"==b.input)i="′";else if("''"==b.input)i="″";else if("'''"==b.input)i="″′";else if("''''"==b.input)i="″″";else if("\\square"==b.input)i="□";else if("\\frac"==b.input.substr(0,5)){var j=b.input.substr(6,1);if("5"==j||"6"==j)return a=b.input.replace(/\\frac/,"\\frac ")+a,[c,a,b.tag]}return c=createMmlNode(b.tag,document.createTextNode(i)),[c,a,b.tag];case LONG:return c=createMmlNode(b.tag,document.createTextNode(b.output)),c.setAttribute("minsize","1.5"),c.setAttribute("maxsize","1.5"),c=createMmlNode("mover",c),c.appendChild(createMmlNode("mspace")),[c,a,b.tag];case STRETCHY:return isIE&&"\\backslash"==b.input&&(b.output="\\"),c=createMmlNode(b.tag,document.createTextNode(b.output)),("|"==b.input||"\\vert"==b.input||"\\|"==b.input||"\\Vert"==b.input)&&(c.setAttribute("lspace","0em"),c.setAttribute("rspace","0em")),c.setAttribute("maxsize",b.atval),null!=b.rtag?[c,a,b.rtag]:[c,a,b.tag];case BIG:var k=b.atval;if(isIE&&(k=b.ieval),b=LMgetSymbol(a),null==b)return[null,a,null];if(a=LMremoveCharsAndBlanks(a,b.input.length),c=createMmlNode(b.tag,document.createTextNode(b.output)),isIE){var l=createMmlNode("mspace");l.setAttribute("height",k+"ex"),c=createMmlNode("mrow",c),c.appendChild(l)}else c.setAttribute("minsize",k),c.setAttribute("maxsize",k);return[c,a,b.tag];case LEFTBRACKET:return"\\left"==b.input&&(b=LMgetSymbol(a),null!=b&&("."==b.input&&(b.invisible=!0),a=LMremoveCharsAndBlanks(a,b.input.length))),d=LMparseExpr(a,!0,!1),null==b||"boolean"==typeof b.invisible&&b.invisible?c=createMmlNode("mrow",d[0]):(c=createMmlNode("mo",document.createTextNode(b.output)),c=createMmlNode("mrow",c),c.appendChild(d[0])),[c,d[1],d[2]];case MATRIX:if("\\begin{array}"==b.input){var m="";if(b=LMgetSymbol(a),a=LMremoveCharsAndBlanks(a,0),null==b)m="l";else if(a=LMremoveCharsAndBlanks(a,b.input.length),"{"!=b.input)m="l";else do b=LMgetSymbol(a),null!=b&&(a=LMremoveCharsAndBlanks(a,b.input.length),"}"!=b.input&&(m+=b.input));while(null!=b&&""!=b.input&&"}"!=b.input);if(d=LMparseExpr("{"+a,!0,!0),c=createMmlNode("mtable",d[0]),m=m.replace(/l/g,"left "),m=m.replace(/r/g,"right "),m=m.replace(/c/g,"center "),c.setAttribute("columnalign",m),c.setAttribute("displaystyle","false"),isIE)return[c,d[1],null];var n=createMmlNode("mspace");n.setAttribute("width","0.167em");var o=createMmlNode("mspace");o.setAttribute("width","0.167em");var p=createMmlNode("mrow",n);return p.appendChild(c),p.appendChild(o),[p,d[1],null]}return d=LMparseExpr("{"+a,!0,!0),c=createMmlNode("mtable",d[0]),isIE?c.setAttribute("columnspacing","0.25em"):c.setAttribute("columnspacing","0.167em"),c.setAttribute("columnalign","right center left"),c.setAttribute("displaystyle","true"),c=createMmlNode("mrow",c),[c,d[1],null];case TEXT:return f="{"==a.charAt(0)?a.indexOf("}"):0,-1==f&&(f=a.length),g=a.slice(1,f)," "==g.charAt(0)&&(c=createMmlNode("mspace"),c.setAttribute("width","0.33em"),h.appendChild(c)),h.appendChild(createMmlNode(b.tag,document.createTextNode(g)))," "==g.charAt(g.length-1)&&(c=createMmlNode("mspace"),c.setAttribute("width","0.33em"),h.appendChild(c)),a=LMremoveCharsAndBlanks(a,f+1),[createMmlNode("mrow",h),a,null];case UNARY:if(d=LMparseSexpr(a),null==d[0])return[createMmlNode(b.tag,document.createTextNode(b.output)),a];if("boolean"==typeof b.func&&b.func){if(g=a.charAt(0),"^"==g||"_"==g||","==g)return[createMmlNode(b.tag,document.createTextNode(b.output)),a,b.tag];if(c=createMmlNode("mrow",createMmlNode(b.tag,document.createTextNode(b.output))),isIE){var l=createMmlNode("mspace");l.setAttribute("width","0.167em"),c.appendChild(l)}return c.appendChild(d[0]),[c,d[1],b.tag]}if("\\sqrt"==b.input){if(isIE){var l=createMmlNode("mspace");return l.setAttribute("height","1.2ex"),l.setAttribute("width","0em"),c=createMmlNode(b.tag,d[0]),c.appendChild(l),[c,d[1],b.tag]}return[createMmlNode(b.tag,d[0]),d[1],b.tag]}if("boolean"==typeof b.acc&&b.acc){c=createMmlNode(b.tag,d[0]);var i=b.output;isIE&&("\\hat"==b.input?i="̂":"\\widehat"==b.input?i="^":"\\bar"==b.input?i="¯":"\\grave"==b.input?i="̀":"\\tilde"==b.input&&(i="̃"));var p=createMmlNode("mo",document.createTextNode(i));return("\\vec"==b.input||"\\check"==b.input)&&p.setAttribute("maxsize","1.2"),isIE&&"\\bar"==b.input&&p.setAttribute("maxsize","0.5"),"\\underbrace"==b.input||"\\underline"==b.input?p.setAttribute("accentunder","true"):p.setAttribute("accent","true"),c.appendChild(p),("\\overbrace"==b.input||"\\underbrace"==b.input)&&(c.ttype=UNDEROVER),[c,d[1],b.tag]}if(!isIE&&"undefined"!=typeof b.codes)for(f=0;f<d[0].childNodes.length;f++)if("mi"==d[0].childNodes[f].nodeName||"mi"==d[0].nodeName){g="mi"==d[0].nodeName?d[0].firstChild.nodeValue:d[0].childNodes[f].firstChild.nodeValue;for(var q=[],r=0;r<g.length;r++)q+=g.charCodeAt(r)>64&&g.charCodeAt(r)<91?String.fromCharCode(b.codes[g.charCodeAt(r)-65]):g.charAt(r);"mi"==d[0].nodeName?d[0]=createMmlNode("mo").appendChild(document.createTextNode(q)):d[0].replaceChild(createMmlNode("mo").appendChild(document.createTextNode(q)),d[0].childNodes[f])}return c=createMmlNode(b.tag,d[0]),c.setAttribute(b.atname,b.atval),("\\scriptstyle"==b.input||"\\scriptscriptstyle"==b.input)&&c.setAttribute("displaystyle","false"),[c,d[1],b.tag];case BINARY:return d=LMparseSexpr(a),null==d[0]?[createMmlNode("mo",document.createTextNode(b.input)),a,null]:(e=LMparseSexpr(d[1]),null==e[0]?[createMmlNode("mo",document.createTextNode(b.input)),a,null]:(("\\root"==b.input||"\\stackrel"==b.input)&&h.appendChild(e[0]),h.appendChild(d[0]),"\\frac"==b.input&&h.appendChild(e[0]),[createMmlNode(b.tag,h),e[1],b.tag]));case INFIX:return a=LMremoveCharsAndBlanks(a,b.input.length),[createMmlNode("mo",document.createTextNode(b.output)),a,b.tag];default:return[createMmlNode(b.tag,document.createTextNode(b.output)),a,b.tag]}}function LMparseIexpr(a){var b,c,d,e,f,g,h;if(a=LMremoveCharsAndBlanks(a,0),c=LMgetSymbol(a),f=LMparseSexpr(a),e=f[0],a=f[1],g=f[2],b=LMgetSymbol(a),b.ttype==INFIX)if(a=LMremoveCharsAndBlanks(a,b.input.length),f=LMparseSexpr(a),null==f[0]&&(f[0]=createMmlNode("mo",document.createTextNode("□"))),a=f[1],g=f[2],"_"==b.input||"^"==b.input){if(d=LMgetSymbol(a),g=null,h=c.ttype==UNDEROVER||e.ttype==UNDEROVER,"_"==b.input&&"^"==d.input){a=LMremoveCharsAndBlanks(a,d.input.length);var i=LMparseSexpr(a);a=i[1],g=i[2],e=createMmlNode(h?"munderover":"msubsup",e),e.appendChild(f[0]),e.appendChild(i[0])}else"_"==b.input?(e=createMmlNode(h?"munder":"msub",e),e.appendChild(f[0])):(e=createMmlNode(h?"mover":"msup",e),e.appendChild(f[0]));e=createMmlNode("mrow",e)}else e=createMmlNode(b.tag,e),("\\atop"==b.input||"\\choose"==b.input)&&e.setAttribute("linethickness","0ex"),e.appendChild(f[0]),"\\choose"==b.input&&(e=createMmlNode("mfenced",e));return[e,a,g]}function LMparseExpr(a,b,c){var d,e,f,g,h,i=document.createDocumentFragment();do if(a=LMremoveCharsAndBlanks(a,0),f=LMparseIexpr(a),e=f[0],a=f[1],h=f[2],d=LMgetSymbol(a),void 0!=e){if(("mn"==h||"mi"==h)&&null!=d&&"boolean"==typeof d.func&&d.func){var j=createMmlNode("mspace");j.setAttribute("width","0.167em"),e=createMmlNode("mrow",e),e.appendChild(j)}i.appendChild(e)}while(d.ttype!=RIGHTBRACKET&&null!=d&&""!=d.output);if(h=null,d.ttype==RIGHTBRACKET){"\\right"==d.input&&(a=LMremoveCharsAndBlanks(a,d.input.length),d=LMgetSymbol(a),null!=d&&"."==d.input&&(d.invisible=!0),null!=d&&(h=d.rtag)),null!=d&&(a=LMremoveCharsAndBlanks(a,d.input.length));var k=i.childNodes.length;if(c&&k>0&&"mrow"==i.childNodes[k-1].nodeName&&k>1&&"mo"==i.childNodes[k-2].nodeName&&"&"==i.childNodes[k-2].firstChild.nodeValue){var l=[],m=i.childNodes.length;for(g=0;c&&m>g;g+=2){l[g]=[],e=i.childNodes[g];for(var n=0;n<e.childNodes.length;n++)"&"==e.childNodes[n].firstChild.nodeValue&&(l[g][l[g].length]=n)}var o,p,q,r,s=document.createDocumentFragment();for(g=0;m>g;g+=2){for(o=document.createDocumentFragment(),p=document.createDocumentFragment(),e=i.firstChild,q=e.childNodes.length,r=0,n=0;q>n;n++)"undefined"!=typeof l[g][r]&&n==l[g][r]?(e.removeChild(e.firstChild),o.appendChild(createMmlNode("mtd",p)),r++):p.appendChild(e.firstChild);o.appendChild(createMmlNode("mtd",p)),i.childNodes.length>2&&(i.removeChild(i.firstChild),i.removeChild(i.firstChild)),s.appendChild(createMmlNode("mtr",o))}return[s,a]}"boolean"==typeof d.invisible&&d.invisible||(e=createMmlNode("mo",document.createTextNode(d.output)),i.appendChild(e))}return[i,a,h]}function simpleLaTeXformatting(a){return a=a.replace(/\$\$((.|\n)*?)\$\$/g,'<p align="center">$\\displaystyle{$1}$</p>'),a=a.replace(/\\begin{(theorem|lemma|proposition|corollary)}((.|\n)*?)\\end{\1}/g,function(a,b,c){return tcnt++,"<b>"+b.charAt(0).toUpperCase()+b.slice(1)+" "+tcnt+".</b> <i>"+c.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+"</i>"}),a=a.replace(/\\begin{(definition|example|remark|problem|exercise|conjecture|solution)}((.|\n)*?)\\end{\1}/g,function(a,b,c){return dcnt++,"<b>"+b.charAt(0).toUpperCase()+b.slice(1)+" "+dcnt+".</b> "+c.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")}),a=a.replace(/\\begin{proof}((.|\n)*?)\\end{proof}/g,function(a,b){return"<i>Proof:</i> "+b.replace(/^\s*<\/?\w+\/?>|\s*<\/?\w+\/?>$/g,"")+" &#x25A1;"}),a=a.replace(/\\emph{(.*?)}/g,"<em>$1</em>"),a=a.replace(/\\textbf{(.*?)}/g,"<b>$1</b>"),a=a.replace(/\\cite{(.*?)}/g,"[$1]"),a=a.replace(/\\chapter{(.*?)}/g,"<h2>$1</h2>"),a=a.replace(/\\section{(.*?)}(\s*<\/?(br|p)\s?\/?>)?/g,"<h3>$1</h3>"),a=a.replace(/\\subsection{((.|\n)*?)}/g,"<h4>$1</h4>"),a=a.replace(/\\begin{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"<ul>"),a=a.replace(/\\item\s((.|\n)*?)(?=(\\item|\\end))/g,"<li>$1</li>"),a=a.replace(/\\end{itemize}(\s*<\/?(br|p)\s?\/?>)?/g,"</ul>"),a=a.replace(/\\begin{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"<ol>"),a=a.replace(/\\end{enumerate}(\s*<\/?(br|p)\s?\/?>)?/g,"</ol>"),a=a.replace(/\\item\[(.*?)]{(.*?)}/g,"<dt>$1</dt><dd>$2</dd>"),a=a.replace(/\\begin{description}/g,"<dl>"),a=a.replace(/\\end{description}/g,"</dl>"),a=a.replace(/\\newline\b/g,"<br/>"),a=a.replace(/\\newpage\b/g,'<br style="page-break-after:always;">'),a=a.replace(/\\par\b/g,"<p>&nbsp;</p>"),a=a.replace(/\\bigskip/g,'<p style="margin-bottom:0.5in">&nbsp;</p>'),a=a.replace(/\\medskip/g,'<p style="margin-bottom:0.3in">&nbsp;</p>'),a=a.replace(/\\smallskip/g,'<p style="margin-bottom:0.15in">&nbsp;</p>'),a=a.replace(/\\begin{center}((.|\n)*?)\\end{center}/g,"<center>$1</center>")
}function ASCIIandgraphformatting(a){return a=a.replace(/<sup>(.*?)<\/sup>(\s|(\S))/gi,"^{$1} $3"),a=a.replace(/(Proof:)/g,"<i>$1</i>"),a=a.replace(/QED/g,"&nbsp; &nbsp; &#x25A1;"),a=a.replace(/(\\?end{?a?math}?)/gi,"<span></span>$1"),a=a.replace(/(\bamath\b|\\begin{a?math})/gi,"<span></span>$1"),a=a.replace(/([>\n])(Theorem|Lemma|Proposition|Corollary|Definition|Example|Remark|Problem|Exercise|Conjecture|Solution)(:|\W\W?(\w|\s|-|\.)*?\W?:)/g,"$1<b>$2$3</b>"),a=a.replace(/<embed\s+class\s?=\s?"?ASCIIsvg"?/gi,'<embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent"'),a=a.replace(/(?:\\begin{a?graph}|\bagraph|\(:graph\s)((.|\n)*?)(?:\\end{a?graph}|enda?graph|:\))/g,function(a,b){return'<table><tr><td><div class="ASCIIsvg"><embed class="ASCIIsvg" src="'+dsvglocation+'d.svg" wmode="transparent" script=\''+b.replace(/<\/?(br|p|pre)\s?\/?>/gi,"\n")+"'/></div></td></tr></table>"}),a=a.replace(/insertASCIIMathCalculator/g,'<div class="ASCIIMathCalculator"></div>')}function LMprocessNode(a){var b;try{b=a.innerHTML}catch(c){}var d=/amath\b|graph/i.test(b);null!=b&&-1==b.indexOf("$ ")&&-1==b.indexOf("$<")&&-1==b.indexOf("\\begin")&&!d&&"$"!=b.slice(-1)&&-1==b.indexOf("$\n")||/edit-content|HTMLArea|wikiedit|wpTextbox1/.test(b)||(!avoidinnerHTML&&translateLaTeXformatting&&(b=simpleLaTeXformatting(b)),null!=b&&d&&!avoidinnerHTML&&(b=ASCIIandgraphformatting(b)),b=b.replace(/%7E/g,"~"),avoidinnerHTML||(a.innerHTML=b),processNodeR(a,!1,!0))}function factorial(a,b){if(null==b&&(b=1),Math.abs(a-Math.round(1e6*a)/1e6)<1e-15&&(a=Math.round(1e6*a)/1e6),a-Math.floor(a)!=0)return 0/0;for(var c=a-b;c>0;c-=b)a*=c;return 0>a?0/0:0==a?1:a}function C(a,b){for(var c=1,d=0;b>d;d++)c*=(a-d)/(b-d);return c}function chop(a,b){return null==b&&(b=0),Math.floor(a*Math.pow(10,b))/Math.pow(10,b)}function ran(a,b,c){return null==c&&(c=0),chop((b+Math.pow(10,-c)-a)*Math.random()+a,c)}function myCreateElementSVG(a){return isIE?doc.createElement(a):doc.createElementNS("http://www.w3.org/2000/svg",a)}function getElementsByClass(a,b,c){for(var d=new Array(0),e=a.getElementsByTagName(b),f=0;f<e.length;f++)e[f].className.slice(0,c.length)==c&&(d[d.length]=e[f]);return d}function showobj(a){var b,c="";for(b in a)c+=null==a.getAttribute(b)?"":" "+b+":"+a.getAttribute(b);return c}function findPos(a){var b=curtop=0;if(a.offsetParent)for(b=a.offsetLeft,curtop=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,curtop+=a.offsetTop;return[b,curtop]}function checkSVG(){if("Netscape"==navigator.appName.slice(0,8))noSVG=window.SVGElement?null:!0;else if("Microsoft"==navigator.appName.slice(0,9))try{var oSVG=eval("new ActiveXObject('Adobe.SVGCtl.3');");noSVG=null}catch(e){noSVG=!0}else noSVG="Opera"==navigator.appName.slice(0,5)?null:!0;if(noSVG&&notifyIfNoSVG){var msg="To view the ASCIIsvg images use Internet Explorer + Adobe SVGviewer or Mozilla Firefox 2.0 or later.";if(!alertIfNoSVG)return msg;alert(msg)}}function setText(a,b){var c=document.getElementById(b);null!=c&&(0!=c.childNodes.length?c.childNodes[0].nodeValue=a:c.appendChild(document.createTextNode(a)))}function getX(a){var b=a.target.parentNode;return pos=findPos(b.parentNode),(a.clientX+(isIE?0:window.pageXOffset)-pos[0]-b.getAttribute("ox"))/parseFloat(b.getAttribute("xunitlength"))}function getY(a){var b=a.target.parentNode;return pos=findPos(b.parentNode),(b.getAttribute("height")-b.getAttribute("oy")-(a.clientY+(isIE?0:window.pageYOffset)-pos[1]))/parseFloat(b.getAttribute("yunitlength"))}function translateandeval(src){var errstr;src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+?)\,/g,'plot("$1",'),src=src.replace(/plot\(\x20*([^\"f\[][^\n\r;]+)\)/g,'plot("$1")'),src=src.replace(/([=[(,]\x20*)\(([-a-z0-9./+*]+?),([-a-z0-9./+*]+?)\)/g,"$1[$2,$3]"),src=src.replace(/([0-9])([a-df-zA-Z]|e^)/g,"$1*$2"),src=src.replace(/\)([\(0-9a-zA-Z])/g,")*$1");try{with(Math)eval(src)}catch(err){"wait"!=err&&(errstr="object"==typeof err?err.name+" "+err.message+" "+err.number+" "+err.description:err,alert(errstr+"\n"+src))}}function drawPictures(){var a,b,c,d,e,f,g,h,i,j,k=document.getElementsByTagName("body")[0];pictures=getElementsByClass(k,"embed","ASCIIsvg");var l=pictures.length;if(0!=l){for(f=lastSlot;l+lastSlot>f;f++){if(width=null,height=null,xmin=null,xmax=null,ymin=null,ymax=null,xscl=null,xgrid=null,yscl=null,ygrid=null,initialized=!1,picture=pictures[f-lastSlot],a=picture.getAttribute("script"),null==a&&(a=""),!/axes\b|initPicture/.test(a)){for(var i=0;/((yscl|ymax|ymin|xscl|xmax|xmin|\bwidth|\bheight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/.test(a.slice(i));)i++;a=0==i?"axes(); "+a:a.slice(0,i)+a.slice(i).replace(/((scl|max|min|idth|eight)\s*=\s*-?\d*(\d\.|\.\d|\d)\d*\s*;?)/,"$1\naxes();")}if(e=picture.getAttribute("height"),isIE&&picture.setAttribute("wmode","transparent"),null==document.getElementById("picture"+(f+1)+"mml")&&(picture.parentNode.style.position="relative",d=createElementXHTML("div"),d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.setAttribute("id","picture"+(f+1)+"mml"),picture.parentNode.insertBefore(d,picture.nextSibling)),null==e&&(e=""),""==e||""==a)if(null==document.getElementById("picture"+(f+1)+"input")){for(d=createElementXHTML("textarea"),h=a.split("\n"),g=0,i=0;i<h.length;i++)g=Math.max(g,h[i].length);d.setAttribute("rows",Math.min(10,h.length)+1),d.setAttribute("cols",Math.max(Math.min(60,g),20)+5),isIE&&(a=a.replace(/([^\r])\n/g,"$1\r")),d.appendChild(document.createTextNode(a)),-1==a.indexOf("showcode()")&&(d.style.display="none"),d.setAttribute("id","picture"+(f+1)+"input"),picture.parentNode.insertBefore(d,picture.nextSibling),picture.parentNode.insertBefore(createElementXHTML("br"),d),j=createElementXHTML("button"),j.setAttribute("id","picture"+(f+1)+"button"),isIE?j.onclick=function(){updatePicture(this)}:j.setAttribute("onclick","updatePicture(this)"),j.appendChild(document.createTextNode("Update")),-1==a.indexOf("showcode()")&&(j.style.display="none"),picture.parentNode.insertBefore(j,d),picture.parentNode.insertBefore(createElementXHTML("br"),d)}else a=document.getElementById("picture"+(f+1)+"input").value;b=picture.getAttribute("id"),c=picture.getAttribute("src"),(null==b||""==b)&&(b="picture"+(f+1),picture.setAttribute("id",b)),translateandeval(a)}lastSlot+=l}}function setdefaults(){strokewidth=defaultstrokewidth,stroke=defaultstroke,strokeopacity=defaultstrokeopacity,strokedasharray=defaultstrokedasharray,fill=defaultfill,fillopacity=defaultfillopacity,fontstyle=defaultfontstyle,fontfamily=defaultfontfamily,fontsize=defaultfontsize,fontweight=defaultfontweight,fontstroke=defaultfontstroke,fontfill=defaultfontfill,marker=defaultmarker,endpoints=defaultendpoints}function switchTo(a){if(void 0!=a){var b=a;"string"!=typeof b&&(b=a.target.parentNode.getAttribute("name")),picture=document.getElementById(b),width=picture.getAttribute("width")-0,height=picture.getAttribute("height")-0,setdefaults(),"EMBED"!=picture.nodeName&&"embed"!=picture.nodeName||!isIE?(svgpicture=picture,doc=document):(svgpicture=picture.getSVGDocument().getElementById("root"),doc=picture.getSVGDocument()),xunitlength=parseFloat(svgpicture.getAttribute("xunitlength")),yunitlength=parseFloat(svgpicture.getAttribute("yunitlength")),xmin=parseFloat(svgpicture.getAttribute("xmin")),xmax=parseFloat(svgpicture.getAttribute("xmax")),ymin=parseFloat(svgpicture.getAttribute("ymin")),ymax=parseFloat(svgpicture.getAttribute("ymax")),origin=[svgpicture.getAttribute("ox")-0,svgpicture.getAttribute("oy")-0]}}function updatePicture(a){var b,c;c="object"==typeof a?a.id.slice(0,-6):"string"==typeof a?a:"picture"+(a+1),b=document.getElementById(c+"input").value,xmin=null,xmax=null,ymin=null,ymax=null,xscl=null,xgrid=null,yscl=null,ygrid=null,initialized=!1,picture=document.getElementById(c),translateandeval(b)}function changepicturesize(a,b){var c=a.target,d=c.parentNode.getAttribute("name"),e=document.getElementById(d),f=document.getElementById(d+"input").value;/height/.test(f)||(f="height=0; "+f),/width/.test(f)||(f="width=0; "+f),f=f.replace(/width\s*=\s*\d+/,"width="+b*(e.getAttribute("width")-0)),f=f.replace(/height\s*=\s*\d+/,"height="+b*(e.getAttribute("height")-0)),document.getElementById(d+"input").value=f,updatePicture(d)}function zoom(a,b){switchTo(a);var c=a.target,d=c.parentNode.getAttribute("name"),e=(document.getElementById(d),document.getElementById(d+"input").value),f=(xmax-xmin)/2,g=(ymax-ymin)/2,h=getX(a),i=getY(a);/ymax/.test(e)||(e="ymax=0; "+e),/ymin/.test(e)||(e="ymin=0; "+e),/xmax/.test(e)||(e="xmax=0; "+e),/xmin/.test(e)||(e="xmin=0; "+e),e=e.replace(/xmin\s*=\s*[-\d.e]+/,"xmin="+(h-b*f)),e=e.replace(/xmax\s*=\s*[-\d.e]+/,"xmax="+(h+b*f)),e=e.replace(/ymin\s*=\s*[-\d.e]+/,"ymin="+(i-b*g)),e=e.replace(/ymax\s*=\s*[-\d.e]+/,"ymax="+(i+b*g)),document.getElementById(d+"input").value=e,updatePicture(d)}function timer(){60>sinceFirstClick?(sinceFirstClick++,setTimeout("timer()",10)):(clearTimeout(dblClkTimer),dblClkTimer="")}function mClick(a){0!=sinceFirstClick?40>=sinceFirstClick?(a.shiftKey?a.altKey?changepicturesize(a,2):zoom(a,.5):a.altKey?zoom(a,2):showHideCode(a),clearTimeout(dblClkTimer),dblClkTimer=""):(clearTimeout(dblClkTimer),sinceFirstClick=0,dblClkTimer=setTimeout("timer()",10)):(sinceFirstClick=0,dblClkTimer=setTimeout("timer()",10))}function showHideCode(a){var b=a.target,c=b.parentNode.getAttribute("name"),d=document.getElementById(c+"input");d.style.display="none"==d.style.display?"":"none";var d=document.getElementById(c+"button");d.style.display="none"==d.style.display?"":"none"}function showcode(){}function setBorder(a){border=a}function initPicture(a,b,c,d){if(!initialized)if(setdefaults(),initialized=!0,null!=a&&(xmin=a),null!=b&&(xmax=b),null!=c&&(ymin=c),null!=d&&(ymax=d),null==xmin&&(xmin=defaultxmin),null==xmax&&(xmax=defaultxmax),"number"!=typeof xmin||"number"!=typeof xmax||xmin>=xmax)alert("Picture requires at least two numbers: xmin < xmax");else if(null!=d&&("number"!=typeof c||"number"!=typeof d||c>=d))alert("initPicture(xmin,xmax,ymin,ymax) requires numbers ymin < ymax");else{if(null==width&&(width=picture.getAttribute("width"),(null==width||""==width)&&(width=defaultwidth)),picture.setAttribute("width",width),null==height&&(height=picture.getAttribute("height"),(null==height||""==height)&&(height=defaultheight)),picture.setAttribute("height",height),xunitlength=(width-2*border)/(xmax-xmin),yunitlength=xunitlength,null==ymin?(origin=[-xmin*xunitlength+border,height/2],ymin=-(height-2*border)/(2*yunitlength),ymax=-ymin):(null!=ymax?yunitlength=(height-2*border)/(ymax-ymin):ymax=(height-2*border)/yunitlength+ymin,origin=[-xmin*xunitlength+border,-ymin*yunitlength+border]),isIE){if(void 0==picture.FULLSCREEN)throw setTimeout("drawPictures()",50),"wait";if(svgpicture=picture.getSVGDocument().getElementById("root"),null==svgpicture)throw setTimeout("drawPictures()",50),"wait";for(svgpicture=picture.getSVGDocument().getElementById("root");svgpicture.childNodes.length>0;)svgpicture.removeChild(svgpicture.lastChild);svgpicture.setAttribute("width",width),svgpicture.setAttribute("height",height),svgpicture.setAttribute("name",picture.getAttribute("id")),doc=picture.getSVGDocument()}else{var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("id",picture.getAttribute("id")),e.setAttribute("name",picture.getAttribute("id")),e.setAttribute("width",picture.getAttribute("width")),e.setAttribute("height",picture.getAttribute("height")),picturepos=findPos(picture),null!=picture.parentNode?picture.parentNode.replaceChild(e,picture):svgpicture.parentNode.replaceChild(e,svgpicture),svgpicture=e,doc=document}var f=document.getElementById(picture.getAttribute("id")+"mml");if(null!=f)for(;f.childNodes.length>0;)f.removeChild(f.lastChild);svgpicture.setAttribute("xunitlength",xunitlength),svgpicture.setAttribute("yunitlength",yunitlength),svgpicture.setAttribute("xmin",xmin),svgpicture.setAttribute("xmax",xmax),svgpicture.setAttribute("ymin",ymin),svgpicture.setAttribute("ymax",ymax),svgpicture.setAttribute("ox",origin[0]),svgpicture.setAttribute("oy",origin[1]);var g=myCreateElementSVG("rect");g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width",width),g.setAttribute("height",height),g.setAttribute("style",backgroundstyle),svgpicture.appendChild(g),svgpicture.setAttribute("onmousemove","displayCoord(evt)"),svgpicture.setAttribute("onmouseout","removeCoord(evt)"),svgpicture.setAttribute("onclick","mClick(evt)"),g=myCreateElementSVG("text"),g.appendChild(doc.createTextNode(" ")),g.setAttribute("id","coords"),svgpicture.appendChild(g),g=myCreateElementSVG("text"),g.appendChild(doc.createTextNode(" ")),g.setAttribute("id","coords"),svgpicture.appendChild(g),border=defaultborder}}function line(a,b,c,d){var e;null!=c&&(e=doc.getElementById(c)),null==e&&(e=myCreateElementSVG("path"),e.setAttribute("id",c),svgpicture.appendChild(e)),e.setAttribute("d","M"+(a[0]*xunitlength+origin[0])+","+(height-a[1]*yunitlength-origin[1])+" "+(b[0]*xunitlength+origin[0])+","+(height-b[1]*yunitlength-origin[1])),e.setAttribute("stroke-width",strokewidth),null!=strokedasharray&&e.setAttribute("stroke-dasharray",strokedasharray),e.setAttribute("stroke",stroke),e.setAttribute("fill",fill),e.setAttribute("stroke-opacity",strokeopacity),e.setAttribute("fill-opacity",fillopacity),"dot"==marker||"arrowdot"==marker?(ASdot(a,markersize,markerstroke,markerfill),"arrowdot"==marker&&arrowhead(a,b),ASdot(b,markersize,markerstroke,markerfill)):"arrow"==marker&&arrowhead(a,b),null==d&&""!=endpoints&&(d=endpoints),null!=d&&(-1!=d.indexOf("<-")&&arrowhead(b,a),-1!=d.indexOf("o-")&&dot(a,"open"),-1!=d.indexOf("*-")&&dot(a,"closed"),-1!=d.indexOf("->")&&arrowhead(a,b),-1!=d.indexOf("-o")&&dot(b,"open"),-1!=d.indexOf("-*")&&dot(b,"closed"))}function path(a,b,c,d){null==c&&(c="");var e,f,g;if(null!=b&&(e=doc.getElementById(b)),null==e&&(e=myCreateElementSVG("path"),e.setAttribute("id",b),svgpicture.appendChild(e)),"string"==typeof a)f=a;else for(f="M",f+=a[0][0]*xunitlength+origin[0]+","+(height-a[0][1]*yunitlength-origin[1])+" "+c,g=1;g<a.length;g++)f+=a[g][0]*xunitlength+origin[0]+","+(height-a[g][1]*yunitlength-origin[1])+" ";if(e.setAttribute("d",f),e.setAttribute("stroke-width",strokewidth),null!=strokedasharray&&e.setAttribute("stroke-dasharray",strokedasharray),e.setAttribute("stroke",stroke),e.setAttribute("fill",fill),e.setAttribute("stroke-opacity",strokeopacity),e.setAttribute("fill-opacity",fillopacity),"dot"==marker||"arrowdot"==marker)for(g=0;g<a.length;g++)("C"!=c&&"T"!=c||1!=g&&2!=g)&&ASdot(a[g],markersize,markerstroke,markerfill);null==d&&""!=endpoints&&(d=endpoints),null!=d&&(-1!=d.indexOf("<-")&&arrowhead(a[1],a[0]),-1!=d.indexOf("o-")&&dot(a[0],"open"),-1!=d.indexOf("*-")&&dot(a[0],"closed"),-1!=d.indexOf("->")&&arrowhead(a[a.length-2],a[a.length-1]),-1!=d.indexOf("-o")&&dot(a[a.length-1],"open"),-1!=d.indexOf("-*")&&dot(a[a.length-1],"closed"))}function curve(a,b,c){path(a,b,"T",c)}function vector(a,b,c){line(a,b,c,"","->")}function circle(a,b,c){var d;null!=c&&(d=doc.getElementById(c)),null==d&&(d=myCreateElementSVG("circle"),d.setAttribute("id",c),svgpicture.appendChild(d)),d.setAttribute("cx",a[0]*xunitlength+origin[0]),d.setAttribute("cy",height-a[1]*yunitlength-origin[1]),d.setAttribute("r",b*xunitlength),d.setAttribute("stroke-width",strokewidth),d.setAttribute("stroke",stroke),d.setAttribute("fill",fill),d.setAttribute("stroke-opacity",strokeopacity),d.setAttribute("fill-opacity",fillopacity)}function loop(a,b,c){null==b&&(b=[1,0]),path([a,[a[0]+b[0],a[1]+b[1]],[a[0]-b[1],a[1]+b[0]],a],c,"C"),("arrow"==marker||"arrowdot"==marker)&&arrowhead([a[0]+Math.cos(1.4)*b[0]-Math.sin(1.4)*b[1],a[1]+Math.sin(1.4)*b[0]+Math.cos(1.4)*b[1]],a)}function arc(a,b,c,d,e){var f,g;null!=d&&(f=doc.getElementById(d)),null==e&&(e=0),null==c&&(g=[b[0]-a[0],b[1]-a[1]],c=Math.sqrt(g[0]*g[0]+g[1]*g[1])),null==f&&(f=myCreateElementSVG("path"),f.setAttribute("id",d),svgpicture.appendChild(f)),f.setAttribute("d","M"+(a[0]*xunitlength+origin[0])+","+(height-a[1]*yunitlength-origin[1])+" A"+c*xunitlength+","+c*yunitlength+" 0 "+e+",0 "+(b[0]*xunitlength+origin[0])+","+(height-b[1]*yunitlength-origin[1])),f.setAttribute("stroke-width",strokewidth),f.setAttribute("stroke",stroke),f.setAttribute("fill",fill),f.setAttribute("stroke-opacity",strokeopacity),f.setAttribute("fill-opacity",fillopacity),"arrow"==marker||"arrowdot"==marker?(u=[(b[1]-a[1])/4,(a[0]-b[0])/4],g=[(b[0]-a[0])/2,(b[1]-a[1])/2],g=[a[0]+g[0]+u[0],a[1]+g[1]+u[1]]):g=[a[0],a[1]],"dot"==marker||"arrowdot"==marker?(ASdot(a,markersize,markerstroke,markerfill),"arrowdot"==marker&&arrowhead(g,b),ASdot(b,markersize,markerstroke,markerfill)):"arrow"==marker&&arrowhead(g,b)}function sector(a,b,c,d){var e=b[0]-a[0],f=b[1]-a[1];arc(b,c,Math.sqrt(e*e+f*f),d+"arc"),path([c,a,b],d+"path")}function ellipse(a,b,c,d){var e;null!=d&&(e=doc.getElementById(d)),null==e&&(e=myCreateElementSVG("ellipse"),e.setAttribute("id",d),svgpicture.appendChild(e)),e.setAttribute("cx",a[0]*xunitlength+origin[0]),e.setAttribute("cy",height-a[1]*yunitlength-origin[1]),e.setAttribute("rx",b*xunitlength),e.setAttribute("ry",c*yunitlength),e.setAttribute("stroke-width",strokewidth),e.setAttribute("stroke",stroke),e.setAttribute("fill",fill),e.setAttribute("stroke-opacity",strokeopacity),e.setAttribute("fill-opacity",fillopacity)}function triangle(a,b,c,d){path([a,b,c,a],d)}function rect(a,b,c,d,e){var f;null!=c&&(f=doc.getElementById(c)),null==f&&(f=myCreateElementSVG("rect"),f.setAttribute("id",c),svgpicture.appendChild(f)),f.setAttribute("x",a[0]*xunitlength+origin[0]),f.setAttribute("y",height-b[1]*yunitlength-origin[1]),f.setAttribute("width",(b[0]-a[0])*xunitlength),f.setAttribute("height",(b[1]-a[1])*yunitlength),null!=d&&f.setAttribute("rx",d*xunitlength),null!=e&&f.setAttribute("ry",e*yunitlength),f.setAttribute("stroke-width",strokewidth),f.setAttribute("stroke",stroke),f.setAttribute("fill",fill),f.setAttribute("stroke-opacity",strokeopacity),f.setAttribute("fill-opacity",fillopacity)}function text(a,b,c,d,e){var f,g,h=0,i=fontsize/3,j=b.toString();if(/(`|\$)/.test(j)){if(f=document.getElementById(svgpicture.getAttribute("name")+"mml"),null!=f){for(null!=d&&(g=document.getElementById(d)),null==g&&(g=createElementXHTML("div"),g.setAttribute("id",d),g.style.position="absolute",f.appendChild(g));g.childNodes.length>0;)g.removeChild(g.lastChild);g.appendChild(document.createTextNode(j)),/`/.test(j)?AMprocessNode(g):LMprocessNode(g),h=-g.offsetWidth/2,i=-g.offsetHeight/2,null!=c&&(/above/.test(c)&&(i=-g.offsetHeight),/below/.test(c)&&(i=0),/right/.test(c)&&(h=0),/left/.test(c)&&(h=-g.offsetWidth)),g.style.left=""+(a[0]*xunitlength+origin[0]+h)+"px",g.style.top=""+(height-a[1]*yunitlength-origin[1]+i)+"px"}return a}var k="middle";for(null!=c&&(/above/.test(c)&&(i=-fontsize/2),/below/.test(c)&&(i=fontsize-0),/right/.test(c)&&(k="start",h=fontsize/4),/left/.test(c)&&(k="end",h=-fontsize/4)),null!=d&&(g=doc.getElementById(d)),null==g&&(g=myCreateElementSVG("text"),g.setAttribute("id",d),svgpicture.appendChild(g),g.appendChild(doc.createTextNode(j)));g.childNodes.length>1;)g.removeChild(g.lastChild);return g.lastChild.nodeValue=" "+j+" ",g.setAttribute("x",a[0]*xunitlength+origin[0]+h),g.setAttribute("y",height-a[1]*yunitlength-origin[1]+i),g.setAttribute("font-style",null!=e?e:-1!=j.search(/^[a-zA-Z]$/)?"italic":fontstyle),g.setAttribute("font-family",fontfamily),g.setAttribute("font-size",fontsize),g.setAttribute("font-weight",fontweight),g.setAttribute("text-anchor",k),"none"!=fontstroke&&g.setAttribute("stroke",fontstroke),"none"!=fontfill&&g.setAttribute("fill",fontfill),a}function mtext(a,b,c,d,e){var f="middle",g=0,h=fontsize/3;null!=c&&("above"==c.slice(0,5)&&(h=-fontsize/2),"below"==c.slice(0,5)&&(h=fontsize-0),("right"==c.slice(0,5)||"right"==c.slice(5,10))&&(f="start",g=fontsize/2),("left"==c.slice(0,4)||"left"==c.slice(5,9))&&(f="end",g=-fontsize/2));var i=this;"svg"==this.nodeName&&(i=myCreateElementSVG("text"),this.appendChild(i),i.appendChild(doc.createTextNode(b))),i.lastChild.nodeValue=b,i.setAttribute("x",a[0]+g),i.setAttribute("y",a[1]+h),i.setAttribute("font-style",null!=d?d:fontstyle),i.setAttribute("font-family",fontfamily),i.setAttribute("font-size",null!=e?e:fontsize),i.setAttribute("font-weight",fontweight),i.setAttribute("text-anchor",f),"none"!=fontstroke&&i.setAttribute("stroke",fontstroke),"none"!=fontfill&&i.setAttribute("fill",fontfill)}function image(a,b,c,d,e){var f;null!=e&&(f=doc.getElementById(e)),null==f&&(f=myCreateElementSVG("image"),f.setAttribute("id",e),svgpicture.appendChild(f)),f.setAttribute("x",b[0]*xunitlength+origin[0]),f.setAttribute("y",height-b[1]*yunitlength-origin[1]),f.setAttribute("width",c),f.setAttribute("height",d),f.setAttribute("xlink:href",a)}function ASdot(a,b,c,d){null==c&&(c=stroke),null==d&&(d=fill);var e=myCreateElementSVG("circle");e.setAttribute("cx",a[0]*xunitlength+origin[0]),e.setAttribute("cy",height-a[1]*yunitlength-origin[1]),e.setAttribute("r",b),e.setAttribute("stroke-width",strokewidth),e.setAttribute("stroke",c),e.setAttribute("fill",d),svgpicture.appendChild(e)}function dot(a,b,c,d,e){var f,g=a[0]*xunitlength+origin[0],h=height-a[1]*yunitlength-origin[1];null!=e&&(f=doc.getElementById(e)),"+"==b||"-"==b||"|"==b?(null==f&&(f=myCreateElementSVG("path"),f.setAttribute("id",e),svgpicture.appendChild(f)),"+"==b?(f.setAttribute("d"," M "+(g-ticklength)+" "+h+" L "+(g+ticklength)+" "+h+" M "+g+" "+(h-ticklength)+" L "+g+" "+(h+ticklength)),f.setAttribute("stroke-width",.5),f.setAttribute("stroke",axesstroke)):("-"==b?f.setAttribute("d"," M "+(g-ticklength)+" "+h+" L "+(g+ticklength)+" "+h):f.setAttribute("d"," M "+g+" "+(h-ticklength)+" L "+g+" "+(h+ticklength)),f.setAttribute("stroke-width",strokewidth),f.setAttribute("stroke",stroke))):(null==f&&(f=myCreateElementSVG("circle"),f.setAttribute("id",e),svgpicture.appendChild(f)),f.setAttribute("cx",g),f.setAttribute("cy",h),f.setAttribute("r",dotradius),f.setAttribute("stroke-width",strokewidth),f.setAttribute("stroke",stroke),f.setAttribute("fill","open"==b?"white":"closed"==b?stroke:markerfill)),null!=c&&text(a,c,null==d?"below":d,null==e?e:e+"label")}function arrowhead(a,b){var c,d=[a[0]*xunitlength+origin[0],height-a[1]*yunitlength-origin[1]],e=[b[0]*xunitlength+origin[0],height-b[1]*yunitlength-origin[1]],f=[e[0]-d[0],e[1]-d[1]],g=Math.sqrt(f[0]*f[0]+f[1]*f[1]);if(g>1e-8){f=[f[0]/g,f[1]/g],c=[-f[1],f[0]];var h=myCreateElementSVG("path");h.setAttribute("d","M "+(e[0]-15*f[0]-4*c[0])+" "+(e[1]-15*f[1]-4*c[1])+" L "+(e[0]-3*f[0])+" "+(e[1]-3*f[1])+" L "+(e[0]-15*f[0]+4*c[0])+" "+(e[1]-15*f[1]+4*c[1])+" z"),h.setAttribute("stroke-width",markerstrokewidth),h.setAttribute("stroke",stroke),h.setAttribute("fill",stroke),h.setAttribute("stroke-opacity",strokeopacity),h.setAttribute("fill-opacity",fillopacity),svgpicture.appendChild(h)}}function chopZ(a){var b=a.indexOf(".");if(-1==b)return a;for(var c=a.length-1;c>b&&"0"==a.charAt(c);c--);return c==b&&c--,a.slice(0,c+1)}function grid(a,b){axes(a,b,null,a,b)}function noaxes(){initialized||initPicture()}function axes(dx,dy,labels,gdx,gdy){var x,y,ldx,ldy,lx,ly,lxp,lyp,pnode,st;if(initialized||initPicture(),"string"==typeof dx&&(labels=dx,dx=null),"string"==typeof dy&&(gdx=dy,dy=null),null!=xscl&&(dx=xscl,gdx=xscl,labels=dx),null!=yscl&&(dy=yscl,gdy=yscl),null!=xtick&&(dx=xtick),null!=ytick&&(dy=ytick),dx=null==dx?xunitlength:dx*xunitlength,dy=null==dy?dx:dy*yunitlength,fontsize=Math.min(dx/2,dy/2,16),ticklength=fontsize/4,null!=xgrid&&(gdx=xgrid),null!=ygrid&&(gdy=ygrid),null!=gdx){for(gdx="string"==typeof gdx?dx:gdx*xunitlength,gdy=null==gdy?dy:gdy*yunitlength,pnode=myCreateElementSVG("path"),st="",x=origin[0];width>x;x+=gdx)st+=" M"+x+",0 "+x+","+height;for(x=origin[0]-gdx;x>0;x-=gdx)st+=" M"+x+",0 "+x+","+height;for(y=height-origin[1];height>y;y+=gdy)st+=" M0,"+y+" "+width+","+y;for(y=height-origin[1]-gdy;y>0;y-=gdy)st+=" M0,"+y+" "+width+","+y;pnode.setAttribute("d",st),pnode.setAttribute("stroke-width",.5),pnode.setAttribute("stroke",gridstroke),pnode.setAttribute("fill",fill),svgpicture.appendChild(pnode)}for(pnode=myCreateElementSVG("path"),st="M0,"+(height-origin[1])+" "+width+","+(height-origin[1])+" M"+origin[0]+",0 "+origin[0]+","+height,x=origin[0]+dx;width>x;x+=dx)st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength);for(x=origin[0]-dx;x>0;x-=dx)st+=" M"+x+","+(height-origin[1]+ticklength)+" "+x+","+(height-origin[1]-ticklength);for(y=height-origin[1]+dy;height>y;y+=dy)st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y;for(y=height-origin[1]-dy;y>0;y-=dy)st+=" M"+(origin[0]+ticklength)+","+y+" "+(origin[0]-ticklength)+","+y;if(null!=labels)with(Math){ldx=dx/xunitlength,ldy=dy/yunitlength,lx=xmin>0||0>xmax?xmin:0,ly=ymin>0||0>ymax?ymin:0,lxp=0==ly?"below":"above",lyp=0==lx?"left":"right";var ddx=floor(1.1-log(ldx)/log(10))+1,ddy=floor(1.1-log(ldy)/log(10))+1;for(x=ldx;xmax>=x;x+=ldx)text([x,ly],chopZ(x.toFixed(ddx)),lxp);for(x=-ldx;x>=xmin;x-=ldx)text([x,ly],chopZ(x.toFixed(ddx)),lxp);for(y=ldy;ymax>=y;y+=ldy)text([lx,y],chopZ(y.toFixed(ddy)),lyp);for(y=-ldy;y>=ymin;y-=ldy)text([lx,y],chopZ(y.toFixed(ddy)),lyp)}fontsize=defaultfontsize,pnode.setAttribute("d",st),pnode.setAttribute("stroke-width",.5),pnode.setAttribute("stroke",axesstroke),pnode.setAttribute("fill",fill),pnode.setAttribute("stroke-opacity",strokeopacity),pnode.setAttribute("fill-opacity",fillopacity),svgpicture.appendChild(pnode)}function mathjs(a){a=a.replace(/\s/g,""),-1!=a.indexOf("^-1")&&(a=a.replace(/sin\^-1/g,"arcsin"),a=a.replace(/cos\^-1/g,"arccos"),a=a.replace(/tan\^-1/g,"arctan"),a=a.replace(/sec\^-1/g,"arcsec"),a=a.replace(/csc\^-1/g,"arccsc"),a=a.replace(/cot\^-1/g,"arccot"),a=a.replace(/sinh\^-1/g,"arcsinh"),a=a.replace(/cosh\^-1/g,"arccosh"),a=a.replace(/tanh\^-1/g,"arctanh"),a=a.replace(/sech\^-1/g,"arcsech"),a=a.replace(/csch\^-1/g,"arccsch"),a=a.replace(/coth\^-1/g,"arccoth")),a=a.replace(/^e$/g,"(Math.E)"),a=a.replace(/^e([^a-zA-Z])/g,"(Math.E)$1"),a=a.replace(/([^a-zA-Z])e/g,"$1(Math.E)"),a=a.replace(/([0-9])([\(a-zA-Z])/g,"$1*$2"),a=a.replace(/\)([\(0-9a-zA-Z])/g,")*$1");for(var b,c,d,e,f;-1!=(b=a.indexOf("^"));){if(0==b)return"Error: missing argument";if(c=b-1,e=a.charAt(c),e>="0"&&"9">=e){for(c--;c>=0&&(e=a.charAt(c))>="0"&&"9">=e;)c--;if("."==e)for(c--;c>=0&&(e=a.charAt(c))>="0"&&"9">=e;)c--}else if(")"==e){for(f=1,c--;c>=0&&f>0;)e=a.charAt(c),"("==e?f--:")"==e&&f++,c--;for(;c>=0&&(e=a.charAt(c))>="a"&&"z">=e||e>="A"&&"Z">=e;)c--}else{if(!(e>="a"&&"z">=e||e>="A"&&"Z">=e))return"Error: incorrect syntax in "+a+" at position "+c;for(c--;c>=0&&(e=a.charAt(c))>="a"&&"z">=e||e>="A"&&"Z">=e;)c--}if(b==a.length-1)return"Error: missing argument";if(d=b+1,e=a.charAt(d),e>="0"&&"9">=e||"-"==e){for(d++;d<a.length&&(e=a.charAt(d))>="0"&&"9">=e;)d++;if("."==e)for(d++;d<a.length&&(e=a.charAt(d))>="0"&&"9">=e;)d++}else if("("==e)for(f=1,d++;d<a.length&&f>0;)e=a.charAt(d),"("==e?f++:")"==e&&f--,d++;else{if(!(e>="a"&&"z">=e||e>="A"&&"Z">=e))return"Error: incorrect syntax in "+a+" at position "+d;for(d++;d<a.length&&(e=a.charAt(d))>="a"&&"z">=e||e>="A"&&"Z">=e;)d++}a=a.slice(0,c+1)+"Math.pow("+a.slice(c+1,b)+","+a.slice(b+1,d)+")"+a.slice(d)}for(;-1!=(b=a.indexOf("!"));){if(0==b)return"Error: missing argument";if(c=b-1,e=a.charAt(c),e>="0"&&"9">=e){for(c--;c>=0&&(e=a.charAt(c))>="0"&&"9">=e;)c--;if("."==e)for(c--;c>=0&&(e=a.charAt(c))>="0"&&"9">=e;)c--}else if(")"==e){for(f=1,c--;c>=0&&f>0;)e=a.charAt(c),"("==e?f--:")"==e&&f++,c--;for(;c>=0&&(e=a.charAt(c))>="a"&&"z">=e||e>="A"&&"Z">=e;)c--}else{if(!(e>="a"&&"z">=e||e>="A"&&"Z">=e))return"Error: incorrect syntax in "+a+" at position "+c;for(c--;c>=0&&(e=a.charAt(c))>="a"&&"z">=e||e>="A"&&"Z">=e;)c--}a=a.slice(0,c+1)+"factorial("+a.slice(c+1,b)+")"+a.slice(b+1)}return a}function plot(fun,x_min,x_max,points,id,endpts){var pth=[],f=function(a){return a},g=fun,name=null;"string"==typeof fun?eval("g = function(x){ with(Math) return "+mathjs(fun)+" }"):"object"==typeof fun&&(eval("f = function(t){ with(Math) return "+mathjs(fun[0])+" }"),eval("g = function(t){ with(Math) return "+mathjs(fun[1])+" }")),"string"==typeof x_min?(name=x_min,x_min=xmin):name=id;var min=null==x_min?xmin:x_min,max=null==x_max?xmax:x_max,inc=max-min-1e-6*(max-min);inc=null==points?inc/200:inc/points;for(var gt,t=min;max>=t;t+=inc)gt=g(t),isNaN(gt)||"Infinity"==Math.abs(gt)||(pth[pth.length]=[f(t),gt]);return path(pth,name,null,endpts),pth}function slopefield(fun,dx,dy){var g=fun;"string"==typeof fun&&eval("g = function(x,y){ with(Math) return "+mathjs(fun)+" }");var gxy,x,y,u,v,dz;null==dx&&(dx=1),null==dy&&(dy=1),dz=Math.sqrt(dx*dx+dy*dy)/6;var x_min=Math.ceil(xmin/dx),y_min=Math.ceil(ymin/dy);for(x=x_min;xmax>=x;x+=dx)for(y=y_min;ymax>=y;y+=dy)gxy=g(x,y),isNaN(gxy)||("Infinity"==Math.abs(gxy)?(u=0,v=dz):(u=dz/Math.sqrt(1+gxy*gxy),v=gxy*u),line([x-u,y-v],[x+u,y+v]))}function show_props(a){for(var b="",c=0;c<a.childNodes.length;c++)b+=a.childNodes.item(c)+"\n";return b}function displayCoord(a){if(showcoordinates){for(var b=a.target.parentNode,c=b.childNodes,d=0;d<c.length&&"text"!=c.item(d).nodeName;d++);var e=c.item(d);e.mtext=mtext,e.mtext([b.getAttribute("width")- -7,b.getAttribute("height")-7],"("+getX(a).toFixed(2)+", "+getY(a).toFixed(2)+")","left","","11")}}function removeCoord(a){for(var b=a.target.parentNode,c=b.childNodes,d=0;d<c.length&&"text"!=c.item(d).nodeName;d++);var e=c.item(d);e.mtext=mtext,e.mtext([b.getAttribute("width")-0,b.getAttribute("height")-0],"","aboveleft","")}function initASCIIMathCalculators(li){var i;for(i=0;i<li.length;i++)li[i].innerHTML=calcstr,AMprocessNode(li[i]);li=document.getElementsByTagName("textarea");var st;for(i=0;i<li.length;i++)st=li[i].getAttribute("onkeyup"),null!=st&&eval(String(st).replace(/function anonymous\(\)/,""))}function calculate(inputId,outputId){var str=document.getElementById(inputId).value,err="",ind=str.lastIndexOf("\n");ind==str.length-1&&(str=str.slice(0,ind)),str=str.slice(str.lastIndexOf("\n")+1);try{var res=eval(mathjs(str))}catch(e){err="syntax incomplete"}isNaN(res)||"Infinity"==res?""!=str&&(str="`"+str+"` = undefined"):str="`"+str+" =` "+(Math.abs(res-Math.round(1e6*res)/1e6)<1e-15?Math.round(1e6*res)/1e6:res)+err;for(var outnode=document.getElementById(outputId),n=outnode.childNodes.length,i=0;n>i;i++)outnode.removeChild(outnode.firstChild);outnode.appendChild(document.createTextNode(str)),AMprocessNode(outnode)}function append(a){document.getElementById("in").value+=a,calculate("in","out"),document.getElementById("in").scrollTop=1e3,document.getElementById("in").focus()}function clearTextArea(){document.getElementById("in").value="",calculate("in","out"),document.getElementById("in").focus()}function ASpreprocess(){var a=document.getElementsByTagName("body")[0];pictures=a.getElementsByTagName("embed");for(var b=pictures.length,c=b-1;c>=0;c--){picture=pictures[c];var d=picture.getAttribute("sscr");""!=d&&(noSVG?(n=document.createElement("img"),n.setAttribute("style",picture.getAttribute("style")),n.setAttribute("src",AScgiloc+"?sscr="+encodeURIComponent(picture.getAttribute("sscr"))),pn=picture.parentNode,pn.replaceChild(n,picture)):(com=parseShortScript(d),picture.setAttribute("script",com),picture.className="ASCIIsvg"))}}function parseShortScript(sscript,gw,gh){var sa=sscript.split(",");if(gw&&gh&&(sa[9]=gw,sa[10]=gh,sscript=sa.join(",")),sa.length>10){commands="setBorder(5);",commands+="width="+sa[9]+"; height="+sa[10]+";",commands+="initPicture("+sa[0]+","+sa[1]+","+sa[2]+","+sa[3]+");",commands+="axes("+sa[4]+","+sa[5]+","+sa[6]+","+sa[7]+","+sa[8]+");";for(var inx=11,eqnlist="Graphs: ";sa.length>inx+9;)commands+='stroke="'+sa[inx+7]+'";',commands+='strokewidth="'+sa[inx+8]+'";',""!=sa[inx+9]&&(commands+='strokedasharray="'+sa[inx+9].replace(/\s+/g,",")+'";'),"slope"==sa[inx]?(eqnlist+="dy/dx="+sa[inx+1]+"; ",commands+='slopefield("'+sa[inx+1]+'",'+sa[inx+2]+","+sa[inx+2]+");"):("func"==sa[inx]?(eqnlist+="y="+sa[inx+1]+"; ",eqn='"'+sa[inx+1]+'"'):"polar"==sa[inx]?(eqnlist+="r="+sa[inx+1]+"; ",eqn='["cos(t)*('+sa[inx+1]+')","sin(t)*('+sa[inx+1]+')"]'):"param"==sa[inx]&&(eqnlist+="[x,y]=["+sa[inx+1]+","+sa[inx+2]+"]; ",eqn='["'+sa[inx+1]+'","'+sa[inx+2]+'"]'),0==sa[inx+3]?ep="--":1==sa[inx+3]?ep="<-":2==sa[inx+3]?ep="o-":3==sa[inx+3]&&(ep="*-"),0==sa[inx+4]?ep+="--":1==sa[inx+4]?ep+="->":2==sa[inx+4]?ep+="-o":3==sa[inx+4]&&(ep+="-*"),commands+="number"==typeof eval(sa[inx+5])?"plot("+eqn+","+sa[inx+5]+","+sa[inx+6]+',null,null,"'+ep+'");':"plot("+eqn+',null,null,null,null,"'+ep+'");'),inx+=10;
return commands}}function generic(){if(init()&&translateOnLoad){var a=document.getElementById("processasciimathinmoodle");null!=a&&(dsvglocation=a.className),null==a&&checkforprocessasciimathinmoodle||(translate(),translateASCIIsvg&&ASpreprocess(),!noSVG&&translateASCIIsvg&&drawPictures());var b=getElementsByClass(document,"div","ASCIIMathCalculator");!noMathML&&b.length>0&&initASCIIMathCalculators(b)}}function copy(a){var b="flashcopier";if(!document.getElementById(b)){var c=document.createElement("div");c.id=b,document.body.appendChild(c),document.getElementById(b).innerHTML="";var d='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(a)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(b).innerHTML=d}}function copyToClipboard(a){if(window.clipboardData&&clipboardData.setData)clipboardData.setData("Text",a);else{user_pref("signed.applets.codebase_principal_support",!0),netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var b;if(Components.classes["@mozilla.org/widget/clipboard;[[[[1]]]]"].createInstance(Components.interfaces.nsIClipboard),!b)return;var c=Components.classes["@mozilla.org/widget/transferable;[[[[1]]]]"].createInstance(Components.interfaces.nsITransferable);if(!c)return;c.addDataFlavor("text/unicode");var d=new Object,d=(new Object,Components.classes["@mozilla.org/supports-string;[[[[1]]]]"].createInstance(Components.interfaces.nsISupportsString)),e=meintext;d.data=e,c.setTransferData("text/unicode",d,e.length*[[[[2]]]]);var f=Components.interfaces.nsIClipboard;if(!b)return!1;b.setData(c,null,f.kGlobalClipboard)}}function copy2(a){if(window.clipboardData)window.clipboardData.setData("Text",a);else{var b=new SWFObject("img/_clipboard.swf","copy_contents","0","0","4");b.addVariable("clipboard",escape(a)),b.write("flashcontent")}}function openCopyMessage(){document.getElementById("copyPopOver").style.display="block",document.getElementById("copyPopOver").style.top=mousey+"px",document.getElementById("copyPopOver").style.left=mousex+"px"}function closeCopyMessage(){return document.getElementById("copyPopOver").style.display="none",!1}function copy3(a){if(window.clipboardData)window.clipboardData.setData("Text",a);else{var b="flashcopier";if(!document.getElementById(b)){var c=document.createElement("div");c.id=b,document.body.appendChild(c)}document.getElementById(b).innerHTML="";var d='<embed src="img/_clipboard.swf" FlashVars="clipboard='+escape(a)+'" width="0" height="0" type="application/x-shockwave-flash"></embed>';document.getElementById(b).innerHTML=d}}Ext={version:"2.2.1"},window.undefined=window.undefined,Ext.apply=function(a,b,c){if(c&&Ext.apply(a,c),a&&b&&"object"==typeof b)for(var d in b)a[d]=b[d];return a},function(){var idSeed=0,ua=navigator.userAgent.toLowerCase(),isStrict="CSS1Compat"==document.compatMode,isOpera=ua.indexOf("opera")>-1,isChrome=ua.indexOf("chrome")>-1,isSafari=!isChrome&&/webkit|khtml/.test(ua),isSafari3=isSafari&&-1!=ua.indexOf("webkit/5"),isIE=!isOpera&&ua.indexOf("msie")>-1,isIE7=!isOpera&&ua.indexOf("msie 7")>-1,isIE8=!isOpera&&ua.indexOf("msie 8")>-1,isGecko=!isSafari&&!isChrome&&ua.indexOf("gecko")>-1,isGecko3=isGecko&&ua.indexOf("rv:1.9")>-1,isBorderBox=isIE&&!isStrict,isWindows=-1!=ua.indexOf("windows")||-1!=ua.indexOf("win32"),isMac=-1!=ua.indexOf("macintosh")||-1!=ua.indexOf("mac os x"),isAir=-1!=ua.indexOf("adobeair"),isLinux=-1!=ua.indexOf("linux"),isSecure=0===window.location.href.toLowerCase().indexOf("https");if(isIE&&!isIE7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}Ext.apply(Ext,{isStrict:isStrict,isSecure:isSecure,isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!1,SSL_SECURE_URL:"javascript:false",BLANK_IMAGE_URL:"http://extjs.com/s.gif",emptyFn:function(){},applyIf:function(a,b){if(a&&b)for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a},addBehaviors:function(a){if(!Ext.isReady)return Ext.onReady(function(){Ext.addBehaviors(a)}),void 0;var b={};for(var c in a){var d=c.split("@");if(d[1]){var e=d[0];b[e]||(b[e]=Ext.select(e)),b[e].on(d[1],a[c])}}b=null},id:function(a,b){b=b||"ext-gen",a=Ext.getDom(a);var c=b+ ++idSeed;return a?a.id?a.id:a.id=c:c},extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,d,e){"object"==typeof d&&(e=d,d=c,c=e.constructor!=b?e.constructor:function(){d.apply(this,arguments)});var f,g=function(){},h=d.prototype;return g.prototype=h,f=c.prototype=new g,f.constructor=c,c.superclass=h,h.constructor==b&&(h.constructor=d),c.override=function(a){Ext.override(c,a)},f.override=a,Ext.override(c,e),c.extend=function(a){Ext.extend(c,a)},c}}(),override:function(a,b){if(b){var c=a.prototype;for(var d in b)c[d]=b[d];Ext.isIE&&b.toString!=a.toString&&(c.toString=b.toString)}},namespace:function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i)for(d=a[i].split("."),rt=d[0],eval("if (typeof "+rt+' == "undefined"){'+rt+" = {};} o = "+rt+";"),j=1;j<d.length;++j)o[d[j]]=o[d[j]]||{},o=o[d[j]]},urlEncode:function(a){if(!a)return"";var b=[];for(var c in a){var d=a[c],e=encodeURIComponent(c),f=typeof d;if("undefined"==f)b.push(e,"=&");else if("function"!=f&&"object"!=f)b.push(e,"=",encodeURIComponent(d),"&");else if(Ext.isDate(d)){var g=Ext.encode(d).replace(/"/g,"");b.push(e,"=",g,"&")}else if(Ext.isArray(d))if(d.length)for(var h=0,i=d.length;i>h;h++)b.push(e,"=",encodeURIComponent(void 0===d[h]?"":d[h]),"&");else b.push(e,"=&")}return b.pop(),b.join("")},urlDecode:function(a,b){if(!a||!a.length)return{};for(var c,d,e,f={},g=a.split("&"),h=0,i=g.length;i>h;h++)c=g[h].split("="),d=decodeURIComponent(c[0]),e=decodeURIComponent(c[1]),b!==!0?"undefined"==typeof f[d]?f[d]=e:"string"==typeof f[d]?(f[d]=[f[d]],f[d].push(e)):f[d].push(e):f[d]=e;return f},each:function(a,b,c){("undefined"==typeof a.length||"string"==typeof a)&&(a=[a]);for(var d=0,e=a.length;e>d;d++)if(b.call(c||a[d],a[d],d,a)===!1)return d},combine:function(){for(var a=arguments,b=a.length,c=[],d=0;b>d;d++){var e=a[d];Ext.isArray(e)?c=c.concat(e):void 0===e.length||e.substr?c.push(e):c=c.concat(Array.prototype.slice.call(e,0))}return c},escapeRe:function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},callback:function(a,b,c,d){"function"==typeof a&&(d?a.defer(d,b,c||[]):a.apply(b,c||[]))},getDom:function(a){return a&&document?a.dom?a.dom:"string"==typeof a?document.getElementById(a):a:null},getDoc:function(){return Ext.get(document)},getBody:function(){return Ext.get(document.body||document.documentElement)},getCmp:function(a){return Ext.ComponentMgr.get(a)},num:function(a,b){return"number"!=typeof a||isNaN(a)?b:a},destroy:function(){for(var a=0,b=arguments,c=b.length;c>a;a++){var d=b[a];d&&("function"==typeof d.destroy?d.destroy():d.dom&&(d.removeAllListeners(),d.remove()))}},removeNode:isIE?function(){var a;return function(b){b&&"BODY"!=b.tagName&&(a=a||document.createElement("div"),a.appendChild(b),a.innerHTML="")}}():function(a){a&&a.parentNode&&"BODY"!=a.tagName&&a.parentNode.removeChild(a)},type:function(a){if(void 0===a||null===a)return!1;if(a.htmlElement)return"element";var b=typeof a;if("object"==b&&a.nodeName)switch(a.nodeType){case 1:return"element";case 3:return/\S/.test(a.nodeValue)?"textnode":"whitespace"}if("object"==b||"function"==b){switch(a.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if("number"==typeof a.length&&"function"==typeof a.item)return"nodelist"}return b},isEmpty:function(a,b){return null===a||void 0===a||(b?!1:""===a)},value:function(a,b,c){return Ext.isEmpty(a,c)?b:a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},isDate:function(a){return a&&"function"==typeof a.getFullYear},isOpera:isOpera,isChrome:isChrome,isSafari:isSafari,isSafari3:isSafari3,isSafari2:isSafari&&!isSafari3,isIE:isIE,isIE6:isIE&&!isIE7&&!isIE8,isIE7:isIE7,isIE8:isIE8,isGecko:isGecko,isGecko2:isGecko&&!isGecko3,isGecko3:isGecko3,isBorderBox:isBorderBox,isLinux:isLinux,isWindows:isWindows,isMac:isMac,isAir:isAir,useShims:isIE&&!isIE7||isMac&&isGecko&&!isGecko3}),Ext.ns=Ext.namespace}(),Ext.ns("Ext","Ext.util","Ext.grid","Ext.dd","Ext.tree","Ext.data","Ext.form","Ext.menu","Ext.state","Ext.lib","Ext.layout","Ext.app","Ext.ux"),Ext.apply(Function.prototype,{createCallback:function(){var a=arguments,b=this;return function(){return b.apply(window,a)}},createDelegate:function(a,b,c){var d=this;return function(){var e=b||arguments;if(c===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(b);else if("number"==typeof c){e=Array.prototype.slice.call(arguments,0);var f=[c,0].concat(b);Array.prototype.splice.apply(e,f)}return d.apply(a||window,e)}},defer:function(a,b,c,d){var e=this.createDelegate(b,c,d);return a?setTimeout(e,a):(e(),0)},createSequence:function(a,b){if("function"!=typeof a)return this;var c=this;return function(){var d=c.apply(this||window,arguments);return a.apply(b||this||window,arguments),d}},createInterceptor:function(a,b){if("function"!=typeof a)return this;var c=this;return function(){return a.target=this,a.method=c,a.apply(b||this||window,arguments)!==!1?c.apply(this||window,arguments):void 0}}}),Ext.applyIf(String,{escape:function(a){return a.replace(/('|\\)/g,"\\$1")},leftPad:function(a,b,c){var d=new String(a);for(c||(c=" ");d.length<b;)d=c+d;return d.toString()},format:function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})}}),String.prototype.toggle=function(a,b){return this==a?b:a},String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return this.replace(a,"")}}(),Ext.applyIf(Number.prototype,{constrain:function(a,b){return Math.min(Math.max(this,a),b)}}),Ext.applyIf(Array.prototype,{indexOf:function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return b;return-1},remove:function(a){var b=this.indexOf(a);return-1!=b&&this.splice(b,1),this}}),Date.prototype.getElapsed=function(a){return Math.abs((a||new Date).getTime()-this.getTime())},function(){function a(a){return c||(c=new Ext.Element.Flyweight),c.dom=a,c}function b(){var a=Function.prototype;delete a.createSequence,delete a.defer,delete a.createDelegate,delete a.createCallback,delete a.createInterceptor,window.detachEvent("onunload",b)}var c;Ext.lib.Dom={getViewWidth:function(a){return a?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(a){return a?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){var a="CSS1Compat"!=document.compatMode?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(a,this.getViewportHeight())},getDocumentWidth:function(){var a="CSS1Compat"!=document.compatMode?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(a,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?Ext.isStrict?document.documentElement.clientHeight:document.body.clientHeight:self.innerHeight},getViewportWidth:function(){return Ext.isIE?Ext.isStrict?document.documentElement.clientWidth:document.body.clientWidth:self.innerWidth},isAncestor:function(a,b){if(a=Ext.getDom(a),b=Ext.getDom(b),!a||!b)return!1;if(a.contains&&!Ext.isSafari)return a.contains(b);if(a.compareDocumentPosition)return!!(16&a.compareDocumentPosition(b));for(var c=b.parentNode;c;){if(c==a)return!0;if(!c.tagName||"HTML"==c.tagName.toUpperCase())return!1;c=c.parentNode}return!1},getRegion:function(a){return Ext.lib.Region.getRegion(a)},getY:function(a){return this.getXY(a)[1]},getX:function(a){return this.getXY(a)[0]},getXY:function(b){var c,d,e,f,g=document.body||document.documentElement;if(b=Ext.getDom(b),b==g)return[0,0];if(b.getBoundingClientRect)return e=b.getBoundingClientRect(),f=a(document).getScroll(),[e.left+f.left,e.top+f.top];var h=0,i=0;c=b;for(var j="absolute"==a(b).getStyle("position");c;){if(h+=c.offsetLeft,i+=c.offsetTop,j||"absolute"!=a(c).getStyle("position")||(j=!0),Ext.isGecko){d=a(c);var k=parseInt(d.getStyle("borderTopWidth"),10)||0,l=parseInt(d.getStyle("borderLeftWidth"),10)||0;h+=l,i+=k,c!=b&&"visible"!=d.getStyle("overflow")&&(h+=l,i+=k)}c=c.offsetParent}if(Ext.isSafari&&j&&(h-=g.offsetLeft,i-=g.offsetTop),Ext.isGecko&&!j){var m=a(g);h+=parseInt(m.getStyle("borderLeftWidth"),10)||0,i+=parseInt(m.getStyle("borderTopWidth"),10)||0}for(c=b.parentNode;c&&c!=g;)(!Ext.isOpera||"TR"!=c.tagName&&"inline"!=a(c).getStyle("display"))&&(h-=c.scrollLeft,i-=c.scrollTop),c=c.parentNode;return[h,i]},setXY:function(a,b){a=Ext.fly(a,"_setXY"),a.position();var c=a.translatePoints(b);b[0]!==!1&&(a.dom.style.left=c.left+"px"),b[1]!==!1&&(a.dom.style.top=c.top+"px")},setX:function(a,b){this.setXY(a,[b,!1])},setY:function(a,b){this.setXY(a,[!1,b])}},Ext.lib.Event=function(){var a=!1,b=[],c=[],d=0,e=[];return{POLL_RETRYS:200,POLL_INTERVAL:20,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,_interval:null,startInterval:function(){if(!this._interval){var a=this,b=function(){a._tryPreloadAttach()};this._interval=setInterval(b,this.POLL_INTERVAL)}},onAvailable:function(a,b,c,f){e.push({id:a,fn:b,obj:c,override:f,checkReady:!1}),d=this.POLL_RETRYS,this.startInterval()},addListener:function(a,d,e){if(a=Ext.getDom(a),!a||!e)return!1;if("unload"==d)return c[c.length]=[a,d,e],!0;var f=function(a){return"undefined"!=typeof Ext?e(Ext.lib.Event.getEvent(a)):!1},g=[a,d,e,f],h=b.length;return b[h]=g,this.doAdd(a,d,f,!1),!0},removeListener:function(a,d,e){var f,g;if(a=Ext.getDom(a),!e)return this.purgeElement(a,!1,d);if("unload"==d){for(f=0,g=c.length;g>f;f++){var h=c[f];if(h&&h[0]==a&&h[1]==d&&h[2]==e)return c.splice(f,1),!0}return!1}var i=null,j=arguments[3];return"undefined"==typeof j&&(j=this._getCacheIndex(a,d,e)),j>=0&&(i=b[j]),a&&i?(this.doRemove(a,d,i[this.WFN],!1),delete b[j][this.WFN],delete b[j][this.FN],b.splice(j,1),!0):!1},getTarget:function(a){a=a.browserEvent||a;var b=a.target||a.srcElement;return this.resolveTextNode(b)},resolveTextNode:function(a){return Ext.isSafari&&a&&3==a.nodeType?a.parentNode:a},getPageX:function(a){a=a.browserEvent||a;var b=a.pageX;return b||0===b||(b=a.clientX||0,Ext.isIE&&(b+=this.getScroll()[1])),b},getPageY:function(a){a=a.browserEvent||a;var b=a.pageY;return b||0===b||(b=a.clientY||0,Ext.isIE&&(b+=this.getScroll()[0])),b},getXY:function(a){return a=a.browserEvent||a,[this.getPageX(a),this.getPageY(a)]},getRelatedTarget:function(a){a=a.browserEvent||a;var b=a.relatedTarget;return b||("mouseout"==a.type?b=a.toElement:"mouseover"==a.type&&(b=a.fromElement)),this.resolveTextNode(b)},getTime:function(a){if(a=a.browserEvent||a,!a.time){var b=(new Date).getTime();try{a.time=b}catch(c){return this.lastError=c,b}}return a.time},stopEvent:function(a){this.stopPropagation(a),this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a=a.browserEvent||a,a.preventDefault?a.preventDefault():a.returnValue=!1},getEvent:function(a){var b=a||window.event;if(!b)for(var c=this.getEvent.caller;c&&(b=c.arguments[0],!b||Event!=b.constructor);)c=c.caller;return b},getCharCode:function(a){return a=a.browserEvent||a,a.charCode||a.keyCode||0},_getCacheIndex:function(a,c,d){for(var e=0,f=b.length;f>e;++e){var g=b[e];if(g&&g[this.FN]==d&&g[this.EL]==a&&g[this.TYPE]==c)return e}return-1},elCache:{},getEl:function(a){return document.getElementById(a)},clearCache:function(){},_load:function(){a=!0;var b=Ext.lib.Event;Ext.isIE&&b.doRemove(window,"load",b._load)},_tryPreloadAttach:function(){if(this.locked)return!1;this.locked=!0;var b=!a;b||(b=d>0);for(var c=[],f=0,g=e.length;g>f;++f){var h=e[f];if(h){var i=this.getEl(h.id);if(i){if(!h.checkReady||a||i.nextSibling||document&&document.body){var j=i;h.override&&(j=h.override===!0?h.obj:h.override),h.fn.call(j,h.obj),e[f]=null}}else c.push(h)}}return d=0===c.length?0:d-1,b?this.startInterval():(clearInterval(this._interval),this._interval=null),this.locked=!1,!0},purgeElement:function(a,b,c){var d=this.getListeners(a,c);if(d)for(var e=0,f=d.length;f>e;++e){var g=d[e];this.removeListener(a,g.type,g.fn)}if(b&&a&&a.childNodes)for(e=0,f=a.childNodes.length;f>e;++e)this.purgeElement(a.childNodes[e],b,c)},getListeners:function(a,d){var e,f=[];e=d?"unload"==d?[c]:[b]:[b,c];for(var g=0;g<e.length;++g){var h=e[g];if(h&&h.length>0)for(var i=0,j=h.length;j>i;++i){var k=h[i];!k||k[this.EL]!==a||d&&d!==k[this.TYPE]||f.push({type:k[this.TYPE],fn:k[this.FN],obj:k[this.OBJ],adjust:k[this.ADJ_SCOPE],index:i})}}return f.length?f:null},_unload:function(a){var d,e,f,g,h,i=Ext.lib.Event;for(d=0,g=c.length;g>d;++d)if(f=c[d]){var j=window;f[i.ADJ_SCOPE]&&(j=f[i.ADJ_SCOPE]===!0?f[i.OBJ]:f[i.ADJ_SCOPE]),f[i.FN].call(j,i.getEvent(a),f[i.OBJ]),c[d]=null,f=null,j=null}if(c=null,b&&b.length>0){for(e=b.length;e;)h=e-1,f=b[h],f&&i.removeListener(f[i.EL],f[i.TYPE],f[i.FN],h),e-=1;f=null,i.clearCache()}i.doRemove(window,"unload",i._unload)},getScroll:function(){var a=document.documentElement,b=document.body;return a&&(a.scrollTop||a.scrollLeft)?[a.scrollTop,a.scrollLeft]:b?[b.scrollTop,b.scrollLeft]:[0,0]},doAdd:function(){return window.addEventListener?function(a,b,c,d){a.addEventListener(b,c,d)}:window.attachEvent?function(a,b,c){a.attachEvent("on"+b,c)}:function(){}}(),doRemove:function(){return window.removeEventListener?function(a,b,c,d){a.removeEventListener(b,c,d)}:window.detachEvent?function(a,b,c){a.detachEvent("on"+b,c)}:function(){}}()}}();var d=Ext.lib.Event;d.on=d.addListener,d.un=d.removeListener,document&&document.body?d._load():d.doAdd(window,"load",d._load),d.doAdd(window,"unload",d._unload),d._tryPreloadAttach(),Ext.lib.Ajax={request:function(a,b,c,d,e){if(e){var f=e.headers;if(f)for(var g in f)f.hasOwnProperty(g)&&this.initHeader(g,f[g],!1);e.xmlData?(f&&f["Content-Type"]||this.initHeader("Content-Type","text/xml",!1),a=a?a:e.method?e.method:"POST",d=e.xmlData):e.jsonData&&(f&&f["Content-Type"]||this.initHeader("Content-Type","application/json",!1),a=a?a:e.method?e.method:"POST",d="object"==typeof e.jsonData?Ext.encode(e.jsonData):e.jsonData)}return this.asyncRequest(a,b,c,d)},serializeForm:function(a){"string"==typeof a&&(a=document.getElementById(a)||document.forms[a]);for(var b,c,d,e,f="",g=!1,h=0;h<a.elements.length;h++)if(b=a.elements[h],e=a.elements[h].disabled,c=a.elements[h].name,d=a.elements[h].value,!e&&c)switch(b.type){case"select-one":case"select-multiple":for(var i=0;i<b.options.length;i++)b.options[i].selected&&(f+=Ext.isIE?encodeURIComponent(c)+"="+encodeURIComponent(b.options[i].attributes.value.specified?b.options[i].value:b.options[i].text)+"&":encodeURIComponent(c)+"="+encodeURIComponent(b.options[i].hasAttribute("value")?b.options[i].value:b.options[i].text)+"&");break;case"radio":case"checkbox":b.checked&&(f+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");break;case"file":case void 0:case"reset":case"button":break;case"submit":0==g&&(f+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&",g=!0);break;default:f+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&"}return f=f.substr(0,f.length-1)},headers:{},hasHeaders:!1,useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",hasDefaultHeaders:!0,defaultHeaders:{},poll:{},timeout:{},pollInterval:50,transactionId:0,setProgId:function(a){this.activeX.unshift(a)},setDefaultPostHeader:function(a){this.useDefaultHeader=a},setDefaultXhrHeader:function(a){this.useDefaultXhrHeader=a},setPollingInterval:function(a){"number"==typeof a&&isFinite(a)&&(this.pollInterval=a)},createXhrObject:function(a){var b,c;try{c=new XMLHttpRequest,b={conn:c,tId:a}}catch(d){for(var e=0;e<this.activeX.length;++e)try{c=new ActiveXObject(this.activeX[e]),b={conn:c,tId:a};break}catch(d){}}finally{return b}},getConnectionObject:function(){var a,b=this.transactionId;try{a=this.createXhrObject(b),a&&this.transactionId++}catch(c){}finally{return a}},asyncRequest:function(a,b,c,d){var e=this.getConnectionObject();return e?(e.conn.open(a,b,!0),this.useDefaultXhrHeader&&(this.defaultHeaders["X-Requested-With"]||this.initHeader("X-Requested-With",this.defaultXhrHeader,!0)),!d||!this.useDefaultHeader||this.hasHeaders&&this.headers["Content-Type"]||this.initHeader("Content-Type",this.defaultPostHeader),(this.hasDefaultHeaders||this.hasHeaders)&&this.setHeader(e),this.handleReadyState(e,c),e.conn.send(d||null),e):null},handleReadyState:function(a,b){var c=this;b&&b.timeout&&(this.timeout[a.tId]=window.setTimeout(function(){c.abort(a,b,!0)},b.timeout)),this.poll[a.tId]=window.setInterval(function(){a.conn&&4==a.conn.readyState&&(window.clearInterval(c.poll[a.tId]),delete c.poll[a.tId],b&&b.timeout&&(window.clearTimeout(c.timeout[a.tId]),delete c.timeout[a.tId]),c.handleTransactionResponse(a,b))},this.pollInterval)},handleTransactionResponse:function(a,b,c){if(!b)return this.releaseObject(a),void 0;var d,e;try{d=void 0!==a.conn.status&&0!=a.conn.status?a.conn.status:13030}catch(f){d=13030}if(d>=200&&300>d||Ext.isIE&&1223==d)e=this.createResponseObject(a,b.argument),b.success&&(b.scope?b.success.apply(b.scope,[e]):b.success(e));else switch(d){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:e=this.createExceptionObject(a.tId,b.argument,c?c:!1),b.failure&&(b.scope?b.failure.apply(b.scope,[e]):b.failure(e));break;default:e=this.createResponseObject(a,b.argument),b.failure&&(b.scope?b.failure.apply(b.scope,[e]):b.failure(e))}this.releaseObject(a),e=null},createResponseObject:function(a,b){var c={},d={};try{for(var e=a.conn.getAllResponseHeaders(),f=e.split("\n"),g=0;g<f.length;g++){var h=f[g].indexOf(":");-1!=h&&(d[f[g].substring(0,h)]=f[g].substring(h+2))}}catch(i){}return c.tId=a.tId,c.status=a.conn.status,c.statusText=a.conn.statusText,c.getResponseHeader=d,c.getAllResponseHeaders=e,c.responseText=a.conn.responseText,c.responseXML=a.conn.responseXML,void 0!==typeof b&&(c.argument=b),c},createExceptionObject:function(a,b,c){var d=0,e="communication failure",f=-1,g="transaction aborted",h={};return h.tId=a,c?(h.status=f,h.statusText=g):(h.status=d,h.statusText=e),b&&(h.argument=b),h},initHeader:function(a,b,c){var d=c?this.defaultHeaders:this.headers;d[a]=void 0===d[a]?b:b+","+d[a],c?this.hasDefaultHeaders=!0:this.hasHeaders=!0},setHeader:function(a){if(this.hasDefaultHeaders)for(var b in this.defaultHeaders)this.defaultHeaders.hasOwnProperty(b)&&a.conn.setRequestHeader(b,this.defaultHeaders[b]);if(this.hasHeaders){for(var b in this.headers)this.headers.hasOwnProperty(b)&&a.conn.setRequestHeader(b,this.headers[b]);this.headers={},this.hasHeaders=!1}},resetDefaultHeaders:function(){delete this.defaultHeaders,this.defaultHeaders={},this.hasDefaultHeaders=!1},abort:function(a,b,c){return this.isCallInProgress(a)?(a.conn.abort(),window.clearInterval(this.poll[a.tId]),delete this.poll[a.tId],c&&delete this.timeout[a.tId],this.handleTransactionResponse(a,b,!0),!0):!1},isCallInProgress:function(a){return a.conn?4!=a.conn.readyState&&0!=a.conn.readyState:!1},releaseObject:function(a){a.conn=null,a=null},activeX:["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"]},Ext.lib.Region=function(a,b,c,d){this.top=a,this[1]=a,this.right=b,this.bottom=c,this.left=d,this[0]=d},Ext.lib.Region.prototype={contains:function(a){return a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom},getArea:function(){return(this.bottom-this.top)*(this.right-this.left)},intersect:function(a){var b=Math.max(this.top,a.top),c=Math.min(this.right,a.right),d=Math.min(this.bottom,a.bottom),e=Math.max(this.left,a.left);return d>=b&&c>=e?new Ext.lib.Region(b,c,d,e):null},union:function(a){var b=Math.min(this.top,a.top),c=Math.max(this.right,a.right),d=Math.max(this.bottom,a.bottom),e=Math.min(this.left,a.left);return new Ext.lib.Region(b,c,d,e)},constrainTo:function(a){return this.top=this.top.constrain(a.top,a.bottom),this.bottom=this.bottom.constrain(a.top,a.bottom),this.left=this.left.constrain(a.left,a.right),this.right=this.right.constrain(a.left,a.right),this},adjust:function(a,b,c,d){return this.top+=a,this.left+=b,this.right+=d,this.bottom+=c,this}},Ext.lib.Region.getRegion=function(a){var b=Ext.lib.Dom.getXY(a),c=b[1],d=b[0]+a.offsetWidth,e=b[1]+a.offsetHeight,f=b[0];return new Ext.lib.Region(c,d,e,f)},Ext.lib.Point=function(a,b){Ext.isArray(a)&&(b=a[1],a=a[0]),this.x=this.right=this.left=this[0]=a,this.y=this.top=this.bottom=this[1]=b},Ext.lib.Point.prototype=new Ext.lib.Region,Ext.lib.Anim={scroll:function(a,b,c,d,e,f){return this.run(a,b,c,d,e,f,Ext.lib.Scroll)},motion:function(a,b,c,d,e,f){return this.run(a,b,c,d,e,f,Ext.lib.Motion)},color:function(a,b,c,d,e,f){return this.run(a,b,c,d,e,f,Ext.lib.ColorAnim)},run:function(a,b,c,d,e,f,g){g=g||Ext.lib.AnimBase,"string"==typeof d&&(d=Ext.lib.Easing[d]);var h=new g(a,b,c,d);return h.animateX(function(){Ext.callback(e,f)}),h}},Ext.isIE&&window.attachEvent("onunload",b),Ext.lib.AnimBase=function(a,b,c,d){a&&this.init(a,b,c,d)},Ext.lib.AnimBase.prototype={toString:function(){var a=this.getEl(),b=a.id||a.tagName;return"Anim "+b},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(a,b,c){return this.method(this.currentFrame,b,c-b,this.totalFrames)},setAttribute:function(a,b,c){this.patterns.noNegatives.test(a)&&(b=b>0?b:0),Ext.fly(this.getEl(),"_anim").setStyle(a,b+c)},getAttribute:function(b){var c=this.getEl(),d=a(c).getStyle(b);if("auto"!==d&&!this.patterns.offsetUnit.test(d))return parseFloat(d);var e=this.patterns.offsetAttribute.exec(b)||[],f=!!e[3],g=!!e[2];return d=g||"absolute"==a(c).getStyle("position")&&f?c["offset"+e[0].charAt(0).toUpperCase()+e[0].substr(1)]:0},getDefaultUnit:function(a){return this.patterns.defaultUnit.test(a)?"px":""},animateX:function(a,b){var c=function(){this.onComplete.removeListener(c),"function"==typeof a&&a.call(b||this,this)};this.onComplete.addListener(c,this),this.animate()},setRuntimeAttribute:function(a){var b,c,d=this.attributes;this.runtimeAttributes[a]={};var e=function(a){return"undefined"!=typeof a};if(!e(d[a].to)&&!e(d[a].by))return!1;if(b=e(d[a].from)?d[a].from:this.getAttribute(a),e(d[a].to))c=d[a].to;else if(e(d[a].by))if(b.constructor==Array){c=[];for(var f=0,g=b.length;g>f;++f)c[f]=b[f]+d[a].by[f]}else c=b+d[a].by;this.runtimeAttributes[a].start=b,this.runtimeAttributes[a].end=c,this.runtimeAttributes[a].unit=e(d[a].unit)?d[a].unit:this.getDefaultUnit(a)},init:function(a,b,c,d){var e=!1,f=null,g=0;a=Ext.getDom(a),this.attributes=b||{},this.duration=c||1,this.method=d||Ext.lib.Easing.easeNone,this.useSeconds=!0,this.currentFrame=0,this.totalFrames=Ext.lib.AnimMgr.fps,this.getEl=function(){return a},this.isAnimated=function(){return e},this.getStartTime=function(){return f},this.runtimeAttributes={},this.animate=function(){return this.isAnimated()?!1:(this.currentFrame=0,this.totalFrames=this.useSeconds?Math.ceil(Ext.lib.AnimMgr.fps*this.duration):this.duration,Ext.lib.AnimMgr.registerElement(this),void 0)},this.stop=function(a){a&&(this.currentFrame=this.totalFrames,this._onTween.fire()),Ext.lib.AnimMgr.stop(this)};var h=function(){this.onStart.fire(),this.runtimeAttributes={};for(var a in this.attributes)this.setRuntimeAttribute(a);e=!0,g=0,f=new Date},i=function(){var a={duration:new Date-this.getStartTime(),currentFrame:this.currentFrame};a.toString=function(){return"duration: "+a.duration+", currentFrame: "+a.currentFrame},this.onTween.fire(a);var b=this.runtimeAttributes;for(var c in b)this.setAttribute(c,this.doMethod(c,b[c].start,b[c].end),b[c].unit);g+=1},j=function(){var a=(new Date-f)/1e3,b={duration:a,frames:g,fps:g/a};b.toString=function(){return"duration: "+b.duration+", frames: "+b.frames+", fps: "+b.fps},e=!1,g=0,this.onComplete.fire(b)};this._onStart=new Ext.util.Event(this),this.onStart=new Ext.util.Event(this),this.onTween=new Ext.util.Event(this),this._onTween=new Ext.util.Event(this),this.onComplete=new Ext.util.Event(this),this._onComplete=new Ext.util.Event(this),this._onStart.addListener(h),this._onTween.addListener(i),this._onComplete.addListener(j)}},Ext.lib.AnimMgr=new function(){var a=null,b=[],c=0;this.fps=1e3,this.delay=1,this.registerElement=function(a){b[b.length]=a,c+=1,a._onStart.fire(),this.start()},this.unRegister=function(a,e){a._onComplete.fire(),e=e||d(a),-1!=e&&b.splice(e,1),c-=1,0>=c&&this.stop()},this.start=function(){null===a&&(a=setInterval(this.run,this.delay))},this.stop=function(d){if(d)this.unRegister(d);else{clearInterval(a);for(var e=0,f=b.length;f>e;++e)b[0].isAnimated()&&this.unRegister(b[0],0);b=[],a=null,c=0}},this.run=function(){for(var a=0,c=b.length;c>a;++a){var d=b[a];d&&d.isAnimated()&&(d.currentFrame<d.totalFrames||null===d.totalFrames?(d.currentFrame+=1,d.useSeconds&&e(d),d._onTween.fire()):Ext.lib.AnimMgr.stop(d,a))}};var d=function(a){for(var c=0,d=b.length;d>c;++c)if(b[c]==a)return c;return-1},e=function(a){var b=a.totalFrames,c=a.currentFrame,d=a.currentFrame*a.duration*1e3/a.totalFrames,e=new Date-a.getStartTime(),f=0;f=e<1e3*a.duration?Math.round((e/d-1)*a.currentFrame):b-(c+1),f>0&&isFinite(f)&&(a.currentFrame+f>=b&&(f=b-(c+1)),a.currentFrame+=f)}},Ext.lib.Bezier=new function(){this.getPosition=function(a,b){for(var c=a.length,d=[],e=0;c>e;++e)d[e]=[a[e][0],a[e][1]];for(var f=1;c>f;++f)for(e=0;c-f>e;++e)d[e][0]=(1-b)*d[e][0]+b*d[parseInt(e+1,10)][0],d[e][1]=(1-b)*d[e][1]+b*d[parseInt(e+1,10)][1];return[d[0][0],d[0][1]]}},function(){Ext.lib.ColorAnim=function(a,b,c,d){Ext.lib.ColorAnim.superclass.constructor.call(this,a,b,c,d)},Ext.extend(Ext.lib.ColorAnim,Ext.lib.AnimBase);var b=Ext.lib,c=b.ColorAnim.superclass,d=b.ColorAnim.prototype;d.toString=function(){var a=this.getEl(),b=a.id||a.tagName;return"ColorAnim "+b},d.patterns.color=/color$/i,d.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,d.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,d.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,d.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/,d.parseColor=function(a){if(3==a.length)return a;var b=this.patterns.hex.exec(a);return b&&4==b.length?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:(b=this.patterns.rgb.exec(a),b&&4==b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=this.patterns.hex3.exec(a),b&&4==b.length?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:null))},d.getAttribute=function(b){var d=this.getEl();if(this.patterns.color.test(b)){var e=a(d).getStyle(b);if(this.patterns.transparent.test(e)){var f=d.parentNode;for(e=a(f).getStyle(b);f&&this.patterns.transparent.test(e);)f=f.parentNode,e=a(f).getStyle(b),"HTML"==f.tagName.toUpperCase()&&(e="#fff")}}else e=c.getAttribute.call(this,b);return e},d.doMethod=function(a,b,d){var e;if(this.patterns.color.test(a)){e=[];for(var f=0,g=b.length;g>f;++f)e[f]=c.doMethod.call(this,a,b[f],d[f]);e="rgb("+Math.floor(e[0])+","+Math.floor(e[1])+","+Math.floor(e[2])+")"}else e=c.doMethod.call(this,a,b,d);return e},d.setRuntimeAttribute=function(a){if(c.setRuntimeAttribute.call(this,a),this.patterns.color.test(a)){var b=this.attributes,d=this.parseColor(this.runtimeAttributes[a].start),e=this.parseColor(this.runtimeAttributes[a].end);if("undefined"==typeof b[a].to&&"undefined"!=typeof b[a].by){e=this.parseColor(b[a].by);for(var f=0,g=d.length;g>f;++f)e[f]=d[f]+e[f]}this.runtimeAttributes[a].start=d,this.runtimeAttributes[a].end=e}}}(),Ext.lib.Easing={easeNone:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeBoth:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInStrong:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutStrong:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeBothStrong:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},elasticIn:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;
if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b},elasticOut:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b},elasticBoth:function(a,b,c,d,e,f){if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b},backIn:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},backOut:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backBoth:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceIn:function(a,b,c,d){return c-Ext.lib.Easing.bounceOut(d-a,0,c,d)+b},bounceOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceBoth:function(a,b,c,d){return d/2>a?.5*Ext.lib.Easing.bounceIn(2*a,0,c,d)+b:.5*Ext.lib.Easing.bounceOut(2*a-d,0,c,d)+.5*c+b}},function(){Ext.lib.Motion=function(a,b,c,d){a&&Ext.lib.Motion.superclass.constructor.call(this,a,b,c,d)},Ext.extend(Ext.lib.Motion,Ext.lib.ColorAnim);var a=Ext.lib,b=a.Motion.superclass,c=a.Motion.prototype;c.toString=function(){var a=this.getEl(),b=a.id||a.tagName;return"Motion "+b},c.patterns.points=/^points$/i,c.setAttribute=function(a,c,d){this.patterns.points.test(a)?(d=d||"px",b.setAttribute.call(this,"left",c[0],d),b.setAttribute.call(this,"top",c[1],d)):b.setAttribute.call(this,a,c,d)},c.getAttribute=function(a){if(this.patterns.points.test(a))var c=[b.getAttribute.call(this,"left"),b.getAttribute.call(this,"top")];else c=b.getAttribute.call(this,a);return c},c.doMethod=function(c,d,e){var f=null;if(this.patterns.points.test(c)){var g=this.method(this.currentFrame,0,100,this.totalFrames)/100;f=a.Bezier.getPosition(this.runtimeAttributes[c],g)}else f=b.doMethod.call(this,c,d,e);return f},c.setRuntimeAttribute=function(a){if(this.patterns.points.test(a)){var c,f,g,h,i=this.getEl(),j=this.attributes,k=j.points.control||[];if(k.length>0&&!Ext.isArray(k[0]))k=[k];else{var l=[];for(g=0,h=k.length;h>g;++g)l[g]=k[g];k=l}if(Ext.fly(i,"_anim").position(),e(j.points.from)?Ext.lib.Dom.setXY(i,j.points.from):Ext.lib.Dom.setXY(i,Ext.lib.Dom.getXY(i)),c=this.getAttribute("points"),e(j.points.to)){f=d.call(this,j.points.to,c);{Ext.lib.Dom.getXY(this.getEl())}for(g=0,h=k.length;h>g;++g)k[g]=d.call(this,k[g],c)}else if(e(j.points.by))for(f=[c[0]+j.points.by[0],c[1]+j.points.by[1]],g=0,h=k.length;h>g;++g)k[g]=[c[0]+k[g][0],c[1]+k[g][1]];this.runtimeAttributes[a]=[c],k.length>0&&(this.runtimeAttributes[a]=this.runtimeAttributes[a].concat(k)),this.runtimeAttributes[a][this.runtimeAttributes[a].length]=f}else b.setRuntimeAttribute.call(this,a)};var d=function(a,b){var c=Ext.lib.Dom.getXY(this.getEl());return a=[a[0]-c[0]+b[0],a[1]-c[1]+b[1]]},e=function(a){return"undefined"!=typeof a}}(),function(){Ext.lib.Scroll=function(a,b,c,d){a&&Ext.lib.Scroll.superclass.constructor.call(this,a,b,c,d)},Ext.extend(Ext.lib.Scroll,Ext.lib.ColorAnim);var a=Ext.lib,b=a.Scroll.superclass,c=a.Scroll.prototype;c.toString=function(){var a=this.getEl(),b=a.id||a.tagName;return"Scroll "+b},c.doMethod=function(a,c,d){var e=null;return e="scroll"==a?[this.method(this.currentFrame,c[0],d[0]-c[0],this.totalFrames),this.method(this.currentFrame,c[1],d[1]-c[1],this.totalFrames)]:b.doMethod.call(this,a,c,d)},c.getAttribute=function(a){var c=null,d=this.getEl();return c="scroll"==a?[d.scrollLeft,d.scrollTop]:b.getAttribute.call(this,a)},c.setAttribute=function(a,c,d){var e=this.getEl();"scroll"==a?(e.scrollLeft=c[0],e.scrollTop=c[1]):b.setAttribute.call(this,a,c,d)}}()}(),Ext.DomHelper=function(){var a=null,b=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,c=/^table|tbody|tr|td$/i,d=function(a){if("string"==typeof a)return a;var c="";if(Ext.isArray(a)){for(var e=0,f=a.length;f>e;e++)c+=d(a[e]);return c}a.tag||(a.tag="div"),c+="<"+a.tag;for(var g in a)if("tag"!=g&&"children"!=g&&"cn"!=g&&"html"!=g&&"function"!=typeof a[g])if("style"==g){var h=a.style;if("function"==typeof h&&(h=h.call()),"string"==typeof h)c+=' style="'+h+'"';else if("object"==typeof h){c+=' style="';for(var i in h)"function"!=typeof h[i]&&(c+=i+":"+h[i]+";");c+='"'}}else c+="cls"==g?' class="'+a.cls+'"':"htmlFor"==g?' for="'+a.htmlFor+'"':" "+g+'="'+a[g]+'"';if(b.test(a.tag))c+="/>";else{c+=">";var j=a.children||a.cn;j?c+=d(j):a.html&&(c+=a.html),c+="</"+a.tag+">"}return c},e=function(a,b){var c;if(Ext.isArray(a)){c=document.createDocumentFragment();for(var d=0,f=a.length;f>d;d++)e(a[d],c)}else if("string"==typeof a)c=document.createTextNode(a);else{c=document.createElement(a.tag||"div");var g=!!c.setAttribute;for(var h in a)"tag"!=h&&"children"!=h&&"cn"!=h&&"html"!=h&&"style"!=h&&"function"!=typeof a[h]&&("cls"==h?c.className=a.cls:g?c.setAttribute(h,a[h]):c[h]=a[h]);Ext.DomHelper.applyStyles(c,a.style);var i=a.children||a.cn;i?e(i,c):a.html&&(c.innerHTML=a.html)}return b&&b.appendChild(c),c},f=function(b,c,d,e){a.innerHTML=[c,d,e].join("");for(var f=-1,g=a;++f<b;)g=g.firstChild;return g},g="<table>",h="</table>",i=g+"<tbody>",j="</tbody>"+h,k=i+"<tr>",l="</tr>"+j,m=function(b,c,d,e){a||(a=document.createElement("div"));var m,n=null;if("td"==b){if("afterbegin"==c||"beforeend"==c)return;"beforebegin"==c?(n=d,d=d.parentNode):(n=d.nextSibling,d=d.parentNode),m=f(4,k,e,l)}else if("tr"==b)"beforebegin"==c?(n=d,d=d.parentNode,m=f(3,i,e,j)):"afterend"==c?(n=d.nextSibling,d=d.parentNode,m=f(3,i,e,j)):("afterbegin"==c&&(n=d.firstChild),m=f(4,k,e,l));else if("tbody"==b)"beforebegin"==c?(n=d,d=d.parentNode,m=f(2,g,e,h)):"afterend"==c?(n=d.nextSibling,d=d.parentNode,m=f(2,g,e,h)):("afterbegin"==c&&(n=d.firstChild),m=f(3,i,e,j));else{if("beforebegin"==c||"afterend"==c)return;"afterbegin"==c&&(n=d.firstChild),m=f(2,g,e,h)}return d.insertBefore(m,n),m};return{useDom:!1,markup:function(a){return d(a)},applyStyles:function(a,b){if(b)if(a=Ext.fly(a),"string"==typeof b)for(var c,d=/\s?([a-z\-]*)\:\s?([^;]*);?/gi;null!=(c=d.exec(b));)a.setStyle(c[1],c[2]);else if("object"==typeof b)for(var e in b)a.setStyle(e,b[e]);else"function"==typeof b&&Ext.DomHelper.applyStyles(a,b.call())},insertHtml:function(a,b,d){if(a=a.toLowerCase(),b.insertAdjacentHTML){if(c.test(b.tagName)){var e;if(e=m(b.tagName.toLowerCase(),a,b,d))return e}switch(a){case"beforebegin":return b.insertAdjacentHTML("BeforeBegin",d),b.previousSibling;case"afterbegin":return b.insertAdjacentHTML("AfterBegin",d),b.firstChild;case"beforeend":return b.insertAdjacentHTML("BeforeEnd",d),b.lastChild;case"afterend":return b.insertAdjacentHTML("AfterEnd",d),b.nextSibling}throw'Illegal insertion point -> "'+a+'"'}var f,g=b.ownerDocument.createRange();switch(a){case"beforebegin":return g.setStartBefore(b),f=g.createContextualFragment(d),b.parentNode.insertBefore(f,b),b.previousSibling;case"afterbegin":return b.firstChild?(g.setStartBefore(b.firstChild),f=g.createContextualFragment(d),b.insertBefore(f,b.firstChild),b.firstChild):(b.innerHTML=d,b.firstChild);case"beforeend":return b.lastChild?(g.setStartAfter(b.lastChild),f=g.createContextualFragment(d),b.appendChild(f),b.lastChild):(b.innerHTML=d,b.lastChild);case"afterend":return g.setStartAfter(b),f=g.createContextualFragment(d),b.parentNode.insertBefore(f,b.nextSibling),b.nextSibling}throw'Illegal insertion point -> "'+a+'"'},insertBefore:function(a,b,c){return this.doInsert(a,b,c,"beforeBegin")},insertAfter:function(a,b,c){return this.doInsert(a,b,c,"afterEnd","nextSibling")},insertFirst:function(a,b,c){return this.doInsert(a,b,c,"afterBegin","firstChild")},doInsert:function(a,b,c,f,g){a=Ext.getDom(a);var h;if(this.useDom)h=e(b,null),("firstChild"===g?a:a.parentNode).insertBefore(h,g?a[g]:a);else{var i=d(b);h=this.insertHtml(f,a,i)}return c?Ext.get(h,!0):h},append:function(a,b,c){a=Ext.getDom(a);var f;if(this.useDom)f=e(b,null),a.appendChild(f);else{var g=d(b);f=this.insertHtml("beforeEnd",a,g)}return c?Ext.get(f,!0):f},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=d(b),c?Ext.get(a.firstChild,!0):a.firstChild},createTemplate:function(a){var b=d(a);return new Ext.Template(b)}}}(),Ext.Template=function(a){var b=arguments;if(Ext.isArray(a))a=a.join("");else if(b.length>1){for(var c=[],d=0,e=b.length;e>d;d++)"object"==typeof b[d]?Ext.apply(this,b[d]):c[c.length]=b[d];a=c.join("")}this.html=a,this.compiled&&this.compile()},Ext.Template.prototype={applyTemplate:function(a){if(this.compiled)return this.compiled(a);var b=this.disableFormats!==!0,c=Ext.util.Format,d=this,e=function(e,f,g,h){if(g&&b){if("this."==g.substr(0,5))return d.call(g.substr(5),a[f],a);if(h){var i=/^\s*['"](.*)["']\s*$/;h=h.split(",");for(var j=0,k=h.length;k>j;j++)h[j]=h[j].replace(i,"$1");h=[a[f]].concat(h)}else h=[a[f]];return c[g].apply(c,h)}return void 0!==a[f]?a[f]:""};return this.html.replace(this.re,e)},set:function(a,b){return this.html=a,this.compiled=null,b&&this.compile(),this},disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,compile:function(){var fm=Ext.util.Format,useF=this.disableFormats!==!0,sep=Ext.isGecko?"+":",",fn=function(a,b,c,d){return c&&useF?(d=d?","+d:"","this."!=c.substr(0,5)?c="fm."+c+"(":(c='this.call("'+c.substr(5)+'", ',d=", values")):(d="",c="(values['"+b+"'] == undefined ? '' : "),"'"+sep+c+"values['"+b+"']"+d+")"+sep+"'"},body;return Ext.isGecko?body="this.compiled = function(values){ return '"+this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+"';};":(body=["this.compiled = function(values){ return ['"],body.push(this.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)),body.push("'].join('');};"),body=body.join("")),eval(body),this},call:function(a,b,c){return this[a](b,c)},insertFirst:function(a,b,c){return this.doInsert("afterBegin",a,b,c)},insertBefore:function(a,b,c){return this.doInsert("beforeBegin",a,b,c)},insertAfter:function(a,b,c){return this.doInsert("afterEnd",a,b,c)},append:function(a,b,c){return this.doInsert("beforeEnd",a,b,c)},doInsert:function(a,b,c,d){b=Ext.getDom(b);var e=Ext.DomHelper.insertHtml(a,b,this.applyTemplate(c));return d?Ext.get(e,!0):e},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.applyTemplate(b),c?Ext.get(a.firstChild,!0):a.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.DomHelper.Template=Ext.Template,Ext.Template.from=function(a,b){return a=Ext.getDom(a),new Ext.Template(a.value||a.innerHTML,b||"")},Ext.DomQuery=function(){function child(a,b){for(var c=0,d=a.firstChild;d;){if(1==d.nodeType&&++c==b)return d;d=d.nextSibling}return null}function next(a){for(;(a=a.nextSibling)&&1!=a.nodeType;);return a}function prev(a){for(;(a=a.previousSibling)&&1!=a.nodeType;);return a}function children(a){for(var b=a.firstChild,c=-1;b;){var d=b.nextSibling;3!=b.nodeType||nonSpace.test(b.nodeValue)?b.nodeIndex=++c:a.removeChild(b),b=d}return this}function byClassName(a,b,c){if(!c)return a;for(var d,e=[],f=-1,g=0;d=a[g];g++)-1!=(" "+d.className+" ").indexOf(c)&&(e[++f]=d);return e}function attrValue(a,b){return a.tagName||"undefined"==typeof a.length||(a=a[0]),a?"for"==b?a.htmlFor:"class"==b||"className"==b?a.className:a.getAttribute(b)||a[b]:null}function getNodes(a,b,c){var d,e=[],f=-1;if(!a)return e;if(c=c||"*","undefined"!=typeof a.getElementsByTagName&&(a=[a]),b){if("/"==b||">"==b)for(var g,h,i=c.toUpperCase(),j=0;g=a[j];j++){h=opera?g.childNodes:g.children||g.childNodes;for(var k,l=0;k=h[l];l++)(k.nodeName==i||k.nodeName==c||"*"==c)&&(e[++f]=k)}else if("+"==b)for(var m,i=c.toUpperCase(),j=0;m=a[j];j++){for(;(m=m.nextSibling)&&1!=m.nodeType;);!m||m.nodeName!=i&&m.nodeName!=c&&"*"!=c||(e[++f]=m)}else if("~"==b)for(var m,i=c.toUpperCase(),j=0;m=a[j];j++)for(;m=m.nextSibling;)(m.nodeName==i||m.nodeName==c||"*"==c)&&(e[++f]=m)}else for(var g,j=0;g=a[j];j++){d=g.getElementsByTagName(c);for(var n,l=0;n=d[l];l++)e[++f]=n}return e}function concat(a,b){if(b.slice)return a.concat(b);for(var c=0,d=b.length;d>c;c++)a[a.length]=b[c];return a}function byTag(a,b){if((a.tagName||a==document)&&(a=[a]),!b)return a;var c=[],d=-1;b=b.toLowerCase();for(var e,f=0;e=a[f];f++)1==e.nodeType&&e.tagName.toLowerCase()==b&&(c[++d]=e);return c}function byId(a,b,c){if((a.tagName||a==document)&&(a=[a]),!c)return a;for(var d,e=[],f=-1,g=0;d=a[g];g++)if(d&&d.id==c)return e[++f]=d,e;return e}function byAttribute(a,b,c,d,e){for(var f,g=[],h=-1,i="{"==e,j=Ext.DomQuery.operators[d],k=0;f=a[k];k++)if(1==f.nodeType){var l;l=i?Ext.DomQuery.getStyle(f,b):"class"==b||"className"==b?f.className:"for"==b?f.htmlFor:"href"==b?f.getAttribute("href",2):f.getAttribute(b),(j&&j(l,c)||!j&&l)&&(g[++h]=f)}return g}function byPseudo(a,b,c){return Ext.DomQuery.pseudos[b](a,c)}function nodupIEXml(a){var b=++key;a[0].setAttribute("_nodup",b);for(var c=[a[0]],d=1,e=a.length;e>d;d++){var f=a[d];!f.getAttribute("_nodup")!=b&&(f.setAttribute("_nodup",b),c[c.length]=f)}for(var d=0,e=a.length;e>d;d++)a[d].removeAttribute("_nodup");return c}function nodup(a){if(!a)return[];var b,c,d,e=a.length,f=a,g=-1;if(!e||"undefined"!=typeof a.nodeType||1==e)return a;if(isIE&&"undefined"!=typeof a[0].selectSingleNode)return nodupIEXml(a);var h=++key;for(a[0]._nodup=h,c=1;b=a[c];c++){if(b._nodup==h){f=[];for(var i=0;c>i;i++)f[++g]=a[i];for(i=c+1;d=a[i];i++)d._nodup!=h&&(d._nodup=h,f[++g]=d);return f}b._nodup=h}return f}function quickDiffIEXml(a,b){for(var c=++key,d=0,e=a.length;e>d;d++)a[d].setAttribute("_qdiff",c);for(var f=[],d=0,e=b.length;e>d;d++)b[d].getAttribute("_qdiff")!=c&&(f[f.length]=b[d]);for(var d=0,e=a.length;e>d;d++)a[d].removeAttribute("_qdiff");return f}function quickDiff(a,b){var c=a.length;if(!c)return b;if(isIE&&a[0].selectSingleNode)return quickDiffIEXml(a,b);for(var d=++key,e=0;c>e;e++)a[e]._qdiff=d;for(var f=[],e=0,g=b.length;g>e;e++)b[e]._qdiff!=d&&(f[f.length]=b[e]);return f}function quickId(a,b,c,d){if(a==c){var e=c.ownerDocument||c;return e.getElementById(d)}return a=getNodes(a,b,"*"),byId(a,null,d)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,opera=Ext.isOpera,isIE=window.ActiveXObject?!0:!1;eval("var batch = 30803;");var key=30803;return{getStyle:function(a,b){return Ext.fly(a).getStyle(b)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],q=path,mode,lq,tk=Ext.DomQuery.matchers,tklen=tk.length,mm,lmode=q.match(modeRe);for(lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',q=q.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;q&&lq!=q;){lq=q;var tm=q.match(tagTokenRe);for("select"==type?tm?(fn[fn.length]="#"==tm[1]?'n = quickId(n, mode, root, "'+tm[2]+'");':'n = getNodes(n, mode, "'+tm[2]+'");',q=q.replace(tm[0],"")):"@"!=q.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tm&&(fn[fn.length]="#"==tm[1]?'n = byId(n, null, "'+tm[2]+'");':'n = byTag(n, "'+tm[2]+'");',q=q.replace(tm[0],""));!(mm=q.match(modeRe));){for(var matched=!1,j=0;tklen>j;j++){var t=tk[j],m=q.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(a,b){return m[b]}),q=q.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+q+'"'}mm[1]&&(fn[fn.length]='mode="'+mm[1].replace(trimRe,"")+'";',q=q.replace(mm[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},select:function(a,b){b&&b!=document||(b=document),"string"==typeof b&&(b=document.getElementById(b));for(var c=a.split(","),d=[],e=0,f=c.length;f>e;e++){var g=c[e].replace(trimRe,"");if(!cache[g]&&(cache[g]=Ext.DomQuery.compile(g),!cache[g]))throw g+" is not a valid selector";var h=cache[g](b);h&&h!=document&&(d=d.concat(h))}return c.length>1?nodup(d):d},selectNode:function(a,b){return Ext.DomQuery.select(a,b)[0]},selectValue:function(a,b,c){a=a.replace(trimRe,""),valueCache[a]||(valueCache[a]=Ext.DomQuery.compile(a,"select"));var d=valueCache[a](b);d=d[0]?d[0]:d;var e=d&&d.firstChild?d.firstChild.nodeValue:null;return null===e||void 0===e||""===e?c:e},selectNumber:function(a,b,c){var d=Ext.DomQuery.selectValue(a,b,c||0);return parseFloat(d)},is:function(a,b){"string"==typeof a&&(a=document.getElementById(a));var c=Ext.isArray(a),d=Ext.DomQuery.filter(c?a:[a],b);return c?d.length==a.length:d.length>0},filter:function(a,b,c){b=b.replace(trimRe,""),simpleCache[b]||(simpleCache[b]=Ext.DomQuery.compile(b,"simple"));var d=simpleCache[b](a);return c?quickDiff(d,a):d},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, null, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, null, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"^=":function(a,b){return a&&a.substr(0,b.length)==b},"$=":function(a,b){return a&&a.substr(a.length-b.length)==b},"*=":function(a,b){return a&&-1!==a.indexOf(b)},"%=":function(a,b){return a%b==0},"|=":function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+"-")},"~=":function(a,b){return a&&-1!=(" "+a+" ").indexOf(" "+b+" ")}},pseudos:{"first-child":function(a){for(var b,c,d=[],e=-1,f=0;c=b=a[f];f++){for(;(b=b.previousSibling)&&1!=b.nodeType;);b||(d[++e]=c)}return d},"last-child":function(a){for(var b,c,d=[],e=-1,f=0;c=b=a[f];f++){for(;(b=b.nextSibling)&&1!=b.nodeType;);b||(d[++e]=c)}return d},"nth-child":function(a,b){for(var c,d=[],e=-1,f=nthRe.exec("even"==b&&"2n"||"odd"==b&&"2n+1"||!nthRe2.test(b)&&"n+"+b||b),g=(f[1]||1)-0,h=f[2]-0,i=0;c=a[i];i++){var j=c.parentNode;if(batch!=j._batch){for(var k=0,l=j.firstChild;l;l=l.nextSibling)1==l.nodeType&&(l.nodeIndex=++k);j._batch=batch}1==g?(0==h||c.nodeIndex==h)&&(d[++e]=c):(c.nodeIndex+h)%g==0&&(d[++e]=c)}return d},"only-child":function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++)prev(b)||next(b)||(c[++d]=b);return c},empty:function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++){for(var f,g=b.childNodes,h=0,i=!0;f=g[h];)if(++h,1==f.nodeType||3==f.nodeType){i=!1;break}i&&(c[++d]=b)}return c},contains:function(a,b){for(var c,d=[],e=-1,f=0;c=a[f];f++)-1!=(c.textContent||c.innerText||"").indexOf(b)&&(d[++e]=c);return d},nodeValue:function(a,b){for(var c,d=[],e=-1,f=0;c=a[f];f++)c.firstChild&&c.firstChild.nodeValue==b&&(d[++e]=c);return d},checked:function(a){for(var b,c=[],d=-1,e=0;b=a[e];e++)1==b.checked&&(c[++d]=b);return c},not:function(a,b){return Ext.DomQuery.filter(a,b,!0)},any:function(a,b){for(var c,d,e=b.split("|"),f=[],g=-1,h=0;d=a[h];h++)for(var i=0;c=e[i];i++)if(Ext.DomQuery.is(d,c)){f[++g]=d;break}return f},odd:function(a){return this["nth-child"](a,"odd")},even:function(a){return this["nth-child"](a,"even")},nth:function(a,b){return a[b-1]||[]},first:function(a){return a[0]||[]},last:function(a){return a[a.length-1]||[]},has:function(a,b){for(var c,d=Ext.DomQuery.select,e=[],f=-1,g=0;c=a[g];g++)d(b,c).length>0&&(e[++f]=c);return e},next:function(a,b){for(var c,d=Ext.DomQuery.is,e=[],f=-1,g=0;c=a[g];g++){var h=next(c);h&&d(h,b)&&(e[++f]=c)}return e},prev:function(a,b){for(var c,d=Ext.DomQuery.is,e=[],f=-1,g=0;c=a[g];g++){var h=prev(c);h&&d(h,b)&&(e[++f]=c)}return e}}}}(),Ext.query=Ext.DomQuery.select,Ext.util.Observable=function(){this.listeners&&(this.on(this.listeners),delete this.listeners)},Ext.util.Observable.prototype={fireEvent:function(){if(this.eventsSuspended!==!0){var a=this.events[arguments[0].toLowerCase()];if("object"==typeof a)return a.fire.apply(a,Array.prototype.slice.call(arguments,1))}return!0},filterOptRe:/^(?:scope|delay|buffer|single)$/,addListener:function(a,b,c,d){if("object"!=typeof a){d=d&&"boolean"!=typeof d?d:{},a=a.toLowerCase();var e=this.events[a]||!0;"boolean"==typeof e&&(e=new Ext.util.Event(this,a),this.events[a]=e),e.addListener(b,c,d)}else{d=a;for(var f in d)this.filterOptRe.test(f)||("function"==typeof d[f]?this.addListener(f,d[f],d.scope,d):this.addListener(f,d[f].fn,d[f].scope,d[f]))}},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];"object"==typeof d&&d.removeListener(b,c)},purgeListeners:function(){for(var a in this.events)"object"==typeof this.events[a]&&this.events[a].clearListeners()},relayEvents:function(a,b){for(var c=function(a){return function(){return this.fireEvent.apply(this,Ext.combine(a,Array.prototype.slice.call(arguments,0)))}},d=0,e=b.length;e>d;d++){var f=b[d];this.events[f]||(this.events[f]=!0),a.on(f,c(f),this)}},addEvents:function(a){if(this.events||(this.events={}),"string"==typeof a)for(var b,c=0,d=arguments;b=d[c];c++)this.events[d[c]]||(this.events[d[c]]=!0);else Ext.applyIf(this.events,a)},hasListener:function(a){var b=this.events[a];return"object"==typeof b&&b.listeners.length>0},suspendEvents:function(){this.eventsSuspended=!0},resumeEvents:function(){this.eventsSuspended=!1},getMethodEvent:function(a){this.methodEvents||(this.methodEvents={});var b=this.methodEvents[a];if(!b){b={},this.methodEvents[a]=b,b.originalFn=this[a],b.methodName=a,b.before=[],b.after=[];var c,d,e,f=this,g=function(a,b,g){void 0!==(d=a.apply(b||f,g))&&("object"==typeof d?(c=void 0!==d.returnValue?d.returnValue:d,d.cancel===!0&&(e=!0)):d===!1?e=!0:c=d)};this[a]=function(){c=d=void 0,e=!1;for(var a=Array.prototype.slice.call(arguments,0),h=0,i=b.before.length;i>h;h++)if(g(b.before[h].fn,b.before[h].scope,a),e)return c;void 0!==(d=b.originalFn.apply(f,a))&&(c=d);for(var h=0,i=b.after.length;i>h;h++)if(g(b.after[h].fn,b.after[h].scope,a),e)return c;return c}}return b},beforeMethod:function(a,b,c){var d=this.getMethodEvent(a);d.before.push({fn:b,scope:c})},afterMethod:function(a,b,c){var d=this.getMethodEvent(a);d.after.push({fn:b,scope:c})},removeMethodListener:function(a,b,c){for(var d=this.getMethodEvent(a),e=0,f=d.before.length;f>e;e++)if(d.before[e].fn==b&&d.before[e].scope==c)return d.before.splice(e,1),void 0;for(var e=0,f=d.after.length;f>e;e++)if(d.after[e].fn==b&&d.after[e].scope==c)return d.after.splice(e,1),void 0}},Ext.util.Observable.prototype.on=Ext.util.Observable.prototype.addListener,Ext.util.Observable.prototype.un=Ext.util.Observable.prototype.removeListener,Ext.util.Observable.capture=function(a,b,c){a.fireEvent=a.fireEvent.createInterceptor(b,c)},Ext.util.Observable.releaseCapture=function(a){a.fireEvent=Ext.util.Observable.prototype.fireEvent},function(){var a=function(a,b,c){var d=new Ext.util.DelayedTask;return function(){d.delay(b.buffer,a,c,Array.prototype.slice.call(arguments,0))}},b=function(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}},c=function(a,b,c){return function(){var d=Array.prototype.slice.call(arguments,0);setTimeout(function(){a.apply(c,d)},b.delay||10)}};Ext.util.Event=function(a,b){this.name=b,this.obj=a,this.listeners=[]},Ext.util.Event.prototype={addListener:function(a,b,c){if(b=b||this.obj,!this.isListening(a,b)){var d=this.createListener(a,b,c);this.firing?(this.listeners=this.listeners.slice(0),this.listeners.push(d)):this.listeners.push(d)}},createListener:function(d,e,f){f=f||{},e=e||this.obj;var g={fn:d,scope:e,options:f},h=d;return f.delay&&(h=c(h,f,e)),f.single&&(h=b(h,this,d,e)),f.buffer&&(h=a(h,f,e)),g.fireFn=h,g},findListener:function(a,b){b=b||this.obj;for(var c=this.listeners,d=0,e=c.length;e>d;d++){var f=c[d];if(f.fn==a&&f.scope==b)return d}return-1},isListening:function(a,b){return-1!=this.findListener(a,b)},removeListener:function(a,b){var c;return-1!=(c=this.findListener(a,b))?(this.firing?(this.listeners=this.listeners.slice(0),this.listeners.splice(c,1)):this.listeners.splice(c,1),!0):!1},clearListeners:function(){this.listeners=[]},fire:function(){var a=this.listeners,b=a.length;if(b>0){this.firing=!0;for(var c=(Array.prototype.slice.call(arguments,0),0);b>c;c++){var d=a[c];if(d.fireFn.apply(d.scope||this.obj||window,arguments)===!1)return this.firing=!1,!1}this.firing=!1}return!0}}}(),Ext.EventManager=function(){var a,b,c,d,e,f,g=!1,h=Ext.lib.Event,i=Ext.lib.Dom,j="Ext",k={},l=function(a,b,c,d,e){var f=Ext.id(a);k[f]||(k[f]={});var g=k[f];g[b]||(g[b]=[]);var i=g[b];i.push({id:f,ename:b,fn:c,wrap:d,scope:e}),h.on(a,b,d),"mousewheel"==b&&a.addEventListener&&(a.addEventListener("DOMMouseScroll",d,!1),h.on(window,"unload",function(){a.removeEventListener("DOMMouseScroll",d,!1)})),"mousedown"==b&&a==document&&Ext.EventManager.stoppedMouseDownEvent.addListener(d)},m=function(a,b,c,d){a=Ext.getDom(a);var e,f=Ext.id(a),g=k[f];if(g){var i,j=g[b];if(j)for(var l=0,m=j.length;m>l;l++)if(i=j[l],i.fn==c&&(!d||i.scope==d)){e=i.wrap,h.un(a,b,e),j.splice(l,1);break}}"mousewheel"==b&&a.addEventListener&&e&&a.removeEventListener("DOMMouseScroll",e,!1),"mousedown"==b&&a==document&&e&&Ext.EventManager.stoppedMouseDownEvent.removeListener(e)},n=function(a){a=Ext.getDom(a);var b,c=Ext.id(a),d=k[c];if(d){for(var e in d){if(d.hasOwnProperty(e)){b=d[e];for(var f=0,g=b.length;g>f;f++)h.un(a,e,b[f].wrap),b[f]=null}d[e]=null}delete k[c]}},o=function(){if(!g){if(g=!0,Ext.isReady=!0,b&&clearInterval(b),(Ext.isGecko||Ext.isOpera)&&document.removeEventListener("DOMContentLoaded",o,!1),Ext.isIE){var c=document.getElementById("ie-deferred-loader");c&&(c.onreadystatechange=null,c.parentNode.removeChild(c))}a&&(a.fire(),a.clearListeners())}},p=function(){if(a=new Ext.util.Event,Ext.isGecko||Ext.isOpera)document.addEventListener("DOMContentLoaded",o,!1);else if(Ext.isIE){document.write('<script id="ie-deferred-loader" defer="defer" src="//:"></script>');var c=document.getElementById("ie-deferred-loader");c.onreadystatechange=function(){"complete"==this.readyState&&o()}}else Ext.isWebKit&&(b=setInterval(function(){var a=document.readyState;"complete"==a&&o()},10));h.on(window,"load",o)},q=function(a,b){var c=new Ext.util.DelayedTask(a);return function(d){d=new Ext.EventObjectImpl(d),c.delay(b.buffer,a,null,[d])}},r=function(a,b,c,d,e){return function(f){Ext.EventManager.removeListener(b,c,d,e),a(f)}},s=function(a,b){return function(c){c=new Ext.EventObjectImpl(c),setTimeout(function(){a(c)},b.delay||10)}},t=function(a,b,c,d,e){var f=c&&"boolean"!=typeof c?c:{};d=d||f.fn,e=e||f.scope;var g=Ext.getDom(a);if(!g)throw'Error listening for "'+b+'". Element "'+a+"\" doesn't exist.";var h=function(a){if(window[j]){a=Ext.EventObject.setEvent(a);var b;if(f.delegate){if(b=a.getTarget(f.delegate,g),!b)return}else b=a.target;f.stopEvent===!0&&a.stopEvent(),f.preventDefault===!0&&a.preventDefault(),f.stopPropagation===!0&&a.stopPropagation(),f.normalized===!1&&(a=a.browserEvent),d.call(e||g,a,b,f)}};return f.delay&&(h=s(h,f)),f.single&&(h=r(h,g,b,d,e)),f.buffer&&(h=q(h,f)),l(g,b,d,h,e),h},u=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,v=0,w=0,x={addListener:function(a,b,c,d,e){if("object"!=typeof b)return t(a,b,e,c,d);var f=b;for(var g in f)u.test(g)||("function"==typeof f[g]?t(a,g,f,f[g],f.scope):t(a,g,f[g]))},removeListener:function(a,b,c,d){return m(a,b,c,d)},removeAll:function(a){return n(a)},onDocumentReady:function(b,c,d){return g?(a.addListener(b,c,d),a.fire(),a.clearListeners(),void 0):(a||p(),d=d||{},d.delay||(d.delay=1),a.addListener(b,c,d),void 0)},doResizeEvent:function(){var a=i.getViewHeight(),b=i.getViewWidth();(w!=a||v!=b)&&c.fire(v=b,w=a)},onWindowResize:function(a,b,e){c||(c=new Ext.util.Event,d=new Ext.util.DelayedTask(this.doResizeEvent),h.on(window,"resize",this.fireWindowResize,this)),c.addListener(a,b,e)},fireWindowResize:function(){c&&((Ext.isIE||Ext.isAir)&&d?d.delay(50):c.fire(i.getViewWidth(),i.getViewHeight()))},onTextResize:function(a,b,c){if(!e){e=new Ext.util.Event;var d=new Ext.Element(document.createElement("div"));d.dom.className="x-text-resize",d.dom.innerHTML="X",d.appendTo(document.body),f=d.dom.offsetHeight,setInterval(function(){d.dom.offsetHeight!=f&&e.fire(f,f=d.dom.offsetHeight)},this.textResizeInterval)}e.addListener(a,b,c)},removeResizeListener:function(a,b){c&&c.removeListener(a,b)},fireResize:function(){c&&c.fire(i.getViewWidth(),i.getViewHeight())},ieDeferSrc:!1,textResizeInterval:50};return x.on=x.addListener,x.un=x.removeListener,x.stoppedMouseDownEvent=new Ext.util.Event,x}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){var a=function(){var a=document.body||document.getElementsByTagName("body")[0];if(!a)return!1;var b=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":Ext.isIE7?"ext-ie7":"ext-ie8"):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isSafari?"ext-safari":Ext.isChrome?"ext-chrome":""];if(Ext.isMac&&b.push("ext-mac"),Ext.isLinux&&b.push("ext-linux"),Ext.isStrict||Ext.isBorderBox){var c=a.parentNode;c&&(c.className+=Ext.isStrict?" ext-strict":" ext-border-box")}return a.className+=b.join(" "),!0};a()||Ext.onReady(a)}(),Ext.EventObject=function(){var a=Ext.lib.Event,b={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},c=Ext.isIE?{1:0,4:1,2:2}:Ext.isWebKit?{1:0,2:1,3:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(a){a&&this.setEvent(a.browserEvent||a)},Ext.EventObjectImpl.prototype={browserEvent:null,button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,setEvent:function(b){return b==this||b&&b.browserEvent?b:(this.browserEvent=b,b?(this.button=b.button?c[b.button]:b.which?b.which-1:-1,"click"==b.type&&-1==this.button&&(this.button=0),this.type=b.type,this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey||b.metaKey,this.altKey=b.altKey,this.keyCode=b.keyCode,this.charCode=b.charCode,this.target=a.getTarget(b),this.xy=a.getXY(b)):(this.button=-1,this.shiftKey=!1,this.ctrlKey=!1,this.altKey=!1,this.keyCode=0,this.charCode=0,this.target=null,this.xy=[0,0]),this)},stopEvent:function(){this.browserEvent&&("mousedown"==this.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(this),a.stopEvent(this.browserEvent))},preventDefault:function(){this.browserEvent&&a.preventDefault(this.browserEvent)},isNavKeyPress:function(){var a=this.keyCode;return a=Ext.isSafari?b[a]||a:a,a>=33&&40>=a||a==this.RETURN||a==this.TAB||a==this.ESC},isSpecialKey:function(){var a=this.keyCode;return a=Ext.isSafari?b[a]||a:a,"keypress"==this.type&&this.ctrlKey||this.isNavKeyPress()||a==this.BACKSPACE||a>=16&&20>=a||a>=44&&45>=a},stopPropagation:function(){this.browserEvent&&("mousedown"==this.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(this),a.stopPropagation(this.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var a=this.keyCode||this.charCode;return Ext.isSafari?b[a]||a:a},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getTime:function(){return this.browserEvent?a.getTime(this.browserEvent):null
},getXY:function(){return this.xy},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?a.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var a=this.browserEvent,b=0;return a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey?!0:!1},within:function(a,b,c){var d=this[b?"getRelatedTarget":"getTarget"]();return d&&((c?d===Ext.getDom(a):!1)||Ext.fly(a).contains(d))},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])}},new Ext.EventObjectImpl}(),function(){var a=Ext.lib.Dom,b=Ext.lib.Event,c=Ext.lib.Anim,d={},e=/(-[a-z])/gi,f=function(a,b){return b.charAt(1).toUpperCase()},g=document.defaultView;Ext.Element=function(a,b){var c="string"==typeof a?document.getElementById(a):a;if(!c)return null;var d=c.id;return b!==!0&&d&&Ext.Element.cache[d]?Ext.Element.cache[d]:(this.dom=c,this.id=d||Ext.id(c),void 0)};var h=Ext.Element;h.prototype={originalDisplay:"",visibilityMode:1,defaultUnit:"px",setVisibilityMode:function(a){return this.visibilityMode=a,this},enableDisplayMode:function(a){return this.setVisibilityMode(h.DISPLAY),"undefined"!=typeof a&&(this.originalDisplay=a),this},findParent:function(a,b,c){var d,e=this.dom,f=document.body,g=0,h=Ext.DomQuery;for(b=b||50,"number"!=typeof b&&(d=Ext.getDom(b),b=Number.MAX_VALUE);e&&1==e.nodeType&&b>g&&e!=f&&e!=d;){if(h.is(e,a))return c?Ext.get(e):e;g++,e=e.parentNode}return null},findParentNode:function(a,b,c){var d=Ext.fly(this.dom.parentNode,"_internal");return d?d.findParent(a,b,c):null},up:function(a,b){return this.findParentNode(a,b,!0)},is:function(a){return Ext.DomQuery.is(this.dom,a)},animate:function(a,b,c,d,e){return this.anim(a,{duration:b,callback:c,easing:d},e),this},anim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=Ext.lib.Anim[c](this.dom,a,b.duration||d||.35,b.easing||e||"easeOut",function(){Ext.callback(f,this),Ext.callback(b.callback,b.scope||this,[this,b])},this);return b.anim=g,g},preanim:function(a,b){return a[b]?"object"==typeof a[b]?a[b]:{duration:a[b+1],callback:a[b+2],easing:a[b+3]}:!1},clean:function(a){if(this.isCleaned&&a!==!0)return this;for(var b=/\S/,c=this.dom,d=c.firstChild,e=-1;d;){var f=d.nextSibling;3!=d.nodeType||b.test(d.nodeValue)?d.nodeIndex=++e:c.removeChild(d),d=f}return this.isCleaned=!0,this},scrollIntoView:function(a,b){var c=Ext.getDom(a)||Ext.getBody().dom,d=this.dom,e=this.getOffsetsTo(c),f=e[0]+c.scrollLeft,g=e[1]+c.scrollTop,h=g+d.offsetHeight,i=f+d.offsetWidth,j=c.clientHeight,k=parseInt(c.scrollTop,10),l=parseInt(c.scrollLeft,10),m=k+j,n=l+c.clientWidth;return d.offsetHeight>j||k>g?c.scrollTop=g:h>m&&(c.scrollTop=h-j),c.scrollTop=c.scrollTop,b!==!1&&(d.offsetWidth>c.clientWidth||l>f?c.scrollLeft=f:i>n&&(c.scrollLeft=i-c.clientWidth),c.scrollLeft=c.scrollLeft),this},scrollChildIntoView:function(a,b){Ext.fly(a,"_scrollChildIntoView").scrollIntoView(this,b)},autoHeight:function(a,b,c,d){var e=this.getHeight();return this.clip(),this.setHeight(1),setTimeout(function(){var f=parseInt(this.dom.scrollHeight,10);a?(this.setHeight(e),this.setHeight(f,a,b,function(){this.unclip(),"function"==typeof c&&c()}.createDelegate(this),d)):(this.setHeight(f),this.unclip(),"function"==typeof c&&c())}.createDelegate(this),0),this},contains:function(b){return b?a.isAncestor(this.dom,b.dom?b.dom:b):!1},isVisible:function(a){var b=!("hidden"==this.getStyle("visibility")||"none"==this.getStyle("display"));if(a!==!0||!b)return b;for(var c=this.dom.parentNode;c&&"body"!=c.tagName.toLowerCase();){if(!Ext.fly(c,"_isVisible").isVisible())return!1;c=c.parentNode}return!0},select:function(a,b){return h.select(a,b,this.dom)},query:function(a){return Ext.DomQuery.select(a,this.dom)},child:function(a,b){var c=Ext.DomQuery.selectNode(a,this.dom);return b?c:Ext.get(c)},down:function(a,b){var c=Ext.DomQuery.selectNode(" > "+a,this.dom);return b?c:Ext.get(c)},initDD:function(a,b,c){var d=new Ext.dd.DD(Ext.id(this.dom),a,b);return Ext.apply(d,c)},initDDProxy:function(a,b,c){var d=new Ext.dd.DDProxy(Ext.id(this.dom),a,b);return Ext.apply(d,c)},initDDTarget:function(a,b,c){var d=new Ext.dd.DDTarget(Ext.id(this.dom),a,b);return Ext.apply(d,c)},setVisible:function(a,b){if(b&&c){var d=this.dom,e=this.visibilityMode;a&&(this.setOpacity(.01),this.setVisible(!0)),this.anim({opacity:{to:a?1:0}},this.preanim(arguments,1),null,.35,"easeIn",function(){a||(e==h.DISPLAY?d.style.display="none":d.style.visibility="hidden",Ext.get(d).setOpacity(1))})}else this.visibilityMode==h.DISPLAY?this.setDisplayed(a):(this.fixDisplay(),this.dom.style.visibility=a?"visible":"hidden");return this},isDisplayed:function(){return"none"!=this.getStyle("display")},toggle:function(){return this.setVisible(!this.isVisible(),this.preanim(arguments,0)),this},setDisplayed:function(a){return"boolean"==typeof a&&(a=a?this.originalDisplay:"none"),this.setStyle("display",a),this},focus:function(){try{this.dom.focus()}catch(a){}return this},blur:function(){try{this.dom.blur()}catch(a){}return this},addClass:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;c>b;b++)this.addClass(a[b]);else a&&!this.hasClass(a)&&(this.dom.className=this.dom.className+" "+a);return this},radioClass:function(a){for(var b=this.dom.parentNode.childNodes,c=0;c<b.length;c++){var d=b[c];1==d.nodeType&&Ext.get(d).removeClass(a)}return this.addClass(a),this},removeClass:function(a){if(!a||!this.dom.className)return this;if(Ext.isArray(a))for(var b=0,c=a.length;c>b;b++)this.removeClass(a[b]);else if(this.hasClass(a)){var d=this.classReCache[a];d||(d=new RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)","g"),this.classReCache[a]=d),this.dom.className=this.dom.className.replace(d," ")}return this},classReCache:{},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a),this},hasClass:function(a){return a&&-1!=(" "+this.dom.className+" ").indexOf(" "+a+" ")},replaceClass:function(a,b){return this.removeClass(a),this.addClass(b),this},getStyles:function(){for(var a=arguments,b=a.length,c={},d=0;b>d;d++)c[a[d]]=this.getStyle(a[d]);return c},getStyle:function(){return g&&g.getComputedStyle?function(a){var b,c,h,i=this.dom;return"float"==a&&(a="cssFloat"),(b=i.style[a])?b:(c=g.getComputedStyle(i,""))?((h=d[a])||(h=d[a]=a.replace(e,f)),c[h]):null}:function(a){var b,c,g,h=this.dom;if("opacity"==a){if("string"==typeof h.style.filter){var i=h.style.filter.match(/alpha\(opacity=(.*)\)/i);if(i){var j=parseFloat(i[1]);if(!isNaN(j))return j?j/100:0}}return 1}return"float"==a&&(a="styleFloat"),(g=d[a])||(g=d[a]=a.replace(e,f)),(b=h.style[g])?b:(c=h.currentStyle)?c[g]:null}}(),setStyle:function(a,b){if("string"==typeof a){var c;(c=d[a])||(c=d[a]=a.replace(e,f)),"opacity"==c?this.setOpacity(b):this.dom.style[c]=b}else for(var g in a)"function"!=typeof a[g]&&this.setStyle(g,a[g]);return this},applyStyles:function(a){return Ext.DomHelper.applyStyles(this.dom,a),this},getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(a){var b=this.getXY(),c=Ext.fly(a,"_internal").getXY();return[b[0]-c[0],b[1]-c[1]]},setX:function(b,d){return d&&c?this.setXY([b,this.getY()],this.preanim(arguments,1)):a.setX(this.dom,b),this},setY:function(b,d){return d&&c?this.setXY([this.getX(),b],this.preanim(arguments,1)):a.setY(this.dom,b),this},setLeft:function(a){return this.setStyle("left",this.addUnits(a)),this},setTop:function(a){return this.setStyle("top",this.addUnits(a)),this},setRight:function(a){return this.setStyle("right",this.addUnits(a)),this},setBottom:function(a){return this.setStyle("bottom",this.addUnits(a)),this},setXY:function(b,d){return d&&c?this.anim({points:{to:b}},this.preanim(arguments,1),"motion"):a.setXY(this.dom,b),this},setLocation:function(a,b){return this.setXY([a,b],this.preanim(arguments,2)),this},moveTo:function(a,b){return this.setXY([a,b],this.preanim(arguments,2)),this},getRegion:function(){return a.getRegion(this.dom)},getHeight:function(a){var b=Math.max(this.dom.offsetHeight,this.dom.clientHeight)||0;return b=a!==!0?b:b-this.getBorderWidth("tb")-this.getPadding("tb"),0>b?0:b},getWidth:function(a){var b=Math.max(this.dom.offsetWidth,this.dom.clientWidth)||0;return b=a!==!0?b:b-this.getBorderWidth("lr")-this.getPadding("lr"),0>b?0:b},getComputedHeight:function(){var a=Math.max(this.dom.offsetHeight,this.dom.clientHeight);return a||(a=parseInt(this.getStyle("height"),10)||0,this.isBorderBox()||(a+=this.getFrameWidth("tb"))),a},getComputedWidth:function(){var a=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return a||(a=parseInt(this.getStyle("width"),10)||0,this.isBorderBox()||(a+=this.getFrameWidth("lr"))),a},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},getStyleSize:function(){var a,b,c=this.dom,d=c.style;return d.width&&"auto"!=d.width&&(a=parseInt(d.width,10),Ext.isBorderBox&&(a-=this.getFrameWidth("lr"))),d.height&&"auto"!=d.height&&(b=parseInt(d.height,10),Ext.isBorderBox&&(b-=this.getFrameWidth("tb"))),{width:a||this.getWidth(!0),height:b||this.getHeight(!0)}},getViewSize:function(){var b=this.dom,c=document;return b==c||b==c.body?{width:a.getViewWidth(),height:a.getViewHeight()}:{width:b.clientWidth,height:b.clientHeight}},getValue:function(a){return a?parseInt(this.dom.value,10):this.dom.value},adjustWidth:function(a){return"number"==typeof a&&(this.autoBoxAdjust&&!this.isBorderBox()&&(a-=this.getBorderWidth("lr")+this.getPadding("lr")),0>a&&(a=0)),a},adjustHeight:function(a){return"number"==typeof a&&(this.autoBoxAdjust&&!this.isBorderBox()&&(a-=this.getBorderWidth("tb")+this.getPadding("tb")),0>a&&(a=0)),a},setWidth:function(a,b){return a=this.adjustWidth(a),b&&c?this.anim({width:{to:a}},this.preanim(arguments,1)):this.dom.style.width=this.addUnits(a),this},setHeight:function(a,b){return a=this.adjustHeight(a),b&&c?this.anim({height:{to:a}},this.preanim(arguments,1)):this.dom.style.height=this.addUnits(a),this},setSize:function(a,b,d){return"object"==typeof a&&(b=a.height,a=a.width),a=this.adjustWidth(a),b=this.adjustHeight(b),d&&c?this.anim({width:{to:a},height:{to:b}},this.preanim(arguments,2)):(this.dom.style.width=this.addUnits(a),this.dom.style.height=this.addUnits(b)),this},setBounds:function(a,b,d,e,f){return f&&c?(d=this.adjustWidth(d),e=this.adjustHeight(e),this.anim({points:{to:[a,b]},width:{to:d},height:{to:e}},this.preanim(arguments,4),"motion")):(this.setSize(d,e),this.setLocation(a,b)),this},setRegion:function(a){return this.setBounds(a.left,a.top,a.right-a.left,a.bottom-a.top,this.preanim(arguments,1)),this},addListener:function(a,b,c,d){Ext.EventManager.on(this.dom,a,b,c||this,d)},removeListener:function(a,b,c){return Ext.EventManager.removeListener(this.dom,a,b,c||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},relayEvent:function(a,b){this.on(a,function(c){b.fireEvent(a,c)})},setOpacity:function(a,b){if(b&&c)this.anim({opacity:{to:a}},this.preanim(arguments,1),null,.35,"easeIn");else{var d=this.dom.style;Ext.isIE?(d.zoom=1,d.filter=(d.filter||"").replace(/alpha\([^\)]*\)/gi,"")+(1==a?"":" alpha(opacity="+100*a+")")):d.opacity=a}return this},getLeft:function(a){return a?parseInt(this.getStyle("left"),10)||0:this.getX()},getRight:function(a){return a?this.getLeft(!0)+this.getWidth()||0:this.getX()+this.getWidth()},getTop:function(a){return a?parseInt(this.getStyle("top"),10)||0:this.getY()},getBottom:function(a){return a?this.getTop(!0)+this.getHeight()||0:this.getY()+this.getHeight()},position:function(a,b,c,d){a?this.setStyle("position",a):"static"==this.getStyle("position")&&this.setStyle("position","relative"),b&&this.setStyle("z-index",b),void 0!==c&&void 0!==d?this.setXY([c,d]):void 0!==c?this.setX(c):void 0!==d&&this.setY(d)},clearPositioning:function(a){return a=a||"",this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:"static"}),this},getPositioning:function(){var a=this.getStyle("left"),b=this.getStyle("top");return{position:this.getStyle("position"),left:a,right:a?"":this.getStyle("right"),top:b,bottom:b?"":this.getStyle("bottom"),"z-index":this.getStyle("z-index")}},getBorderWidth:function(a){return this.addStyles(a,h.borders)},getPadding:function(a){return this.addStyles(a,h.paddings)},setPositioning:function(a){return this.applyStyles(a),"auto"==a.right&&(this.dom.style.right=""),"auto"==a.bottom&&(this.dom.style.bottom=""),this},fixDisplay:function(){"none"==this.getStyle("display")&&(this.setStyle("visibility","hidden"),this.setStyle("display",this.originalDisplay),"none"==this.getStyle("display")&&this.setStyle("display","block"))},setOverflow:function(a){"auto"==a&&Ext.isMac&&Ext.isGecko2?(this.dom.style.overflow="hidden",function(){this.dom.style.overflow="auto"}.defer(1,this)):this.dom.style.overflow=a},setLeftTop:function(a,b){return this.dom.style.left=this.addUnits(a),this.dom.style.top=this.addUnits(b),this},move:function(a,b){var c=this.getXY();switch(a=a.toLowerCase()){case"l":case"left":this.moveTo(c[0]-b,c[1],this.preanim(arguments,2));break;case"r":case"right":this.moveTo(c[0]+b,c[1],this.preanim(arguments,2));break;case"t":case"top":case"up":this.moveTo(c[0],c[1]-b,this.preanim(arguments,2));break;case"b":case"bottom":case"down":this.moveTo(c[0],c[1]+b,this.preanim(arguments,2))}return this},clip:function(){return this.isClipped||(this.isClipped=!0,this.originalClip={o:this.getStyle("overflow"),x:this.getStyle("overflow-x"),y:this.getStyle("overflow-y")},this.setStyle("overflow","hidden"),this.setStyle("overflow-x","hidden"),this.setStyle("overflow-y","hidden")),this},unclip:function(){if(this.isClipped){this.isClipped=!1;var a=this.originalClip;a.o&&this.setStyle("overflow",a.o),a.x&&this.setStyle("overflow-x",a.x),a.y&&this.setStyle("overflow-y",a.y)}return this},getAnchorXY:function(b,c,d){var e,f,g=!1;if(d)e=d.width,f=d.height;else{var h=this.dom;h==document.body||h==document?(g=!0,e=a.getViewWidth(),f=a.getViewHeight()):(e=this.getWidth(),f=this.getHeight())}var i=0,j=0,k=Math.round;switch((b||"tl").toLowerCase()){case"c":i=k(.5*e),j=k(.5*f);break;case"t":i=k(.5*e),j=0;break;case"l":i=0,j=k(.5*f);break;case"r":i=e,j=k(.5*f);break;case"b":i=k(.5*e),j=f;break;case"tl":i=0,j=0;break;case"bl":i=0,j=f;break;case"br":i=e,j=f;break;case"tr":i=e,j=0}if(c===!0)return[i,j];if(g){var l=this.getScroll();return[i+l.left,j+l.top]}var m=this.getXY();return[i+m[0],j+m[1]]},getAlignToXY:function(b,c,d){if(b=Ext.get(b),!b||!b.dom)throw"Element.alignToXY with an element that doesn't exist";var e=(this.dom,!1),f="",g="";d=d||[0,0],c?"?"==c?c="tl-bl?":-1==c.indexOf("-")&&(c="tl-"+c):c="tl-bl",c=c.toLowerCase();var h=c.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!h)throw"Element.alignTo with an invalid alignment "+c;f=h[1],g=h[2],e=!!h[3];var i=this.getAnchorXY(f,!0),j=b.getAnchorXY(g,!1),k=j[0]-i[0]+d[0],l=j[1]-i[1]+d[1];if(e){var m=this.getWidth(),n=this.getHeight(),o=b.getRegion(),p=a.getViewWidth()-5,q=a.getViewHeight()-5,r=f.charAt(0),s=f.charAt(f.length-1),t=g.charAt(0),u=g.charAt(g.length-1),v="t"==r&&"b"==t||"b"==r&&"t"==t,w="r"==s&&"l"==u||"l"==s&&"r"==u,x=document,y=(x.documentElement.scrollLeft||x.body.scrollLeft||0)+5,z=(x.documentElement.scrollTop||x.body.scrollTop||0)+5;k+m>p+y&&(k=w?o.left-m:p+y-m),y>k&&(k=w?o.right:y),l+n>q+z&&(l=v?o.top-n:q+z-n),z>l&&(l=v?o.bottom:z)}return[k,l]},getConstrainToXY:function(){var a={top:0,left:0,bottom:0,right:0};return function(b,c,d,e){b=Ext.get(b),d=d?Ext.applyIf(d,a):a;var f,g,h=0,i=0;if(b.dom==document.body||b.dom==document)f=Ext.lib.Dom.getViewWidth(),g=Ext.lib.Dom.getViewHeight();else if(f=b.dom.clientWidth,g=b.dom.clientHeight,!c){var j=b.getXY();h=j[0],i=j[1]}var k=b.getScroll();h+=d.left+k.left,i+=d.top+k.top,f-=d.right,g-=d.bottom;var l=h+f,m=i+g,n=e||(c?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),o=n[0],p=n[1],q=this.dom.offsetWidth,r=this.dom.offsetHeight,s=!1;return o+q>l&&(o=l-q,s=!0),p+r>m&&(p=m-r,s=!0),h>o&&(o=h,s=!0),i>p&&(p=i,s=!0),s?[o,p]:!1}}(),adjustForConstraints:function(a,b,c){return this.getConstrainToXY(b||document,!1,c,a)||a},alignTo:function(a,b,c){var d=this.getAlignToXY(a,b,c);return this.setXY(d,this.preanim(arguments,3)),this},anchorTo:function(a,b,c,d,e,f){var g=function(){this.alignTo(a,b,c,d),Ext.callback(f,this)};Ext.EventManager.onWindowResize(g,this);var h=typeof e;return"undefined"!=h&&Ext.EventManager.on(window,"scroll",g,this,{buffer:"number"==h?e:50}),g.call(this),this},clearOpacity:function(){return window.ActiveXObject?"string"==typeof this.dom.style.filter&&/alpha/i.test(this.dom.style.filter)&&(this.dom.style.filter=""):(this.dom.style.opacity="",this.dom.style["-moz-opacity"]="",this.dom.style["-khtml-opacity"]=""),this},hide:function(){return this.setVisible(!1,this.preanim(arguments,0)),this},show:function(){return this.setVisible(!0,this.preanim(arguments,0)),this},addUnits:function(a){return Ext.Element.addUnits(a,this.defaultUnit)},update:function(a,c,d){if("undefined"==typeof a&&(a=""),c!==!0)return this.dom.innerHTML=a,"function"==typeof d&&d(),this;var e=Ext.id(),f=this.dom;return a+='<span id="'+e+'"></span>',b.onAvailable(e,function(){for(var b,c=document.getElementsByTagName("head")[0],f=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,g=/\ssrc=([\'\"])(.*?)\1/i,h=/\stype=([\'\"])(.*?)\1/i;b=f.exec(a);){var i=b[1],j=i?i.match(g):!1;if(j&&j[2]){var k=document.createElement("script");k.src=j[2];var l=i.match(h);l&&l[2]&&(k.type=l[2]),c.appendChild(k)}else b[2]&&b[2].length>0&&(window.execScript?window.execScript(b[2]):window.eval(b[2]))}var m=document.getElementById(e);m&&Ext.removeNode(m),"function"==typeof d&&d()}),f.innerHTML=a.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,""),this},load:function(){var a=this.getUpdater();return a.update.apply(a,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this)),this.updateManager},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0),this.applyStyles("-moz-user-select:none;-khtml-user-select:none;"),this.addClass("x-unselectable"),this},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(a){return this.alignTo(a||document,"c-c"),this},isBorderBox:function(){return m[this.dom.tagName.toLowerCase()]||Ext.isBorderBox},getBox:function(a,b){var c;if(b){var d=parseInt(this.getStyle("left"),10)||0,e=parseInt(this.getStyle("top"),10)||0;c=[d,e]}else c=this.getXY();var f,g=this.dom,h=g.offsetWidth,i=g.offsetHeight;if(a){var j=this.getBorderWidth("l")+this.getPadding("l"),k=this.getBorderWidth("r")+this.getPadding("r"),l=this.getBorderWidth("t")+this.getPadding("t"),m=this.getBorderWidth("b")+this.getPadding("b");f={x:c[0]+j,y:c[1]+l,0:c[0]+j,1:c[1]+l,width:h-(j+k),height:i-(l+m)}}else f={x:c[0],y:c[1],0:c[0],1:c[1],width:h,height:i};return f.right=f.x+f.width,f.bottom=f.y+f.height,f},getFrameWidth:function(a,b){return b&&Ext.isBorderBox?0:this.getPadding(a)+this.getBorderWidth(a)},setBox:function(a,b){var c=a.width,d=a.height;return!b||this.autoBoxAdjust||this.isBorderBox()||(c-=this.getBorderWidth("lr")+this.getPadding("lr"),d-=this.getBorderWidth("tb")+this.getPadding("tb")),this.setBounds(a.x,a.y,c,d,this.preanim(arguments,2)),this},repaint:function(){var a=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.get(a).removeClass("x-repaint")},1),this},getMargins:function(a){return a?this.addStyles(a,h.margins):{top:parseInt(this.getStyle("margin-top"),10)||0,left:parseInt(this.getStyle("margin-left"),10)||0,bottom:parseInt(this.getStyle("margin-bottom"),10)||0,right:parseInt(this.getStyle("margin-right"),10)||0}},addStyles:function(a,b){for(var c,d,e=0,f=0,g=a.length;g>f;f++)c=this.getStyle(b[a.charAt(f)]),c&&(d=parseInt(c,10),d&&(e+=d>=0?d:-1*d));return e},createProxy:function(a,b,c){a="object"==typeof a?a:{tag:"div",cls:a};var d;return d=b?Ext.DomHelper.append(b,a,!0):Ext.DomHelper.insertBefore(this.dom,a,!0),c&&d.setBox(this.getBox()),d},mask:function(a,b){if("static"==this.getStyle("position")&&this.addClass("x-masked-relative"),this._maskMsg&&this._maskMsg.remove(),this._mask&&this._mask.remove(),this._mask=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask"},!0),this.addClass("x-masked"),this._mask.setDisplayed(!0),"string"==typeof a){this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg",cn:{tag:"div"}},!0);var c=this._maskMsg;c.dom.className=b?"ext-el-mask-msg "+b:"ext-el-mask-msg",c.dom.firstChild.innerHTML=a,c.setDisplayed(!0),c.center(this)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||"auto"!=this.getStyle("height")||this._mask.setSize(this.getWidth(),this.getHeight()),this._mask},unmask:function(){this._mask&&(this._maskMsg&&(this._maskMsg.remove(),delete this._maskMsg),this._mask.remove(),delete this._mask),this.removeClass(["x-masked","x-masked-relative"])},isMasked:function(){return this._mask&&this._mask.isVisible()},createShim:function(){var a=document.createElement("iframe");a.frameBorder="0",a.className="ext-shim",Ext.isIE&&Ext.isSecure&&(a.src=Ext.SSL_SECURE_URL);var b=Ext.get(this.dom.parentNode.insertBefore(a,this.dom));return b.autoBoxAdjust=!1,b},remove:function(){Ext.removeNode(this.dom),delete h.cache[this.dom.id]},hover:function(a,b,c){var d=function(b){b.within(this,!0)||a.apply(c||this,arguments)},e=function(a){a.within(this,!0)||b.apply(c||this,arguments)};return this.on("mouseover",d,this.dom),this.on("mouseout",e,this.dom),this},addClassOnOver:function(a){return this.hover(function(){Ext.fly(this,"_internal").addClass(a)},function(){Ext.fly(this,"_internal").removeClass(a)}),this},addClassOnFocus:function(a){return this.on("focus",function(){Ext.fly(this,"_internal").addClass(a)},this.dom),this.on("blur",function(){Ext.fly(this,"_internal").removeClass(a)},this.dom),this},addClassOnClick:function(a){var b=this.dom;return this.on("mousedown",function(){Ext.fly(b,"_internal").addClass(a);var c=Ext.getDoc(),d=function(){Ext.fly(b,"_internal").removeClass(a),c.removeListener("mouseup",d)};c.on("mouseup",d)}),this},swallowEvent:function(a,b){var c=function(a){a.stopPropagation(),b&&a.preventDefault()};if(Ext.isArray(a)){for(var d=0,e=a.length;e>d;d++)this.on(a[d],c);return this}return this.on(a,c),this},parent:function(a,b){return this.matchNode("parentNode","parentNode",a,b)},next:function(a,b){return this.matchNode("nextSibling","nextSibling",a,b)},prev:function(a,b){return this.matchNode("previousSibling","previousSibling",a,b)},first:function(a,b){return this.matchNode("nextSibling","firstChild",a,b)},last:function(a,b){return this.matchNode("previousSibling","lastChild",a,b)},matchNode:function(a,b,c,d){for(var e=this.dom[b];e;){if(1==e.nodeType&&(!c||Ext.DomQuery.is(e,c)))return d?e:Ext.get(e);e=e[a]}return null},appendChild:function(a){return a=Ext.get(a),a.appendTo(this),this},createChild:function(a,b,c){return a=a||{tag:"div"},b?Ext.DomHelper.insertBefore(b,a,c!==!0):Ext.DomHelper[this.dom.firstChild?"append":"overwrite"](this.dom,a,c!==!0)},appendTo:function(a){return a=Ext.getDom(a),a.appendChild(this.dom),this},insertBefore:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a),this},insertAfter:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a.nextSibling),this},insertFirst:function(a,b){return a=a||{},a.nodeType||a.dom?(a=Ext.getDom(a),this.dom.insertBefore(a,this.dom.firstChild),b?a:Ext.get(a)):this.createChild(a,this.dom.firstChild,b)},insertSibling:function(a,b,c){var d;if(Ext.isArray(a)){for(var e=0,f=a.length;f>e;e++)d=this.insertSibling(a[e],b,c);return d}b=b?b.toLowerCase():"before",a=a||{};var g="before"==b?this.dom:this.dom.nextSibling;return a.nodeType||a.dom?(d=this.dom.parentNode.insertBefore(Ext.getDom(a),g),c||(d=Ext.get(d))):d="after"!=b||this.dom.nextSibling?Ext.DomHelper["after"==b?"insertAfter":"insertBefore"](this.dom,a,!c):Ext.DomHelper.append(this.dom.parentNode,a,!c),d},wrap:function(a,b){a||(a={tag:"div"});var c=Ext.DomHelper.insertBefore(this.dom,a,!b);return c.dom?c.dom.appendChild(this.dom):c.appendChild(this.dom),c},replace:function(a){return a=Ext.get(a),this.insertBefore(a),a.remove(),this},replaceWith:function(a){return a.nodeType||a.dom?(a=Ext.getDom(a),this.dom.parentNode.insertBefore(a,this.dom)):a=this.insertSibling(a,"before"),h.uncache(this.id),Ext.removeNode(this.dom),this.dom=a,this.id=Ext.id(a),h.cache[this.id]=this,this},insertHtml:function(a,b,c){var d=Ext.DomHelper.insertHtml(a,this.dom,b);return c?Ext.get(d):d},set:function(a,b){var c=this.dom;b="undefined"==typeof b?c.setAttribute?!0:!1:b;for(var d in a)"style"!=d&&"function"!=typeof a[d]&&("cls"==d?c.className=a.cls:a.hasOwnProperty(d)&&(b?c.setAttribute(d,a[d]):c[d]=a[d]));return a.style&&Ext.DomHelper.applyStyles(c,a.style),this},addKeyListener:function(a,b,c){var d;return d="object"!=typeof a||Ext.isArray(a)?{key:a,fn:b,scope:c}:{key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:b,scope:c},new Ext.KeyMap(this,d)},addKeyMap:function(a){return new Ext.KeyMap(this,a)},isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b,d){var e="left"==a.toLowerCase()?"scrollLeft":"scrollTop";if(d&&c){var f="scrollLeft"==e?[b,this.dom.scrollTop]:[this.dom.scrollLeft,b];this.anim({scroll:{to:f}},this.preanim(arguments,2),"scroll")}else this.dom[e]=b;return this},scroll:function(a,b){if(this.isScrollable()){var c=this.dom,d=c.scrollLeft,e=c.scrollTop,f=c.scrollWidth,g=c.scrollHeight,h=c.clientWidth,i=c.clientHeight;a=a.toLowerCase();var j=!1,k=this.preanim(arguments,2);switch(a){case"l":case"left":if(f-d>h){var l=Math.min(d+b,f-h);this.scrollTo("left",l,k),j=!0}break;case"r":case"right":if(d>0){var l=Math.max(d-b,0);this.scrollTo("left",l,k),j=!0}break;case"t":case"top":case"up":if(e>0){var l=Math.max(e-b,0);this.scrollTo("top",l,k),j=!0}break;case"b":case"bottom":case"down":if(g-e>i){var l=Math.min(e+b,g-i);this.scrollTo("top",l,k),j=!0}}return j}},translatePoints:function(a,b){("object"==typeof a||Ext.isArray(a))&&(b=a[1],a=a[0]);var c=this.getStyle("position"),d=this.getXY(),e=parseInt(this.getStyle("left"),10),f=parseInt(this.getStyle("top"),10);return isNaN(e)&&(e="relative"==c?0:this.dom.offsetLeft),isNaN(f)&&(f="relative"==c?0:this.dom.offsetTop),{left:a-d[0]+e,top:b-d[1]+f}},getScroll:function(){var a=this.dom,b=document;if(a==b||a==b.body){var c,d;return Ext.isIE&&Ext.isStrict?(c=b.documentElement.scrollLeft||b.body.scrollLeft||0,d=b.documentElement.scrollTop||b.body.scrollTop||0):(c=window.pageXOffset||b.body.scrollLeft||0,d=window.pageYOffset||b.body.scrollTop||0),{left:c,top:d}}return{left:a.scrollLeft,top:a.scrollTop}},getColor:function(a,b,c){var d=this.getStyle(a);if(!d||"transparent"==d||"inherit"==d)return b;var e="undefined"==typeof c?"#":c;if("rgb("==d.substr(0,4))for(var f=d.slice(4,d.length-1).split(","),g=0;3>g;g++){var h=parseInt(f[g]),i=h.toString(16);16>h&&(i="0"+i),e+=i}else if("#"==d.substr(0,1))if(4==d.length)for(var g=1;4>g;g++){var j=d.charAt(g);e+=j+j}else 7==d.length&&(e+=d.substr(1));return e.length>5?e.toLowerCase():b},boxWrap:function(a){a=a||"x-box";var b=Ext.get(this.insertHtml("beforeBegin",String.format('<div class="{0}">'+h.boxMarkup+"</div>",a)));return b.child("."+a+"-mc").dom.appendChild(this.dom),b},getAttributeNS:Ext.isIE?function(a,b){var c=this.dom,d=typeof c[a+":"+b];return"undefined"!=d&&"unknown"!=d?c[a+":"+b]:c[b]}:function(a,b){var c=this.dom;return c.getAttributeNS(a,b)||c.getAttribute(a+":"+b)||c.getAttribute(b)||c[b]},getTextWidth:function(a,b,c){return Ext.util.TextMetrics.measure(this.dom,Ext.value(a,this.dom.innerHTML,!0)).width.constrain(b||0,c||1e6)}};var i=h.prototype;i.on=i.addListener,i.mon=i.addListener,i.getUpdateManager=i.getUpdater,i.un=i.removeListener,i.autoBoxAdjust=!0,h.unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,h.addUnits=function(a,b){return""===a||"auto"==a?a:void 0===a?"":"number"!=typeof a&&h.unitPattern.test(a)?a:a+(b||"px")},h.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',h.VISIBILITY=1,h.DISPLAY=2,h.borders={l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},h.paddings={l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},h.margins={l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},h.cache={};var j;h.get=function(a){var b,c,d;if(!a)return null;if("string"==typeof a)return(c=document.getElementById(a))?((b=h.cache[a])?b.dom=c:b=h.cache[a]=new h(c),b):null;if(a.tagName)return(d=a.id)||(d=Ext.id(a)),(b=h.cache[d])?b.dom=a:b=h.cache[d]=new h(a),b;if(a instanceof h)return a!=j&&(a.dom=document.getElementById(a.id)||a.dom,h.cache[a.id]=a),a;if(a.isComposite)return a;if(Ext.isArray(a))return h.select(a);if(a==document){if(!j){var e=function(){};e.prototype=h.prototype,j=new e,j.dom=document}return j}return null},h.uncache=function(){for(var a=0,b=arguments,c=b.length;c>a;a++)b[a]&&delete h.cache[b[a].id||b[a]]},h.garbageCollect=function(){if(!Ext.enableGarbageCollector)return clearInterval(h.collectorThread),void 0;for(var a in h.cache){var b=h.cache[a],c=b.dom;c&&c.parentNode&&(c.offsetParent||document.getElementById(a))||(delete h.cache[a],c&&Ext.enableListenerCollection&&Ext.EventManager.removeAll(c))}},h.collectorThreadId=setInterval(h.garbageCollect,3e4);var k=function(){};k.prototype=h.prototype;var l=new k;h.Flyweight=function(a){this.dom=a},h.Flyweight.prototype=l,h.Flyweight.prototype.isFlyweight=!0,h._flyweights={},h.fly=function(a,b){return b=b||"_global",(a=Ext.getDom(a))?(h._flyweights[b]||(h._flyweights[b]=new h.Flyweight),h._flyweights[b].dom=a,h._flyweights[b]):null},Ext.get=h.get,Ext.fly=h.fly;var m=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(m.button=1),Ext.EventManager.on(window,"unload",function(){delete h.cache,delete h._flyweights})}(),Ext.enableFx=!0,Ext.Fx={slideIn:function(a,b){var c=this.getFxEl();return b=b||{},c.queueFx(b,function(){a=a||"t",this.fixDisplay();var d=this.getFxRestore(),e=this.getBox();this.setSize(e);var f=this.fxWrap(d.pos,b,"hidden"),g=this.dom.style;g.visibility="visible",g.position="absolute";var h,i=function(){c.fxUnwrap(f,d.pos,b),g.width=d.width,g.height=d.height,c.afterFx(b)},j={to:[e.x,e.y]},k={to:e.width},l={to:e.height};switch(a.toLowerCase()){case"t":f.setSize(e.width,0),g.left=g.bottom="0",h={height:l};break;case"l":f.setSize(0,e.height),g.right=g.top="0",h={width:k};break;case"r":f.setSize(0,e.height),f.setX(e.right),g.left=g.top="0",h={width:k,points:j};break;case"b":f.setSize(e.width,0),f.setY(e.bottom),g.left=g.top="0",h={height:l,points:j};break;case"tl":f.setSize(0,0),g.right=g.bottom="0",h={width:k,height:l};break;case"bl":f.setSize(0,0),f.setY(e.y+e.height),g.right=g.top="0",h={width:k,height:l,points:j};break;case"br":f.setSize(0,0),f.setXY([e.right,e.bottom]),g.left=g.top="0",h={width:k,height:l,points:j};break;case"tr":f.setSize(0,0),f.setX(e.x+e.width),g.left=g.bottom="0",h={width:k,height:l,points:j}}this.dom.style.visibility="visible",f.show(),arguments.callee.anim=f.fxanim(h,b,"motion",.5,"easeOut",i)}),this},slideOut:function(a,b){var c=this.getFxEl();return b=b||{},c.queueFx(b,function(){a=a||"t";var d=this.getFxRestore(),e=this.getBox();this.setSize(e);var f=this.fxWrap(d.pos,b,"visible"),g=this.dom.style;g.visibility="visible",g.position="absolute",f.setSize(e);var h,i=function(){b.useDisplay?c.setDisplayed(!1):c.hide(),c.fxUnwrap(f,d.pos,b),g.width=d.width,g.height=d.height,c.afterFx(b)},j={to:0};switch(a.toLowerCase()){case"t":g.left=g.bottom="0",h={height:j};break;case"l":g.right=g.top="0",h={width:j};break;case"r":g.left=g.top="0",h={width:j,points:{to:[e.right,e.y]}};break;case"b":g.left=g.top="0",h={height:j,points:{to:[e.x,e.bottom]}};break;case"tl":g.right=g.bottom="0",h={width:j,height:j};
break;case"bl":g.right=g.top="0",h={width:j,height:j,points:{to:[e.x,e.bottom]}};break;case"br":g.left=g.top="0",h={width:j,height:j,points:{to:[e.x+e.width,e.bottom]}};break;case"tr":g.left=g.bottom="0",h={width:j,height:j,points:{to:[e.right,e.y]}}}arguments.callee.anim=f.fxanim(h,b,"motion",.5,"easeOut",i)}),this},puff:function(a){var b=this.getFxEl();return a=a||{},b.queueFx(a,function(){this.clearOpacity(),this.show();var c=this.getFxRestore(),d=this.dom.style,e=function(){a.useDisplay?b.setDisplayed(!1):b.hide(),b.clearOpacity(),b.setPositioning(c.pos),d.width=c.width,d.height=c.height,d.fontSize="",b.afterFx(a)},f=this.getWidth(),g=this.getHeight();arguments.callee.anim=this.fxanim({width:{to:this.adjustWidth(2*f)},height:{to:this.adjustHeight(2*g)},points:{by:[-(.5*f),-(.5*g)]},opacity:{to:0},fontSize:{to:200,unit:"%"}},a,"motion",.5,"easeOut",e)}),this},switchOff:function(a){var b=this.getFxEl();return a=a||{},b.queueFx(a,function(){this.clearOpacity(),this.clip();var c=this.getFxRestore(),d=this.dom.style,e=function(){a.useDisplay?b.setDisplayed(!1):b.hide(),b.clearOpacity(),b.setPositioning(c.pos),d.width=c.width,d.height=c.height,b.afterFx(a)};this.fxanim({opacity:{to:.3}},null,null,.1,null,function(){this.clearOpacity(),function(){this.fxanim({height:{to:1},points:{by:[0,.5*this.getHeight()]}},a,"motion",.3,"easeIn",e)}.defer(100,this)})}),this},highlight:function(a,b){var c=this.getFxEl();return b=b||{},c.queueFx(b,function(){a=a||"ffff9c";var d=b.attr||"backgroundColor";this.clearOpacity(),this.show();var e=this.getColor(d),f=this.dom.style[d],g=b.endColor||e||"ffffff",h=function(){c.dom.style[d]=f,c.afterFx(b)},i={};i[d]={from:a,to:g},arguments.callee.anim=this.fxanim(i,b,"color",1,"easeIn",h)}),this},frame:function(a,b,c){var d,e=this.getFxEl();return c=c||{},e.queueFx(c,function(){function f(){var a=Ext.isBorderBox?2:1;d=g.anim({top:{from:j.y,to:j.y-20},left:{from:j.x,to:j.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:j.height,to:j.height+20*a},width:{from:j.width,to:j.width+20*a}},{duration:c.duration||1,callback:function(){g.remove(),--b>0?k():e.afterFx(c)}}),arguments.callee.anim={isAnimated:function(){return!0},stop:function(){d.stop()}}}a=a||"#C3DAF9",6==a.length&&(a="#"+a),b=b||1,this.show();var g,h=this.getXY(),i=this.dom,j={x:h[0],y:h[1],0:h[0],1:h[1],width:i.offsetWidth,height:i.offsetHeight},k=function(){return g=Ext.get(document.body||document.documentElement).createChild({style:{visbility:"hidden",position:"absolute","z-index":35e3,border:"0px solid "+a}}),g.queueFx({},f)};arguments.callee.anim={isAnimated:function(){return!0},stop:function(){b=0,g.stopFx()}},k()}),this},pause:function(a){var b,c=this.getFxEl();return c.queueFx({},function(){b=setTimeout(function(){c.afterFx({})},1e3*a),arguments.callee.anim={isAnimated:function(){return!0},stop:function(){clearTimeout(b),c.afterFx({})}}}),this},fadeIn:function(a){var b=this.getFxEl();return a=a||{},b.queueFx(a,function(){this.setOpacity(0),this.fixDisplay(),this.dom.style.visibility="visible";var c=a.endOpacity||1;arguments.callee.anim=this.fxanim({opacity:{to:c}},a,null,.5,"easeOut",function(){1==c&&this.clearOpacity(),b.afterFx(a)})}),this},fadeOut:function(a){var b=this.getFxEl();return a=a||{},b.queueFx(a,function(){var c=a.endOpacity||0;arguments.callee.anim=this.fxanim({opacity:{to:c}},a,null,.5,"easeOut",function(){0===c&&(this.visibilityMode==Ext.Element.DISPLAY||a.useDisplay?this.dom.style.display="none":this.dom.style.visibility="hidden",this.clearOpacity()),b.afterFx(a)})}),this},scale:function(a,b,c){return this.shift(Ext.apply({},c,{width:a,height:b})),this},shift:function(a){var b=this.getFxEl();return a=a||{},b.queueFx(a,function(){var c={},d=a.width,e=a.height,f=a.x,g=a.y,h=a.opacity;void 0!==d&&(c.width={to:this.adjustWidth(d)}),void 0!==e&&(c.height={to:this.adjustHeight(e)}),void 0!==a.left&&(c.left={to:a.left}),void 0!==a.top&&(c.top={to:a.top}),void 0!==a.right&&(c.right={to:a.right}),void 0!==a.bottom&&(c.bottom={to:a.bottom}),(void 0!==f||void 0!==g)&&(c.points={to:[void 0!==f?f:this.getX(),void 0!==g?g:this.getY()]}),void 0!==h&&(c.opacity={to:h}),void 0!==a.xy&&(c.points={to:a.xy}),arguments.callee.anim=this.fxanim(c,a,"motion",.35,"easeOut",function(){b.afterFx(a)})}),this},ghost:function(a,b){var c=this.getFxEl();return b=b||{},c.queueFx(b,function(){a=a||"b";var d=this.getFxRestore(),e=this.getWidth(),f=this.getHeight(),g=this.dom.style,h=function(){b.useDisplay?c.setDisplayed(!1):c.hide(),c.clearOpacity(),c.setPositioning(d.pos),g.width=d.width,g.height=d.height,c.afterFx(b)},i={opacity:{to:0},points:{}},j=i.points;switch(a.toLowerCase()){case"t":j.by=[0,-f];break;case"l":j.by=[-e,0];break;case"r":j.by=[e,0];break;case"b":j.by=[0,f];break;case"tl":j.by=[-e,-f];break;case"bl":j.by=[-e,f];break;case"br":j.by=[e,f];break;case"tr":j.by=[e,-f]}arguments.callee.anim=this.fxanim(i,b,"motion",.5,"easeOut",h)}),this},syncFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!0,stopFx:!1}),this},sequenceFx:function(){return this.fxDefaults=Ext.apply(this.fxDefaults||{},{block:!1,concurrent:!1,stopFx:!1}),this},nextFx:function(){var a=this.fxQueue[0];a&&a.call(this)},hasActiveFx:function(){return this.fxQueue&&this.fxQueue[0]},stopFx:function(){if(this.hasActiveFx()){var a=this.fxQueue[0];a&&a.anim&&a.anim.isAnimated()&&(this.fxQueue=[a],a.anim.stop(!0))}return this},beforeFx:function(a){return this.hasActiveFx()&&!a.concurrent?a.stopFx?(this.stopFx(),!0):!1:!0},hasFxBlock:function(){var a=this.fxQueue;return a&&a[0]&&a[0].block},queueFx:function(a,b){if(this.fxQueue||(this.fxQueue=[]),!this.hasFxBlock())if(Ext.applyIf(a,this.fxDefaults),a.concurrent)b.call(this);else{var c=this.beforeFx(a);b.block=a.block,this.fxQueue.push(b),c&&this.nextFx()}return this},fxWrap:function(a,b,c){var d;if(!b.wrap||!(d=Ext.get(b.wrap))){var e;b.fixPosition&&(e=this.getXY());var f=document.createElement("div");f.style.visibility=c,d=Ext.get(this.dom.parentNode.insertBefore(f,this.dom)),d.setPositioning(a),"static"==d.getStyle("position")&&d.position("relative"),this.clearPositioning("auto"),d.clip(),d.dom.appendChild(this.dom),e&&d.setXY(e)}return d},fxUnwrap:function(a,b,c){this.clearPositioning(),this.setPositioning(b),c.wrap||(a.dom.parentNode.insertBefore(this.dom,a.dom),a.remove())},getFxRestore:function(){var a=this.dom.style;return{pos:this.getPositioning(),width:a.width,height:a.height}},afterFx:function(a){a.afterStyle&&this.applyStyles(a.afterStyle),a.afterCls&&this.addClass(a.afterCls),a.remove===!0&&this.remove(),a.concurrent||this.fxQueue.shift(),Ext.callback(a.callback,a.scope,[this]),a.concurrent||this.nextFx()},getFxEl:function(){return Ext.get(this.dom)},fxanim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=Ext.lib.Anim[c](this.dom,a,b.duration||d||.35,b.easing||e||"easeOut",function(){Ext.callback(f,this)},this);return b.anim=g,g}},Ext.Fx.resize=Ext.Fx.scale,Ext.apply(Ext.Element.prototype,Ext.Fx),Ext.CompositeElement=function(a){this.elements=[],this.addElements(a)},Ext.CompositeElement.prototype={isComposite:!0,addElements:function(a){if(!a)return this;"string"==typeof a&&(a=Ext.Element.selectorFunction(a));for(var b=this.elements,c=b.length-1,d=0,e=a.length;e>d;d++)b[++c]=Ext.get(a[d]);return this},fill:function(a){return this.elements=[],this.add(a),this},filter:function(a){var b=[];return this.each(function(c){c.is(a)&&(b[b.length]=c.dom)}),this.fill(b),this},invoke:function(a,b){for(var c=this.elements,d=0,e=c.length;e>d;d++)Ext.Element.prototype[a].apply(c[d],b);return this},add:function(a){return"string"==typeof a?this.addElements(Ext.Element.selectorFunction(a)):void 0!==a.length?this.addElements(a):this.addElements([a]),this},each:function(a,b){for(var c=this.elements,d=0,e=c.length;e>d&&a.call(b||c[d],c[d],this,d)!==!1;d++);return this},item:function(a){return this.elements[a]||null},first:function(){return this.item(0)},last:function(){return this.item(this.elements.length-1)},getCount:function(){return this.elements.length},contains:function(a){return-1!==this.indexOf(a)},indexOf:function(a){return this.elements.indexOf(Ext.get(a))},removeElement:function(a,b){if(Ext.isArray(a)){for(var c=0,d=a.length;d>c;c++)this.removeElement(a[c]);return this}var e="number"==typeof a?a:this.indexOf(a);if(-1!==e&&this.elements[e]){if(b){var f=this.elements[e];f.dom?f.remove():Ext.removeNode(f)}this.elements.splice(e,1)}return this},replaceElement:function(a,b,c){var d="number"==typeof a?a:this.indexOf(a);return-1!==d&&(c?this.elements[d].replaceWith(b):this.elements.splice(d,1,Ext.get(b))),this},clear:function(){this.elements=[]}},function(){Ext.CompositeElement.createCall=function(a,b){a[b]||(a[b]=function(){return this.invoke(b,arguments)})};for(var a in Ext.Element.prototype)"function"==typeof Ext.Element.prototype[a]&&Ext.CompositeElement.createCall(Ext.CompositeElement.prototype,a)}(),Ext.CompositeElementLite=function(a){Ext.CompositeElementLite.superclass.constructor.call(this,a),this.el=new Ext.Element.Flyweight},Ext.extend(Ext.CompositeElementLite,Ext.CompositeElement,{addElements:function(a){if(a)if(Ext.isArray(a))this.elements=this.elements.concat(a);else for(var b=this.elements,c=b.length-1,d=0,e=a.length;e>d;d++)b[++c]=a[d];return this},invoke:function(a,b){for(var c=this.elements,d=this.el,e=0,f=c.length;f>e;e++)d.dom=c[e],Ext.Element.prototype[a].apply(d,b);return this},item:function(a){return this.elements[a]?(this.el.dom=this.elements[a],this.el):null},addListener:function(a,b,c,d){for(var e=this.elements,f=0,g=e.length;g>f;f++)Ext.EventManager.on(e[f],a,b,c||e[f],d);return this},each:function(a,b){for(var c=this.elements,d=this.el,e=0,f=c.length;f>e&&(d.dom=c[e],a.call(b||d,d,this,e)!==!1);e++);return this},indexOf:function(a){return this.elements.indexOf(Ext.getDom(a))},replaceElement:function(a,b,c){var d="number"==typeof a?a:this.indexOf(a);if(-1!==d){if(b=Ext.getDom(b),c){var e=this.elements[d];e.parentNode.insertBefore(b,e),Ext.removeNode(e)}this.elements.splice(d,1,b)}return this}}),Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(a,b,c){var d;if("string"==typeof a)d=Ext.Element.selectorFunction(a,c);else{if(void 0===a.length)throw"Invalid selector";d=a}return b===!0?new Ext.CompositeElement(d):new Ext.CompositeElementLite(d)},Ext.select=Ext.Element.select,Ext.data.Connection=function(a){Ext.apply(this,a),this.addEvents("beforerequest","requestcomplete","requestexception"),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(a){if(this.fireEvent("beforerequest",this,a)!==!1){var b=a.params;if("function"==typeof b&&(b=b.call(a.scope||window,a)),"object"==typeof b&&(b=Ext.urlEncode(b)),this.extraParams){var c=Ext.urlEncode(this.extraParams);b=b?b+"&"+c:c}var d=a.url||this.url;if("function"==typeof d&&(d=d.call(a.scope||window,a)),a.form){var e=Ext.getDom(a.form);d=d||e.action;var f=e.getAttribute("enctype");if(a.isUpload||f&&"multipart/form-data"==f.toLowerCase())return this.doFormUpload(a,b,d);var g=Ext.lib.Ajax.serializeForm(e);b=b?b+"&"+g:g}var h=a.headers;this.defaultHeaders&&(h=Ext.apply(h||{},this.defaultHeaders),a.headers||(a.headers=h));var i={success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{options:a},timeout:a.timeout||this.timeout},j=a.method||this.method||(b||a.xmlData||a.jsonData?"POST":"GET");if("GET"==j&&this.disableCaching&&a.disableCaching!==!1||a.disableCaching===!0){var k=a.disableCachingParam||this.disableCachingParam;d+=(-1!=d.indexOf("?")?"&":"?")+k+"="+(new Date).getTime()}return"boolean"==typeof a.autoAbort?a.autoAbort&&this.abort():this.autoAbort!==!1&&this.abort(),("GET"==j||a.xmlData||a.jsonData)&&b&&(d+=(-1!=d.indexOf("?")?"&":"?")+b,b=""),this.transId=Ext.lib.Ajax.request(j,d,i,b,a),this.transId}return Ext.callback(a.callback,a.scope,[a,null,null]),null},isLoading:function(a){return a?Ext.lib.Ajax.isCallInProgress(a):this.transId?!0:!1},abort:function(a){(a||this.isLoading())&&Ext.lib.Ajax.abort(a||this.transId)},handleResponse:function(a){this.transId=!1;var b=a.argument.options;a.argument=b?b.argument:null,this.fireEvent("requestcomplete",this,a,b),Ext.callback(b.success,b.scope,[a,b]),Ext.callback(b.callback,b.scope,[b,!0,a])},handleFailure:function(a,b){this.transId=!1;var c=a.argument.options;a.argument=c?c.argument:null,this.fireEvent("requestexception",this,a,c,b),Ext.callback(c.failure,c.scope,[a,c]),Ext.callback(c.callback,c.scope,[c,!1,a])},doFormUpload:function(a,b,c){function d(){var b={responseText:"",responseXML:null};b.argument=a?a.argument:null;try{var c;c=Ext.isIE?f.contentWindow.document:f.contentDocument||window.frames[e].document,c&&c.body&&(b.responseText=c.body.innerHTML),b.responseXML=c&&c.XMLDocument?c.XMLDocument:c}catch(g){}Ext.EventManager.removeListener(f,"load",d,this),this.fireEvent("requestcomplete",this,b,a),Ext.callback(a.success,a.scope,[b,a]),Ext.callback(a.callback,a.scope,[a,!0,b]),setTimeout(function(){Ext.removeNode(f)},100)}var e=Ext.id(),f=document.createElement("iframe");f.id=e,f.name=e,f.className="x-hidden",Ext.isIE&&(f.src=Ext.SSL_SECURE_URL),document.body.appendChild(f),Ext.isIE&&(document.frames[e].name=e);var g=Ext.getDom(a.form),h={target:g.target,method:g.method,encoding:g.encoding,enctype:g.enctype,action:g.action};g.target=e,g.method="POST",g.enctype=g.encoding="multipart/form-data",c&&(g.action=c);var i,j;if(b){i=[],b=Ext.urlDecode(b,!1);for(var k in b)b.hasOwnProperty(k)&&(j=document.createElement("input"),j.type="hidden",j.name=k,j.value=b[k],g.appendChild(j),i.push(j))}if(Ext.EventManager.on(f,"load",d,this),g.submit(),g.target=h.target,g.method=h.method,g.enctype=h.enctype,g.encoding=h.encoding,g.action=h.action,i)for(var l=0,m=i.length;m>l;l++)Ext.removeNode(i[l])}}),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}}),Ext.Updater=Ext.extend(Ext.util.Observable,{constructor:function(a,b){if(a=Ext.get(a),!b&&a.updateManager)return a.updateManager;this.el=a,this.defaultUrl=null,this.addEvents("beforeupdate","update","failure");var c=Ext.Updater.defaults;this.sslBlankUrl=c.sslBlankUrl,this.disableCaching=c.disableCaching,this.indicatorText=c.indicatorText,this.showLoadIndicator=c.showLoadIndicator,this.timeout=c.timeout,this.loadScripts=c.loadScripts,this.transaction=null,this.refreshDelegate=this.refresh.createDelegate(this),this.updateDelegate=this.update.createDelegate(this),this.formUpdateDelegate=this.formUpdate.createDelegate(this),this.renderer||(this.renderer=this.getDefaultRenderer()),Ext.Updater.superclass.constructor.call(this)},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},getEl:function(){return this.el},update:function(a,b,c,d){if(this.fireEvent("beforeupdate",this.el,a,b)!==!1){var e,f;"object"==typeof a&&(e=a,a=e.url,b=b||e.params,c=c||e.callback,d=d||e.discardUrl,f=e.scope,"undefined"!=typeof e.nocache&&(this.disableCaching=e.nocache),"undefined"!=typeof e.text&&(this.indicatorText='<div class="loading-indicator">'+e.text+"</div>"),"undefined"!=typeof e.scripts&&(this.loadScripts=e.scripts),"undefined"!=typeof e.timeout&&(this.timeout=e.timeout)),this.showLoading(),d||(this.defaultUrl=a),"function"==typeof a&&(a=a.call(this));var g=Ext.apply({},{url:a,params:"function"==typeof b&&f?b.createDelegate(f):b,success:this.processSuccess,failure:this.processFailure,scope:this,callback:void 0,timeout:1e3*this.timeout,disableCaching:this.disableCaching,argument:{options:e,url:a,form:null,callback:c,scope:f||window,params:b}},e);this.transaction=Ext.Ajax.request(g)}},formUpdate:function(a,b,c,d){this.fireEvent("beforeupdate",this.el,a,b)!==!1&&("function"==typeof b&&(b=b.call(this)),a=Ext.getDom(a),this.transaction=Ext.Ajax.request({form:a,url:b,success:this.processSuccess,failure:this.processFailure,scope:this,timeout:1e3*this.timeout,argument:{url:b,form:a,callback:d,reset:c}}),this.showLoading.defer(1,this))},refresh:function(a){null!=this.defaultUrl&&this.update(this.defaultUrl,null,a,!0)},startAutoRefresh:function(a,b,c,d,e){e&&this.update(b||this.defaultUrl,c,d,!0),this.autoRefreshProcId&&clearInterval(this.autoRefreshProcId),this.autoRefreshProcId=setInterval(this.update.createDelegate(this,[b||this.defaultUrl,c,d,!0]),1e3*a)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return this.autoRefreshProcId?!0:!1},showLoading:function(){this.showLoadIndicator&&this.el.update(this.indicatorText)},processSuccess:function(a){if(this.transaction=null,a.argument.form&&a.argument.reset)try{a.argument.form.reset()}catch(b){}this.loadScripts?this.renderer.render(this.el,a,this,this.updateComplete.createDelegate(this,[a])):(this.renderer.render(this.el,a,this),this.updateComplete(a))},updateComplete:function(a){this.fireEvent("update",this.el,a),"function"==typeof a.argument.callback&&a.argument.callback.call(a.argument.scope,this.el,!0,a,a.argument.options)},processFailure:function(a){this.transaction=null,this.fireEvent("failure",this.el,a),"function"==typeof a.argument.callback&&a.argument.callback.call(a.argument.scope,this.el,!1,a,a.argument.options)},setRenderer:function(a){this.renderer=a},getRenderer:function(){return this.renderer},setDefaultUrl:function(a){this.defaultUrl=a},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1}}),Ext.Updater.defaults={timeout:30,loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL||"javascript:false",disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...</div>'},Ext.Updater.updateElement=function(a,b,c,d){var e=Ext.get(a).getUpdater();Ext.apply(e,d),e.update(b,c,d?d.callback:null)},Ext.Updater.BasicRenderer=function(){},Ext.Updater.BasicRenderer.prototype={render:function(a,b,c,d){a.update(b.responseText,c.loadScripts,d)}},Ext.UpdateManager=Ext.Updater,function(){function a(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})}Date.useStrict=!1,Date.formatCodeToRegex=function(b,c){var d=Date.parseCodes[b];return d&&(d="function"==typeof d?d():d,Date.parseCodes[b]=d),d?Ext.applyIf({c:d.c?a(d.c,c||"{0}"):d.c},d):{g:0,c:null,s:Ext.escapeRe(b)}};var b=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(a){var b=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),c=(a||"").match(b);return c?new Date(1*((c[1]||"")+c[2])):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(a){return Date.monthNames[a].substring(0,3)},getShortDayName:function(a){return Date.dayNames[a].substring(0,3)},getMonthNumber:function(a){return Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"this.getFullYear()",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var a="Y-m-dTH:i:sP",b=[],c=0,d=a.length;d>c;++c){var e=a.charAt(c);b.push("T"==e?"'T'":Date.getFormatCode(e))}return b.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(a,b,c,d,e,f,g){d=d||0,e=e||0,f=f||0,g=g||0;var h=new Date(a,b-1,c,d,e,f,g);return a==h.getFullYear()&&b==h.getMonth()+1&&c==h.getDate()&&d==h.getHours()&&e==h.getMinutes()&&f==h.getSeconds()&&g==h.getMilliseconds()},parseDate:function(a,b,c){var d=Date.parseFunctions;return null==d[b]&&Date.createParser(b),d[b](a,void 0===c?Date.useStrict:c)},getFormatCode:function(a){var b=Date.formatCodes[a];return b&&(b="function"==typeof b?b():b,Date.formatCodes[a]=b),b||"'"+String.escape(a)+"'"},createFormat:function(a){for(var b=[],c=!1,d="",e=0;e<a.length;++e)d=a.charAt(e),c||"\\"!=d?c?(c=!1,b.push("'"+String.escape(d)+"'")):b.push(Date.getFormatCode(d)):c=!0;Date.formatFunctions[a]=new Function("return "+b.join("+"))},createParser:function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = y >= 0? y : Ext.num(def.y, dt.getFullYear());","m = m >= 0? m : Ext.num(def.m - 1, dt.getMonth());","d = d >= 0? d : Ext.num(def.d, dt.getDate());","h  = h || Ext.num(def.h, dt.getHours());","i  = i || Ext.num(def.i, dt.getMinutes());","s  = s || Ext.num(def.s, dt.getSeconds());","ms = ms || Ext.num(def.ms, dt.getMilliseconds());","if(z >= 0 && y >= 0){","v = new Date(y, 0, 1, h, i, s, ms);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y, m, d, h, i, s, ms);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(d){for(var e=Date.parseRegexes.length,f=1,g=[],h=[],i=!1,j="",k=0;k<d.length;++k)if(j=d.charAt(k),i||"\\"!=j)if(i)i=!1,h.push(String.escape(j));else{var l=b(j,f);f+=l.g,h.push(l.s),l.g&&l.c&&g.push(l.c)}else i=!0;Date.parseRegexes[e]=new RegExp("^"+h.join("")+"$","i"),Date.parseFunctions[d]=new Function("input","strict",a(c,e,g.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],b=0;7>b;a.push(Date.getShortDayName(b)),++b);return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var a=[],c=0;12>c;a.push(Date.getShortMonthName(c)),++c);return Ext.applyIf({s:"("+a.join("|")+")"},b("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return b("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (results[{0}] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"},A:{g:1,c:"if (results[{0}] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"},g:function(){return b("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return b("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){for(var a=[],c=[b("Y",1),b("m",2),b("d",3),b("h",4),b("i",5),b("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",b("P",8).c,"}else{",b("O",8).c,"}","}"].join("\n")}],d=0,e=c.length;e>d;++d)a.push(c[d].c);return{g:1,c:a.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}(),Ext.apply(Date.prototype,{dateFormat:function(a){return null==Date.formatFunctions[a]&&Date.createFormat(a),Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(a?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var a=0,b=0,c=this.clone(),d=this.getMonth();for(a=0,c.setMonth(0);d>a;c.setMonth(++a))b+=c.getDaysInMonth();return b+this.getDate()-1},getWeekOfYear:function(){var a=864e5,b=7*a;return function(){var c=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,d=Math.floor(c/7),e=new Date(d*b).getUTCFullYear();return d-Math.floor(Date.UTC(e,0,7)/b)+1}}(),isLeapYear:function(){var a=this.getFullYear();return!(0!=(3&a)||!(a%100||a%400==0&&a))},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return 0>a?a+7:a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var b=this.getMonth();return 1==b&&this.isLeapYear()?29:a[b]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(a){if(a)return this.clone().clearTime();var b=this.getDate();if(this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this.getDate()!=b){for(var c=1,d=this.add(Date.HOUR,c);d.getDate()!=b;c++,d=this.add(Date.HOUR,c));this.setDate(b),this.setHours(d.getHours())}return this},add:function(a,b){var c=this.clone();if(!a||0===b)return c;switch(a.toLowerCase()){case Date.MILLI:c.setMilliseconds(this.getMilliseconds()+b);break;case Date.SECOND:c.setSeconds(this.getSeconds()+b);break;case Date.MINUTE:c.setMinutes(this.getMinutes()+b);break;case Date.HOUR:c.setHours(this.getHours()+b);break;case Date.DAY:c.setDate(this.getDate()+b);break;case Date.MONTH:var d=this.getDate();d>28&&(d=Math.min(d,this.getFirstDateOfMonth().add("mo",b).getLastDateOfMonth().getDate())),c.setDate(d),c.setMonth(this.getMonth()+b);break;case Date.YEAR:c.setFullYear(this.getFullYear()+b)}return c},between:function(a,b){var c=this.getTime();return a.getTime()<=c&&c<=b.getTime()}}),Date.prototype.format=Date.prototype.dateFormat,Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||0/0)<420&&Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(a){if(-1>=a){var b=Math.ceil(-a),c=Math.ceil(b/12),d=b%12?12-b%12:0;return this.setFullYear(this.getFullYear()-c),this._xMonth(d)}return this._xMonth(a)},setDate:function(a){return this.setTime(this.getTime()-864e5*(this.getDate()-a))}}),Ext.util.DelayedTask=function(a,b,c){var d=null,e=function(){d=null,a.apply(b,c||[])};this.delay=function(f,g,h,i){d&&this.cancel(),a=g||a,b=h||b,c=i||c,d||(d=setTimeout(e,f))},this.cancel=function(){d&&(clearTimeout(d),d=null)}},Ext.util.TaskRunner=function(a){a=a||10;var b=[],c=[],d=0,e=!1,f=function(){e=!1,clearInterval(d),d=0},g=function(){e||(e=!0,d=setInterval(i,a))},h=function(a){c.push(a),a.onStop&&a.onStop.apply(a.scope||a)},i=function(){if(c.length>0){for(var a=0,d=c.length;d>a;a++)b.remove(c[a]);if(c=[],b.length<1)return f(),void 0}for(var e,g=(new Date).getTime(),a=0,d=b.length;d>a;++a){var i=b[a],j=g-i.taskRunTime;if(i.interval<=j){e=++i.taskRunCount;var k=i.run.apply(i.scope||i,i.args||[e]);if(i.taskRunTime=g,k===!1||e===i.repeat)return h(i),void 0}i.duration&&i.duration<=g-i.taskStartTime&&h(i)}};this.start=function(a){return b.push(a),a.taskStartTime=(new Date).getTime(),a.taskRunTime=0,a.taskRunCount=0,g(),a},this.stop=function(a){return h(a),a},this.stopAll=function(){f();for(var a=0,d=b.length;d>a;a++)b[a].onStop&&b[a].onStop();b=[],c=[]}},Ext.TaskMgr=new Ext.util.TaskRunner,Ext.util.MixedCollection=function(a,b){this.items=[],this.map={},this.keys=[],this.length=0,this.addEvents("clear","add","replace","remove","sort"),this.allowFunctions=a===!0,b&&(this.getKey=b),Ext.util.MixedCollection.superclass.constructor.call(this)},Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(a,b){if(1==arguments.length&&(b=arguments[0],a=this.getKey(b)),"undefined"!=typeof a&&null!==a){var c=this.map[a];if("undefined"!=typeof c)return this.replace(a,b);this.map[a]=b}return this.length++,this.items.push(b),this.keys.push(a),this.fireEvent("add",this.length-1,b,a),b},getKey:function(a){return a.id},replace:function(a,b){1==arguments.length&&(b=arguments[0],a=this.getKey(b));var c=this.map[a];if("undefined"==typeof a||null===a||"undefined"==typeof c)return this.add(a,b);var d=this.indexOfKey(a);return this.items[d]=b,this.map[a]=b,this.fireEvent("replace",a,c,b),b},addAll:function(a){if(arguments.length>1||Ext.isArray(a))for(var b=arguments.length>1?arguments:a,c=0,d=b.length;d>c;c++)this.add(b[c]);else for(var e in a)(this.allowFunctions||"function"!=typeof a[e])&&this.add(e,a[e])},each:function(a,b){for(var c=[].concat(this.items),d=0,e=c.length;e>d&&a.call(b||c[d],c[d],d,e)!==!1;d++);},eachKey:function(a,b){for(var c=0,d=this.keys.length;d>c;c++)a.call(b||window,this.keys[c],this.items[c],c,d)
},find:function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b||window,this.items[c],this.keys[c]))return this.items[c];return null},insert:function(a,b,c){return 2==arguments.length&&(c=arguments[1],b=this.getKey(c)),this.containsKey(b)&&(this.suspendEvents(),this.removeKey(b),this.resumeEvents()),a>=this.length?this.add(b,c):(this.length++,this.items.splice(a,0,c),"undefined"!=typeof b&&null!=b&&(this.map[b]=c),this.keys.splice(a,0,b),this.fireEvent("add",a,c,b),c)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var b=this.items[a];this.items.splice(a,1);var c=this.keys[a];return"undefined"!=typeof c&&delete this.map[c],this.keys.splice(a,1),this.fireEvent("remove",b,c),b}return!1},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(a){var b=this.map[a],c=void 0!==b?b:"number"==typeof a?this.items[a]:void 0;return"function"!=typeof c||this.allowFunctions?c:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return-1!=this.indexOf(a)},containsKey:function(a){return"undefined"!=typeof this.map[a]},clear:function(){this.length=0,this.items=[],this.keys=[],this.map={},this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(a,b,c){var d="DESC"==String(b).toUpperCase()?-1:1;c=c||function(a,b){return a-b};for(var e=[],f=this.keys,g=this.items,h=0,i=g.length;i>h;h++)e[e.length]={key:f[h],value:g[h],index:h};e.sort(function(b,e){var f=c(b[a],e[a])*d;return 0==f&&(f=b.index<e.index?-1:1),f});for(var h=0,i=e.length;i>h;h++)g[h]=e[h].value,f[h]=e[h].key;this.fireEvent("sort",this)},sort:function(a,b){this._sort("value",a,b)},keySort:function(a,b){this._sort("key",a,b||function(a,b){var c=String(a).toUpperCase(),d=String(b).toUpperCase();return c>d?1:d>c?-1:0})},getRange:function(a,b){var c=this.items;if(c.length<1)return[];a=a||0,b=Math.min("undefined"==typeof b?this.length-1:b,this.length-1);var d=[];if(b>=a)for(var e=a;b>=e;e++)d[d.length]=c[e];else for(var e=a;e>=b;e--)d[d.length]=c[e];return d},filter:function(a,b,c,d){return Ext.isEmpty(b,!1)?this.clone():(b=this.createValueMatcher(b,c,d),this.filterBy(function(c){return c&&b.test(c[a])}))},filterBy:function(a,b){var c=new Ext.util.MixedCollection;c.getKey=this.getKey;for(var d=this.keys,e=this.items,f=0,g=e.length;g>f;f++)a.call(b||this,e[f],d[f])&&c.add(d[f],e[f]);return c},findIndex:function(a,b,c,d,e){return Ext.isEmpty(b,!1)?-1:(b=this.createValueMatcher(b,d,e),this.findIndexBy(function(c){return c&&b.test(c[a])},null,c))},findIndexBy:function(a,b,c){for(var d=this.keys,e=this.items,f=c||0,g=e.length;g>f;f++)if(a.call(b||this,e[f],d[f]))return f;return-1},createValueMatcher:function(a,b,c){return a.exec||(a=String(a),a=new RegExp((b===!0?"":"^")+Ext.escapeRe(a),c?"":"i")),a},clone:function(){for(var a=new Ext.util.MixedCollection,b=this.keys,c=this.items,d=0,e=c.length;e>d;d++)a.add(b[d],c[d]);return a.getKey=this.getKey,a}}),Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item,Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,pad=function(a){return 10>a?"0"+a:a},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(a){return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+a+'"'},encodeArray=function(a){var b,c,d,e=["["],f=a.length;for(c=0;f>c;c+=1)switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(null===d?"null":Ext.util.JSON.encode(d)),b=!0}return e.push("]"),e.join("")};this.encodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},this.encode=function(a){if("undefined"==typeof a||null===a)return"null";if(Ext.isArray(a))return encodeArray(a);if(Ext.isDate(a))return Ext.util.JSON.encodeDate(a);if("string"==typeof a)return encodeString(a);if("number"==typeof a)return isFinite(a)?String(a):"null";if("boolean"==typeof a)return String(a);var b,c,d,e=["{"];for(c in a)if(!useHasOwn||a.hasOwnProperty(c))switch(d=a[c],typeof d){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(this.encode(c),":",null===d?"null":this.encode(d)),b=!0}return e.push("}"),e.join("")},this.decode=function(json){return eval("("+json+")")}},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g;return{ellipsis:function(a,b){return a&&a.length>b?a.substr(0,b-3)+"...":a},undef:function(a){return void 0!==a?a:""},defaultValue:function(a,b){return void 0!==a&&""!==a?a:b},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):a},htmlDecode:function(a){return a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},trim:function(a){return String(a).replace(trimRe,"")},substr:function(a,b,c){return String(a).substr(b,c)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},capitalize:function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():a},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return args.unshift(value),eval(fn).apply(window,args)}return eval(fn).call(window,value)},usMoney:function(a){a=Math.round(100*(a-0))/100,a=a==Math.floor(a)?a+".00":10*a==Math.floor(10*a)?a+"0":a,a=String(a);for(var b=a.split("."),c=b[0],d=b[1]?"."+b[1]:".00",e=/(\d+)(\d{3})/;e.test(c);)c=c.replace(e,"$1,$2");return a=c+d,"-"==a.charAt(0)?"-$"+a.substr(1):"$"+a},date:function(a,b){return a?(Ext.isDate(a)||(a=new Date(Date.parse(a))),a.dateFormat(b||"m/d/Y")):""},dateRenderer:function(a){return function(b){return Ext.util.Format.date(b,a)}},stripTagsRE:/<\/?[^>]+>/gi,stripTags:function(a){return a?String(a).replace(this.stripTagsRE,""):a},stripScriptsRe:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,stripScripts:function(a){return a?String(a).replace(this.stripScriptsRe,""):a},fileSize:function(a){return 1024>a?a+" bytes":1048576>a?Math.round(10*a/1024)/10+" KB":Math.round(10*a/1048576)/10+" MB"},math:function(){var a={};return function(b,c){return a[c]||(a[c]=new Function("v","return v "+c+";")),a[c](b)}}(),nl2br:function(a){return void 0===a||null===a?"":a.replace(/\n/g,"<br/>")}}}(),Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var a=this.html;a=["<tpl>",a,"</tpl>"].join("");for(var b,c=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,d=/^<tpl\b[^>]*?for="(.*?)"/,e=/^<tpl\b[^>]*?if="(.*?)"/,f=/^<tpl\b[^>]*?exec="(.*?)"/,g=0,h=[];b=a.match(c);){var i=b[0].match(d),j=b[0].match(e),k=b[0].match(f),l=null,m=null,n=null,o=i&&i[1]?i[1]:"";if(j&&(l=j&&j[1]?j[1]:null,l&&(m=new Function("values","parent","xindex","xcount","with(values){ return "+Ext.util.Format.htmlDecode(l)+"; }"))),k&&(l=k&&k[1]?k[1]:null,l&&(n=new Function("values","parent","xindex","xcount","with(values){ "+Ext.util.Format.htmlDecode(l)+"; }"))),o)switch(o){case".":o=new Function("values","parent","with(values){ return values; }");break;case"..":o=new Function("values","parent","with(values){ return parent; }");break;default:o=new Function("values","parent","with(values){ return "+o+"; }")}h.push({id:g,target:o,exec:n,test:m,body:b[1]||""}),a=a.replace(b[0],"{xtpl"+g+"}"),++g}for(var p=h.length-1;p>=0;--p)this.compileTpl(h[p]);this.master=h[h.length-1],this.tpls=h},Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(a,b,c,d,e){var f=this.tpls[a];if(f.test&&!f.test.call(this,b,c,d,e))return"";if(f.exec&&f.exec.call(this,b,c,d,e))return"";var g=f.target?f.target.call(this,b,c):b;if(c=f.target?b:c,f.target&&Ext.isArray(g)){for(var h=[],i=0,j=g.length;j>i;i++)h[h.length]=f.compiled.call(this,g[i],c,i+1,j);return h.join("")}return f.compiled.call(this,g,c,d,e)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=this.disableFormats!==!0,sep=Ext.isGecko?"+":",",fn=function(a,b,c,d,e){if("xtpl"==b.substr(0,4))return"'"+sep+"this.applySubTemplate("+b.substr(4)+", values, parent, xindex, xcount)"+sep+"'";var f;return f="."===b?"values":"#"===b?"xindex":-1!=b.indexOf(".")?b:"values['"+b+"']",e&&(f="("+f+e+")"),c&&useF?(d=d?","+d:"","this."!=c.substr(0,5)?c="fm."+c+"(":(c='this.call("'+c.substr(5)+'", ',d=", values")):(d="",c="("+f+" === undefined ? '' : "),"'"+sep+c+f+d+")"+sep+"'"},codeFn=function(a,b){return"'"+sep+"("+b+")"+sep+"'"},body;return Ext.isGecko?body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};":(body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)),body.push("'].join('');};"),body=body.join("")),eval(body),this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}}),Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate,Ext.XTemplate.from=function(a){return a=Ext.getDom(a),new Ext.XTemplate(a.value||a.innerHTML)},Ext.util.CSS=function(){var a=null,b=document,c=/(-[a-z])/gi,d=function(a,b){return b.charAt(1).toUpperCase()};return{createStyleSheet:function(a,c){var d,e=b.getElementsByTagName("head")[0],f=b.createElement("style");if(f.setAttribute("type","text/css"),c&&f.setAttribute("id",c),Ext.isIE)e.appendChild(f),d=f.styleSheet,d.cssText=a;else{try{f.appendChild(b.createTextNode(a))}catch(g){f.cssText=a}e.appendChild(f),d=f.styleSheet?f.styleSheet:f.sheet||b.styleSheets[b.styleSheets.length-1]}return this.cacheStyleSheet(d),d},removeStyleSheet:function(a){var c=b.getElementById(a);c&&c.parentNode.removeChild(c)},swapStyleSheet:function(a,c){this.removeStyleSheet(a);var d=b.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("id",a),d.setAttribute("href",c),b.getElementsByTagName("head")[0].appendChild(d)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(b){a||(a={});try{for(var c=b.cssRules||b.rules,d=c.length-1;d>=0;--d)a[c[d].selectorText]=c[d]}catch(e){}},getRules:function(c){if(null==a||c){a={};for(var d=b.styleSheets,e=0,f=d.length;f>e;e++)try{this.cacheStyleSheet(d[e])}catch(g){}}return a},getRule:function(a,b){var c=this.getRules(b);if(!Ext.isArray(a))return c[a];for(var d=0;d<a.length;d++)if(c[a[d]])return c[a[d]];return null},updateRule:function(a,b,e){if(Ext.isArray(a)){for(var f=0;f<a.length;f++)if(this.updateRule(a[f],b,e))return!0}else{var g=this.getRule(a);if(g)return g.style[b.replace(c,d)]=e,!0}return!1}}}(),Ext.util.ClickRepeater=function(a,b){this.el=Ext.get(a),this.el.unselectable(),Ext.apply(this,b),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler&&this.on("click",this.handler,this.scope||this),Ext.util.ClickRepeater.superclass.constructor.call(this)},Ext.extend(Ext.util.ClickRepeater,Ext.util.Observable,{interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(a){(a||!this.disabled)&&(clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners()),this.disabled=!0},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){this.preventDefault&&a.preventDefault(),this.stopDefault&&a.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.purgeListeners()},handleMouseDown:function(){clearTimeout(this.timer),this.el.blur(),this.pressClass&&this.el.addClass(this.pressClass),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this),this.fireEvent("click",this),this.accelerate&&(this.delay=400),this.timer=this.click.defer(this.delay||this.interval,this)},click:function(){this.fireEvent("click",this),this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this)},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressClass&&this.el.addClass(this.pressClass),this.click()},handleMouseUp:function(){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeClass(this.pressClass),this.fireEvent("mouseup",this)}}),Ext.KeyNav=function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.disabled||(this.disabled=!0,this.enable())},Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,prepareEvent:function(a){var b=a.getKey(),c=this.keyToHandler[b];Ext.isSafari2&&c&&b>=37&&40>=b&&a.stopEvent()},relay:function(a){var b=a.getKey(),c=this.keyToHandler[b];c&&this[c]&&this.doRelay(a,this[c],c)!==!0&&a[this.defaultEventAction]()},doRelay:function(a,b){return b.call(this.scope||this,a)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},enable:function(){this.disabled&&(this.isKeyDown()?this.el.on("keydown",this.relay,this):(this.el.on("keydown",this.prepareEvent,this),this.el.on("keypress",this.relay,this)),this.disabled=!1)},disable:function(){this.disabled||(this.isKeyDown()?this.el.un("keydown",this.relay,this):(this.el.un("keydown",this.prepareEvent,this),this.el.un("keypress",this.relay,this)),this.disabled=!0)},isKeyDown:function(){return this.forceKeyDown||Ext.isIE||Ext.isWebKit&&!Ext.isSafari2||Ext.isAir}},Ext.KeyMap=function(a,b,c){this.el=Ext.get(a),this.eventName=c||"keydown",this.bindings=[],b&&this.addBinding(b),this.enable()},Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;c>b;b++)this.addBinding(a[b]);else{var d=a.key,e=a.shift,f=a.ctrl,g=a.alt,h=a.fn||a.handler,i=a.scope;if(a.stopEvent&&(this.stopEvent=a.stopEvent),"string"==typeof d){for(var j=[],k=d.toUpperCase(),l=0,c=k.length;c>l;l++)j.push(k.charCodeAt(l));d=j}var m=Ext.isArray(d),n=function(a){if(!(e&&!a.shiftKey||f&&!a.ctrlKey||g&&!a.altKey)){var b=a.getKey();if(m){for(var c=0,j=d.length;j>c;c++)if(d[c]==b)return this.stopEvent&&a.stopEvent(),h.call(i||window,b,a),void 0}else b==d&&(this.stopEvent&&a.stopEvent(),h.call(i||window,b,a))}};this.bindings.push(n)}},on:function(a,b,c){var d,e,f,g;"object"!=typeof a||Ext.isArray(a)?d=a:(d=a.key,e=a.shift,f=a.ctrl,g=a.alt),this.addBinding({key:d,shift:e,ctrl:f,alt:g,fn:b,scope:c})},handleKeyDown:function(a){if(this.enabled)for(var b=this.bindings,c=0,d=b.length;d>c;c++)b[c].call(this,a)},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.on(this.eventName,this.handleKeyDown,this),this.enabled=!0)},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)}},Ext.util.TextMetrics=function(){var a;return{measure:function(b,c,d){return a||(a=Ext.util.TextMetrics.Instance(b,d)),a.bind(b),a.setFixedWidth(d||"auto"),a.getSize(c)},createInstance:function(a,b){return Ext.util.TextMetrics.Instance(a,b)}}}(),Ext.util.TextMetrics.Instance=function(a,b){var c=new Ext.Element(document.createElement("div"));document.body.appendChild(c.dom),c.position("absolute"),c.setLeftTop(-1e3,-1e3),c.hide(),b&&c.setWidth(b);var d={getSize:function(a){c.update(a);var b=c.getSize();return c.update(""),b},bind:function(a){c.setStyle(Ext.fly(a).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(a){c.setWidth(a)},getWidth:function(a){return c.dom.style.width="auto",this.getSize(a).width},getHeight:function(a){return this.getSize(a).height}};return d.bind(a),d},Ext.Element.measureText=Ext.util.TextMetrics.measure,function(){var a=Ext.EventManager,b=Ext.lib.Dom;Ext.dd.DragDrop=function(a,b,c){a&&this.init(a,b,c)},Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(){},startDrag:function(){},b4Drag:function(){},onDrag:function(){},onDragEnter:function(){},b4DragOver:function(){},onDragOver:function(){},b4DragOut:function(){},onDragOut:function(){},b4DragDrop:function(){},onDragDrop:function(){},onInvalidDrop:function(){},b4EndDrag:function(){},endDrag:function(){},b4MouseDown:function(){},onMouseDown:function(){},onMouseUp:function(){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(a,b){"number"==typeof b&&(b={left:b,right:b,top:b,bottom:b}),b=b||this.defaultPadding;var c,d=Ext.get(this.getEl()).getBox(),e=Ext.get(a),f=e.getScroll(),g=e.dom;if(g==document.body)c={x:f.left,y:f.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()};else{var h=e.getXY();c={x:h[0]+f.left,y:h[1]+f.top,width:g.clientWidth,height:g.clientHeight}}var i=d.y-c.y,j=d.x-c.x;this.resetConstraints(),this.setXConstraint(j-(b.left||0),c.width-j-d.width-(b.right||0),this.xTickSize),this.setYConstraint(i-(b.top||0),c.height-i-d.height-(b.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,c,d){this.initTarget(b,c,d),a.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(a,b,c){this.config=c||{},this.DDM=Ext.dd.DDM,this.groups={},"string"!=typeof a&&(a=Ext.id(a)),this.id=a,this.addToGroup(b?b:"default"),this.handleElId=a,this.setDragElId(a),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(a,b,c,d){this.padding=b||0===b?c||0===c?[a,b,c,d]:[a,b,a,b]:[a,a,a,a]},setInitPosition:function(a,c){var d=this.getEl();if(this.DDM.verifyEl(d)){var e=a||0,f=c||0,g=b.getXY(d);this.initPageX=g[0]-e,this.initPageY=g[1]-f,this.lastPageX=g[0],this.lastPageY=g[1],this.setStartPosition(g)}},setStartPosition:function(a){var c=a||b.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=c[0],this.startPageY=c[1]},addToGroup:function(a){this.groups[a]=!0,this.DDM.regDragDrop(this,a)},removeFromGroup:function(a){this.groups[a]&&delete this.groups[a],this.DDM.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){"string"!=typeof a&&(a=Ext.id(a)),this.handleElId=a,this.DDM.regHandle(this.id,a)},setOuterHandleElId:function(b){"string"!=typeof b&&(b=Ext.id(b)),a.on(b,"mousedown",this.handleMouseDown,this),this.setHandleElId(b),this.hasOuterHandles=!0},unreg:function(){a.un(this.id,"mousedown",this.handleMouseDown),this._domRef=null,this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(a){if(!(this.primaryButtonOnly&&0!=a.button||this.isLocked())){this.DDM.refreshCache(this.groups);var b=new Ext.lib.Point(Ext.lib.Event.getPageX(a),Ext.lib.Event.getPageY(a));(this.hasOuterHandles||this.DDM.isOverTarget(b,this))&&this.clickValidator(a)&&(this.setStartPosition(),this.b4MouseDown(a),this.onMouseDown(a),this.DDM.handleMouseDown(a,this),this.DDM.stopEvent(a))}},clickValidator:function(a){var b=a.getTarget();return this.isValidHandleChild(b)&&(this.id==this.handleElId||this.DDM.handleWasClicked(b,this.id))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){"string"!=typeof a&&(a=Ext.id(a)),this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){"string"!=typeof a&&(a=Ext.id(a)),delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(a){for(var b=0,c=this.invalidHandleClasses.length;c>b;++b)this.invalidHandleClasses[b]==a&&delete this.invalidHandleClasses[b]},isValidHandleChild:function(a){var b,c=!0;try{b=a.nodeName.toUpperCase()}catch(d){b=a.nodeName}c=c&&!this.invalidHandleTypes[b],c=c&&!this.invalidHandleIds[a.id];for(var e=0,f=this.invalidHandleClasses.length;c&&f>e;++e)c=!Ext.fly(a).hasClass(this.invalidHandleClasses[e]);return c},setXTicks:function(a,b){this.xTicks=[],this.xTickSize=b;for(var c={},d=this.initPageX;d>=this.minX;d-=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);for(d=this.initPageX;d<=this.maxX;d+=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(a,b){this.yTicks=[],this.yTickSize=b;for(var c={},d=this.initPageY;d>=this.minY;d-=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);for(d=this.initPageY;d<=this.maxY;d+=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(a,b,c){this.leftConstraint=a,this.rightConstraint=b,this.minX=this.initPageX-a,this.maxX=this.initPageX+b,c&&this.setXTicks(this.initPageX,c),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(a,b,c){this.topConstraint=a,this.bottomConstraint=b,this.minY=this.initPageY-a,this.maxY=this.initPageY+b,c&&this.setYTicks(this.initPageY,c),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||0===this.initPageX){var a=this.maintainOffset?this.lastPageX-this.initPageX:0,b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(a,b){if(b){if(b[0]>=a)return b[0];for(var c=0,d=b.length;d>c;++c){var e=c+1;if(b[e]&&b[e]>=a){var f=a-b[c],g=b[e]-a;return g>f?b[c]:b[e]}}return b[b.length-1]}return a},toString:function(){return"DragDrop "+this.id}}}(),Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var a=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(a,b){for(var c in this.ids)for(var d in this.ids[c]){var e=this.ids[c][d];this.isTypeOfDD(e)&&e[a].apply(e,b)}},_onLoad:function(){this.init(),a.on(document,"mouseup",this.handleMouseUp,this,!0),a.on(document,"mousemove",this.handleMouseMove,this,!0),a.on(window,"unload",this._onUnload,this,!0),a.on(window,"resize",this._onResize,this,!0)},_onResize:function(){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(a,b){this.initialized||this.init(),this.ids[b]||(this.ids[b]={}),this.ids[b][a.id]=a},removeDDFromGroup:function(a,b){this.ids[b]||(this.ids[b]={});var c=this.ids[b];c&&c[a.id]&&delete c[a.id]},_remove:function(a){for(var b in a.groups)b&&this.ids[b]&&this.ids[b][a.id]&&delete this.ids[b][a.id];delete this.handleIds[a.id]},regHandle:function(a,b){this.handleIds[a]||(this.handleIds[a]={}),this.handleIds[a][b]=b},isDragDrop:function(a){return this.getDDById(a)?!0:!1},getRelated:function(a,b){var c=[];for(var d in a.groups)for(var e in this.ids[d]){var f=this.ids[d][e];this.isTypeOfDD(f)&&(!b||f.isTarget)&&(c[c.length]=f)}return c},isLegalTarget:function(a,b){for(var c=this.getRelated(a,!0),d=0,e=c.length;e>d;++d)if(c[d].id==b.id)return!0;return!1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(a){for(var b in this.ids)if(this.ids[b][a])return this.ids[b][a];return null},handleMouseDown:function(a,b){Ext.QuickTips&&Ext.QuickTips.disable(),this.dragCurrent&&this.handleMouseUp(a),this.currentTarget=a.getTarget(),this.dragCurrent=b;var c=b.getEl();this.startX=a.getPageX(),this.startY=a.getPageY(),this.deltaX=this.startX-c.offsetLeft,this.deltaY=this.startY-c.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var a=Ext.dd.DDM;a.startDrag(a.startX,a.startY)},this.clickTimeThresh)},startDrag:function(a,b){clearTimeout(this.clickTimeout),this.dragCurrent&&(this.dragCurrent.b4StartDrag(a,b),this.dragCurrent.startDrag(a,b)),this.dragThreshMet=!0},handleMouseUp:function(a){Ext.QuickTips&&Ext.QuickTips.enable(),this.dragCurrent&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(a,!0),this.stopDrag(a),this.stopEvent(a))},stopEvent:function(a){this.stopPropagation&&a.stopPropagation(),this.preventDefault&&a.preventDefault()},stopDrag:function(a){this.dragCurrent&&(this.dragThreshMet&&(this.dragCurrent.b4EndDrag(a),this.dragCurrent.endDrag(a)),this.dragCurrent.onMouseUp(a)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(a){if(!this.dragCurrent)return!0;if(Ext.isIE&&0!==a.button&&1!==a.button&&2!==a.button)return this.stopEvent(a),this.handleMouseUp(a);if(!this.dragThreshMet){var b=Math.abs(this.startX-a.getPageX()),c=Math.abs(this.startY-a.getPageY());(b>this.clickPixelThresh||c>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet&&(this.dragCurrent.b4Drag(a),this.dragCurrent.onDrag(a),this.dragCurrent.moveOnly||this.fireEvents(a,!1)),this.stopEvent(a),!0},fireEvents:function(a,b){var c=this.dragCurrent;if(c&&!c.isLocked()){var d=a.getPoint(),e=[],f=[],g=[],h=[],i=[];for(var j in this.dragOvers){var k=this.dragOvers[j];this.isTypeOfDD(k)&&(this.isOverTarget(d,k,this.mode)||f.push(k),e[j]=!0,delete this.dragOvers[j])}for(var l in c.groups)if("string"==typeof l)for(j in this.ids[l]){var m=this.ids[l][j];this.isTypeOfDD(m)&&m.isTarget&&!m.isLocked()&&m!=c&&this.isOverTarget(d,m,this.mode)&&(b?h.push(m):(e[m.id]?g.push(m):i.push(m),this.dragOvers[m.id]=m))}if(this.mode)f.length&&(c.b4DragOut(a,f),c.onDragOut(a,f)),i.length&&c.onDragEnter(a,i),g.length&&(c.b4DragOver(a,g),c.onDragOver(a,g)),h.length&&(c.b4DragDrop(a,h),c.onDragDrop(a,h));else{var n=0;for(j=0,n=f.length;n>j;++j)c.b4DragOut(a,f[j].id),c.onDragOut(a,f[j].id);for(j=0,n=i.length;n>j;++j)c.onDragEnter(a,i[j].id);for(j=0,n=g.length;n>j;++j)c.b4DragOver(a,g[j].id),c.onDragOver(a,g[j].id);for(j=0,n=h.length;n>j;++j)c.b4DragDrop(a,h[j].id),c.onDragDrop(a,h[j].id)}b&&!h.length&&c.onInvalidDrop(a)}},getBestMatch:function(a){var b=null,c=a.length;if(1==c)b=a[0];else for(var d=0;c>d;++d){var e=a[d];if(e.cursorIsOver){b=e;break}(!b||b.overlap.getArea()<e.overlap.getArea())&&(b=e)}return b},refreshCache:function(a){for(var b in a)if("string"==typeof b)for(var c in this.ids[b]){var d=this.ids[b][c];if(this.isTypeOfDD(d)){var e=this.getLocation(d);e?this.locationCache[d.id]=e:delete this.locationCache[d.id]}}},verifyEl:function(a){if(a){var b;if(Ext.isIE)try{b=a.offsetParent}catch(c){}else b=a.offsetParent;if(b)return!0}return!1},getLocation:function(a){if(!this.isTypeOfDD(a))return null;var b,c,d,e,f,g,h,i,j,k=a.getEl();try{b=Ext.lib.Dom.getXY(k)}catch(l){}return b?(c=b[0],d=c+k.offsetWidth,e=b[1],f=e+k.offsetHeight,g=e-a.padding[0],h=d+a.padding[1],i=f+a.padding[2],j=c-a.padding[3],new Ext.lib.Region(g,h,i,j)):null},isOverTarget:function(a,b,c){var d=this.locationCache[b.id];if(d&&this.useCache||(d=this.getLocation(b),this.locationCache[b.id]=d),!d)return!1;b.cursorIsOver=d.contains(a);var e=this.dragCurrent;if(!e||!e.getTargetCoord||!c&&!e.constrainX&&!e.constrainY)return b.cursorIsOver;b.overlap=null;var f=e.getTargetCoord(a.x,a.y),g=e.getDragEl(),h=new Ext.lib.Region(f.y,f.x+g.offsetWidth,f.y+g.offsetHeight,f.x),i=h.intersect(d);return i?(b.overlap=i,c?!0:b.cursorIsOver):!1},_onUnload:function(){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]);for(var a in this.elementCache)delete this.elementCache[a];this.elementCache={},this.ids={}},elementCache:{},getElWrapper:function(a){var b=this.elementCache[a];return b&&b.el||(b=this.elementCache[a]=new this.ElementWrapper(Ext.getDom(a))),b},getElement:function(a){return Ext.getDom(a)},getCss:function(a){var b=Ext.getDom(a);return b?b.style:null},ElementWrapper:function(a){this.el=a||null,this.id=this.el&&a.id,this.css=this.el&&a.style},getPosX:function(a){return Ext.lib.Dom.getX(a)},getPosY:function(a){return Ext.lib.Dom.getY(a)},swapNode:function(a,b){if(a.swapNode)a.swapNode(b);else{var c=b.parentNode,d=b.nextSibling;d==a?c.insertBefore(a,b):b==a.nextSibling?c.insertBefore(b,a):(a.parentNode.replaceChild(b,a),c.insertBefore(a,d))}},getScroll:function(){var a,b,c=document.documentElement,d=document.body;return c&&(c.scrollTop||c.scrollLeft)?(a=c.scrollTop,b=c.scrollLeft):d&&(a=d.scrollTop,b=d.scrollLeft),{top:a,left:b}},getStyle:function(a,b){return Ext.fly(a).getStyle(b)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,b){var c=Ext.lib.Dom.getXY(b);Ext.lib.Dom.setXY(a,c)},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){var a=Ext.dd.DDM;Ext.lib.Event&&document?a._onLoad():a._timeoutCount>2e3||(setTimeout(a._addListeners,10),document&&document.body&&(a._timeoutCount+=1))},handleWasClicked:function(a,b){if(this.isHandle(b,a.id))return!0;for(var c=a.parentNode;c;){if(this.isHandle(b,c.id))return!0;c=c.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners()),Ext.dd.DD=function(a,b,c){a&&this.init(a,b,c)},Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a,this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(a,b,c){var d=this.getTargetCoord(b,c),e=a.dom?a:Ext.fly(a,"_dd");if(this.deltaSetXY)e.setLeftTop(d.x+this.deltaSetXY[0],d.y+this.deltaSetXY[1]);else{var f=[d.x,d.y];e.setXY(f);var g=e.getLeft(!0),h=e.getTop(!0);
this.deltaSetXY=[g-d.x,h-d.y]}return this.cachePosition(d.x,d.y),this.autoScroll(d.x,d.y,a.offsetHeight,a.offsetWidth),d},cachePosition:function(a,b){if(a)this.lastPageX=a,this.lastPageY=b;else{var c=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=c[0],this.lastPageY=c[1]}},autoScroll:function(a,b,c,d){if(this.scroll){var e=Ext.lib.Dom.getViewHeight(),f=Ext.lib.Dom.getViewWidth(),g=this.DDM.getScrollTop(),h=this.DDM.getScrollLeft(),i=c+b,j=d+a,k=e+g-b-this.deltaY,l=f+h-a-this.deltaX,m=40,n=document.all?80:30;i>e&&m>k&&window.scrollTo(h,g+n),g>b&&g>0&&m>b-g&&window.scrollTo(h,g-n),j>f&&m>l&&window.scrollTo(h+n,g),h>a&&h>0&&m>a-h&&window.scrollTo(h-n,g)}},getTargetCoord:function(a,b){var c=a-this.deltaX,d=b-this.deltaY;return this.constrainX&&(c<this.minX&&(c=this.minX),c>this.maxX&&(c=this.maxX)),this.constrainY&&(d<this.minY&&(d=this.minY),d>this.maxY&&(d=this.maxY)),c=this.getTick(c,this.xTicks),d=this.getTick(d,this.yTicks),{x:c,y:d}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this),this.scroll=this.config.scroll!==!1},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return"DD "+this.id}}),Ext.dd.DDProxy=function(a,b,c){a&&(this.init(a,b,c),this.initFrame())},Ext.dd.DDProxy.dragElId="ygddfdiv",Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var a=this,b=document.body;if(!b||!b.firstChild)return setTimeout(function(){a.createFrame()},50),void 0;var c=this.getDragEl();if(!c){c=document.createElement("div"),c.id=this.dragElId;var d=c.style;d.position="absolute",d.visibility="hidden",d.cursor="move",d.border="2px solid #aaa",d.zIndex=999,b.insertBefore(c,b.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(a,b){var c=(this.getEl(),this.getDragEl()),d=c.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(d.width,10)/2),Math.round(parseInt(d.height,10)/2)),this.setDragElPos(a,b),Ext.fly(c).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c),this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(){Ext.fly(this.getDragEl()).hide()},endDrag:function(){var a=this.getEl(),b=this.getDragEl();b.style.visibility="",this.beforeMove(),a.style.visibility="hidden",Ext.dd.DDM.moveToEl(a,b),b.style.visibility="hidden",a.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.dd.DDTarget=function(a,b,c){a&&this.initTarget(a,b,c)},Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{toString:function(){return"DDTarget "+this.id}}),Ext.dd.DragTracker=function(a){Ext.apply(this,a),this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag"),this.dragRegion=new Ext.lib.Region(0,0,0,0),this.el&&this.initEl(this.el)},Ext.extend(Ext.dd.DragTracker,Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,initEl:function(a){this.el=Ext.get(a),a.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:void 0)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this)},onMouseDown:function(a,b){if(this.fireEvent("mousedown",this,a)!==!1&&this.onBeforeStart(a)!==!1){this.startXY=this.lastXY=a.getXY(),this.dragTarget=this.delegate?b:this.el.dom,a.preventDefault();var c=Ext.getDoc();c.on("mouseup",this.onMouseUp,this),c.on("mousemove",this.onMouseMove,this),c.on("selectstart",this.stopSelect,this),this.autoStart&&(this.timer=this.triggerStart.defer(this.autoStart===!0?1e3:this.autoStart,this))}},onMouseMove:function(a){if(this.active&&Ext.isIE&&!a.browserEvent.button)return a.preventDefault(),this.onMouseUp(a),void 0;a.preventDefault();var b=a.getXY(),c=this.startXY;if(this.lastXY=b,!this.active){if(!(Math.abs(c[0]-b[0])>this.tolerance||Math.abs(c[1]-b[1])>this.tolerance))return;this.triggerStart()}this.fireEvent("mousemove",this,a),this.onDrag(a),this.fireEvent("drag",this,a)},onMouseUp:function(a){var b=Ext.getDoc();b.un("mousemove",this.onMouseMove,this),b.un("mouseup",this.onMouseUp,this),b.un("selectstart",this.stopSelect,this),a.preventDefault(),this.clearStart(),this.active=!1,delete this.elRegion,this.fireEvent("mouseup",this,a),this.onEnd(a),this.fireEvent("dragend",this,a)},triggerStart:function(){this.clearStart(),this.active=!0,this.onStart(this.startXY),this.fireEvent("dragstart",this,this.startXY)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(a){return a.stopEvent(),!1},onBeforeStart:function(){},onStart:function(){},onDrag:function(){},onEnd:function(){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(a){return a?this.constrainModes[a].call(this,this.lastXY):this.lastXY},getOffset:function(a){var b=this.getXY(a),c=this.startXY;return[c[0]-b[0],c[1]-b[1]]},constrainModes:{point:function(a){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var b=this.dragRegion;return b.left=a[0],b.top=a[1],b.right=a[0],b.bottom=a[1],b.constrainTo(this.elRegion),[b.left,b.top]}}}),Ext.dd.ScrollManager=function(){var a=Ext.dd.DragDropMgr,b={},c=null,d={},e=function(){c=null,h()},f=function(){a.dragCurrent&&a.refreshCache(a.dragCurrent.groups)},g=function(){if(a.dragCurrent){var b=Ext.dd.ScrollManager,c=d.el.ddScrollConfig?d.el.ddScrollConfig.increment:b.increment;b.animate?d.el.scroll(d.dir,c,!0,b.animDuration,f):d.el.scroll(d.dir,c)&&f()}},h=function(){d.id&&clearInterval(d.id),d.id=0,d.el=null,d.dir=""},i=function(a,b){h(),d.el=a,d.dir=b;var c=a.ddScrollConfig&&a.ddScrollConfig.frequency?a.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;d.id=setInterval(g,c)},j=function(e,f){if(!f&&a.dragCurrent){var g=Ext.dd.ScrollManager;c&&c==a.dragCurrent||(c=a.dragCurrent,g.refreshCache());var j=Ext.lib.Event.getXY(e),k=new Ext.lib.Point(j[0],j[1]);for(var l in b){var m=b[l],n=m._region,o=m.ddScrollConfig?m.ddScrollConfig:g;if(n&&n.contains(k)&&m.isScrollable()){if(n.bottom-k.y<=o.vthresh)return d.el!=m&&i(m,"down"),void 0;if(n.right-k.x<=o.hthresh)return d.el!=m&&i(m,"left"),void 0;if(k.y-n.top<=o.vthresh)return d.el!=m&&i(m,"up"),void 0;if(k.x-n.left<=o.hthresh)return d.el!=m&&i(m,"right"),void 0}}h()}};return a.fireEvents=a.fireEvents.createSequence(j,a),a.stopDrag=a.stopDrag.createSequence(e,a),{register:function(a){if(Ext.isArray(a))for(var c=0,d=a.length;d>c;c++)this.register(a[c]);else a=Ext.get(a),b[a.id]=a},unregister:function(a){if(Ext.isArray(a))for(var c=0,d=a.length;d>c;c++)this.unregister(a[c]);else a=Ext.get(a),delete b[a.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,refreshCache:function(){for(var a in b)"object"==typeof b[a]&&(b[a]._region=b[a].getRegion())}}}(),Ext.dd.Registry=function(){var a={},b={},c=0,d=function(a,b){if("string"==typeof a)return a;var d=a.id;return d||b===!1||(d="extdd-"+ ++c,a.id=d),d};return{register:function(c,e){if(e=e||{},"string"==typeof c&&(c=document.getElementById(c)),e.ddel=c,a[d(c)]=e,e.isHandle!==!1&&(b[e.ddel.id]=e),e.handles)for(var f=e.handles,g=0,h=f.length;h>g;g++)b[d(f[g])]=e},unregister:function(c){var e=d(c,!1),f=a[e];if(f&&(delete a[e],f.handles))for(var g=f.handles,h=0,i=g.length;i>h;h++)delete b[d(g[h],!1)]},getHandle:function(a){return"string"!=typeof a&&(a=a.id),b[a]},getHandleFromEvent:function(a){var c=Ext.lib.Event.getTarget(a);return c?b[c.id]:null},getTarget:function(b){return"string"!=typeof b&&(b=b.id),a[b]},getTargetFromEvent:function(c){var d=Ext.lib.Event.getTarget(c);return d?a[d.id]||b[d.id]:null}}}(),Ext.dd.StatusProxy=function(a){Ext.apply(this,a),this.id=this.id||Ext.id(),this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!a||a.shadow!==!1}),this.ghost=Ext.get(this.el.dom.childNodes[1]),this.dropStatus=this.dropNotAllowed},Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed,this.dropStatus!=a&&(this.el.replaceClass(this.dropStatus,a),this.dropStatus=a)},reset:function(a){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed,this.dropStatus=this.dropNotAllowed,a&&this.ghost.update("")},update:function(a){"string"==typeof a?this.ghost.update(a):(this.ghost.update(""),a.style.margin="0",this.ghost.dom.appendChild(a));var b=this.ghost.dom.firstChild;b&&Ext.fly(b).setStyle(Ext.isIE?"styleFloat":"cssFloat","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.el.hide(),a&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(a,b,c){this.callback=b,this.scope=c,a&&this.animRepair!==!1?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:a,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0),"function"==typeof this.callback&&this.callback.call(this.scope||this),this.callback=null,this.scope=null}},Ext.dd.DragSource=function(a,b){this.el=Ext.get(a),this.dragData||(this.dragData={}),Ext.apply(this,b),this.proxy||(this.proxy=new Ext.dd.StatusProxy),Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}),this.dragging=!1},Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(){return this.dragData},onDragEnter:function(a,b){var c=Ext.dd.DragDropMgr.getDDById(b);if(this.cachedTarget=c,this.beforeDragEnter(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyEnter(this,a,this.dragData);this.proxy.setStatus(d)}else this.proxy.setStatus(this.dropAllowed);this.afterDragEnter&&this.afterDragEnter(c,a,b)}},beforeDragEnter:function(){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments),this.proxy.sync()},onDragOver:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);if(this.beforeDragOver(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyOver(this,a,this.dragData);this.proxy.setStatus(d)}this.afterDragOver&&this.afterDragOver(c,a,b)}},beforeDragOver:function(){return!0},onDragOut:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);this.beforeDragOut(c,a,b)!==!1&&(c.isNotifyTarget&&c.notifyOut(this,a,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(c,a,b)),this.cachedTarget=null},beforeDragOut:function(){return!0},onDragDrop:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);this.beforeDragDrop(c,a,b)!==!1&&(c.isNotifyTarget?c.notifyDrop(this,a,this.dragData)?this.onValidDrop(c,a,b):this.onInvalidDrop(c,a,b):this.onValidDrop(c,a,b),this.afterDragDrop&&this.afterDragDrop(c,a,b)),delete this.cachedTarget},beforeDragDrop:function(){return!0},onValidDrop:function(a,b,c){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(a,b,c)},getRepairXY:function(){return this.el.getXY()},onInvalidDrop:function(a,b,c){this.beforeInvalidDrop(a,b,c),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,b,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(b,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(b,c)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9"),this.dragging=!1},beforeInvalidDrop:function(){return!0},handleMouseDown:function(a){if(!this.dragging){var b=this.getDragData(a);b&&this.onBeforeDrag(b,a)!==!1&&(this.dragData=b,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))}},onBeforeDrag:function(){return!0},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset(),this.dragging=!0,this.proxy.update(""),this.onInitDrag(a,b),this.proxy.show()},onInitDrag:function(a,b){var c=this.el.dom.cloneNode(!0);return c.id=Ext.id(),this.proxy.update(c),this.onStartDrag(a,b),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(){},autoOffset:function(){this.setDelta(-12,-20)}}),Ext.dd.DropTarget=function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},Ext.extend(Ext.dd.DropTarget,Ext.dd.DDTarget,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(){return this.dropAllowed},notifyOut:function(){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(){return!1}}),Ext.dd.DragZone=function(a,b){Ext.dd.DragZone.superclass.constructor.call(this,a,b),this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},Ext.extend(Ext.dd.DragZone,Ext.dd.DragSource,{getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(a,b),!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1},getRepairXY:function(){return Ext.Element.fly(this.dragData.ddel).getXY()}}),Ext.dd.DropZone=function(a,b){Ext.dd.DropZone.superclass.constructor.call(this,a,b)},Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(){},onNodeOver:function(){return this.dropAllowed},onNodeOut:function(){},onNodeDrop:function(){return!1},onContainerOver:function(){return this.dropNotAllowed},onContainerDrop:function(){return!1},notifyEnter:function(){return this.dropNotAllowed},notifyOver:function(a,b,c){var d=this.getTargetFromEvent(b);return d?(this.lastOverNode!=d&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,a,b,c),this.onNodeEnter(d,a,b,c),this.lastOverNode=d),this.onNodeOver(d,a,b,c)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null),this.onContainerOver(a,b,c))},notifyOut:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null)},notifyDrop:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null);var d=this.getTargetFromEvent(b);return d?this.onNodeDrop(d,a,b,c):this.onContainerDrop(a,b,c)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){return a?Ext.isDate(a)?a.getTime():Date.parse(String(a)):0},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)&&(b=0),b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""));return isNaN(b)&&(b=0),b}},Ext.data.Record=function(a,b){this.id=b||0===b?b:++Ext.data.Record.AUTO_ID,this.data=a||{}},Ext.data.Record.create=function(a){var b=Ext.extend(Ext.data.Record,{}),c=b.prototype;c.fields=new Ext.util.MixedCollection(!1,function(a){return a.name});for(var d=0,e=a.length;e>d;d++)c.fields.add(new Ext.data.Field(a[d]));return b.getField=function(a){return c.fields.get(a)},b},Ext.data.Record.AUTO_ID=1e3,Ext.data.Record.EDIT="edit",Ext.data.Record.REJECT="reject",Ext.data.Record.COMMIT="commit",Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,join:function(a){this.store=a},set:function(a,b){String(this.data[a])!=String(b)&&(this.dirty=!0,this.modified||(this.modified={}),"undefined"==typeof this.modified[a]&&(this.modified[a]=this.data[a]),this.data[a]=b,!this.editing&&this.store&&this.store.afterEdit(this))},get:function(a){return this.data[a]},beginEdit:function(){this.editing=!0,this.modified={}},cancelEdit:function(){this.editing=!1,delete this.modified},endEdit:function(){this.editing=!1,this.dirty&&this.store&&this.store.afterEdit(this)},reject:function(a){var b=this.modified;for(var c in b)"function"!=typeof b[c]&&(this.data[c]=b[c]);this.dirty=!1,delete this.modified,this.editing=!1,this.store&&a!==!0&&this.store.afterReject(this)},commit:function(a){this.dirty=!1,delete this.modified,this.editing=!1,this.store&&a!==!0&&this.store.afterCommit(this)},getChanges:function(){var a=this.modified,b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=this.data[c]);return b},hasError:function(){return null!=this.error},clearError:function(){this.error=null},copy:function(a){return new this.constructor(Ext.apply({},this.data),a||this.id)},isModified:function(a){return!(!this.modified||!this.modified.hasOwnProperty(a))}},Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var a,b=0;a=arguments[b];b++)this.add(a)},unregister:function(){for(var a,b=0;a=arguments[b];b++)this.remove(this.lookup(a))},lookup:function(a){return"object"==typeof a?a:this.get(a)},getKey:function(a){return a.storeId||a.id}}),Ext.data.Store=function(a){this.data=new Ext.util.MixedCollection(!1),this.data.getKey=function(a){return a.id},this.baseParams={},this.paramNames={start:"start",limit:"limit",sort:"sort",dir:"dir"},a&&a.data&&(this.inlineData=a.data,delete a.data),Ext.apply(this,a),this.url&&!this.proxy&&(this.proxy=new Ext.data.HttpProxy({url:this.url})),this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.onMetaChange.createDelegate(this))),this.recordType&&(this.fields=this.recordType.prototype.fields),this.modified=[],this.addEvents("datachanged","metachange","add","remove","update","clear","beforeload","load","loadexception"),this.proxy&&this.relayEvents(this.proxy,["loadexception"]),this.sortToggle={},this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction),Ext.data.Store.superclass.constructor.call(this),(this.storeId||this.id)&&Ext.StoreMgr.register(this),this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,["object"==typeof this.autoLoad?this.autoLoad:void 0])},Ext.extend(Ext.data.Store,Ext.util.Observable,{remoteSort:!1,pruneModifiedRecords:!1,lastOptions:null,destroy:function(){(this.storeId||this.id)&&Ext.StoreMgr.unregister(this),this.data=null,Ext.destroy(this.proxy),this.reader=null,this.purgeListeners()},add:function(a){if(a=[].concat(a),!(a.length<1)){for(var b=0,c=a.length;c>b;b++)a[b].join(this);var d=this.data.length;this.data.addAll(a),this.snapshot&&this.snapshot.addAll(a),this.fireEvent("add",this,a,d)}},addSorted:function(a){var b=this.findInsertIndex(a);this.insert(b,a)},remove:function(a){var b=this.data.indexOf(a);b>-1&&(this.data.removeAt(b),this.pruneModifiedRecords&&this.modified.remove(a),this.snapshot&&this.snapshot.remove(a),this.fireEvent("remove",this,a,b))},removeAt:function(a){this.remove(this.getAt(a))},removeAll:function(){this.data.clear(),this.snapshot&&this.snapshot.clear(),this.pruneModifiedRecords&&(this.modified=[]),this.fireEvent("clear",this)},insert:function(a,b){b=[].concat(b);for(var c=0,d=b.length;d>c;c++)this.data.insert(a,b[c]),b[c].join(this);this.fireEvent("add",this,b,a)},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},getById:function(a){return this.data.key(a)},getAt:function(a){return this.data.itemAt(a)},getRange:function(a,b){return this.data.getRange(a,b)},storeOptions:function(a){a=Ext.apply({},a),delete a.callback,delete a.scope,this.lastOptions=a},load:function(a){if(a=a||{},this.fireEvent("beforeload",this,a)!==!1){this.storeOptions(a);var b=Ext.apply(a.params||{},this.baseParams);if(this.sortInfo&&this.remoteSort){var c=this.paramNames;b[c.sort]=this.sortInfo.field,b[c.dir]=this.sortInfo.direction}return this.proxy.load(b,this.reader,this.loadRecords,this,a),!0}return!1},reload:function(a){this.load(Ext.applyIf(a||{},this.lastOptions))},loadRecords:function(a,b,c){if(!a||c===!1)return c!==!1&&this.fireEvent("load",this,[],b),b.callback&&b.callback.call(b.scope||this,[],b,!1),void 0;var d=a.records,e=a.totalRecords||d.length;if(b&&b.add===!0)this.totalLength=Math.max(e,this.data.length+d.length),this.add(d);else{this.pruneModifiedRecords&&(this.modified=[]);for(var f=0,g=d.length;g>f;f++)d[f].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot),this.data.clear(),this.data.addAll(d),this.totalLength=e,this.applySort(),this.fireEvent("datachanged",this)}this.fireEvent("load",this,d,b),b.callback&&b.callback.call(b.scope||this,d,b,!0)},loadData:function(a,b){var c=this.reader.readRecords(a);this.loadRecords(c,{add:b},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if(this.sortInfo&&!this.remoteSort){var a=this.sortInfo,b=a.field;this.sortData(b,a.direction)}},sortData:function(a,b){b=b||"ASC";var c=this.fields.get(a).sortType,d=function(b,d){var e=c(b.data[a]),f=c(d.data[a]);return e>f?1:f>e?-1:0};this.data.sort(b,d),this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(b,d)},setDefaultSort:function(a,b){b=b?b.toUpperCase():"ASC",this.sortInfo={field:a,direction:b},this.sortToggle[a]=b},sort:function(a,b){var c=this.fields.get(a);if(!c)return!1;b||(b=this.sortInfo&&this.sortInfo.field==c.name?(this.sortToggle[c.name]||"ASC").toggle("ASC","DESC"):c.sortDir);var d=this.sortToggle?this.sortToggle[c.name]:null,e=this.sortInfo?this.sortInfo:null;this.sortToggle[c.name]=b,this.sortInfo={field:c.name,direction:b},this.remoteSort?this.load(this.lastOptions)||(d&&(this.sortToggle[c.name]=d),e&&(this.sortInfo=e)):(this.applySort(),this.fireEvent("datachanged",this))},each:function(a,b){this.data.each(a,b)},getModifiedRecords:function(){return this.modified},createFilterFn:function(a,b,c,d){return Ext.isEmpty(b,!1)?!1:(b=this.data.createValueMatcher(b,c,d),function(c){return b.test(c.data[a])})},sum:function(a,b,c){var d=this.data.items,e=0;b=b||0,c=c||0===c?c:d.length-1;for(var f=b;c>=f;f++)e+=d[f].data[a]||0;return e},filter:function(a,b,c,d){var e=this.createFilterFn(a,b,c,d);return e?this.filterBy(e):this.clearFilter()},filterBy:function(a,b){this.snapshot=this.snapshot||this.data,this.data=this.queryBy(a,b||this),this.fireEvent("datachanged",this)},query:function(a,b,c,d){var e=this.createFilterFn(a,b,c,d);return e?this.queryBy(e):this.data.clone()},queryBy:function(a,b){var c=this.snapshot||this.data;return c.filterBy(a,b||this)},find:function(a,b,c,d,e){var f=this.createFilterFn(a,b,d,e);return f?this.data.findIndexBy(f,null,c):-1},findBy:function(a,b,c){return this.data.findIndexBy(a,b,c)},collect:function(a,b,c){for(var d,e,f=c===!0&&this.snapshot?this.snapshot.items:this.data.items,g=[],h={},i=0,j=f.length;j>i;i++)d=f[i].data[a],e=String(d),!b&&Ext.isEmpty(d)||h[e]||(h[e]=!0,g[g.length]=d);return g},clearFilter:function(a){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,a!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return this.snapshot&&this.snapshot!=this.data},afterEdit:function(a){-1==this.modified.indexOf(a)&&this.modified.push(a),this.fireEvent("update",this,a,Ext.data.Record.EDIT)},afterReject:function(a){this.modified.remove(a),this.fireEvent("update",this,a,Ext.data.Record.REJECT)},afterCommit:function(a){this.modified.remove(a),this.fireEvent("update",this,a,Ext.data.Record.COMMIT)},commitChanges:function(){var a=this.modified.slice(0);this.modified=[];for(var b=0,c=a.length;c>b;b++)a[b].commit()},rejectChanges:function(){var a=this.modified.slice(0);this.modified=[];for(var b=0,c=a.length;c>b;b++)a[b].reject()},onMetaChange:function(a,b){this.recordType=b,this.fields=b.prototype.fields,delete this.snapshot,a.sortInfo?this.sortInfo=a.sortInfo:this.sortInfo&&!this.fields.get(this.sortInfo.field)&&delete this.sortInfo,this.modified=[],this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(a){this.suspendEvents();var b=this.data.clone();this.data.add(a),this.applySort();var c=this.data.indexOf(a);return this.data=b,this.resumeEvents(),c}}),Ext.data.SimpleStore=function(a){Ext.data.SimpleStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.ArrayReader({id:a.id},Ext.data.Record.create(a.fields))}))},Ext.extend(Ext.data.SimpleStore,Ext.data.Store,{loadData:function(a,b){if(this.expandData===!0){for(var c=[],d=0,e=a.length;e>d;d++)c[c.length]=[a[d]];a=c}Ext.data.SimpleStore.superclass.loadData.call(this,a,b)}}),Ext.data.JsonStore=function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{proxy:a.proxy||(a.data?void 0:new Ext.data.HttpProxy({url:a.url})),reader:new Ext.data.JsonReader(a,a.fields)}))},Ext.extend(Ext.data.JsonStore,Ext.data.Store),Ext.data.Field=function(a){"string"==typeof a&&(a={name:a}),Ext.apply(this,a),this.type||(this.type="auto");var b=Ext.data.SortTypes;if("string"==typeof this.sortType&&(this.sortType=b[this.sortType]),!this.sortType)switch(this.type){case"string":this.sortType=b.asUCString;break;case"date":this.sortType=b.asDate;break;default:this.sortType=b.none}var c=/[\$,%]/g;if(!this.convert){var d,e=this.dateFormat;switch(this.type){case"":case"auto":case void 0:d=function(a){return a};break;case"string":d=function(a){return void 0===a||null===a?"":String(a)};break;case"int":d=function(a){return void 0!==a&&null!==a&&""!==a?parseInt(String(a).replace(c,""),10):""};break;case"float":d=function(a){return void 0!==a&&null!==a&&""!==a?parseFloat(String(a).replace(c,""),10):""};break;case"bool":case"boolean":d=function(a){return a===!0||"true"===a||1==a};break;case"date":d=function(a){if(!a)return"";if(Ext.isDate(a))return a;if(e)return"timestamp"==e?new Date(1e3*a):"time"==e?new Date(parseInt(a,10)):Date.parseDate(a,e);var b=Date.parse(a);return b?new Date(b):null}}this.convert=d}},Ext.data.Field.prototype={dateFormat:null,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC"},Ext.data.DataReader=function(a,b){this.meta=a,this.recordType=Ext.isArray(b)?Ext.data.Record.create(b):b},Ext.data.DataReader.prototype={},Ext.data.DataProxy=function(){this.addEvents("beforeload","load"),Ext.data.DataProxy.superclass.constructor.call(this)},Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{destroy:function(){this.purgeListeners()}}),Ext.data.MemoryProxy=function(a){Ext.data.MemoryProxy.superclass.constructor.call(this),this.data=a},Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{load:function(a,b,c,d,e){a=a||{};var f;try{f=b.readRecords(this.data)}catch(g){return this.fireEvent("loadexception",this,e,null,g),c.call(d,null,e,!1),void 0}c.call(d,f,e,!0)},update:function(){}}),Ext.data.HttpProxy=function(a){Ext.data.HttpProxy.superclass.constructor.call(this),this.conn=a,this.useAjax=!a||!a.events},Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},load:function(a,b,c,d,e){if(this.fireEvent("beforeload",this,a)!==!1){var f={params:a||{},request:{callback:c,scope:d,arg:e},reader:b,callback:this.loadResponse,scope:this};this.useAjax?(Ext.applyIf(f,this.conn),this.activeRequest&&Ext.Ajax.abort(this.activeRequest),this.activeRequest=Ext.Ajax.request(f)):this.conn.request(f)}else c.call(d||this,null,e,!1)},loadResponse:function(a,b,c){if(delete this.activeRequest,!b)return this.fireEvent("loadexception",this,a,c),a.request.callback.call(a.request.scope,null,a.request.arg,!1),void 0;var d;try{d=a.reader.read(c)}catch(e){return this.fireEvent("loadexception",this,a,c,e),a.request.callback.call(a.request.scope,null,a.request.arg,!1),void 0}this.fireEvent("load",this,a,a.request.arg),a.request.callback.call(a.request.scope,d,a.request.arg,!0)},update:function(){},updateResponse:function(){},destroy:function(){this.useAjax?this.activeRequest&&Ext.Ajax.abort(this.activeRequest):this.conn.abort(),Ext.data.HttpProxy.superclass.destroy.call(this)}}),Ext.data.ScriptTagProxy=function(a){Ext.data.ScriptTagProxy.superclass.constructor.call(this),Ext.apply(this,a),this.head=document.getElementsByTagName("head")[0]},Ext.data.ScriptTagProxy.TRANS_ID=1e3,Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,load:function(a,b,c,d,e){if(this.fireEvent("beforeload",this,a)!==!1){var f=Ext.urlEncode(Ext.apply(a,this.extraParams)),g=this.url;g+=(-1!=g.indexOf("?")?"&":"?")+f,this.nocache&&(g+="&_dc="+(new Date).getTime());var h=++Ext.data.ScriptTagProxy.TRANS_ID,i={id:h,cb:"stcCallback"+h,scriptId:"stcScript"+h,params:a,arg:e,url:g,callback:c,scope:d,reader:b},j=this;window[i.cb]=function(a){j.handleResponse(a,i)},g+=String.format("&{0}={1}",this.callbackParam,i.cb),this.autoAbort!==!1&&this.abort(),i.timeoutId=this.handleFailure.defer(this.timeout,this,[i]);var k=document.createElement("script");k.setAttribute("src",g),k.setAttribute("type","text/javascript"),k.setAttribute("id",i.scriptId),this.head.appendChild(k),this.trans=i}else c.call(d||this,null,e,!1)},isLoading:function(){return this.trans?!0:!1},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(a,b){if(this.head.removeChild(document.getElementById(a.scriptId)),clearTimeout(a.timeoutId),b){window[a.cb]=void 0;try{delete window[a.cb]}catch(c){}}else window[a.cb]=function(){window[a.cb]=void 0;try{delete window[a.cb]}catch(b){}}},handleResponse:function(a,b){this.trans=!1,this.destroyTrans(b,!0);var c;try{c=b.reader.readRecords(a)}catch(d){return this.fireEvent("loadexception",this,a,b.arg,d),b.callback.call(b.scope||window,null,b.arg,!1),void 0}this.fireEvent("load",this,a,b.arg),b.callback.call(b.scope||window,c,b.arg,!0)},handleFailure:function(a){this.trans=!1,this.destroyTrans(a,!1),this.fireEvent("loadexception",this,null,a.arg),a.callback.call(a.scope||window,null,a.arg,!1)},destroy:function(){this.abort(),Ext.data.ScriptTagProxy.superclass.destroy.call(this)}}),Ext.data.JsonReader=function(a,b){a=a||{},Ext.data.JsonReader.superclass.constructor.call(this,a,b||a.fields)},Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(response){var json=response.responseText,o=eval("("+json+")");if(!o)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(o)},onMetaChange:function(){},simpleAccess:function(a,b){return a[b]},getJsonAccessor:function(){var a=/[\[\.]/;return function(b){try{return a.test(b)?new Function("obj","return obj."+b):function(a){return a[b]}}catch(c){}return Ext.emptyFn}}(),readRecords:function(a){this.jsonData=a,a.metaData&&(delete this.ef,this.meta=a.metaData,this.recordType=Ext.data.Record.create(a.metaData.fields),this.onMetaChange(this.meta,this.recordType,a));var b=this.meta,c=this.recordType,d=c.prototype.fields,e=d.items,f=d.length;if(!this.ef){if(b.totalProperty&&(this.getTotal=this.getJsonAccessor(b.totalProperty)),b.successProperty&&(this.getSuccess=this.getJsonAccessor(b.successProperty)),this.getRoot=b.root?this.getJsonAccessor(b.root):function(a){return a},b.id){var g=this.getJsonAccessor(b.id);this.getId=function(a){var b=g(a);
return void 0===b||""===b?null:b}}else this.getId=function(){return null};this.ef=[];for(var h=0;f>h;h++){d=e[h];var i=void 0!==d.mapping&&null!==d.mapping?d.mapping:d.name;this.ef[h]=this.getJsonAccessor(i)}}var j=this.getRoot(a),k=j.length,l=k,m=!0;if(b.totalProperty){var n=parseInt(this.getTotal(a),10);isNaN(n)||(l=n)}if(b.successProperty){var n=this.getSuccess(a);(n===!1||"false"===n)&&(m=!1)}for(var o=[],h=0;k>h;h++){for(var p=j[h],q={},r=this.getId(p),s=0;f>s;s++){d=e[s];var n=this.ef[s](p);q[d.name]=d.convert(void 0!==n?n:d.defaultValue,p)}var t=new c(q,r);t.json=p,o[h]=t}return{success:m,records:o,totalRecords:l}}}),Ext.data.XmlReader=function(a,b){a=a||{},Ext.data.XmlReader.superclass.constructor.call(this,a,b||a.fields)},Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(a){var b=a.responseXML;if(!b)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(b)},readRecords:function(a){this.xmlData=a;var b=a.documentElement||a,c=Ext.DomQuery,d=this.recordType,e=d.prototype.fields,f=this.meta.id,g=0,h=!0;if(this.meta.totalRecords&&(g=c.selectNumber(this.meta.totalRecords,b,0)),this.meta.success){var i=c.selectValue(this.meta.success,b,!0);h=i!==!1&&"false"!==i}for(var j=[],k=c.select(this.meta.record,b),l=0,m=k.length;m>l;l++){for(var n=k[l],o={},p=f?c.selectValue(f,n):void 0,q=0,r=e.length;r>q;q++){var s=e.items[q],t=c.selectValue(Ext.isEmpty(s.mapping,!0)?s.name:s.mapping,n,s.defaultValue);t=s.convert(t,n),o[s.name]=t}var u=new d(o,p);u.node=n,j[j.length]=u}return{success:h,records:j,totalRecords:g||j.length}}}),Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(a){for(var b=this.meta?this.meta.id:null,c=this.recordType,d=c.prototype.fields,e=[],f=a,g=0;g<f.length;g++){for(var h=f[g],i={},j=!b&&0!==b||void 0===h[b]||""===h[b]?null:h[b],k=0,l=d.length;l>k;k++){var m=d.items[k],n=void 0!==m.mapping&&null!==m.mapping?m.mapping:k,o=void 0!==h[n]?h[n]:m.defaultValue;o=m.convert(o,h),i[m.name]=o}var p=new c(i,j);p.json=h,e[e.length]=p}return{records:e,totalRecords:e.length}}}),Ext.data.Tree=function(a){this.nodeHash={},this.root=null,a&&this.setRootNode(a),this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert"),Ext.data.Tree.superclass.constructor.call(this)},Ext.extend(Ext.data.Tree,Ext.util.Observable,{pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){return this.root=a,a.ownerTree=this,a.isRoot=!0,this.registerNode(a),a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}}),Ext.data.Node=function(a){this.attributes=a||{},this.leaf=this.attributes.leaf,this.id=this.attributes.id,this.id||(this.id=Ext.id(null,"ynode-"),this.attributes.id=this.id),this.childNodes=[],this.childNodes.indexOf||(this.childNodes.indexOf=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return b;return-1}),this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0}),this.listeners=this.attributes.listeners,Ext.data.Node.superclass.constructor.call(this)},Ext.extend(Ext.data.Node,Ext.util.Observable,{fireEvent:function(){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var a=this.getOwnerTree();return a&&a.proxyNodeEvent.apply(a,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(a){var b=!1;if(Ext.isArray(a)?b=a:arguments.length>1&&(b=arguments),!b){if(this.fireEvent("beforeappend",this.ownerTree,this,a)===!1)return!1;var c=this.childNodes.length,d=a.parentNode;if(d){if(a.fireEvent("beforemove",a.getOwnerTree(),a,d,this,c)===!1)return!1;d.removeChild(a)}c=this.childNodes.length,0==c&&this.setFirstChild(a),this.childNodes.push(a),a.parentNode=this;var e=this.childNodes[c-1];return e?(a.previousSibling=e,e.nextSibling=a):a.previousSibling=null,a.nextSibling=null,this.setLastChild(a),a.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,a,c),d&&a.fireEvent("move",this.ownerTree,a,d,this,c),a}for(var f=0,g=b.length;g>f;f++)this.appendChild(b[f])},removeChild:function(a){var b=this.childNodes.indexOf(a);return-1==b?!1:this.fireEvent("beforeremove",this.ownerTree,this,a)===!1?!1:(this.childNodes.splice(b,1),a.previousSibling&&(a.previousSibling.nextSibling=a.nextSibling),a.nextSibling&&(a.nextSibling.previousSibling=a.previousSibling),this.firstChild==a&&this.setFirstChild(a.nextSibling),this.lastChild==a&&this.setLastChild(a.previousSibling),a.setOwnerTree(null),a.parentNode=null,a.previousSibling=null,a.nextSibling=null,this.fireEvent("remove",this.ownerTree,this,a),a)},insertBefore:function(a,b){if(!b)return this.appendChild(a);if(a==b)return!1;if(this.fireEvent("beforeinsert",this.ownerTree,this,a,b)===!1)return!1;var c=this.childNodes.indexOf(b),d=a.parentNode,e=c;if(d==this&&this.childNodes.indexOf(a)<c&&e--,d){if(a.fireEvent("beforemove",a.getOwnerTree(),a,d,this,c,b)===!1)return!1;d.removeChild(a)}0==e&&this.setFirstChild(a),this.childNodes.splice(e,0,a),a.parentNode=this;var f=this.childNodes[e-1];return f?(a.previousSibling=f,f.nextSibling=a):a.previousSibling=null,a.nextSibling=b,b.previousSibling=a,a.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,a,b),d&&a.fireEvent("move",this.ownerTree,a,d,this,e,b),a},remove:function(){return this.parentNode.removeChild(this),this},item:function(a){return this.childNodes[a]},replaceChild:function(a,b){var c=b?b.nextSibling:null;return this.removeChild(b),this.insertBefore(a,c),b},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree)for(var a=this;a;){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}return this.ownerTree},getDepth:function(){for(var a=0,b=this;b.parentNode;)++a,b=b.parentNode;return a},setOwnerTree:function(a){if(a!=this.ownerTree){this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=a;for(var b=this.childNodes,c=0,d=b.length;d>c;c++)b[c].setOwnerTree(a);a&&a.registerNode(this)}},getPath:function(a){a=a||"id";for(var b=this.parentNode,c=[this.attributes[a]];b;)c.unshift(b.attributes[a]),b=b.parentNode;var d=this.getOwnerTree().pathSeparator;return d+c.join(d)},bubble:function(a,b,c){for(var d=this;d&&a.apply(b||d,c||[d])!==!1;)d=d.parentNode},cascade:function(a,b,c){if(a.apply(b||this,c||[this])!==!1)for(var d=this.childNodes,e=0,f=d.length;f>e;e++)d[e].cascade(a,b,c)},eachChild:function(a,b,c){for(var d=this.childNodes,e=0,f=d.length;f>e&&a.apply(b||this,c||[d[e]])!==!1;e++);},findChild:function(a,b){for(var c=this.childNodes,d=0,e=c.length;e>d;d++)if(c[d].attributes[a]==b)return c[d];return null},findChildBy:function(a,b){for(var c=this.childNodes,d=0,e=c.length;e>d;d++)if(a.call(b||c[d],c[d])===!0)return c[d];return null},sort:function(a,b){var c=this.childNodes,d=c.length;if(d>0){var e=b?function(){a.apply(b,arguments)}:a;c.sort(e);for(var f=0;d>f;f++){var g=c[f];g.previousSibling=c[f-1],g.nextSibling=c[f+1],0==f&&this.setFirstChild(g),f==d-1&&this.setLastChild(g)}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){for(var b=this.parentNode;b;){if(b==a)return!0;b=b.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}}),Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.GroupingStore.superclass.constructor.call(this,a),this.applyGroupField()},remoteGroup:!1,groupOnSort:!1,clearGrouping:function(){if(this.groupField=!1,this.remoteGroup){this.baseParams&&delete this.baseParams.groupBy;var a=this.lastOptions;a&&a.params&&delete a.params.groupBy,this.reload()}else this.applySort(),this.fireEvent("datachanged",this)},groupBy:function(a,b){if(this.groupField!=a||b){if(this.groupField=a,this.applyGroupField(),this.groupOnSort)return this.sort(a),void 0;if(this.remoteGroup)this.reload();else{var c=this.sortInfo||{};c.field!=a?this.applySort():this.sortData(a),this.fireEvent("datachanged",this)}}},applyGroupField:function(){this.remoteGroup&&(this.baseParams||(this.baseParams={}),this.baseParams.groupBy=this.groupField)},applySort:function(){if(Ext.data.GroupingStore.superclass.applySort.call(this),!this.groupOnSort&&!this.remoteGroup){var a=this.getGroupState();a&&a!=this.sortInfo.field&&this.sortData(this.groupField)}},applyGrouping:function(a){return this.groupField!==!1?(this.groupBy(this.groupField,!0),!0):(a===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:void 0:this.groupField}}),Ext.ComponentMgr=function(){var a=new Ext.util.MixedCollection,b={};return{register:function(b){a.add(b)},unregister:function(b){a.remove(b)},get:function(b){return a.get(b)},onAvailable:function(b,c,d){a.on("add",function(e,f){f.id==b&&(c.call(d||f,f),a.un("add",c,d))})},all:a,registerType:function(a,c){b[a]=c,c.xtype=a},create:function(a,c){return new b[a.xtype||c](a)}}}(),Ext.reg=Ext.ComponentMgr.registerType,Ext.Component=function(a){if(a=a||{},a.initialConfig?(a.isAction&&(this.baseAction=a),a=a.initialConfig):(a.tagName||a.dom||"string"==typeof a)&&(a={applyTo:a,id:a.id||a}),this.initialConfig=a,Ext.apply(this,a),this.addEvents("disable","enable","beforeshow","show","beforehide","hide","beforerender","render","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(Ext.isArray(this.plugins))for(var b=0,c=this.plugins.length;c>b;b++)this.plugins[b]=this.initPlugin(this.plugins[b]);else this.plugins=this.initPlugin(this.plugins);this.stateful!==!1&&this.initState(a),this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},Ext.Component.AUTO_ID=1e3,Ext.extend(Ext.Component,Ext.util.Observable,{disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,hidden:!1,disabled:!1,rendered:!1,ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(a){return a.init(this),a},initComponent:Ext.emptyFn,render:function(a,b){return this.rendered||this.fireEvent("beforerender",this)===!1||(!a&&this.el&&(this.el=Ext.get(this.el),a=this.el.dom.parentNode,this.allowDomMove=!1),this.container=Ext.get(a),this.ctCls&&this.container.addClass(this.ctCls),this.rendered=!0,void 0!==b&&(b="number"==typeof b?this.container.dom.childNodes[b]:Ext.getDom(b)),this.onRender(this.container,b||null),this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]),this.cls&&(this.el.addClass(this.cls),delete this.cls),this.style&&(this.el.applyStyles(this.style),delete this.style),this.overCls&&this.el.addClassOnOver(this.overCls),this.fireEvent("render",this),this.afterRender(this.container),this.hidden&&this.hide(),this.disabled&&this.disable(),this.stateful!==!1&&this.initStateEvents()),this},initState:function(){if(Ext.state.Manager){var a=this.getStateId();if(a){var b=Ext.state.Manager.get(a);b&&this.fireEvent("beforestaterestore",this,b)!==!1&&(this.applyState(b),this.fireEvent("staterestore",this,b))}}},getStateId:function(){return this.stateId||(0==this.id.indexOf("ext-comp-")||0==this.id.indexOf("ext-gen")?null:this.id)},initStateEvents:function(){if(this.stateEvents)for(var a,b=0;a=this.stateEvents[b];b++)this.on(a,this.saveState,this,{delay:100})},applyState:function(a){a&&Ext.apply(this,a)},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==!1){var a=this.getStateId();if(a){var b=this.getState();this.fireEvent("beforestatesave",this,b)!==!1&&(Ext.state.Manager.set(a,b),this.fireEvent("statesave",this,b))}}},applyToMarkup:function(a){this.allowDomMove=!1,this.el=Ext.get(a),this.render(this.el.dom.parentNode)},addClass:function(a){this.el?this.el.addClass(a):this.cls=this.cls?this.cls+" "+a:a},removeClass:function(a){this.el?this.el.removeClass(a):this.cls&&(this.cls=this.cls.split(" ").remove(a).join(" "))},onRender:function(a,b){if(this.autoEl){if("string"==typeof this.autoEl)this.el=document.createElement(this.autoEl);else{var c=document.createElement("div");Ext.DomHelper.overwrite(c,this.autoEl),this.el=c.firstChild}this.el.id||(this.el.id=this.getId())}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&a.dom.insertBefore(this.el.dom,b))},getAutoCreate:function(){var a="object"==typeof this.autoCreate?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!a.id&&(a.id=this.id),a},afterRender:Ext.emptyFn,destroy:function(){this.fireEvent("beforedestroy",this)!==!1&&(this.beforeDestroy(),this.rendered&&(this.el.removeAllListeners(),this.el.remove(),"container"==this.actionMode&&this.container.remove()),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners())},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(a,b){return b?(this.focus.defer("number"==typeof b?b:10,this,[a,!1]),void 0):(this.rendered&&(this.el.focus(),a===!0&&this.el.dom.select()),this)},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(){return this.rendered&&this.onDisable(),this.disabled=!0,this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass),this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass),this.el.dom.disabled=!1},setDisabled:function(a){this[a?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render("boolean"==typeof this.autoRender?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.hideParent?this.container.removeClass("x-hide-"+this.hideMode):this.getActionEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.hidden=!0,this.rendered&&this.onHide(),this.fireEvent("hide",this)),this},onHide:function(){this.hideParent?this.container.addClass("x-hide-"+this.hideMode):this.getActionEl().addClass("x-hide-"+this.hideMode)},setVisible:function(a){return a?this.show():this.hide(),this},isVisible:function(){return this.rendered&&this.getActionEl().isVisible()},cloneConfig:function(a){a=a||{};var b=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig);return c.id=b,new this.constructor(c)},getXType:function(){return this.constructor.xtype},isXType:function(a,b){return"function"==typeof a?a=a.xtype:"object"==typeof a&&(a=a.constructor.xtype),b?this.constructor.xtype==a:-1!=("/"+this.getXTypes()+"/").indexOf("/"+a+"/")},getXTypes:function(){var a=this.constructor;if(!a.xtypes){for(var b=[],c=this;c&&c.constructor.xtype;)b.unshift(c.constructor.xtype),c=c.constructor.superclass;a.xtypeChain=b,a.xtypes=b.join("/")}return a.xtypes},findParentBy:function(a){for(var b=this.ownerCt;null!=b&&!a(b,this);b=b.ownerCt);return b||null},findParentByType:function(a){return"function"==typeof a?this.findParentBy(function(b){return b.constructor===a}):this.findParentBy(function(b){return b.constructor.xtype===a})},mon:function(a,b,c,d,e){this.mons||(this.mons=[],this.on("beforedestroy",function(){for(var a=0,b=this.mons.length;b>a;a++){var c=this.mons[a];c.item.un(c.ename,c.fn,c.scope)}},this)),this.mons.push({item:a,ename:b,fn:c,scope:d}),a.on(b,c,d,e)}}),Ext.reg("component",Ext.Component),Ext.Action=function(a){this.initialConfig=a,this.items=[]},Ext.Action.prototype={isAction:!0,setText:function(a){this.initialConfig.text=a,this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconClass:function(a){this.initialConfig.iconCls=a,this.callEach("setIconClass",[a])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a,this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a,this.callEach("setVisible",[!a])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(a,b){this.initialConfig.handler=a,this.initialConfig.scope=b,this.callEach("setHandler",[a,b])},each:function(a,b){Ext.each(this.items,a,b)},callEach:function(a,b){for(var c=this.items,d=0,e=c.length;e>d;d++)c[d][a].apply(c[d],b)},addComponent:function(a){this.items.push(a),a.on("destroy",this.removeComponent,this)},removeComponent:function(a){this.items.remove(a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}},function(){Ext.Layer=function(a,b){a=a||{};var c=Ext.DomHelper,d=a.parentEl,e=d?Ext.getDom(d):document.body;if(b&&(this.dom=Ext.getDom(b)),!this.dom){var f=a.dh||{tag:"div",cls:"x-layer"};this.dom=c.append(e,f)}a.cls&&this.addClass(a.cls),this.constrain=a.constrain!==!1,this.visibilityMode=Ext.Element.VISIBILITY,this.id=a.id?this.dom.id=a.id:Ext.id(this.dom),this.zindex=a.zindex||this.getZIndex(),this.position("absolute",this.zindex),a.shadow?(this.shadowOffset=a.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:a.shadow})):this.shadowOffset=0,this.useShim=a.shim!==!1&&Ext.useShims,this.useDisplay=a.useDisplay,this.hide()};var a=Ext.Element.prototype,b=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){if(!this.useShim)return null;if(this.shim)return this.shim;var a=b.shift();a||(a=this.createShim(),a.enableDisplayMode("block"),a.dom.style.display="none",a.dom.style.visibility="visible");var c=this.dom.parentNode;return a.dom.parentNode!=c&&c.insertBefore(a.dom,this.dom),a.setStyle("z-index",this.getZIndex()-2),this.shim=a,a},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),b.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(a){this.shadow&&(this.shadowDisabled=!1,this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset,a&&this.sync(!0))},sync:function(a){var b=this.shadow;if(!this.updating&&this.isVisible()&&(b||this.useShim)){var c=this.getShim(),d=this.getWidth(),e=this.getHeight(),f=this.getLeft(!0),g=this.getTop(!0);if(b&&!this.shadowDisabled){if(a&&!b.isVisible()?b.show(this):b.realign(f,g,d,e),c){a&&c.show();var h=b.adjusts,i=c.dom.style;i.left=Math.min(f,f+h.l)+"px",i.top=Math.min(g,g+h.t)+"px",i.width=d+h.w+"px",i.height=e+h.h+"px"}}else c&&(a&&c.show(),c.setSize(d,e),c.setLeftTop(f,g))}},destroy:function(){this.hideShim(),this.shadow&&this.shadow.hide(),this.removeAllListeners(),Ext.removeNode(this.dom),Ext.Element.uncache(this.id)},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){if(this.constrain){var b=Ext.lib.Dom.getViewWidth(),c=Ext.lib.Dom.getViewHeight(),d=Ext.getDoc().getScroll(),e=this.getXY(),f=e[0],g=e[1],h=this.dom.offsetWidth+this.shadowOffset,i=this.dom.offsetHeight+this.shadowOffset,j=!1;if(f+h>b+d.left&&(f=b-h-this.shadowOffset,j=!0),g+i>c+d.top&&(g=c-i-this.shadowOffset,j=!0),f<d.left&&(f=d.left,j=!0),g<d.top&&(g=d.top,j=!0),j){if(this.avoidY){var k=this.avoidY;k>=g&&g+i>=k&&(g=k-i-5)}e=[f,g],this.storeXY(e),a.setXY.call(this,e),this.sync()}}},isVisible:function(){return this.visible},showAction:function(){this.visible=!0,this.useDisplay===!0?this.setDisplayed(""):this.lastXY?a.setXY.call(this,this.lastXY):this.lastLT&&a.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1,this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(b,c,d,e,f){if(b&&this.showAction(),c&&b){var g=function(){this.sync(!0),e&&e()}.createDelegate(this);a.setVisible.call(this,!0,!0,d,g,f)}else{b||this.hideUnders(!0);var g=e;c&&(g=function(){this.hideAction(),e&&e()}.createDelegate(this)),a.setVisible.call(this,b,c,d,g,f),b?this.sync(!0):c||this.hideAction()}},storeXY:function(a){delete this.lastLT,this.lastXY=a},storeLeftTop:function(a,b){delete this.lastXY,this.lastLT=[a,b]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(b){this.storeLeftTop(b,this.getTop(!0)),a.setLeft.apply(this,arguments),this.sync()},setTop:function(b){this.storeLeftTop(this.getLeft(!0),b),a.setTop.apply(this,arguments),this.sync()},setLeftTop:function(b,c){this.storeLeftTop(b,c),a.setLeftTop.apply(this,arguments),this.sync()},setXY:function(b,c,d,e,f){this.fixDisplay(),this.beforeAction(),this.storeXY(b);var g=this.createCB(e);a.setXY.call(this,b,c,d,g,f),c||g()},createCB:function(a){var b=this;return function(){b.constrainXY(),b.sync(!0),a&&a()}},setX:function(a,b,c,d,e){this.setXY([a,this.getY()],b,c,d,e)},setY:function(a,b,c,d,e){this.setXY([this.getX(),a],b,c,d,e)},setSize:function(b,c,d,e,f,g){this.beforeAction();var h=this.createCB(f);a.setSize.call(this,b,c,d,e,h,g),d||h()},setWidth:function(b,c,d,e,f){this.beforeAction();var g=this.createCB(e);a.setWidth.call(this,b,c,d,g,f),c||g()},setHeight:function(b,c,d,e,f){this.beforeAction();var g=this.createCB(e);a.setHeight.call(this,b,c,d,g,f),c||g()},setBounds:function(b,c,d,e,f,g,h,i){this.beforeAction();var j=this.createCB(h);return f?a.setBounds.call(this,b,c,d,e,f,g,j,i):(this.storeXY([b,c]),a.setXY.call(this,[b,c]),a.setSize.call(this,d,e,f,g,j,i),j()),this},setZIndex:function(a){this.zindex=a,this.setStyle("z-index",a+2),this.shadow&&this.shadow.setZIndex(a+1),this.shim&&this.shim.setStyle("z-index",a)}})}(),Ext.Shadow=function(a){Ext.apply(this,a),"string"!=typeof this.mode&&(this.mode=this.defaultMode);var b=this.offset,c={h:0},d=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":c.w=0,c.l=c.t=b,c.t-=1,Ext.isIE&&(c.l-=this.offset+d,c.t-=this.offset+d,c.w-=d,c.h-=d,c.t+=1);break;case"sides":c.w=2*b,c.l=-b,c.t=b-1,Ext.isIE&&(c.l-=this.offset-d,c.t-=this.offset+d,c.l+=1,c.w-=2*(this.offset-d),c.w-=d+1,c.h-=1);break;case"frame":c.w=c.h=2*b,c.l=c.t=-b,c.t+=1,c.h-=2,Ext.isIE&&(c.l-=this.offset-d,c.t-=this.offset-d,c.l+=1,c.w-=this.offset+d+1,c.h-=this.offset+d,c.h+=1)}this.adjusts=c},Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(a){a=Ext.get(a),this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=a.dom&&this.el.insertBefore(a)),this.el.setStyle("z-index",this.zIndex||parseInt(a.getStyle("z-index"),10)-1),Ext.isIE&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"),this.realign(a.getLeft(!0),a.getTop(!0),a.getWidth(),a.getHeight()),this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(a,b,c,d){if(this.el){var e=this.adjusts,f=this.el.dom,g=f.style;g.left=a+e.l+"px",g.top=b+e.t+"px";var h=c+e.w,i=d+e.h,j=h+"px",k=i+"px";if((g.width!=j||g.height!=k)&&(g.width=j,g.height=k,!Ext.isIE)){var l=f.childNodes,m=Math.max(0,h-12)+"px";l[0].childNodes[1].style.width=m,l[1].childNodes[1].style.width=m,l[2].childNodes[1].style.width=m,l[1].style.height=Math.max(0,i-12)+"px"}}},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(a){this.zIndex=a,this.el&&this.el.setStyle("z-index",a)}},Ext.Shadow.Pool=function(){var a=[],b=Ext.isIE?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var c=a.shift();return c||(c=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,b)),c.autoBoxAdjust=!1),c},push:function(b){a.push(b)}}}(),Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this),this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(a,b){if("object"==typeof a&&(b=a.height,a=a.width),!this.boxReady)return this.width=a,this.height=b,this;if(this.lastSize&&this.lastSize.width==a&&this.lastSize.height==b)return this;this.lastSize={width:a,height:b};var c=this.adjustSize(a,b),d=c.width,e=c.height;if(void 0!==d||void 0!==e){var f=this.getResizeEl();this.deferHeight||void 0===d||void 0===e?this.deferHeight||void 0===e?void 0!==d&&f.setWidth(d):f.setHeight(e):f.setSize(d,e),this.onResize(d,e,a,b),this.fireEvent("resize",this,d,e,a,b)}return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(void 0,a)},getSize:function(){return this.el.getSize()},getPosition:function(a){return a===!0?[this.el.getLeft(!0),this.el.getTop(!0)]:this.xy||this.el.getXY()},getBox:function(a){var b=this.el.getSize();if(a===!0)b.x=this.el.getLeft(!0),b.y=this.el.getTop(!0);else{var c=this.xy||this.el.getXY();b.x=c[0],b.y=c[1]}return b},updateBox:function(a){return this.setSize(a.width,a.height),this.setPagePosition(a.x,a.y),this},getResizeEl:function(){return this.resizeEl||this.el},getPositionEl:function(){return this.positionEl||this.el},setPosition:function(a,b){if(a&&"number"==typeof a[1]&&(b=a[1],a=a[0]),this.x=a,this.y=b,!this.boxReady)return this;var c=this.adjustPosition(a,b),d=c.x,e=c.y,f=this.getPositionEl();return(void 0!==d||void 0!==e)&&(void 0!==d&&void 0!==e?f.setLeftTop(d,e):void 0!==d?f.setLeft(d):void 0!==e&&f.setTop(e),this.onPosition(d,e),this.fireEvent("move",this,d,e)),this},setPagePosition:function(a,b){if(a&&"number"==typeof a[1]&&(b=a[1],a=a[0]),this.pageX=a,this.pageY=b,this.boxReady&&void 0!==a&&void 0!==b){var c=this.el.translatePoints(a,b);return this.setPosition(c.left,c.top),this}},onRender:function(a,b){Ext.BoxComponent.superclass.onRender.call(this,a,b),this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl)),this.positionEl&&(this.positionEl=Ext.get(this.positionEl))},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this),this.boxReady=!0,this.setSize(this.width,this.height),this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?void 0:this.el.getWidth(),this.autoHeight?void 0:this.el.getHeight()),this},onResize:function(){},onPosition:function(){},adjustSize:function(a,b){return this.autoWidth&&(a="auto"),this.autoHeight&&(b="auto"),{width:a,height:b}},adjustPosition:function(a,b){return{x:a,y:b}}}),Ext.reg("box",Ext.BoxComponent),Ext.SplitBar=function(a,b,c,d,e){this.el=Ext.get(a,!0),this.el.dom.unselectable="on",this.resizingEl=Ext.get(b,!0),this.orientation=c||Ext.SplitBar.HORIZONTAL,this.minSize=0,this.maxSize=2e3,this.animate=!1,this.useShim=!1,this.shim=null,this.proxy=e?Ext.get(e).dom:Ext.SplitBar.createProxy(this.orientation),this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id}),this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this),this.dd.endDrag=this.onEndProxyDrag.createDelegate(this),this.dragSpecs={},this.adapter=new Ext.SplitBar.BasicLayoutAdapter,this.adapter.init(this),this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=d||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=d||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v")),this.addEvents("resize","moved","beforeresize","beforeapply"),Ext.SplitBar.superclass.constructor.call(this)},Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(a,b){this.fireEvent("beforeresize",this),this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0),this.overlay.unselectable(),this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),Ext.get(this.proxy).setDisplayed("block");var c=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize(),this.activeMaxSize=this.getMaximumSize();var d=c-this.activeMinSize,e=Math.max(this.activeMaxSize-c,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?d:e,this.placement==Ext.SplitBar.LEFT?e:d),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?d:e,this.placement==Ext.SplitBar.TOP?e:d)),this.dragSpecs.startSize=c,this.dragSpecs.startPoint=[a,b],Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,a,b)},onEndProxyDrag:function(a){Ext.get(this.proxy).setDisplayed(!1);var b=Ext.lib.Event.getXY(a);this.overlay&&(Ext.destroy(this.overlay),delete this.overlay);var c;c=this.orientation==Ext.SplitBar.HORIZONTAL?this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?b[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-b[0]):this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?b[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-b[1]),c=Math.min(Math.max(c,this.activeMinSize),this.activeMaxSize),c!=this.dragSpecs.startSize&&this.fireEvent("beforeapply",this,c)!==!1&&(this.adapter.setElementSize(this,c),this.fireEvent("moved",this,c),this.fireEvent("resize",this,c))},getAdapter:function(){return this.adapter},setAdapter:function(a){this.adapter=a,this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(a){this.minSize=a},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(a){this.maxSize=a},setCurrentSize:function(a){var b=this.animate;this.animate=!1,this.adapter.setElementSize(this,a),this.animate=b},destroy:function(a){this.shim&&this.shim.remove(),this.dd.unreg(),Ext.destroy(Ext.get(this.proxy)),a&&this.el.remove()}}),Ext.SplitBar.createProxy=function(a){var b=new Ext.Element(document.createElement("div"));b.unselectable();var c="x-splitbar-proxy";return b.addClass(c+" "+(a==Ext.SplitBar.HORIZONTAL?c+"-h":c+"-v")),document.body.appendChild(b.dom),b.dom},Ext.SplitBar.BasicLayoutAdapter=function(){},Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(){},getElementSize:function(a){return a.orientation==Ext.SplitBar.HORIZONTAL?a.resizingEl.getWidth():a.resizingEl.getHeight()},setElementSize:function(a,b,c){a.orientation==Ext.SplitBar.HORIZONTAL?a.animate?a.resizingEl.setWidth(b,!0,.1,c,"easeOut"):(a.resizingEl.setWidth(b),c&&c(a,b)):a.animate?a.resizingEl.setHeight(b,!0,.1,c,"easeOut"):(a.resizingEl.setHeight(b),c&&c(a,b))
}},Ext.SplitBar.AbsoluteLayoutAdapter=function(a){this.basic=new Ext.SplitBar.BasicLayoutAdapter,this.container=Ext.get(a)},Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(a){this.basic.init(a)},getElementSize:function(a){return this.basic.getElementSize(a)},setElementSize:function(a,b){this.basic.setElementSize(a,b,this.moveSplitter.createDelegate(this,[a]))},moveSplitter:function(a){var b=Ext.SplitBar;switch(a.placement){case b.LEFT:a.el.setX(a.resizingEl.getRight());break;case b.RIGHT:a.el.setStyle("right",this.container.getWidth()-a.resizingEl.getLeft()+"px");break;case b.TOP:a.el.setY(a.resizingEl.getBottom());break;case b.BOTTOM:a.el.setY(a.resizingEl.getTop()-a.el.getHeight())}}},Ext.SplitBar.VERTICAL=1,Ext.SplitBar.HORIZONTAL=2,Ext.SplitBar.LEFT=1,Ext.SplitBar.RIGHT=2,Ext.SplitBar.TOP=3,Ext.SplitBar.BOTTOM=4,Ext.Container=Ext.extend(Ext.BoxComponent,{autoDestroy:!0,defaultType:"panel",initComponent:function(){Ext.Container.superclass.initComponent.call(this),this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var a=this.items;a&&(delete this.items,Ext.isArray(a)?a.length>0&&this.add.apply(this,a):this.add(a))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(a){this.layout&&this.layout!=a&&this.layout.setContainer(null),this.initItems(),this.layout=a,a.setContainer(this)},render:function(){if(Ext.Container.superclass.render.apply(this,arguments),this.layout&&("string"==typeof this.layout&&(this.layout=new(Ext.Container.LAYOUTS[this.layout.toLowerCase()])(this.layoutConfig)),this.setLayout(this.layout),void 0!==this.activeItem)){var a=this.activeItem;return delete this.activeItem,this.layout.setActiveItem(a),void 0}this.ownerCt||this.doLayout(),this.monitorResize===!0&&Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},getLayoutTarget:function(){return this.el},getComponentId:function(a){return a.itemId||a.id},add:function(a){this.initItems();var b=arguments,c=b.length;{if(!(c>1)){var d=this.lookupComponent(this.applyDefaults(a)),e=this.items.length;return this.fireEvent("beforeadd",this,d,e)!==!1&&this.onBeforeAdd(d)!==!1&&(this.items.add(d),d.ownerCt=this,this.fireEvent("add",this,d,e)),d}for(var f=0;c>f;f++)this.add(b[f])}},insert:function(a,b){this.initItems();var c=arguments,d=c.length;{if(!(d>2)){var e=this.lookupComponent(this.applyDefaults(b));return e.ownerCt==this&&this.items.indexOf(e)<a&&--a,this.fireEvent("beforeadd",this,e,a)!==!1&&this.onBeforeAdd(e)!==!1&&(this.items.insert(a,e),e.ownerCt=this,this.fireEvent("add",this,e,a)),e}for(var f=d-1;f>=1;--f)this.insert(a,c[f])}},applyDefaults:function(a){return this.defaults&&("string"==typeof a?(a=Ext.ComponentMgr.get(a),Ext.apply(a,this.defaults)):a.events?Ext.apply(a,this.defaults):Ext.applyIf(a,this.defaults)),a},onBeforeAdd:function(a){a.ownerCt&&a.ownerCt.remove(a,!1),this.hideBorders===!0&&(a.border=a.border===!0)},remove:function(a,b){this.initItems();var c=this.getComponent(a);return c&&this.fireEvent("beforeremove",this,c)!==!1&&(this.items.remove(c),delete c.ownerCt,(b===!0||b!==!1&&this.autoDestroy)&&c.destroy(),this.layout&&this.layout.activeItem==c&&delete this.layout.activeItem,this.fireEvent("remove",this,c)),c},removeAll:function(a){this.initItems();for(var b,c=[];b=this.items.last();)c.unshift(this.remove(b,a));return c},getComponent:function(a){return"object"==typeof a?a:this.items.get(a)},lookupComponent:function(a){return"string"==typeof a?Ext.ComponentMgr.get(a):a.events?a:this.createComponent(a)},createComponent:function(a){return Ext.ComponentMgr.create(a,this.defaultType)},doLayout:function(a){if(this.rendered&&this.layout&&this.layout.layout(),a!==!0&&this.items)for(var b=this.items.items,c=0,d=b.length;d>c;c++){var e=b[c];e.doLayout&&e.doLayout()}},getLayout:function(){if(!this.layout){var a=new Ext.layout.ContainerLayout(this.layoutConfig);this.setLayout(a)}return this.layout},beforeDestroy:function(){this.items&&Ext.destroy.apply(Ext,this.items.items),this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this),this.layout&&this.layout.destroy&&this.layout.destroy(),Ext.Container.superclass.beforeDestroy.call(this)},bubble:function(a,b,c){for(var d=this;d&&a.apply(b||d,c||[d])!==!1;)d=d.ownerCt},cascade:function(a,b,c){if(a.apply(b||this,c||[this])!==!1&&this.items)for(var d=this.items.items,e=0,f=d.length;f>e;e++)d[e].cascade?d[e].cascade(a,b,c):a.apply(b||d[e],c||[d[e]])},findById:function(a){var b,c=this;return this.cascade(function(d){return c!=d&&d.id===a?(b=d,!1):void 0}),b||null},findByType:function(a,b){return this.findBy(function(c){return c.isXType(a,b)})},find:function(a,b){return this.findBy(function(c){return c[a]===b})},findBy:function(a,b){var c=[],d=this;return this.cascade(function(e){d!=e&&a.call(b||e,e,d)===!0&&c.push(e)}),c}}),Ext.Container.LAYOUTS={},Ext.reg("container",Ext.Container),Ext.layout.ContainerLayout=function(a){Ext.apply(this,a)},Ext.layout.ContainerLayout.prototype={monitorResize:!1,activeItem:null,layout:function(){var a=this.container.getLayoutTarget();this.onLayout(this.container,a),this.container.fireEvent("afterlayout",this.container,this)},onLayout:function(a,b){this.renderAll(a,b)},isValidParent:function(a,b){var c=a.getPositionEl?a.getPositionEl():a.getEl();return c.dom.parentNode==b.dom},renderAll:function(a,b){for(var c=a.items.items,d=0,e=c.length;e>d;d++){var f=c[d];!f||f.rendered&&this.isValidParent(f,b)||this.renderItem(f,d,b)}},renderItem:function(a,b,c){if(a&&!a.rendered){if(a.render(c,b),this.extraCls){var d=a.getPositionEl?a.getPositionEl():a;d.addClass(this.extraCls)}this.renderHidden&&a!=this.activeItem&&a.hide()}else if(a&&!this.isValidParent(a,c)){if(this.extraCls){var d=a.getPositionEl?a.getPositionEl():a;d.addClass(this.extraCls)}"number"==typeof b&&(b=c.dom.childNodes[b]),c.dom.insertBefore(a.getEl().dom,b||null),this.renderHidden&&a!=this.activeItem&&a.hide()}},onResize:function(){if(!this.container.collapsed){var a=this.container.bufferResize;a?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.layout,this),this.resizeBuffer="number"==typeof a?a:100),this.resizeTask.delay(this.resizeBuffer)):this.layout()}},setContainer:function(a){this.monitorResize&&a!=this.container&&(this.container&&this.container.un("resize",this.onResize,this),a&&a.on("resize",this.onResize,this)),this.container=a},parseMargins:function(a){var b=a.split(" "),c=b.length;return 1==c&&(b[1]=b[0],b[2]=b[0],b[3]=b[0]),2==c&&(b[2]=b[0],b[3]=b[1]),{top:parseInt(b[0],10)||0,right:parseInt(b[1],10)||0,bottom:parseInt(b[2],10)||0,left:parseInt(b[3],10)||0}},destroy:Ext.emptyFn},Ext.Container.LAYOUTS.auto=Ext.layout.ContainerLayout,Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,onLayout:function(a,b){if(Ext.layout.FitLayout.superclass.onLayout.call(this,a,b),!this.container.collapsed){var c=Ext.isIE6&&Ext.isStrict&&b.dom==document.body?b.getViewSize():b.getStyleSize();this.setItemSize(this.activeItem||a.items.itemAt(0),c)}},setItemSize:function(a,b){a&&b.height>0&&a.setSize(b)}}),Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout,Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,renderHidden:!0,setActiveItem:function(a){a=this.container.getComponent(a),this.activeItem!=a&&(this.activeItem&&this.activeItem.hide(),this.activeItem=a,a.show(),this.layout())},renderAll:function(a,b){this.deferredRender?this.renderItem(this.activeItem,void 0,b):Ext.layout.CardLayout.superclass.renderAll.call(this,a,b)}}),Ext.Container.LAYOUTS.card=Ext.layout.CardLayout,Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,getAnchorViewSize:function(a,b){return b.dom==document.body?b.getViewSize():b.getStyleSize()},onLayout:function(a,b){Ext.layout.AnchorLayout.superclass.onLayout.call(this,a,b);var c=this.getAnchorViewSize(a,b),d=c.width,e=c.height;if(!(20>d||20>e)){var f,g;a.anchorSize?"number"==typeof a.anchorSize?f=a.anchorSize:(f=a.anchorSize.width,g=a.anchorSize.height):(f=a.initialConfig.width,g=a.initialConfig.height);var h,i,j,k,l,m=a.items.items,n=m.length;for(h=0;n>h;h++)if(i=m[h],i.anchor){if(j=i.anchorSpec,!j){var o=i.anchor.split(" ");i.anchorSpec=j={right:this.parseAnchor(o[0],i.initialConfig.width,f),bottom:this.parseAnchor(o[1],i.initialConfig.height,g)}}k=j.right?this.adjustWidthAnchor(j.right(d),i):void 0,l=j.bottom?this.adjustHeightAnchor(j.bottom(e),i):void 0,(k||l)&&i.setSize(k||void 0,l||void 0)}}},parseAnchor:function(a,b,c){if(a&&"none"!=a){var d;if(/^(r|right|b|bottom)$/i.test(a)){var e=c-b;return function(a){return a!==d?(d=a,a-e):void 0}}if(-1!=a.indexOf("%")){var f=.01*parseFloat(a.replace("%",""));return function(a){return a!==d?(d=a,Math.floor(a*f)):void 0}}if(a=parseInt(a,10),!isNaN(a))return function(b){return b!==d?(d=b,b+a):void 0}}return!1},adjustWidthAnchor:function(a){return a},adjustHeightAnchor:function(a){return a}}),Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout,Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,extraCls:"x-column",scrollOffset:0,isValidParent:function(a){return(a.getPositionEl?a.getPositionEl():a.getEl()).dom.parentNode==this.innerCt.dom},onLayout:function(a,b){var c,d,e=a.items.items,f=e.length;this.innerCt||(b.addClass("x-column-layout-ct"),this.innerCt=b.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"})),this.renderAll(a,this.innerCt);var g=Ext.isIE&&b.dom!=Ext.getBody().dom?b.getStyleSize():b.getViewSize();if(!(g.width<1&&g.height<1)){var h=g.width-b.getPadding("lr")-this.scrollOffset,i=(g.height-b.getPadding("tb"),h);for(this.innerCt.setWidth(h),d=0;f>d;d++)c=e[d],c.columnWidth||(i-=c.getSize().width+c.getEl().getMargins("lr"));for(i=0>i?0:i,d=0;f>d;d++)c=e[d],c.columnWidth&&c.setSize(Math.floor(c.columnWidth*i)-c.getEl().getMargins("lr"))}}}),Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout,Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,onLayout:function(a,b){var c;if(!this.rendered){b.addClass("x-border-layout-ct");var d=a.items.items;c=[];for(var e=0,f=d.length;f>e;e++){var g=d[e],h=g.region;g.collapsed&&c.push(g),g.collapsed=!1,g.rendered||(g.cls=g.cls?g.cls+" x-border-panel":"x-border-panel",g.render(b,e)),this[h]="center"!=h&&g.split?new Ext.layout.BorderLayout.SplitRegion(this,g.initialConfig,h):new Ext.layout.BorderLayout.Region(this,g.initialConfig,h),this[h].render(b,g)}this.rendered=!0}var i=b.getViewSize();if(i.width<20||i.height<20)return c&&(this.restoreCollapsed=c),void 0;this.restoreCollapsed&&(c=this.restoreCollapsed,delete this.restoreCollapsed);var j=i.width,k=i.height,l=j,m=k,n=0,o=0,p=this.north,q=this.south,r=this.west,s=this.east,g=this.center;if(!g&&Ext.layout.BorderLayout.WARN!==!1)throw"No center region defined in BorderLayout "+a.id;if(p&&p.isVisible()){var t=p.getSize(),u=p.getMargins();t.width=j-(u.left+u.right),t.x=u.left,t.y=u.top,n=t.height+t.y+u.bottom,m-=n,p.applyLayout(t)}if(q&&q.isVisible()){var t=q.getSize(),u=q.getMargins();t.width=j-(u.left+u.right),t.x=u.left;var v=t.height+u.top+u.bottom;t.y=k-v+u.top,m-=v,q.applyLayout(t)}if(r&&r.isVisible()){var t=r.getSize(),u=r.getMargins();t.height=m-(u.top+u.bottom),t.x=u.left,t.y=n+u.top;var w=t.width+u.left+u.right;o+=w,l-=w,r.applyLayout(t)}if(s&&s.isVisible()){var t=s.getSize(),u=s.getMargins();t.height=m-(u.top+u.bottom);var w=t.width+u.left+u.right;t.x=j-w+u.left,t.y=n+u.top,l-=w,s.applyLayout(t)}if(g){var u=g.getMargins(),x={x:o+u.left,y:n+u.top,width:l-(u.left+u.right),height:m-(u.top+u.bottom)};g.applyLayout(x)}if(c)for(var e=0,f=c.length;f>e;e++)c[e].collapse(!1);Ext.isIE&&Ext.isStrict&&b.repaint()},destroy:function(){for(var a=["north","south","east","west"],b=0;b<a.length;b++){var c=this[a[b]];c&&(c.destroy?c.destroy():c.split&&c.split.destroy(!0))}Ext.layout.BorderLayout.superclass.destroy.call(this)}}),Ext.layout.BorderLayout.Region=function(a,b,c){Ext.apply(this,b),this.layout=a,this.position=c,this.state={},"string"==typeof this.margins&&(this.margins=this.layout.parseMargins(this.margins)),this.margins=Ext.applyIf(this.margins||{},this.defaultMargins),this.collapsible&&("string"==typeof this.cmargins&&(this.cmargins=this.layout.parseMargins(this.cmargins)),this.cmargins="mini"!=this.collapseMode||this.cmargins?Ext.applyIf(this.cmargins||{},"north"==c||"south"==c?this.defaultNSCMargins:this.defaultEWCMargins):{left:0,top:0,right:0,bottom:0})},Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},isCollapsed:!1,render:function(a,b){this.panel=b,b.el.enableDisplayMode(),this.targetEl=a,this.el=b.el;var c=b.getState,d=this.position;b.getState=function(){return Ext.apply(c.call(b)||{},this.state)}.createDelegate(this),"center"!=d&&(b.allowQueuedExpand=!1,b.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this}),(this.collapsible||this.floatable)&&(b.collapseEl="el",b.slideAnchor=this.getSlideAnchor()),b.tools&&b.tools.toggle&&(b.tools.toggle.addClass("x-tool-collapse-"+d),b.tools.toggle.addClassOnOver("x-tool-collapse-"+d+"-over")))},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=a}if(this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),"mini"==this.collapseMode)this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0});else{if(this.collapsible!==!1&&!this.hideCollapseTool){var b=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);b.addClassOnOver("x-tool-expand-"+this.position+"-over"),b.on("click",this.onExpandClick,this,{stopEvent:!0})}(this.floatable!==!1||this.titleCollapse)&&(this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this))}}return this.collapsedEl},onExpandClick:function(){this.isSlid?(this.afterSlideIn(),this.panel.expand(!1)):this.panel.expand()},onCollapseClick:function(){this.panel.collapse()},beforeCollapse:function(a,b){this.lastAnim=b,this.splitEl&&this.splitEl.hide(),this.getCollapsedEl().show(),this.panel.el.setStyle("z-index",100),this.isCollapsed=!0,this.layout.layout()},onCollapse:function(){this.panel.el.setStyle("z-index",1),this.lastAnim===!1||this.panel.animCollapse===!1?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2}),this.state.collapsed=!0,this.panel.saveState()},beforeExpand:function(){var a=this.getCollapsedEl();this.el.show(),"east"==this.position||"west"==this.position?this.panel.setSize(void 0,a.getHeight()):this.panel.setSize(a.getWidth(),void 0),a.hide(),a.dom.style.visibility="hidden",this.panel.el.setStyle("z-index",100)},onExpand:function(){this.isCollapsed=!1,this.splitEl&&this.splitEl.show(),this.layout.layout(),this.panel.el.setStyle("z-index",1),this.state.collapsed=!1,this.panel.saveState()},collapseClick:function(a){this.isSlid?(a.stopPropagation(),this.slideIn()):(a.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(a){this.panel=a},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(a){var b=this.getCollapsedEl();b.setLeftTop(a.x,a.y),b.setSize(a.width,a.height)},applyLayout:function(a){this.isCollapsed?this.applyLayoutCollapsed(a):(this.panel.setPosition(a.x,a.y),this.panel.setSize(a.width,a.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==!1){if(!this.autoHideHd){var a=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(b){b.within(this.el,!0)||a.delay(500)},mouseover:function(){a.cancel()},scope:this}}this.el.on(this.autoHideHd)}},clearAutoHide:function(){this.autoHide!==!1&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(!this.isSlid&&!this.el.hasActiveFx()){this.isSlid=!0;var a=this.panel.tools;a&&a.toggle&&a.toggle.hide(),this.el.show(),"east"==this.position||"west"==this.position?this.panel.setSize(void 0,this.collapsedEl.getHeight()):this.panel.setSize(this.collapsedEl.getWidth(),void 0),this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",102),this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating"),this.animFloat!==!1?(this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide(),this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0})):(this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this))}},afterSlideIn:function(){this.clearAutoHide(),this.isSlid=!1,this.clearMonitor(),this.el.setStyle("z-index",""),this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed"),this.el.dom.style.left=this.restoreLT[0],this.el.dom.style.top=this.restoreLT[1];var a=this.panel.tools;a&&a.toggle&&a.toggle.show()},slideIn:function(a){return!this.isSlid||this.el.hasActiveFx()?(Ext.callback(a),void 0):(this.isSlid=!1,this.animFloat!==!1?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide(),this.afterSlide(),this.afterSlideIn(),Ext.callback(a)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn()),void 0)},slideInIf:function(a){a.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){this.cmargins;switch(this.position){case"west":return[0,0];case"east":return[0,0];case"north":return[0,0];case"south":return[0,0]}},getExpandAdj:function(){var a=this.collapsedEl,b=this.cmargins;switch(this.position){case"west":return[-(b.right+a.getWidth()+b.left),0];case"east":return[b.right+a.getWidth()+b.left,0];case"north":return[0,-(b.top+b.bottom+a.getHeight())];case"south":return[0,b.top+b.bottom+a.getHeight()]}}},Ext.layout.BorderLayout.SplitRegion=function(a,b,c){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,a,b,c),this.applyLayout=this.applyFns[c]},Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style;this.panel.setPosition(a.x,a.y);var d=b.offsetWidth;c.left=a.x+a.width-d+"px",c.top=a.y+"px",c.height=Math.max(0,a.height)+"px",this.panel.setSize(a.width-d,a.height)},east:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetWidth;this.panel.setPosition(a.x+d,a.y),c.left=a.x+"px",c.top=a.y+"px",c.height=Math.max(0,a.height)+"px",this.panel.setSize(a.width-d,a.height)},north:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetHeight;this.panel.setPosition(a.x,a.y),c.left=a.x+"px",c.top=a.y+a.height-d+"px",c.width=Math.max(0,a.width)+"px",this.panel.setSize(a.width,a.height-d)},south:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetHeight;this.panel.setPosition(a.x,a.y+d),c.left=a.x+"px",c.top=a.y+"px",c.width=Math.max(0,a.width)+"px",this.panel.setSize(a.width,a.height-d)}},render:function(a,b){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,a,b);var c=this.position;this.splitEl=a.createChild({cls:"x-layout-split x-layout-split-"+c,html:"&#160;",id:this.panel.id+"-xsplit"}),"mini"==this.collapseMode&&(this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+c,html:"&#160;"}),this.miniSplitEl.addClassOnOver("x-layout-mini-over"),this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0}));var d=this.splitSettings[c];this.split=new Ext.SplitBar(this.splitEl.dom,b.el,d.orientation),this.split.placement=d.placement,this.split.getMaximumSize=this[d.maxFn].createDelegate(this),this.split.minSize=this.minSize||this[d.minProp],this.split.on("beforeapply",this.onSplitMove,this),this.split.useShim=this.useShim===!0,this.maxSize=this.maxSize||this[d.maxProp],b.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible&&this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var a=this.panel.getSize();return"north"==this.position||"south"==this.position?a.height+=this.splitEl.dom.offsetHeight:a.width+=this.splitEl.dom.offsetWidth,a},getHMaxSize:function(){var a=this.maxSize||1e4,b=this.layout.center;return Math.min(a,this.el.getWidth()+b.el.getWidth()-b.getMinWidth())},getVMaxSize:function(){var a=this.maxSize||1e4,b=this.layout.center;return Math.min(a,this.el.getHeight()+b.el.getHeight()-b.getMinHeight())},onSplitMove:function(a,b){var c=this.panel.getSize();return this.lastSplitSize=b,"north"==this.position||"south"==this.position?(this.panel.setSize(c.width,b),this.state.height=b):(this.panel.setSize(b,c.height),this.state.width=b),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl)}}),Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout,Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",getAnchorViewSize:function(a){return(a.body||a.el).getStyleSize()},setContainer:function(a){if(Ext.layout.FormLayout.superclass.setContainer.call(this,a),a.labelAlign&&a.addClass("x-form-label-"+a.labelAlign),a.hideLabels)this.labelStyle="display:none",this.elementStyle="padding-left:0;",this.labelAdjust=0;else{if(this.labelSeparator=a.labelSeparator||this.labelSeparator,a.labelWidth=a.labelWidth||100,"number"==typeof a.labelWidth){var b="number"==typeof a.labelPad?a.labelPad:5;this.labelAdjust=a.labelWidth+b,this.labelStyle="width:"+a.labelWidth+"px;",this.elementStyle="padding-left:"+(a.labelWidth+b)+"px"}"top"==a.labelAlign&&(this.labelStyle="width:auto;",this.labelAdjust=0,this.elementStyle="padding-left:0;")}if(!this.fieldTpl){var c=new Ext.Template('<div class="x-form-item {5}" tabIndex="-1">','<label for="{0}" style="{2}" class="x-form-item-label">{1}{4}</label>','<div class="x-form-element" id="x-form-el-{0}" style="{3}">','</div><div class="{6}"></div>',"</div>");c.disableFormats=!0,c.compile(),Ext.layout.FormLayout.prototype.fieldTpl=c}},getLabelStyle:function(a){for(var b="",c=[this.labelStyle,a],d=0,e=c.length;e>d;++d)c[d]&&(b+=c[d],";"!=b.substr(-1,1)&&(b+=";"));return b},renderItem:function(a,b,c){if(a&&!a.rendered&&a.isFormField&&"hidden"!=a.inputType){var d=[a.id,a.fieldLabel,this.getLabelStyle(a.labelStyle),this.elementStyle||"","undefined"==typeof a.labelSeparator?this.labelSeparator:a.labelSeparator,(a.itemCls||this.container.itemCls||"")+(a.hideLabel?" x-hide-label":""),a.clearCls||"x-form-clear-left"];"number"==typeof b&&(b=c.dom.childNodes[b]||null),b?this.fieldTpl.insertBefore(b,d):this.fieldTpl.append(c,d),a.render("x-form-el-"+a.id)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},adjustWidthAnchor:function(a,b){return a-(b.isFormField?b.hideLabel?0:this.labelAdjust:0)},isValidParent:function(){return!0}}),Ext.Container.LAYOUTS.form=Ext.layout.FormLayout,Ext.layout.Accordion=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,setActiveItem:function(a){a=this.container.getComponent(a),this.activeItem=a,this.layout()},renderItem:function(a){this.animate===!1&&(a.animCollapse=!1),a.collapsible=!0,this.autoWidth&&(a.autoWidth=!0),this.titleCollapse&&(a.titleCollapse=!0),this.hideCollapseTool&&(a.hideCollapseTool=!0),void 0!==this.collapseFirst&&(a.collapseFirst=this.collapseFirst),this.activeItem||a.collapsed?this.activeItem&&this.activeItem!=a&&(a.collapsed=!0):this.activeItem=a,Ext.layout.Accordion.superclass.renderItem.apply(this,arguments),a.header.addClass("x-accordion-hd"),a.on("beforeexpand",this.beforeExpand,this)},beforeExpand:function(a,b){var c=this.activeItem;if(c)if(this.sequence){if(delete this.activeItem,!c.collapsed)return c.collapse({callback:function(){a.expand(b||!0)},scope:this}),!1}else c.collapse(this.animate);this.activeItem=a,this.activeOnTop&&a.el.dom.parentNode.insertBefore(a.el.dom,a.el.dom.parentNode.firstChild),this.layout()},setItemSize:function(a,b){if(this.fill&&a){for(var c=this.container.items.items,d=0,e=0,f=c.length;f>e;e++){var g=c[e];g!=a&&(d+=g.getSize().height-g.bwrap.getHeight())}b.height-=d,a.setSize(b)}}}),Ext.Container.LAYOUTS.accordion=Ext.layout.Accordion,Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,setContainer:function(a){Ext.layout.TableLayout.superclass.setContainer.call(this,a),this.currentRow=0,this.currentColumn=0,this.cells=[]},onLayout:function(a,b){{var c=a.items.items;c.length}this.table||(b.addClass("x-table-layout-ct"),this.table=b.createChild({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},null,!0)),this.renderAll(a,b)},getRow:function(a){var b=this.table.tBodies[0].childNodes[a];return b||(b=document.createElement("tr"),this.table.tBodies[0].appendChild(b)),b},getNextCell:function(a){for(var b=this.getNextNonSpan(this.currentColumn,this.currentRow),c=this.currentColumn=b[0],d=this.currentRow=b[1],e=d;e<d+(a.rowspan||1);e++){this.cells[e]||(this.cells[e]=[]);for(var f=c;f<c+(a.colspan||1);f++)this.cells[e][f]=!0}var g=document.createElement("td");a.cellId&&(g.id=a.cellId);var h="x-table-layout-cell";return a.cellCls&&(h+=" "+a.cellCls),g.className=h,a.colspan&&(g.colSpan=a.colspan),a.rowspan&&(g.rowSpan=a.rowspan),this.getRow(d).appendChild(g),g},getNextNonSpan:function(a,b){for(var c=this.columns;c&&a>=c||this.cells[b]&&this.cells[b][a];)c&&a>=c?(b++,a=0):a++;return[a,b]},renderItem:function(a){if(a&&!a.rendered&&(a.render(this.getNextCell(a)),this.extraCls)){var b=a.getPositionEl?a.getPositionEl():a;b.addClass(this.extraCls)}},isValidParent:function(){return!0}}),Ext.Container.LAYOUTS.table=Ext.layout.TableLayout,Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",isForm:!1,setContainer:function(a){Ext.layout.AbsoluteLayout.superclass.setContainer.call(this,a),a.isXType("form")&&(this.isForm=!0)},onLayout:function(a,b){this.isForm?a.body.position():b.position(),Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,a,b)},getAnchorViewSize:function(a,b){return this.isForm?a.body.getStyleSize():Ext.layout.AbsoluteLayout.superclass.getAnchorViewSize.call(this,a,b)},isValidParent:function(a,b){return this.isForm?!0:Ext.layout.AbsoluteLayout.superclass.isValidParent.call(this,a,b)},adjustWidthAnchor:function(a,b){return a?a-b.getPosition(!0)[0]:a},adjustHeightAnchor:function(a,b){return a?a-b.getPosition(!0)[1]:a}}),Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout,Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this),document.getElementsByTagName("html")[0].className+=" x-viewport",this.el=Ext.getBody(),this.el.setHeight=Ext.emptyFn,this.el.setWidth=Ext.emptyFn,this.el.setSize=Ext.emptyFn,this.el.dom.scroll="no",this.allowDomMove=!1,this.autoWidth=!0,this.autoHeight=!0,Ext.EventManager.onWindowResize(this.fireResize,this),this.renderTo=this.el},fireResize:function(a,b){this.fireEvent("resize",this,a,b,a,b)}}),Ext.reg("viewport",Ext.Viewport),Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){if(Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.tbar&&(this.elements+=",tbar","object"==typeof this.tbar&&(this.topToolbar=this.tbar),delete this.tbar),this.bbar&&(this.elements+=",bbar","object"==typeof this.bbar&&(this.bottomToolbar=this.bbar),delete this.bbar),this.header===!0?(this.elements+=",header",delete this.header):(this.headerCfg||this.title&&this.header!==!1)&&(this.elements+=",header"),(this.footerCfg||this.footer===!0)&&(this.elements+=",footer",delete this.footer),this.buttons){var a=this.buttons;this.buttons=[];for(var b=0,c=a.length;c>b;b++)a[b].render?(a[b].ownerCt=this,this.buttons.push(a[b])):this.addButton(a[b])}this.autoLoad&&this.on("render",this.doAutoLoad,this,{delay:10})},createElement:function(a,b){if(this[a])return b.appendChild(this[a].dom),void 0;if("bwrap"===a||-1!=this.elements.indexOf(a)){if(this[a+"Cfg"])this[a]=Ext.fly(b).createChild(this[a+"Cfg"]);else{var c=document.createElement("div");c.className=this[a+"Cls"],this[a]=Ext.get(b.appendChild(c))}this[a+"CssClass"]&&this[a].addClass(this[a+"CssClass"]),this[a+"Style"]&&this[a].applyStyles(this[a+"Style"])}},onRender:function(a,b){if(Ext.Panel.superclass.onRender.call(this,a,b),this.createClasses(),this.el){this.el.addClass(this.baseCls),this.header=this.el.down("."+this.headerCls),this.bwrap=this.el.down("."+this.bwrapCls);var c=this.bwrap?this.bwrap:this.el;this.tbar=c.down("."+this.tbarCls),this.body=c.down("."+this.bodyCls),this.bbar=c.down("."+this.bbarCls),this.footer=c.down("."+this.footerCls),this.fromMarkup=!0}else this.el=a.createChild({id:this.id,cls:this.baseCls},b);var d=this.el,e=d.dom;if(this.cls&&this.el.addClass(this.cls),this.buttons&&(this.elements+=",footer"),this.frame){d.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls)),this.createElement("header",e.firstChild.firstChild.firstChild),this.createElement("bwrap",e);
var f=this.bwrap.dom,g=e.childNodes[1],h=e.childNodes[2];f.appendChild(g),f.appendChild(h);var i=f.firstChild.firstChild.firstChild;this.createElement("tbar",i),this.createElement("body",i),this.createElement("bbar",i),this.createElement("footer",f.lastChild.firstChild.firstChild),this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter")}else{this.createElement("header",e),this.createElement("bwrap",e);var f=this.bwrap.dom;this.createElement("tbar",f),this.createElement("body",f),this.createElement("bbar",f),this.createElement("footer",f),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"))}if(this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder"),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&(this.tools=this.tools?this.tools.slice(0):[],this.hideCollapseTool||this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this}),this.titleCollapse&&this.header&&(this.header.on("click",this.toggleCollapse,this),this.header.setStyle("cursor","pointer"))),this.tools){var j=this.tools;this.tools={},this.addTool.apply(this,j)}else this.tools={};if(this.buttons&&this.buttons.length>0)for(var k=this.footer.createChild({cls:"x-panel-btns-ct",cn:{cls:"x-panel-btns x-panel-btns-"+this.buttonAlign,html:'<table cellspacing="0"><tbody><tr></tr></tbody></table><div class="x-clear"></div>'}},null,!0),l=k.getElementsByTagName("tr")[0],m=0,n=this.buttons.length;n>m;m++){var o=this.buttons[m],p=document.createElement("td");p.className="x-panel-btn-td",o.render(l.appendChild(p))}this.tbar&&this.topToolbar&&(Ext.isArray(this.topToolbar)&&(this.topToolbar=new Ext.Toolbar(this.topToolbar)),this.topToolbar.render(this.tbar),this.topToolbar.ownerCt=this),this.bbar&&this.bottomToolbar&&(Ext.isArray(this.bottomToolbar)&&(this.bottomToolbar=new Ext.Toolbar(this.bottomToolbar)),this.bottomToolbar.render(this.bbar),this.bottomToolbar.ownerCt=this)},setIconClass:function(a){var b=this.iconCls;if(this.iconCls=a,this.rendered&&this.header)if(this.frame)this.header.addClass("x-panel-icon"),this.header.replaceClass(b,this.iconCls);else{var c=this.header.dom,d=c.firstChild&&"img"==String(c.firstChild.tagName).toLowerCase()?c.firstChild:null;d?Ext.fly(d).replaceClass(b,this.iconCls):Ext.DomHelper.insertBefore(c.firstChild,{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}this.fireEvent("iconchange",this,a,b)},makeFloating:function(a){this.floating=!0,this.el=new Ext.Layer("object"==typeof a?a:{shadow:void 0!==this.shadow?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:void 0},this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},addButton:function(a,b,c){var d={handler:b,scope:c,minWidth:this.minButtonWidth,hideParent:!0};"string"==typeof a?d.text=a:Ext.apply(d,a);var e=new Ext.Button(d);return e.ownerCt=this,this.buttons||(this.buttons=[]),this.buttons.push(e),e},addTool:function(){if(this[this.toolTarget]){if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.Panel.prototype.toolTemplate=a}for(var b=0,c=arguments,d=c.length;d>b;b++){var e=c[b];if(!this.tools[e.id]){var f="x-tool-"+e.id+"-over",g=this.toolTemplate.insertFirst("left"!==e.align?this[this.toolTarget]:this[this.toolTarget].child("span"),e,!0);this.tools[e.id]=g,g.enableDisplayMode("block"),g.on("click",this.createToolHandler(g,e,f,this)),e.on&&g.on(e.on),e.hidden&&g.hide(),e.qtip&&("object"==typeof e.qtip?Ext.QuickTips.register(Ext.apply({target:g.id},e.qtip)):g.dom.qtip=e.qtip),g.addClassOnOver(f)}}}},onShow:function(){return this.floating?this.el.show():(Ext.Panel.superclass.onShow.call(this),void 0)},onHide:function(){return this.floating?this.el.hide():(Ext.Panel.superclass.onHide.call(this),void 0)},createToolHandler:function(a,b,c,d){return function(e){a.removeClass(c),e.stopEvent(),b.handler&&b.handler.call(b.scope||a,e,a,d)}},afterRender:function(){if(this.fromMarkup&&void 0===this.height&&!this.autoHeight&&(this.height=this.el.getHeight()),!this.floating||this.hidden||this.initHidden||this.el.show(),this.title&&this.setTitle(this.title),this.setAutoScroll(),this.html&&(this.body.update("object"==typeof this.html?Ext.DomHelper.markup(this.html):this.html),delete this.html),this.contentEl){var a=Ext.getDom(this.contentEl);Ext.fly(a).removeClass(["x-hidden","x-hide-display"]),this.body.dom.appendChild(a)}this.collapsed&&(this.collapsed=!1,this.collapse(!1)),Ext.Panel.superclass.afterRender.call(this),this.initEvents()},setAutoScroll:function(){if(this.rendered&&this.autoScroll){var a=this.body||this.el;a&&a.setOverflow("auto")}},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap(),this.draggable&&this.initDraggable()},initDraggable:function(){this.dd=new Ext.Panel.DD(this,"boolean"==typeof this.draggable?null:this.draggable)},beforeEffect:function(){this.floating&&this.el.beforeAction(),this.el.addClass("x-panel-animated")},afterEffect:function(){this.syncShadow(),this.el.removeClass("x-panel-animated")},createEffect:function(a,b,c){var d={scope:c,block:!0};return a===!0?(d.callback=b,d):(d.callback=a.callback?function(){b.call(c),Ext.callback(a.callback,a.scope)}:b,Ext.applyIf(d,a))},collapse:function(a){if(!this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforecollapse",this,a)!==!1){var b=a===!0||a!==!1&&this.animCollapse;return this.beforeEffect(),this.onCollapse(b,a),this}},onCollapse:function(a,b){a?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(b||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(),this.afterCollapse())},afterCollapse:function(){this.collapsed=!0,this.el.addClass(this.collapsedCls),this.afterEffect(),this.fireEvent("collapse",this)},expand:function(a){if(this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforeexpand",this,a)!==!1){var b=a===!0||a!==!1&&this.animCollapse;return this.el.removeClass(this.collapsedCls),this.beforeEffect(),this.onExpand(b,a),this}},onExpand:function(a,b){a?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(b||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(),this.afterExpand())},afterExpand:function(){this.collapsed=!1,this.afterEffect(),this.fireEvent("expand",this)},toggleCollapse:function(a){return this[this.collapsed?"expand":"collapse"](a),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask(),Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask(),Ext.Panel.superclass.onEnable.call(this)},onResize:function(a,b){(void 0!==a||void 0!==b)&&(this.collapsed?(this.queuedBodySize={width:a,height:b},this.queuedExpand||this.allowQueuedExpand===!1||(this.queuedExpand=!0,this.on("expand",function(){delete this.queuedExpand,this.onResize(this.queuedBodySize.width,this.queuedBodySize.height),this.doLayout()},this,{single:!0}))):("number"==typeof a?this.body.setWidth(this.adjustBodyWidth(a-this.getFrameWidth())):"auto"==a&&this.body.setWidth(a),"number"==typeof b?this.body.setHeight(this.adjustBodyHeight(b-this.getFrameHeight())):"auto"==b&&this.body.setHeight(b),this.disabled&&this.el._mask&&this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())),this.fireEvent("bodyresize",this,a,b)),this.syncShadow()},adjustBodyHeight:function(a){return a},adjustBodyWidth:function(a){return a},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var a=this.el.getFrameWidth("lr");if(this.frame){var b=this.bwrap.dom.firstChild;a+=Ext.fly(b).getFrameWidth("l")+Ext.fly(b.firstChild).getFrameWidth("r");var c=this.bwrap.dom.firstChild.firstChild.firstChild;a+=Ext.fly(c).getFrameWidth("lr")}return a},getFrameHeight:function(){var a=this.el.getFrameWidth("tb");if(a+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),this.frame){var b=this.el.dom.firstChild,c=this.bwrap.dom.lastChild;a+=b.offsetHeight+c.offsetHeight;var d=this.bwrap.dom.firstChild.firstChild.firstChild;a+=Ext.fly(d).getFrameWidth("tb")}else a+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0);return a},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.getSize().height-this.getFrameHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},setTitle:function(a,b){return this.title=a,this.header&&this.headerAsText&&this.header.child("span").update(a),b&&this.setIconClass(b),this.fireEvent("titlechange",this,a),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var a=this.body.getUpdater();return a.update.apply(a,arguments),this},beforeDestroy:function(){if(this.header&&(this.header.removeAllListeners(),this.headerAsText&&Ext.Element.uncache(this.header.child("span"))),Ext.Element.uncache(this.header,this.tbar,this.bbar,this.footer,this.body,this.bwrap),this.tools)for(var a in this.tools)Ext.destroy(this.tools[a]);if(this.buttons)for(var b in this.buttons)Ext.destroy(this.buttons[b]);Ext.destroy(this.topToolbar,this.bottomToolbar),Ext.Panel.superclass.beforeDestroy.call(this)},createClasses:function(){this.headerCls=this.baseCls+"-header",this.headerTextCls=this.baseCls+"-header-text",this.bwrapCls=this.baseCls+"-bwrap",this.tbarCls=this.baseCls+"-tbar",this.bodyCls=this.baseCls+"-body",this.bbarCls=this.baseCls+"-bbar",this.footerCls=this.baseCls+"-footer"},createGhost:function(a,b,c){var d=document.createElement("div");if(d.className="x-panel-ghost "+(a?a:""),this.header&&d.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(d.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),d.style.width=this.el.dom.offsetWidth+"px",c?Ext.getDom(c).appendChild(d):this.container.dom.appendChild(d),b!==!1&&this.el.useShim!==!1){var e=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},d);return e.show(),e}return new Ext.Element(d)},doAutoLoad:function(){var a=this.body.getUpdater();this.renderer&&a.setRenderer(this.renderer),a.update("object"==typeof this.autoLoad?this.autoLoad:{url:this.autoLoad})},getTool:function(a){return this.tools[a]}}),Ext.reg("panel",Ext.Panel),Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,closeAction:"close",elements:"header,body",collapsible:!1,initHidden:!0,monitorResize:!0,frame:!0,floating:!0,initComponent:function(){Ext.Window.superclass.initComponent.call(this),this.addEvents("resize","maximize","minimize","restore")},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(!0))},onRender:function(a,b){Ext.Window.superclass.onRender.call(this,a,b),this.plain&&this.el.addClass("x-window-plain"),this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"}),this.focusEl.swallowEvent("click",!0),this.proxy=this.el.createProxy("x-window-proxy"),this.proxy.enableDisplayMode("block"),this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide(),this.mask.on("click",this.focus,this)),this.initTools()},initEvents:function(){if(Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable&&(this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction}),this.resizer.window=this,this.resizer.on("beforeresize",this.beforeResize,this)),this.draggable&&this.header.addClass("x-window-draggable"),this.el.on("mousedown",this.toFront,this),this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.hidden=!0,this.maximized&&(this.maximized=!1,this.maximize()),this.closable){var a=this.getKeyMap();a.on(27,this.onEsc,this),a.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(){this[this.closeAction]()},beforeDestroy:function(){this.rendered&&(this.hide(),this.doAnchor&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this)),Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)),Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this),Ext.Window.superclass.onDestroy.call(this)},initTools:function(){this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])}),this.maximizable&&(this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])}),this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0}),this.header.on("dblclick",this.toggleMaximize,this)),this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var a=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(a),a},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40),this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40),this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(a){var b=this.resizeBox;b.x!=a.x||b.y!=a.y?this.updateBox(a):this.setSize(a),this.focus(),this.updateHandles(),this.saveState(),this.layout&&this.doLayout(),this.fireEvent("resize",this,a.width,a.height)},focus:function(){var a=this.focusEl,b=this.defaultButton,c=typeof b;"undefined"!=c&&(a="number"==c?this.buttons[b]:"string"==c?Ext.getCmp(b):b),a.focus.defer(10,a)},setAnimateTarget:function(a){a=Ext.get(a),this.animateTarget=a},beforeShow:function(){if(delete this.el.lastXY,delete this.el.lastLT,void 0===this.x||void 0===this.y){var a=this.el.getAlignToXY(this.container,"c-c"),b=this.el.translatePoints(a[0],a[1]);this.x=void 0===this.x?b.left:this.x,this.y=void 0===this.y?b.top:this.y}this.el.setLeftTop(this.x,this.y),this.expandOnShow&&this.expand(!1),this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(a,b,c){return this.rendered||this.render(Ext.getBody()),this.hidden===!1?(this.toFront(),void 0):(this.fireEvent("beforeshow",this)!==!1&&(b&&this.on("show",b,c,{single:!0}),this.hidden=!1,void 0!==a&&this.setAnimateTarget(a),this.beforeShow(),this.animateTarget?this.animShow():this.afterShow()),void 0)},afterShow:function(){this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko&&this.cascade(this.setAutoScroll),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.onWindowResize(this.onWindowResize,this),this.doConstrain(),this.layout&&this.doLayout(),this.keyMap&&this.keyMap.enable(),this.toFront(),this.updateHandles(),this.fireEvent("show",this)},animShow:function(){this.proxy.show(),this.proxy.setBox(this.animateTarget.getBox()),this.proxy.setOpacity(0);var a=this.getBox(!1);a.callback=this.afterShow,a.scope=this,a.duration=.25,a.easing="easeNone",a.opacity=.5,a.block=!0,this.el.setStyle("display","none"),this.proxy.shift(a)},hide:function(a,b,c){return this.activeGhost?(this.hide.defer(100,this,[a,b,c]),void 0):(this.hidden||this.fireEvent("beforehide",this)===!1||(b&&this.on("hide",b,c,{single:!0}),this.hidden=!0,void 0!==a&&this.setAnimateTarget(a),this.animateTarget?this.animHide():(this.el.hide(),this.afterHide())),void 0)},afterHide:function(){this.proxy.hide(),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this),this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked")),this.keyMap&&this.keyMap.disable(),this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5),this.proxy.show();var a=this.getBox(!1);this.proxy.setBox(a),this.el.hide();var b=this.animateTarget.getBox();b.callback=this.afterHide,b.scope=this,b.duration=.25,b.easing="easeNone",b.block=!0,b.opacity=0,this.proxy.shift(b)},onWindowResize:function(){if(this.maximized&&this.fitContainer(),this.modal){this.mask.setSize("100%","100%");{this.mask.dom.offsetHeight}this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var a;if(this.constrain)a={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset};else{var b=this.getSize();a={right:-(b.width-100),bottom:-(b.height-25)}}var c=this.el.getConstrainToXY(this.container,!0,a);c&&this.setPosition(c[0],c[1])}},ghost:function(a){var b=this.createGhost(a),c=this.getBox(!0);return b.setLeftTop(c.x,c.y),b.setWidth(c.width),this.el.hide(),this.activeGhost=b,b},unghost:function(a,b){a!==!1&&(this.el.show(),this.focus(),Ext.isMac&&Ext.isGecko&&this.cascade(this.setAutoScroll)),b!==!1&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0)),this.activeGhost.hide(),this.activeGhost.remove(),delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this)},close:function(){this.fireEvent("beforeclose",this)!==!1&&this.hide(null,function(){this.fireEvent("close",this),this.destroy()},this)},maximize:function(){this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.maximizable&&(this.tools.maximize.hide(),this.tools.restore.show()),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this))},restore:function(){this.maximized&&(this.el.removeClass("x-window-maximized"),this.tools.restore.hide(),this.tools.maximize.show(),this.setPosition(this.restorePos[0],this.restorePos[1]),this.setSize(this.restoreSize.width,this.restoreSize.height),delete this.restorePos,delete this.restoreSize,this.maximized=!1,this.el.enableShadow(!0),this.dd&&this.dd.unlock(),this.collapsible&&this.tools.toggle.show(),this.container.removeClass("x-window-maximized-ct"),this.doConstrain(),this.fireEvent("restore",this))},toggleMaximize:function(){this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var a=this.container.getViewSize();this.setSize(a.width,a.height)},setZIndex:function(a){this.modal&&this.mask.setStyle("z-index",a),this.el.setZIndex(++a),a+=5,this.resizer&&this.resizer.proxy.setStyle("z-index",++a),this.lastZIndex=a},alignTo:function(a,b,c){var d=this.el.getAlignToXY(a,b,c);return this.setPagePosition(d[0],d[1]),this},anchorTo:function(a,b,c,d){this.doAnchor&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this)),this.doAnchor=function(){this.alignTo(a,b,c)},Ext.EventManager.onWindowResize(this.doAnchor,this);var e=typeof d;return"undefined"!=e&&Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:"number"==e?d:50}),this.doAnchor(),this},toFront:function(a){return this.manager.bringToFront(this)&&(a&&a.getTarget().focus||this.focus()),this},setActive:function(a){a?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var a=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(a[0],a[1]),this}}),Ext.reg("window",Ext.Window),Ext.Window.DD=function(a){this.win=a,Ext.Window.DD.superclass.constructor.call(this,a.el.id,"WindowDD-"+a.id),this.setHandleElId(a.header.id),this.scroll=!1},Ext.extend(Ext.Window.DD,Ext.dd.DD,{moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var a=this.win;if(this.proxy=a.ghost(),a.constrain!==!1){var b=a.el.shadowOffset;this.constrainTo(a.container,{right:b,left:b,bottom:b})}else if(a.constrainHeader!==!1){var c=this.proxy.getSize();this.constrainTo(a.container,{right:-(c.width-this.headerOffsets[0]),bottom:-(c.height-this.headerOffsets[1])})}},b4Drag:Ext.emptyFn,onDrag:function(a){this.alignElWithMouse(this.proxy,a.getPageX(),a.getPageY())},endDrag:function(){this.win.unghost(),this.win.saveState()}}),Ext.WindowGroup=function(){var a={},b=[],c=null,d=function(a,b){return!a._lastAccess||a._lastAccess<b._lastAccess?-1:1},e=function(){var a=b,c=a.length;if(c>0){a.sort(d);for(var e=a[0].manager.zseed,f=0;c>f;f++){var h=a[f];h&&!h.hidden&&h.setZIndex(e+10*f)}}g()},f=function(a){a!=c&&(c&&c.setActive(!1),c=a,a&&a.setActive(!0))},g=function(){for(var a=b.length-1;a>=0;--a)if(!b[a].hidden)return f(b[a]),void 0;f(null)};return{zseed:9e3,register:function(c){a[c.id]=c,b.push(c),c.on("hide",g)},unregister:function(c){delete a[c.id],c.un("hide",g),b.remove(c)},get:function(b){return"object"==typeof b?b:a[b]},bringToFront:function(a){return a=this.get(a),a!=c?(a._lastAccess=(new Date).getTime(),e(),!0):!1},sendToBack:function(a){return a=this.get(a),a._lastAccess=-(new Date).getTime(),e(),a},hideAll:function(){for(var b in a)a[b]&&"function"!=typeof a[b]&&a[b].isVisible()&&a[b].hide()},getActive:function(){return c},getBy:function(a,c){for(var d=[],e=b.length-1;e>=0;--e){var f=b[e];a.call(c||f,f)!==!1&&d.push(f)}return d},each:function(b,c){for(var d in a)if(a[d]&&"function"!=typeof a[d]&&b.call(c||a[d],a[d])===!1)return}}},Ext.WindowMgr=new Ext.WindowGroup,Ext.dd.PanelProxy=function(a,b){this.panel=a,this.id=this.panel.id+"-ddproxy",Ext.apply(this,b)},Ext.dd.PanelProxy.prototype={insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(void 0,void 0,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(a,b,c){this.hide(),"function"==typeof b&&b.call(c||this)},moveProxy:function(a,b){this.proxy&&a.insertBefore(this.proxy.dom,b)}},Ext.Panel.DD=function(a,b){this.panel=a,this.dragData={panel:a},this.proxy=new Ext.dd.PanelProxy(a,b),Ext.Panel.DD.superclass.constructor.call(this,a.el,b);var c=a.header;c&&this.setHandleElId(c.id),(c?c:this.panel.body).setStyle("cursor","move"),this.scroll=!1},Ext.extend(Ext.Panel.DD,Ext.dd.DragSource,{showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(){this.proxy.show()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(){return this.proxy.ghost.dom},endDrag:function(){this.proxy.hide(),this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)}}),Ext.state.Provider=function(){this.addEvents("statechange"),this.state={},Ext.state.Provider.superclass.constructor.call(this)},Ext.extend(Ext.state.Provider,Ext.util.Observable,{get:function(a,b){return"undefined"==typeof this.state[a]?b:this.state[a]},clear:function(a){delete this.state[a],this.fireEvent("statechange",this,a,null)},set:function(a,b){this.state[a]=b,this.fireEvent("statechange",this,a,b)},decodeValue:function(a){var b=/^(a|n|d|b|s|o)\:(.*)$/,c=b.exec(unescape(a));if(c&&c[1]){var d=c[1],e=c[2];switch(d){case"n":return parseFloat(e);case"d":return new Date(Date.parse(e));case"b":return"1"==e;case"a":for(var f=[],g=e.split("^"),h=0,i=g.length;i>h;h++)f.push(this.decodeValue(g[h]));return f;case"o":for(var f={},g=e.split("^"),h=0,i=g.length;i>h;h++){var j=g[h].split("=");f[j[0]]=this.decodeValue(j[1])}return f;default:return e}}},encodeValue:function(a){var b;if("number"==typeof a)b="n:"+a;else if("boolean"==typeof a)b="b:"+(a?"1":"0");else if(Ext.isDate(a))b="d:"+a.toGMTString();else if(Ext.isArray(a)){for(var c="",d=0,e=a.length;e>d;d++)c+=this.encodeValue(a[d]),d!=e-1&&(c+="^");b="a:"+c}else if("object"==typeof a){var c="";for(var f in a)"function"!=typeof a[f]&&void 0!==a[f]&&(c+=f+"="+this.encodeValue(a[f])+"^");b="o:"+c.substring(0,c.length-1)}else b="s:"+a;return escape(b)}}),Ext.state.Manager=function(){var a=new Ext.state.Provider;return{setProvider:function(b){a=b},get:function(b,c){return a.get(b,c)},set:function(b,c){a.set(b,c)},clear:function(b){a.clear(b)},getProvider:function(){return a}}}(),Ext.state.CookieProvider=function(a){Ext.state.CookieProvider.superclass.constructor.call(this),this.path="/",this.expires=new Date((new Date).getTime()+6048e5),this.domain=null,this.secure=!1,Ext.apply(this,a),this.state=this.readCookies()},Ext.extend(Ext.state.CookieProvider,Ext.state.Provider,{set:function(a,b){return"undefined"==typeof b||null===b?(this.clear(a),void 0):(this.setCookie(a,b),Ext.state.CookieProvider.superclass.set.call(this,a,b),void 0)},clear:function(a){this.clearCookie(a),Ext.state.CookieProvider.superclass.clear.call(this,a)},readCookies:function(){for(var a,b={},c=document.cookie+";",d=/\s?(.*?)=(.*?);/g;null!=(a=d.exec(c));){var e=a[1],f=a[2];e&&"ys-"==e.substring(0,3)&&(b[e.substr(3)]=this.decodeValue(f))}return b},setCookie:function(a,b){document.cookie="ys-"+a+"="+this.encodeValue(b)+(null==this.expires?"":"; expires="+this.expires.toGMTString())+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")},clearCookie:function(a){document.cookie="ys-"+a+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")}}),Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this),("string"==typeof this.tpl||Ext.isArray(this.tpl))&&(this.tpl=new Ext.XTemplate(this.tpl)),this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","selectionchange","beforeselect"),this.all=new Ext.CompositeElementLite,this.selected=new Ext.CompositeElementLite},onRender:function(){this.el||(this.el=document.createElement("div"),this.el.id=this.id),Ext.DataView.superclass.onRender.apply(this,arguments)},afterRender:function(){Ext.DataView.superclass.afterRender.call(this),this.el.on({click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this}),(this.overClass||this.trackOver)&&this.el.on({mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this}),this.store&&this.setStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0),this.el.update("");var a=this.store.getRange();a.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&this.el.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(this.el,this.collectData(a,0)),this.all.fill(Ext.query(this.itemSelector,this.el.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0},prepareData:function(a){return a},collectData:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)c[c.length]=this.prepareData(a[d].data,b+d,a[d]);return c},bufferRender:function(a){var b=document.createElement("div");return this.tpl.overwrite(b,this.collectData(a)),Ext.query(this.itemSelector,b)},onUpdate:function(a,b){var c=this.store.indexOf(b),d=this.isSelected(c),e=this.all.elements[c],f=this.bufferRender([b],c)[0];this.all.replaceElement(c,f,!0),d&&(this.selected.replaceElement(e,f),this.all.item(c).addClass(this.selectedClass)),this.updateIndexes(c,c)},onAdd:function(a,b,c){if(0==this.all.getCount())return this.refresh(),void 0;var d,e=this.bufferRender(b,c),f=this.all.elements;c<this.all.getCount()?(d=this.all.item(c).insertSibling(e,"before",!0),f.splice.apply(f,[c,0].concat(e))):(d=this.all.last().insertSibling(e,"after",!0),f.push.apply(f,e)),this.updateIndexes(c)},onRemove:function(a,b,c){this.deselect(c),this.all.removeElement(c,!0),this.updateIndexes(c),0==this.store.getCount()&&this.refresh()},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(a,b){var c=this.all.elements;a=a||0,b=b||(0===b?0:c.length-1);for(var d=a;b>=d;d++)c[d].viewIndex=d},getStore:function(){return this.store},setStore:function(a,b){!b&&this.store&&(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.refresh,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),a&&(a=Ext.StoreMgr.lookup(a),a.on("beforeload",this.onBeforeLoad,this),a.on("datachanged",this.refresh,this),a.on("add",this.onAdd,this),a.on("remove",this.onRemove,this),a.on("update",this.onUpdate,this),a.on("clear",this.refresh,this)),this.store=a,a&&this.refresh()},findItemFromChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.el)},onClick:function(a){var b=a.getTarget(this.itemSelector,this.el);if(b){var c=this.indexOf(b);this.onItemClick(b,c,a)!==!1&&this.fireEvent("click",this,c,b,a)}else this.fireEvent("containerclick",this,a)!==!1&&this.clearSelections()},onContextMenu:function(a){var b=a.getTarget(this.itemSelector,this.el);b&&this.fireEvent("contextmenu",this,this.indexOf(b),b,a)},onDblClick:function(a){var b=a.getTarget(this.itemSelector,this.el);b&&this.fireEvent("dblclick",this,this.indexOf(b),b,a)},onMouseOver:function(a){var b=a.getTarget(this.itemSelector,this.el);b&&b!==this.lastItem&&(this.lastItem=b,Ext.fly(b).addClass(this.overClass),this.fireEvent("mouseenter",this,this.indexOf(b),b,a))},onMouseOut:function(a){this.lastItem&&(a.within(this.lastItem,!0,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,a),delete this.lastItem))},onItemClick:function(a,b,c){return this.fireEvent("beforeclick",this,b,a,c)===!1?!1:(this.multiSelect?(this.doMultiSelection(a,b,c),c.preventDefault()):this.singleSelect&&(this.doSingleSelection(a,b,c),c.preventDefault()),!0)},doSingleSelection:function(a,b,c){c.ctrlKey&&this.isSelected(b)?this.deselect(b):this.select(b,!1)},doMultiSelection:function(a,b,c){if(c.shiftKey&&this.last!==!1){var d=this.last;this.selectRange(d,b,c.ctrlKey),this.last=d}else(c.ctrlKey||this.simpleSelect)&&this.isSelected(b)?this.deselect(b):this.select(b,c.ctrlKey||c.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){for(var a=[],b=this.selected.elements,c=0,d=b.length;d>c;c++)a.push(b[c].viewIndex);return a},getSelectedRecords:function(){for(var a=[],b=this.selected.elements,c=0,d=b.length;d>c;c++)a[a.length]=this.store.getAt(b[c].viewIndex);
return a},getRecords:function(a){for(var b=[],c=a,d=0,e=c.length;e>d;d++)b[b.length]=this.store.getAt(c[d].viewIndex);return b},getRecord:function(a){return this.store.getAt(a.viewIndex)},clearSelections:function(a,b){(this.multiSelect||this.singleSelect)&&this.selected.getCount()>0&&(b||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,a||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(a){return this.selected.contains(this.getNode(a))},deselect:function(a){this.isSelected(a)&&(a=this.getNode(a),this.selected.removeElement(a),this.last==a.viewIndex&&(this.last=!1),Ext.fly(a).removeClass(this.selectedClass),this.fireEvent("selectionchange",this,this.selected.elements))},select:function(a,b,c){if(Ext.isArray(a)){b||this.clearSelections(!0);for(var d=0,e=a.length;e>d;d++)this.select(a[d],!0,!0);c||this.fireEvent("selectionchange",this,this.selected.elements)}else{var f=this.getNode(a);b||this.clearSelections(!0),f&&!this.isSelected(f)&&this.fireEvent("beforeselect",this,f,this.selected.elements)!==!1&&(Ext.fly(f).addClass(this.selectedClass),this.selected.add(f),this.last=f.viewIndex,c||this.fireEvent("selectionchange",this,this.selected.elements))}},selectRange:function(a,b,c){c||this.clearSelections(!0),this.select(this.getNodes(a,b),!0)},getNode:function(a){return"string"==typeof a?document.getElementById(a):"number"==typeof a?this.all.elements[a]:a},getNodes:function(a,b){var c=this.all.elements;a=a||0,b="undefined"==typeof b?Math.max(c.length-1,0):b;var d,e=[];if(b>=a)for(d=a;b>=d&&c[d];d++)e.push(c[d]);else for(d=a;d>=b&&c[d];d--)e.push(c[d]);return e},indexOf:function(a){return a=this.getNode(a),"number"==typeof a.viewIndex?a.viewIndex:this.all.indexOf(a)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.el.update('<div class="loading-indicator">'+this.loadingText+"</div>"),this.all.clear())},onDestroy:function(){Ext.DataView.superclass.onDestroy.call(this),this.setStore(null)}}),Ext.reg("dataview",Ext.DataView),Ext.ColorPalette=function(a){Ext.ColorPalette.superclass.constructor.call(this,a),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope,!0)},Ext.extend(Ext.ColorPalette,Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],onRender:function(a,b){var c=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>'),d=document.createElement("div");d.id=this.getId(),d.className=this.itemCls,c.overwrite(d,this.colors),a.dom.insertBefore(d,b),this.el=Ext.get(d),this.el.on(this.clickEvent,this.handleClick,this,{delegate:"a"}),"click"!=this.clickEvent&&this.el.on("click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){if(Ext.ColorPalette.superclass.afterRender.call(this),this.value){var a=this.value;this.value=null,this.select(a)}},handleClick:function(a,b){if(a.preventDefault(),!this.disabled){var c=b.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(c.toUpperCase())}},select:function(a){if(a=a.replace("#",""),a!=this.value||this.allowReselect){var b=this.el;this.value&&b.child("a.color-"+this.value).removeClass("x-color-palette-sel"),b.child("a.color-"+a).addClass("x-color-palette-sel"),this.value=a,this.fireEvent("select",this,a)}}}),Ext.reg("colorpalette",Ext.ColorPalette),Ext.DatePicker=Ext.extend(Ext.Component,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime():(new Date).clearTime(),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope||this),this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){for(var a=this.disabledDates,b="(?:",c=0;c<a.length;c++)b+=a[c],c!=a.length-1&&(b+="|");this.disabledDatesRE=new RegExp(b+")")}},setDisabledDates:function(a){Ext.isArray(a)?(this.disabledDates=a,this.disabledDatesRE=null):this.disabledDatesRE=a,this.initDisabledDays(),this.update(this.value,!0)},setDisabledDays:function(a){this.disabledDays=a,this.update(this.value,!0)},setMinDate:function(a){this.minDate=a,this.update(this.value,!0)},setMaxDate:function(a){this.maxDate=a,this.update(this.value,!0)},setValue:function(a){this.value;this.value=a.clearTime(!0),this.el&&this.update(this.value)},getValue:function(){return this.value},focus:function(){this.el&&this.update(this.activeDate)},onEnable:function(a){Ext.DatePicker.superclass.onEnable.call(this),this.doDisabled(!1),this.update(a?this.value:this.activeDate),Ext.isIE&&this.el.repaint()},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this),this.doDisabled(!0),Ext.isIE&&!Ext.isIE8&&Ext.each([].concat(this.textNodes,this.el.query("th span")),function(a){Ext.fly(a).repaint()})},doDisabled:function(a){this.keyNav[a?"disable":"enable"](a),this.leftClickRpt.setDisabled(a),this.rightClickRpt.setDisabled(a),this.showToday&&(this.todayKeyListener[a?"disable":"enable"](a),this.todayBtn.setDisabled(a))},onRender:function(a,b){for(var c=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],d=this.dayNames,e=0;7>e;e++){var f=this.startDay+e;f>6&&(f-=7),c.push("<th><span>",d[f].substr(0,1),"</span></th>")}c[c.length]="</tr></thead><tbody><tr>";for(var e=0;42>e;e++)e%7==0&&0!=e&&(c[c.length]="</tr><tr>"),c[c.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>';c.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var g=document.createElement("div");if(g.className="x-date-picker",g.innerHTML=c.join(""),a.dom.insertBefore(g,b),this.el=Ext.get(g),this.eventEl=Ext.get(g.firstChild),this.leftClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.rightClickRpt=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.eventEl.on("mousewheel",this.handleMouseWheel,this),this.monthPicker=this.el.down("div.x-date-mp"),this.monthPicker.enableDisplayMode("block"),this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(a){a.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(a){a.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(a){a.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(a){a.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(){this.showNextMonth()},pageDown:function(){this.showPrevMonth()},enter:function(a){return a.stopPropagation(),!0},scope:this}),this.eventEl.on("click",this.handleDateClick,this,{delegate:"a.x-date-date"}),this.el.unselectable(),this.cells=this.el.select("table.x-date-inner tbody td"),this.textNodes=this.el.query("table.x-date-inner tbody span"),this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)}),this.mbtn.on("click",this.showMonthPicker,this),this.mbtn.el.child(this.mbtn.menuClassTarget).addClass("x-btn-with-menu"),this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var h=(new Date).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,h),tooltip:String.format(this.todayTip,h),handler:this.selectToday,scope:this})}Ext.isIE&&this.el.repaint(),this.onEnable(!0)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){for(var a=['<table border="0" cellspacing="0">'],b=0;6>b;b++)a.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(b),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(b+6),"</a></td>",0==b?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>');a.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>"),this.monthPicker.update(a.join("")),this.monthPicker.on("click",this.onMonthClick,this),this.monthPicker.on("dblclick",this.onMonthDblClick,this),this.mpMonths=this.monthPicker.select("td.x-date-mp-month"),this.mpYears=this.monthPicker.select("td.x-date-mp-year"),this.mpMonths.each(function(a,b,c){c+=1,a.dom.xmonth=c%2==0?5+Math.round(.5*c):Math.round(.5*(c-1))})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var a=this.el.getSize();this.monthPicker.setSize(a),this.monthPicker.child("table").setSize(a),this.mpSelMonth=(this.activeDate||this.value).getMonth(),this.updateMPMonth(this.mpSelMonth),this.mpSelYear=(this.activeDate||this.value).getFullYear(),this.updateMPYear(this.mpSelYear),this.monthPicker.slideIn("t",{duration:.2})}},updateMPYear:function(a){this.mpyear=a;for(var b=this.mpYears.elements,c=1;10>=c;c++){var d,e=b[c-1];c%2==0?(d=a+Math.round(.5*c),e.firstChild.innerHTML=d,e.xyear=d):(d=a-(5-Math.round(.5*c)),e.firstChild.innerHTML=d,e.xyear=d),this.mpYears.item(c-1)[d==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(a){this.mpMonths.each(function(b){b[b.dom.xmonth==a?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(){},onMonthClick:function(a,b){a.stopEvent();var c,d=new Ext.Element(b);if(d.is("button.x-date-mp-cancel"))this.hideMonthPicker();else if(d.is("button.x-date-mp-ok")){var e=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());e.getMonth()!=this.mpSelMonth&&(e=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()),this.update(e),this.hideMonthPicker()}else(c=d.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),c.addClass("x-date-mp-sel"),this.mpSelMonth=c.dom.xmonth):(c=d.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),c.addClass("x-date-mp-sel"),this.mpSelYear=c.dom.xyear):d.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):d.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(a,b){a.stopEvent();var c,d=new Ext.Element(b);(c=d.up("td.x-date-mp-month",2))?(this.update(new Date(this.mpSelYear,c.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(c=d.up("td.x-date-mp-year",2))&&(this.update(new Date(c.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker())},hideMonthPicker:function(a){this.monthPicker&&(a===!0?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(a){if(a.stopEvent(),!this.disabled){var b=a.getWheelDelta();b>0?this.showPrevMonth():0>b&&this.showNextMonth()}},handleDateClick:function(a,b){a.stopEvent(),this.disabled||!b.dateValue||Ext.fly(b.parentNode).hasClass("x-date-disabled")||(this.setValue(new Date(b.dateValue)),this.fireEvent("select",this,this.value))},selectToday:function(){this.todayBtn&&!this.todayBtn.disabled&&(this.setValue((new Date).clearTime()),this.fireEvent("select",this,this.value))},update:function(a,b){var c=this.activeDate,d=this.isVisible();if(this.activeDate=a,!b&&c&&this.el){var e=a.getTime();if(c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear())return this.cells.removeClass("x-date-selected"),this.cells.each(function(a){return a.dom.firstChild.dateValue==e?(a.addClass("x-date-selected"),d&&setTimeout(function(){try{a.dom.firstChild.focus()}catch(b){}},50),!1):void 0}),void 0}var f=a.getDaysInMonth(),g=a.getFirstDateOfMonth(),h=g.getDay()-this.startDay;0>h&&(h+=7);var i=a.add("mo",-1),j=i.getDaysInMonth()-h,k=this.cells.elements,l=this.textNodes;f+=h;var m=new Date(i.getFullYear(),i.getMonth(),j).clearTime(),n=(new Date).clearTime().getTime(),o=a.clearTime().getTime(),p=this.minDate?this.minDate.clearTime():Number.NEGATIVE_INFINITY,q=this.maxDate?this.maxDate.clearTime():Number.POSITIVE_INFINITY,r=this.disabledDatesRE,s=this.disabledDatesText,t=this.disabledDays?this.disabledDays.join(""):!1,u=this.disabledDaysText,v=this.format;if(this.showToday){var w=(new Date).clearTime(),x=p>w||w>q||r&&v&&r.test(w.dateFormat(v))||t&&-1!=t.indexOf(w.getDay());this.disabled||(this.todayBtn.setDisabled(x),this.todayKeyListener[x?"disable":"enable"]())}for(var y=function(a,b){b.title="";var c=m.getTime();if(b.firstChild.dateValue=c,c==n&&(b.className+=" x-date-today",b.title=a.todayText),c==o&&(b.className+=" x-date-selected",d&&setTimeout(function(){try{b.firstChild.focus()}catch(a){}},50)),p>c)return b.className=" x-date-disabled",b.title=a.minText,void 0;if(c>q)return b.className=" x-date-disabled",b.title=a.maxText,void 0;if(t&&-1!=t.indexOf(m.getDay())&&(b.title=u,b.className=" x-date-disabled"),r&&v){var e=m.dateFormat(v);r.test(e)&&(b.title=s.replace("%0",e),b.className=" x-date-disabled")}},z=0;h>z;z++)l[z].innerHTML=++j,m.setDate(m.getDate()+1),k[z].className="x-date-prevday",y(this,k[z]);for(;f>z;z++){var A=z-h+1;l[z].innerHTML=A,m.setDate(m.getDate()+1),k[z].className="x-date-active",y(this,k[z])}for(var B=0;42>z;z++)l[z].innerHTML=++B,m.setDate(m.getDate()+1),k[z].className="x-date-nextday",y(this,k[z]);if(this.mbtn.setText(this.monthNames[a.getMonth()]+" "+a.getFullYear()),!this.internalRender){var C=this.el.dom.firstChild,D=C.offsetWidth;this.el.setWidth(D+this.el.getBorderWidth("lr")),Ext.fly(C).setWidth(D),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(C.rows[0].cells[1].style.width=D-(C.rows[0].cells[0].offsetWidth+C.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[a]))}},beforeDestroy:function(){this.rendered&&(this.keyNav.disable(),this.keyNav=null,Ext.destroy(this.leftClickRpt,this.rightClickRpt,this.monthPicker,this.eventEl,this.mbtn,this.todayBtn))}}),Ext.reg("datepicker",Ext.DatePicker),Ext.TabPanel=Ext.extend(Ext.Panel,{monitorResize:!0,deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:null,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1,Ext.TabPanel.superclass.initComponent.call(this),this.addEvents("beforetabchange","tabchange","contextmenu"),this.setLayout(new Ext.layout.CardLayout({deferredRender:this.deferredRender})),"top"==this.tabPosition?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer"),this.stack||(this.stack=Ext.TabPanel.AccessStack()),this.initItems()},render:function(){if(Ext.TabPanel.superclass.render.apply(this,arguments),void 0!==this.activeTab){var a=this.activeTab;delete this.activeTab,this.setActiveTab(a)}},onRender:function(a,b){if(Ext.TabPanel.superclass.onRender.call(this,a,b),this.plain){var c="top"==this.tabPosition?"header":"footer";this[c].addClass("x-tab-panel-"+c+"-plain")}var d=this[this.stripTarget];this.stripWrap=d.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var e="bottom"==this.tabPosition?this.stripWrap:null;if(this.stripSpacer=d.createChild({cls:"x-tab-strip-spacer"},e),this.strip=new Ext.Element(this.stripWrap.dom.firstChild),this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge"}),this.strip.createChild({cls:"x-clear"}),this.body.addClass("x-tab-panel-body-"+this.tabPosition),!this.itemTpl){var f=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close" onclick="return false;"></a>','<a class="x-tab-right" href="#" onclick="return false;"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");f.disableFormats=!0,f.compile(),Ext.TabPanel.prototype.itemTpl=f}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this),this.autoTabs&&this.readTabs(!1)},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this),this.on("add",this.onAdd,this),this.on("remove",this.onRemove,this),this.strip.on("mousedown",this.onStripMouseDown,this),this.strip.on("contextmenu",this.onStripContextMenu,this),this.enableTabScroll&&this.strip.on("mousewheel",this.onWheel,this)},findTargets:function(a){var b=null,c=a.getTarget("li",this.strip);return c&&(b=this.getComponent(c.id.split(this.idDelimiter)[1]),b.disabled)?{close:null,item:null,el:null}:{close:a.getTarget(".x-tab-strip-close",this.strip),item:b,el:c}},onStripMouseDown:function(a){if(0==a.button){a.preventDefault();var b=this.findTargets(a);return b.close?(this.remove(b.item),void 0):(b.item&&b.item!=this.activeTab&&this.setActiveTab(b.item),void 0)}},onStripContextMenu:function(a){a.preventDefault();var b=this.findTargets(a);b.item&&this.fireEvent("contextmenu",this,b.item,a)},readTabs:function(a){a===!0&&this.items.each(function(a){this.remove(a)},this);for(var b=this.el.query(this.autoTabSelector),c=0,d=b.length;d>c;c++){var e=b[c],f=e.getAttribute("title");e.removeAttribute("title"),this.add({title:f,contentEl:e})}},initTab:function(a,b){var c=this.strip.dom.childNodes[b],d=a.closable?"x-tab-strip-closable":"";a.disabled&&(d+=" x-item-disabled"),a.iconCls&&(d+=" x-tab-with-icon"),a.tabCls&&(d+=" "+a.tabCls);var e={id:this.id+this.idDelimiter+a.getItemId(),text:a.title,cls:d,iconCls:a.iconCls||""},f=c?this.itemTpl.insertBefore(c,e):this.itemTpl.append(this.strip,e);Ext.fly(f).addClassOnOver("x-tab-strip-over"),a.tabTip&&(Ext.fly(f).child("span.x-tab-strip-text",!0).qtip=a.tabTip),a.tabEl=f,a.on("disable",this.onItemDisabled,this),a.on("enable",this.onItemEnabled,this),a.on("titlechange",this.onItemTitleChanged,this),a.on("iconchange",this.onItemIconChanged,this),a.on("beforeshow",this.onBeforeShowItem,this)},onAdd:function(a,b,c){this.initTab(b,c),1==this.items.getCount()&&this.syncSize(),this.delegateUpdates()},onBeforeAdd:function(a){var b=a.events?this.items.containsKey(a.getItemId())?a:null:this.items.get(a);if(b)return this.setActiveTab(a),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var c=a.elements;a.elements=c?c.replace(",header",""):c,a.border=a.border===!0},onRemove:function(a,b){if(Ext.destroy(Ext.get(this.getTabEl(b))),this.stack.remove(b),b.un("disable",this.onItemDisabled,this),b.un("enable",this.onItemEnabled,this),b.un("titlechange",this.onItemTitleChanged,this),b.un("iconchange",this.onItemIconChanged,this),b.un("beforeshow",this.onBeforeShowItem,this),b==this.activeTab){var c=this.stack.next();c?this.setActiveTab(c):this.items.getCount()>0?this.setActiveTab(0):this.activeTab=null}this.delegateUpdates()},onBeforeShowItem:function(a){return a!=this.activeTab?(this.setActiveTab(a),!1):void 0},onItemDisabled:function(a){var b=this.getTabEl(a);b&&Ext.fly(b).addClass("x-item-disabled"),this.stack.remove(a)},onItemEnabled:function(a){var b=this.getTabEl(a);b&&Ext.fly(b).removeClass("x-item-disabled")},onItemTitleChanged:function(a){var b=this.getTabEl(a);b&&(Ext.fly(b).child("span.x-tab-strip-text",!0).innerHTML=a.title)},onItemIconChanged:function(a,b,c){var d=this.getTabEl(a);d&&Ext.fly(d).child("span.x-tab-strip-text").replaceClass(c,b)},getTabEl:function(a){var b="number"==typeof a?this.items.items[a].getItemId():a.getItemId();return document.getElementById(this.id+this.idDelimiter+b)},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments),this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1,this.delegateUpdates()},hideTabStripItem:function(a){a=this.getComponent(a);var b=this.getTabEl(a);b&&(b.style.display="none",this.delegateUpdates()),this.stack.remove(a)},unhideTabStripItem:function(a){a=this.getComponent(a);var b=this.getTabEl(a);b&&(b.style.display="",this.delegateUpdates())},delegateUpdates:function(){this.suspendUpdates||(this.resizeTabs&&this.rendered&&this.autoSizeTabs(),this.enableTabScroll&&this.rendered&&this.autoScrollTabs())},autoSizeTabs:function(){var a=this.items.length,b="bottom"!=this.tabPosition?"header":"footer",c=(this[b].dom.offsetWidth,this[b].dom.clientWidth);if(this.resizeTabs&&!(1>a)&&c){var d=Math.max(Math.min(Math.floor((c-4)/a)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=d;for(var e=this.stripWrap.dom.getElementsByTagName("li"),f=0,g=e.length-1;g>f;f++){var h=e[f],i=h.childNodes[1].firstChild.firstChild,j=h.offsetWidth,k=i.offsetWidth;i.style.width=d-(j-k)+"px"}}},adjustBodyWidth:function(a){return this.header&&this.header.setWidth(a),this.footer&&this.footer.setWidth(a),a},setActiveTab:function(a){if(a=this.getComponent(a),a&&this.fireEvent("beforetabchange",this,a,this.activeTab)!==!1){if(!this.rendered)return this.activeTab=a,void 0;if(this.activeTab!=a){if(this.activeTab){var b=this.getTabEl(this.activeTab);b&&Ext.fly(b).removeClass("x-tab-strip-active"),this.activeTab.fireEvent("deactivate",this.activeTab)}var c=this.getTabEl(a);Ext.fly(c).addClass("x-tab-strip-active"),this.activeTab=a,this.stack.add(a),this.layout.setActiveItem(a),this.layoutOnTabChange&&a.doLayout&&a.doLayout(),this.scrolling&&this.scrollToTab(a,this.animScroll),a.fireEvent("activate",a),this.fireEvent("tabchange",this,a)}}},getActiveTab:function(){return this.activeTab||null},getItem:function(a){return this.getComponent(a)},autoScrollTabs:function(){this.pos="bottom"==this.tabPosition?this.footer:this.header;var a=this.items.length,b=(this.pos.dom.offsetWidth,this.pos.dom.clientWidth),c=this.stripWrap,d=c.dom,e=d.offsetWidth,f=this.getScrollPos(),g=this.edge.getOffsetsTo(this.stripWrap)[0]+f;!this.enableTabScroll||1>a||20>e||(b>=g?(d.scrollLeft=0,c.setWidth(b),this.scrolling&&(this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide(),(Ext.isAir||Ext.isWebKit)&&(d.style.marginLeft="",d.style.marginRight=""))):(this.scrolling||(this.pos.addClass("x-tab-scrolling"),(Ext.isAir||Ext.isWebKit)&&(d.style.marginLeft="18px",d.style.marginRight="18px")),b-=c.getMargins("lr"),c.setWidth(b>20?b:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,f>g-b?d.scrollLeft=g-b:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()))},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var a=this.stripWrap.dom.offsetHeight,b=this.pos.insertFirst({cls:"x-tab-scroller-left"});b.setHeight(a),b.addClassOnOver("x-tab-scroller-left-over"),this.leftRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this}),this.scrollLeft=b;var c=this.pos.insertFirst({cls:"x-tab-scroller-right"});c.setHeight(a),c.addClassOnOver("x-tab-scroller-right-over"),this.rightRepeater=new Ext.util.ClickRepeater(c,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this}),this.scrollRight=c},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(a,b){if(a){var c=this.getTabEl(a),d=this.getScrollPos(),e=this.getScrollArea(),f=Ext.fly(c).getOffsetsTo(this.stripWrap)[0]+d,g=f+c.offsetWidth;d>f?this.scrollTo(f,b):g>d+e&&this.scrollTo(g-e,b)}},scrollTo:function(a,b){this.stripWrap.scrollTo("left",a,b?this.getScrollAnim():!1),b||this.updateScrollButtons()},onWheel:function(a){var b=a.getWheelDelta()*this.wheelIncrement*-1;a.stopEvent();var c=this.getScrollPos(),d=c+b,e=this.getScrollWidth()-this.getScrollArea(),f=Math.max(0,Math.min(e,d));f!=c&&this.scrollTo(f,!1)},onScrollRight:function(){var a=this.getScrollWidth()-this.getScrollArea(),b=this.getScrollPos(),c=Math.min(a,b+this.getScrollIncrement());c!=b&&this.scrollTo(c,this.animScroll)},onScrollLeft:function(){var a=this.getScrollPos(),b=Math.max(0,a-this.getScrollIncrement());b!=a&&this.scrollTo(b,this.animScroll)},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[0==a?"addClass":"removeClass"]("x-tab-scroller-left-disabled"),this.scrollRight[a>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){this.items&&this.items.each(function(a){a&&a.tabEl&&(Ext.get(a.tabEl).removeAllListeners(),a.tabEl=null)},this),this.strip&&this.strip.removeAllListeners(),Ext.TabPanel.superclass.beforeDestroy.apply(this)}}),Ext.reg("tabpanel",Ext.TabPanel),Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab,Ext.TabPanel.AccessStack=function(){var a=[];return{add:function(b){a.push(b),a.length>10&&a.shift()},remove:function(b){for(var c=[],d=0,e=a.length;e>d;d++)a[d]!=b&&c.push(a[d]);a=c},next:function(){return a.pop()}}},Ext.Button=Ext.extend(Ext.Component,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first-child",initComponent:function(){Ext.Button.superclass.initComponent.call(this),this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout"),this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu)),"string"==typeof this.toggleGroup&&(this.enableToggle=!0)},onRender:function(a,b){this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table border="0" cellpadding="0" cellspacing="0" class="x-btn-wrap"><tbody><tr>','<td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><em unselectable="on"><button class="x-btn-text" type="{1}">{0}</button></em></td><td class="x-btn-right"><i>&#160;</i></td>',"</tr></tbody></table>")),this.template=Ext.Button.buttonTemplate);var c,d=[this.text||"&#160;",this.type];c=b?this.template.insertBefore(b,d,!0):this.template.append(a,d,!0);var e=this.btnEl=c.child(this.buttonSelector);e.on("focus",this.onFocus,this),e.on("blur",this.onBlur,this),this.initButtonEl(c,e),this.menu&&this.el.child(this.menuClassTarget).addClass("x-btn-with-menu"),Ext.ButtonToggleMgr.register(this)},initButtonEl:function(a,b){if(this.el=a,a.addClass("x-btn"),this.id){var c=this.el.dom,d=Ext.Element.cache;delete d[c.id],c.id=this.el.id=this.id,d[c.id]=this.el}if(this.icon&&b.setStyle("background-image","url("+this.icon+")"),this.iconCls&&(b.addClass(this.iconCls),this.cls||a.addClass(this.text?"x-btn-text-icon":"x-btn-icon")),void 0!==this.tabIndex&&(b.dom.tabIndex=this.tabIndex),this.tooltip&&("object"==typeof this.tooltip?Ext.QuickTips.register(Ext.apply({target:b.id},this.tooltip)):b.dom[this.tooltipType]=this.tooltip),this.pressed&&this.el.addClass("x-btn-pressed"),this.handleMouseEvents&&(a.on("mouseover",this.onMouseOver,this),a.on("mousedown",this.onMouseDown,this)),this.menu&&(this.menu.on("show",this.onMenuShow,this),this.menu.on("hide",this.onMenuHide,this)),this.repeat){var e=new Ext.util.ClickRepeater(a,"object"==typeof this.repeat?this.repeat:{});e.on("click",this.onClick,this)}a.on(this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this),Ext.isIE6?this.autoWidth.defer(1,this):this.autoWidth()},setIconClass:function(a){this.el&&this.btnEl.replaceClass(this.iconCls,a),this.iconCls=a},beforeDestroy:function(){this.rendered&&this.btnEl&&("object"==typeof this.tooltip&&Ext.QuickTips.unregister(this.btnEl),Ext.destroy(this.btnEl)),Ext.destroy(this.menu,this.repeater)},onDestroy:function(){var a=Ext.getDoc();a.un("mouseover",this.monitorMouseOver,this),a.un("mouseup",this.onMouseUp,this),this.rendered&&Ext.ButtonToggleMgr.unregister(this)},autoWidth:function(){if(this.el){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var a=this.btnEl;a&&a.getWidth()>20&&(a.clip(),a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(a,b){this.handler=a,this.scope=b},setText:function(a){this.text=a,this.el&&this.el.child("td.x-btn-center "+this.buttonSelector).update(a),this.autoWidth()},getText:function(){return this.text},toggle:function(a,b){a=void 0===a?!this.pressed:!!a,a!=this.pressed&&(this.rendered&&this.el[a?"addClass":"removeClass"]("x-btn-pressed"),this.pressed=a,b||(this.fireEvent("toggle",this,a),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,a)))},focus:function(){this.btnEl.focus()},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(a){this.el&&(Ext.isIE6&&this.text||this.el[a?"addClass":"removeClass"](this.disabledClass),this.el.dom.disabled=a),this.disabled=a},showMenu:function(){return this.menu&&this.menu.show(this.el,this.menuAlign),this},hideMenu:function(){return this.menu&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.isVisible()},onClick:function(a){a&&a.preventDefault(),0==a.button&&(this.disabled||(!this.enableToggle||this.allowDepress===!1&&this.pressed||this.toggle(),!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,a),this.handler&&this.handler.call(this.scope||this,this,a)))},isMenuTriggerOver:function(a,b){return this.menu&&!b},isMenuTriggerOut:function(a,b){return this.menu&&!b},onMouseOver:function(a){if(!this.disabled){var b=a.within(this.el,!0);b||(this.el.addClass("x-btn-over"),this.monitoringMouseOver||(Ext.getDoc().on("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!0),this.fireEvent("mouseover",this,a)),this.isMenuTriggerOver(a,b)&&this.fireEvent("menutriggerover",this,this.menu,a)}},monitorMouseOver:function(a){a.target==this.el.dom||a.within(this.el)||(this.monitoringMouseOver&&(Ext.getDoc().un("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!1),this.onMouseOut(a))},onMouseOut:function(a){var b=a.within(this.el)&&a.target!=this.el.dom;
this.el.removeClass("x-btn-over"),this.fireEvent("mouseout",this,a),this.isMenuTriggerOut(a,b)&&this.fireEvent("menutriggerout",this,this.menu,a)},onFocus:function(){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(){this.el.removeClass("x-btn-focus")},getClickEl:function(){return this.el},onMouseDown:function(a){this.disabled||0!=a.button||(this.getClickEl(a).addClass("x-btn-click"),Ext.getDoc().on("mouseup",this.onMouseUp,this))},onMouseUp:function(a){0==a.button&&(this.getClickEl(a,!0).removeClass("x-btn-click"),Ext.getDoc().un("mouseup",this.onMouseUp,this))},onMenuShow:function(){this.ignoreNextClick=0,this.el.addClass("x-btn-menu-active"),this.fireEvent("menushow",this,this.menu)},onMenuHide:function(){this.el.removeClass("x-btn-menu-active"),this.ignoreNextClick=this.restoreClick.defer(250,this),this.fireEvent("menuhide",this,this.menu)},restoreClick:function(){this.ignoreNextClick=0}}),Ext.reg("button",Ext.Button),Ext.ButtonToggleMgr=function(){function a(a,c){if(c)for(var d=b[a.toggleGroup],e=0,f=d.length;f>e;e++)d[e]!=a&&d[e].toggle(!1)}var b={};return{register:function(c){if(c.toggleGroup){var d=b[c.toggleGroup];d||(d=b[c.toggleGroup]=[]),d.push(c),c.on("toggle",a)}},unregister:function(c){if(c.toggleGroup){var d=b[c.toggleGroup];d&&(d.remove(c),c.un("toggle",a))}}}}(),Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"button:last",initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this),this.addEvents("arrowclick")},onRender:function(a,b){var c,d=new Ext.Template('<table cellspacing="0" class="x-btn-menu-wrap x-btn"><tr><td>','<table cellspacing="0" class="x-btn-wrap x-btn-menu-text-wrap"><tbody>','<tr><td class="x-btn-left"><i>&#160;</i></td><td class="x-btn-center"><button class="x-btn-text" type="{1}">{0}</button></td></tr>',"</tbody></table></td><td>",'<table cellspacing="0" class="x-btn-wrap x-btn-menu-arrow-wrap"><tbody>','<tr><td class="x-btn-center"><button class="x-btn-menu-arrow-el" type="button">&#160;</button></td><td class="x-btn-right"><i>&#160;</i></td></tr>',"</tbody></table></td></tr></table>"),e=[this.text||"&#160;",this.type];c=b?d.insertBefore(b,e,!0):d.append(a,e,!0);var f=this.btnEl=c.child(this.buttonSelector);this.initButtonEl(c,f),this.arrowBtnTable=c.child("table:last"),this.arrowEl=c.child(this.arrowSelector),this.arrowTooltip&&(this.arrowEl.dom[this.tooltipType]=this.arrowTooltip)},autoWidth:function(){if(this.el){var a=this.el.child("table:first"),b=this.el.child("table:last");if(this.el.setWidth("auto"),a.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var c=this.btnEl;c&&c.getWidth()>20&&(c.clip(),c.setWidth(Ext.util.TextMetrics.measure(c,this.text).width+c.getFrameWidth("lr")))}this.minWidth&&a.getWidth()+b.getWidth()<this.minWidth&&a.setWidth(this.minWidth-b.getWidth()),this.el.setWidth(a.getWidth()+b.getWidth())}},setArrowHandler:function(a,b){this.arrowHandler=a,this.scope=b},onClick:function(a){a.preventDefault(),this.disabled||(a.getTarget(".x-btn-menu-arrow-wrap")?(!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("arrowclick",this,a),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,a)):(this.enableToggle&&this.toggle(),this.fireEvent("click",this,a),this.handler&&this.handler.call(this.scope||this,this,a)))},getClickEl:function(a,b){return b?this.lastClickEl:this.lastClickEl=a.getTarget("table",10,!0)},onDisableChange:function(a){Ext.SplitButton.superclass.onDisableChange.call(this,a),this.arrowEl&&(this.arrowEl.dom.disabled=a)},isMenuTriggerOver:function(a){return this.menu&&a.within(this.arrowBtnTable)&&!a.within(this.arrowBtnTable,!0)},isMenuTriggerOut:function(a){return this.menu&&!a.within(this.arrowBtnTable)},onDestroy:function(){Ext.destroy(this.arrowBtnTable),Ext.SplitButton.superclass.onDestroy.call(this)}}),Ext.MenuButton=Ext.SplitButton,Ext.reg("splitbutton",Ext.SplitButton),Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(a){if(a&&this.showText===!0){var b="";return this.prependText&&(b+=this.prependText),b+=a.text}return void 0},setActiveItem:function(a,b){if("object"!=typeof a&&(a=this.menu.items.get(a)),a){if(this.rendered){var c=this.getItemText(a);c&&this.setText(c),this.setIconClass(a.iconCls)}else this.text=this.getItemText(a),this.iconCls=a.iconCls;this.activeItem=a,a.checked||a.setChecked(!0,!0),this.forceIcon&&this.setIconClass(this.forceIcon),b||this.fireEvent("change",this,a)}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change"),this.changeHandler&&(this.on("change",this.changeHandler,this.scope||this),delete this.changeHandler),this.itemCount=this.items.length,this.menu={cls:"x-cycle-menu",items:[]};for(var a,b=0,c=this.itemCount;c>b;b++){var d=this.items[b];d.group=d.group||this.id,d.itemIndex=b,d.checkHandler=this.checkHandler,d.scope=this,d.checked=d.checked||!1,this.menu.items.push(d),d.checked&&(a=d)}this.setActiveItem(a,!0),Ext.CycleButton.superclass.initComponent.call(this),this.on("click",this.toggleSelected,this)},checkHandler:function(a,b){b&&this.setActiveItem(a)},toggleSelected:function(){this.menu.render();for(var a,b,c=1;c<this.itemCount;c++)if(a=(this.activeItem.itemIndex+c)%this.itemCount,b=this.menu.items.itemAt(a),!b.disabled){b.setChecked(!0);break}}}),Ext.reg("cycle",Ext.CycleButton),Ext.Toolbar=function(a){Ext.isArray(a)&&(a={buttons:a}),Ext.Toolbar.superclass.constructor.call(this,a)},function(){var a=Ext.Toolbar;Ext.extend(a,Ext.BoxComponent,{trackMenus:!0,initComponent:function(){a.superclass.initComponent.call(this),this.items&&(this.buttons=this.items),this.items=new Ext.util.MixedCollection(!1,function(a){return a.itemId||a.id||Ext.id()})},autoCreate:{cls:"x-toolbar x-small-editor",html:'<table cellspacing="0"><tr></tr></table>'},onRender:function(a,b){this.el=a.createChild(Ext.apply({id:this.id},this.autoCreate),b),this.tr=this.el.child("tr",!0)},afterRender:function(){a.superclass.afterRender.call(this),this.buttons&&(this.add.apply(this,this.buttons),delete this.buttons)},add:function(){for(var a=arguments,b=a.length,c=0;b>c;c++){var d=a[c];d.isFormField?this.addField(d):d.render?this.addItem(d):"string"==typeof d?"separator"==d||"-"==d?this.addSeparator():" "==d?this.addSpacer():"->"==d?this.addFill():this.addText(d):d.tagName?this.addElement(d):"object"==typeof d&&(d.xtype?this.addField(Ext.ComponentMgr.create(d,"button")):this.addButton(d))}},addSeparator:function(){return this.addItem(new a.Separator)},addSpacer:function(){return this.addItem(new a.Spacer)},addFill:function(){return this.addItem(new a.Fill)},addElement:function(b){return this.addItem(new a.Item(b))},addItem:function(a){var b=this.nextBlock();return this.initMenuTracking(a),a.render(b),this.items.add(a),a},addButton:function(b){if(Ext.isArray(b)){for(var c=[],d=0,e=b.length;e>d;d++)c.push(this.addButton(b[d]));return c}var f=b;b instanceof a.Button||(f=b.split?new a.SplitButton(b):new a.Button(b));var g=this.nextBlock();return this.initMenuTracking(f),f.render(g),this.items.add(f),f},initMenuTracking:function(a){this.trackMenus&&a.menu&&a.on({menutriggerover:this.onButtonTriggerOver,menushow:this.onButtonMenuShow,menuhide:this.onButtonMenuHide,scope:this})},addText:function(b){return this.addItem(new a.TextItem(b))},insertButton:function(b,c){if(Ext.isArray(c)){for(var d=[],e=0,f=c.length;f>e;e++)d.push(this.insertButton(b+e,c[e]));return d}c instanceof a.Button||(c=new a.Button(c));var g=document.createElement("td");return this.tr.insertBefore(g,this.tr.childNodes[b]),this.initMenuTracking(c),c.render(g),this.items.insert(b,c),c},addDom:function(b){var c=this.nextBlock();Ext.DomHelper.overwrite(c,b);var d=new a.Item(c.firstChild);return d.render(c),this.items.add(d),d},addField:function(b){var c=this.nextBlock();b.render(c);var d=new a.Item(c.firstChild);return d.render(c),this.items.add(b),d},nextBlock:function(){var a=document.createElement("td");return this.tr.appendChild(a),a},onDestroy:function(){Ext.Toolbar.superclass.onDestroy.call(this),this.rendered&&(this.items&&Ext.destroy.apply(Ext,this.items.items),Ext.Element.uncache(this.tr))},onDisable:function(){this.items.each(function(a){a.disable&&a.disable()})},onEnable:function(){this.items.each(function(a){a.enable&&a.enable()})},onButtonTriggerOver:function(a){this.activeMenuBtn&&this.activeMenuBtn!=a&&(this.activeMenuBtn.hideMenu(),a.showMenu(),this.activeMenuBtn=a)},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(){delete this.activeMenuBtn}}),Ext.reg("toolbar",Ext.Toolbar),a.Item=function(a){this.el=Ext.getDom(a),this.id=Ext.id(this.el),this.hidden=!1},a.Item.prototype={getEl:function(){return this.el},render:function(a){this.td=a,a.appendChild(this.el)},destroy:function(){if(this.el){var a=Ext.get(this.el);Ext.destroy(a)}Ext.removeNode(this.td)},show:function(){this.hidden=!1,this.td.style.display=""},hide:function(){this.hidden=!0,this.td.style.display="none"},setVisible:function(a){a?this.show():this.hide()},focus:function(){Ext.fly(this.el).focus()},disable:function(){Ext.fly(this.td).addClass("x-item-disabled"),this.disabled=!0,this.el.disabled=!0},enable:function(){Ext.fly(this.td).removeClass("x-item-disabled"),this.disabled=!1,this.el.disabled=!1}},Ext.reg("tbitem",a.Item),a.Separator=function(){var b=document.createElement("span");b.className="ytb-sep",a.Separator.superclass.constructor.call(this,b)},Ext.extend(a.Separator,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbseparator",a.Separator),a.Spacer=function(){var b=document.createElement("div");b.className="ytb-spacer",a.Spacer.superclass.constructor.call(this,b)},Ext.extend(a.Spacer,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbspacer",a.Spacer),a.Fill=Ext.extend(a.Spacer,{render:function(b){b.style.width="100%",a.Fill.superclass.render.call(this,b)}}),Ext.reg("tbfill",a.Fill),a.TextItem=function(b){var c=document.createElement("span");c.className="ytb-text",c.innerHTML=b.text?b.text:b,a.TextItem.superclass.constructor.call(this,c)},Ext.extend(a.TextItem,a.Item,{enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbtext",a.TextItem),a.Button=Ext.extend(Ext.Button,{hideParent:!0,onDestroy:function(){a.Button.superclass.onDestroy.call(this),this.container&&this.container.remove()}}),Ext.reg("tbbutton",a.Button),a.SplitButton=Ext.extend(Ext.SplitButton,{hideParent:!0,onDestroy:function(){a.SplitButton.superclass.onDestroy.call(this),this.container&&this.container.remove()}}),Ext.reg("tbsplit",a.SplitButton),a.MenuButton=a.SplitButton}(),Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",paramNames:{start:"start",limit:"limit"},initComponent:function(){this.addEvents("change","beforechange"),Ext.PagingToolbar.superclass.initComponent.call(this),this.cursor=0,this.bind(this.store)},onRender:function(a,b){Ext.PagingToolbar.superclass.onRender.call(this,a,b),this.first=this.addButton({tooltip:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.onClick.createDelegate(this,["first"])}),this.prev=this.addButton({tooltip:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.onClick.createDelegate(this,["prev"])}),this.addSeparator(),this.add(this.beforePageText),this.field=Ext.get(this.addDom({tag:"input",type:"text",size:"3",value:"1",cls:"x-tbar-page-number"}).el),this.field.on("keydown",this.onPagingKeydown,this),this.field.on("focus",function(){this.dom.select()}),this.field.on("blur",this.onPagingBlur,this),this.afterTextEl=this.addText(String.format(this.afterPageText,1)),this.field.setHeight(18),this.addSeparator(),this.next=this.addButton({tooltip:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.onClick.createDelegate(this,["next"])}),this.last=this.addButton({tooltip:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.onClick.createDelegate(this,["last"])}),this.addSeparator(),this.loading=this.addButton({tooltip:this.refreshText,iconCls:"x-tbar-loading",handler:this.onClick.createDelegate(this,["refresh"])}),this.displayInfo&&(this.displayEl=Ext.fly(this.el.dom).createChild({cls:"x-paging-info"})),this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayEl){var a=this.store.getCount(),b=0==a?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+a,this.store.getTotalCount());this.displayEl.update(b)}},onLoad:function(a,b,c){if(!this.rendered)return this.dsLoaded=[a,b,c],void 0;this.cursor=c.params?c.params[this.paramNames.start]:0;var d=this.getPageData(),e=d.activePage,f=d.pages;this.afterTextEl.el.innerHTML=String.format(this.afterPageText,d.pages),this.field.dom.value=e,this.first.setDisabled(1==e),this.prev.setDisabled(1==e),this.next.setDisabled(e==f),this.last.setDisabled(e==f),this.loading.enable(),this.updateInfo(),this.fireEvent("change",this,d)},getPageData:function(){var a=this.store.getTotalCount();return{total:a,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:a<this.pageSize?1:Math.ceil(a/this.pageSize)}},onLoadError:function(){this.rendered&&this.loading.enable()},readPage:function(a){var b,c=this.field.dom.value;return!c||isNaN(b=parseInt(c,10))?(this.field.dom.value=a.activePage,!1):b},onPagingBlur:function(){this.field.dom.value=this.getPageData().activePage},onPagingKeydown:function(a){var b,c=a.getKey(),d=this.getPageData();if(c==a.RETURN)a.stopEvent(),b=this.readPage(d),b!==!1&&(b=Math.min(Math.max(1,b),d.pages)-1,this.doLoad(b*this.pageSize));else if(c==a.HOME||c==a.END)a.stopEvent(),b=c==a.HOME?1:d.pages,this.field.dom.value=b;else if((c==a.UP||c==a.PAGEUP||c==a.DOWN||c==a.PAGEDOWN)&&(a.stopEvent(),b=this.readPage(d))){var e=a.shiftKey?10:1;(c==a.DOWN||c==a.PAGEDOWN)&&(e*=-1),b+=e,b>=1&b<=d.pages&&(this.field.dom.value=b)}},beforeLoad:function(){this.rendered&&this.loading&&this.loading.disable()},doLoad:function(a){var b={},c=this.paramNames;b[c.start]=a,b[c.limit]=this.pageSize,this.fireEvent("beforechange",this,b)!==!1&&this.store.load({params:b})},changePage:function(a){this.doLoad(((a-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onClick:function(a){var b=this.store;switch(a){case"first":this.doLoad(0);break;case"prev":this.doLoad(Math.max(0,this.cursor-this.pageSize));break;case"next":this.doLoad(this.cursor+this.pageSize);break;case"last":var c=b.getTotalCount(),d=c%this.pageSize,e=d?c-d:c-this.pageSize;this.doLoad(e);break;case"refresh":this.doLoad(this.cursor)}},unbind:function(a){a=Ext.StoreMgr.lookup(a),a.un("beforeload",this.beforeLoad,this),a.un("load",this.onLoad,this),a.un("loadexception",this.onLoadError,this),this.store=void 0},bind:function(a){a=Ext.StoreMgr.lookup(a),a.on("beforeload",this.beforeLoad,this),a.on("load",this.onLoad,this),a.on("loadexception",this.onLoadError,this),this.store=a,a.getCount()>0&&this.onLoad(a,null,{})},onDestroy:function(){this.store&&this.unbind(this.store),Ext.PagingToolbar.superclass.onDestroy.call(this)}}),Ext.reg("paging",Ext.PagingToolbar),Ext.Resizable=function(a,b){if(this.el=Ext.get(a),b&&b.wrap){if(b.resizeChild=this.el,this.el=this.el.wrap("object"==typeof b.wrap?b.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=b.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(b.resizeChild.getPositioning()),b.resizeChild.clearPositioning(),!b.width||!b.height){var c=b.resizeChild.getSize();this.el.setSize(c.width,c.height)}b.pinned&&!b.adjustments&&(b.adjustments="auto")}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody()),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,b),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned"));var d=this.el.getStyle("position");"absolute"!=d&&"fixed"!=d&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),"all"==this.handles&&(this.handles="n s e w ne nw se sw");for(var e=this.handles.split(/\s*?[,;]\s*?| /),f=Ext.Resizable.positions,g=0,h=e.length;h>g;g++)if(e[g]&&f[e[g]]){var i=f[e[g]];this[i]=new Ext.Resizable.Handle(this,i,this.disableTrackOver,this.transparent)}if(this.corner=this.southeast,(-1!=this.handles.indexOf("n")||-1!=this.handles.indexOf("w"))&&(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&(this.resizeChild="boolean"==typeof this.resizeChild?Ext.get(this.el.dom.firstChild,!0):Ext.get(this.resizeChild,!0)),"auto"==this.adjustments){var j=this.resizeChild,k=this.west,l=this.east,m=this.north,e=this.south;j&&(k||m)&&(j.position("relative"),j.setLeft(k?k.el.getWidth():0),j.setTop(m?m.el.getHeight():0)),this.adjustments=[(l?-l.el.getWidth():0)+(k?-k.el.getWidth():0),(m?-m.el.getHeight():0)+(e?-e.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id)),this.addEvents("beforeresize","resize"),null!==this.width&&null!==this.height?this.resizeTo(this.width,this.height):this.updateChildSize(),Ext.isIE&&(this.el.dom.style.zoom=1),Ext.Resizable.superclass.constructor.call(this)},Ext.extend(Ext.Resizable,Ext.util.Observable,{resizeChild:!1,adjustments:[0,0],minWidth:5,minHeight:5,maxWidth:1e4,maxHeight:1e4,enabled:!0,animate:!1,duration:.35,dynamic:!1,handles:!1,multiDirectional:!1,disableTrackOver:!1,easing:"easeOutStrong",widthIncrement:0,heightIncrement:0,pinned:!1,width:null,height:null,preserveRatio:!1,transparent:!1,minX:0,minY:0,draggable:!1,resizeTo:function(a,b){this.el.setSize(a,b),this.updateChildSize(),this.fireEvent("resize",this,a,b,null)},startSizing:function(a,b){if(this.fireEvent("beforeresize",this,a),this.enabled){if(this.overlay||(this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody()),this.overlay.unselectable(),this.overlay.enableDisplayMode("block"),this.overlay.on("mousemove",this.onMouseMove,this),this.overlay.on("mouseup",this.onMouseUp,this)),this.overlay.setStyle("cursor",b.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=a.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo){var c=Ext.get(this.constrainTo);this.resizeRegion=c.getRegion().adjust(c.getFrameWidth("t"),c.getFrameWidth("l"),-c.getFrameWidth("b"),-c.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden"),this.proxy.show(),this.proxy.setBox(this.startBox),this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(a,b){this.enabled&&(b.stopEvent(),this.activeHandle=a,this.startSizing(b,a))},onMouseUp:function(a){this.activeHandle=null;var b=this.resizeElement();this.resizing=!1,this.handleOut(),this.overlay.hide(),this.proxy.hide(),this.fireEvent("resize",this,b.width,b.height,a)},updateChildSize:function(){if(this.resizeChild){var a=this.el,b=this.resizeChild,c=this.adjustments;if(a.dom.offsetWidth){var d=a.getSize(!0);b.setSize(d.width+c[0],d.height+c[1])}Ext.isIE&&setTimeout(function(){if(a.dom.offsetWidth){var d=a.getSize(!0);b.setSize(d.width+c[0],d.height+c[1])}},10)}},snap:function(a,b,c){if(!b||!a)return a;var d=a,e=a%b;return e>0&&(d=e>b/2?a+(b-e):a-e),Math.max(c,d)},resizeElement:function(){var a=this.proxy.getBox();return this.updateBox?this.el.setBox(a,!1,this.animate,this.duration,null,this.easing):this.el.setSize(a.width,a.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),a},constrain:function(a,b,c,d){return c>a-b?b=a-c:a-b>d&&(b=a-d),b},onMouseMove:function(a){if(this.enabled&&this.activeHandle)try{if(this.resizeRegion&&!this.resizeRegion.contains(a.getPoint()))return;var b=this.curSize||this.startBox,c=this.startBox.x,d=this.startBox.y,e=b.width,f=b.height,g=e,h=f,i=this.minWidth,j=this.minHeight,k=this.maxWidth,l=this.maxHeight,m=this.widthIncrement,n=this.heightIncrement,o=a.getXY(),p=-(this.startPoint[0]-Math.max(this.minX,o[0])),q=-(this.startPoint[1]-Math.max(this.minY,o[1])),r=this.activeHandle.position;switch(r){case"east":e+=p,e=Math.min(Math.max(i,e),k);break;case"south":f+=q,f=Math.min(Math.max(j,f),l);break;case"southeast":e+=p,f+=q,e=Math.min(Math.max(i,e),k),f=Math.min(Math.max(j,f),l);break;case"north":q=this.constrain(f,q,j,l),d+=q,f-=q;break;case"west":p=this.constrain(e,p,i,k),c+=p,e-=p;break;case"northeast":e+=p,e=Math.min(Math.max(i,e),k),q=this.constrain(f,q,j,l),d+=q,f-=q;break;case"northwest":p=this.constrain(e,p,i,k),q=this.constrain(f,q,j,l),d+=q,f-=q,c+=p,e-=p;break;case"southwest":p=this.constrain(e,p,i,k),f+=q,f=Math.min(Math.max(j,f),l),c+=p,e-=p}var s=this.snap(e,m,i),t=this.snap(f,n,j);if(s!=e||t!=f){switch(r){case"northeast":d-=t-f;break;case"north":d-=t-f;break;case"southwest":c-=s-e;break;case"west":c-=s-e;break;case"northwest":c-=s-e,d-=t-f}e=s,f=t}if(this.preserveRatio)switch(r){case"southeast":case"east":f=h*(e/g),f=Math.min(Math.max(j,f),l),e=g*(f/h);break;case"south":e=g*(f/h),e=Math.min(Math.max(i,e),k),f=h*(e/g);break;case"northeast":e=g*(f/h),e=Math.min(Math.max(i,e),k),f=h*(e/g);break;case"north":var u=e;e=g*(f/h),e=Math.min(Math.max(i,e),k),f=h*(e/g),c+=(u-e)/2;break;case"southwest":f=h*(e/g),f=Math.min(Math.max(j,f),l);var u=e;e=g*(f/h),c+=u-e;break;case"west":var v=f;f=h*(e/g),f=Math.min(Math.max(j,f),l),d+=(v-f)/2;var u=e;e=g*(f/h),c+=u-e;break;case"northwest":var u=e,v=f;f=h*(e/g),f=Math.min(Math.max(j,f),l),e=g*(f/h),d+=v-f,c+=u-e}this.proxy.setBounds(c,d,e,f),this.dynamic&&this.resizeElement()}catch(a){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(a){Ext.destroy(this.dd,this.overlay,this.proxy),this.overlay=null,this.proxy=null;var b=Ext.Resizable.positions;for(var c in b)"function"!=typeof b[c]&&this[b[c]]&&this[b[c]].destroy();a&&(this.el.update(""),Ext.destroy(this.el),this.el=null),this.purgeListeners()},syncHandleHeight:function(){var a=this.el.getHeight(!0);this.west&&this.west.el.setHeight(a),this.east&&this.east.el.setHeight(a)}}),Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},Ext.Resizable.Handle=function(a,b,c,d){if(!this.tpl){var e=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});e.compile(),Ext.Resizable.Handle.prototype.tpl=e}this.position=b,this.rz=a,this.el=this.tpl.append(a.el.dom,[this.position],!0),this.el.unselectable(),d&&this.el.setOpacity(0),this.el.on("mousedown",this.onMouseDown,this),c||(this.el.on("mouseover",this.onMouseOver,this),this.el.on("mouseout",this.onMouseOut,this))},Ext.Resizable.Handle.prototype={afterResize:function(){},onMouseDown:function(a){this.rz.onMouseDown(this,a)},onMouseOver:function(a){this.rz.handleOver(this,a)},onMouseOut:function(a){this.rz.handleOut(this,a)},destroy:function(){Ext.destroy(this.el),this.el=null}},Ext.Editor=function(a,b){this.field=a,Ext.Editor.superclass.constructor.call(this,b)},Ext.extend(Ext.Editor,Ext.Component,{value:"",alignment:"c-c?",shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!1,cancelOnEsc:!1,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this),this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(a){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:a,shim:this.shim,shadowOffset:4,id:this.id,constrain:this.constrain}),this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden"),"title"!=this.field.msgTarget&&(this.field.msgTarget="qtip"),this.field.inEditor=!0,this.field.render(this.el),Ext.isGecko&&this.field.el.dom.setAttribute("autocomplete","off"),this.field.on("specialkey",this.onSpecialKey,this),this.swallowKeys&&this.field.el.swallowEvent(["keydown","keypress"]),this.field.show(),this.field.on("blur",this.onBlur,this),this.field.grow&&this.field.on("autosize",this.el.sync,this.el,{delay:1})},onSpecialKey:function(a,b){var c=b.getKey();this.completeOnEnter&&c==b.ENTER?(b.stopEvent(),this.completeEdit()):this.cancelOnEsc&&c==b.ESC?this.cancelEdit():this.fireEvent("specialkey",a,b),!this.field.triggerBlur||c!=b.ENTER&&c!=b.ESC&&c!=b.TAB||this.field.triggerBlur()},startEdit:function(a,b){this.editing&&this.completeEdit(),this.boundEl=Ext.get(a);var c=void 0!==b?b:this.boundEl.dom.innerHTML;this.rendered||this.render(this.parentEl||document.body),this.fireEvent("beforestartedit",this,this.boundEl,c)!==!1&&(this.startValue=c,this.field.setValue(c),this.doAutoSize(),this.el.alignTo(this.boundEl,this.alignment),this.editing=!0,this.show())},doAutoSize:function(){if(this.autoSize){var a=this.boundEl.getSize();switch(this.autoSize){case"width":this.setSize(a.width,"");break;case"height":this.setSize("",a.height);break;default:this.setSize(a.width,a.height)}}},setSize:function(a,b){delete this.field.lastSize,this.field.setSize(a,b),this.el&&((Ext.isGecko2||Ext.isOpera)&&this.el.setSize(a,b),this.el.sync())},realign:function(){this.el.alignTo(this.boundEl,this.alignment)},completeEdit:function(a){if(this.editing){var b=this.getValue();return this.field.isValid()?String(b)===String(this.startValue)&&this.ignoreNoChange?(this.hideEdit(a),void 0):(this.fireEvent("beforecomplete",this,b,this.startValue)!==!1&&(b=this.getValue(),this.updateEl&&this.boundEl&&this.boundEl.update(b),this.hideEdit(a),this.fireEvent("complete",this,b,this.startValue)),void 0):(this.revertInvalid!==!1&&this.cancelEdit(a),void 0)}},onShow:function(){this.el.show(),this.hideEl!==!1&&this.boundEl.hide(),this.field.show(),Ext.isIE&&!this.fixIEFocus?(this.fixIEFocus=!0,this.deferredFocus.defer(50,this)):this.field.focus(),this.fireEvent("startedit",this.boundEl,this.startValue)},deferredFocus:function(){this.editing&&this.field.focus()},cancelEdit:function(a){if(this.editing){var b=this.getValue();this.setValue(this.startValue),this.hideEdit(a),this.fireEvent("canceledit",this,b,this.startValue)}},hideEdit:function(a){a!==!0&&(this.editing=!1,this.hide())},onBlur:function(){this.allowBlur!==!0&&this.editing&&this.completeEdit()},onHide:function(){return this.editing?(this.completeEdit(),void 0):(this.field.blur(),this.field.collapse&&this.field.collapse(),this.el.hide(),this.hideEl!==!1&&this.boundEl.show(),void 0)},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroy(this.field),this.field=null}}),Ext.reg("editor",Ext.Editor),Ext.MessageBox=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m="",n=function(c){a.isVisible()&&(a.hide(),o(),Ext.callback(b.fn,b.scope||window,[c,k.dom.value,b],1))},o=function(){b&&b.cls&&a.el.removeClass(b.cls),h.reset()},p=function(b){var c=0;if(!b)return j.ok.hide(),j.cancel.hide(),j.yes.hide(),j.no.hide(),c;a.footer.dom.style.display="";for(var d in j)"function"!=typeof j[d]&&(b[d]?(j[d].show(),j[d].setText("string"==typeof b[d]?b[d]:Ext.MessageBox.buttonText[d]),c+=j[d].el.getWidth()+15):j[d].hide());return c};return{getDialog:function(k){if(!a){a=new Ext.Window({autoCreate:!0,title:k,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){b&&b.buttons&&b.buttons.no&&!b.buttons.cancel?n("no"):n("cancel")}}),j={};var l=this.buttonText;j.ok=a.addButton(l.ok,n.createCallback("ok")),j.yes=a.addButton(l.yes,n.createCallback("yes")),j.no=a.addButton(l.no,n.createCallback("no")),j.cancel=a.addButton(l.cancel,n.createCallback("cancel")),j.ok.hideMode=j.yes.hideMode=j.no.hideMode=j.cancel.hideMode="offsets",a.render(document.body),a.getEl().addClass("x-window-dlg"),c=a.mask,d=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'}),i=Ext.get(d.dom.firstChild);var m=d.dom.childNodes[1];e=Ext.get(m.firstChild),f=Ext.get(m.childNodes[2].firstChild),f.enableDisplayMode(),f.addKeyListener([10,13],function(){a.isVisible()&&b&&b.buttons&&(b.buttons.ok?n("ok"):b.buttons.yes&&n("yes"))}),g=Ext.get(m.childNodes[2].childNodes[1]),g.enableDisplayMode(),h=new Ext.ProgressBar({renderTo:d}),d.createChild({cls:"x-clear"})}return a},updateText:function(c){a.isVisible()||b.width||a.setSize(this.maxWidth,100),e.update(c||"&#160;");var d=""!=m?i.getWidth()+i.getMargins("lr"):0,f=e.getWidth()+e.getMargins("lr"),g=a.getFrameWidth("lr"),j=a.body.getFrameWidth("lr");Ext.isIE&&d>0&&(d+=3);var n=Math.max(Math.min(b.width||d+f+g+j,this.maxWidth),Math.max(b.minWidth||this.minWidth,l||0));return b.prompt===!0&&k.setWidth(n-d-g-j),(b.progress===!0||b.wait===!0)&&h.setSize(n-d-g-j),Ext.isIE&&n==l&&(n+=4),a.setSize(n,"auto").center(),this},updateProgress:function(a,b,c){return h.updateProgress(a,b),c&&this.updateText(c),this},isVisible:function(){return a&&a.isVisible()},hide:function(){var b=a?a.activeGhost:null;return(this.isVisible()||b)&&(a.hide(),o(),b&&b.hide()),this},show:function(d){this.isVisible()&&this.hide(),b=d;var e=this.getDialog(b.title||"&#160;");e.setTitle(b.title||"&#160;");var i=b.closable!==!1&&b.progress!==!0&&b.wait!==!0;if(e.tools.close.setDisplayed(i),k=f,b.prompt=b.prompt||(b.multiline?!0:!1),b.prompt?b.multiline?(f.hide(),g.show(),g.setHeight("number"==typeof b.multiline?b.multiline:this.defaultTextHeight),k=g):(f.show(),g.hide()):(f.hide(),g.hide()),k.dom.value=b.value||"",b.prompt)e.focusEl=k;else{var m=b.buttons,n=null;m&&m.ok?n=j.ok:m&&m.yes&&(n=j.yes),n&&(e.focusEl=n)}return b.iconCls&&e.setIconClass(b.iconCls),this.setIcon(b.icon),l=p(b.buttons),h.setVisible(b.progress===!0||b.wait===!0),this.updateProgress(0,b.progressText),this.updateText(b.msg),b.cls&&e.el.addClass(b.cls),e.proxyDrag=b.proxyDrag===!0,e.modal=b.modal!==!1,e.mask=b.modal!==!1?c:!1,e.isVisible()||(document.body.appendChild(a.el.dom),e.setAnimateTarget(b.animEl),e.show(b.animEl)),e.on("show",function(){i===!0?e.keyMap.enable():e.keyMap.disable()},this,{single:!0}),b.wait===!0&&h.wait(b.waitConfig),this},setIcon:function(a){return a&&""!=a?(i.removeClass("x-hidden"),i.replaceClass(m,a),d.addClass("x-dlg-icon"),m=a):(i.replaceClass(m,"x-hidden"),d.removeClass("x-dlg-icon"),m=""),this},progress:function(a,b,c){return this.show({title:a,msg:b,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:c}),this},wait:function(a,b,c){return this.show({title:b,msg:a,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:c}),this},alert:function(a,b,c,d){return this.show({title:a,msg:b,buttons:this.OK,fn:c,scope:d}),this},confirm:function(a,b,c,d){return this.show({title:a,msg:b,buttons:this.YESNO,fn:c,scope:d,icon:this.QUESTION}),this},prompt:function(a,b,c,d,e,f){return this.show({title:a,msg:b,buttons:this.OKCANCEL,fn:c,minWidth:250,scope:d,prompt:!0,multiline:e,value:f}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}(),Ext.Msg=Ext.MessageBox,Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,initComponent:function(){Ext.Tip.superclass.initComponent.call(this),this.closable&&!this.title&&(this.elements+=",header")
},afterRender:function(){Ext.Tip.superclass.afterRender.call(this),this.closable&&this.addTool({id:"close",handler:this.hide,scope:this})},showAt:function(a){Ext.Tip.superclass.show.call(this),this.measureWidth===!1||this.initialConfig&&"number"==typeof this.initialConfig.width||this.doAutoWidth(),this.constrainPosition&&(a=this.el.adjustForConstraints(a)),this.setPagePosition(a[0],a[1])},doAutoWidth:function(){var a=this.body.getTextWidth();this.title&&(a=Math.max(a,this.header.child("span").getTextWidth(this.title))),a+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr"),this.setWidth(a.constrain(this.minWidth,this.maxWidth)),Ext.isIE7&&!this.repainted&&(this.el.repaint(),this.repainted=!0)},showBy:function(a,b){this.rendered||this.render(Ext.getBody()),this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,"boolean"==typeof this.draggable?null:this.draggable),this.header.addClass("x-tip-draggable")}}),Ext.Tip.DD=function(a,b){Ext.apply(this,b),this.tip=a,Ext.Tip.DD.superclass.constructor.call(this,a.el.id,"WindowDD-"+a.id),this.setHandleElId(a.header.id),this.scroll=!1},Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(){this.tip.el.enableShadow(!0)}}),Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,mouseOffset:[15,18],trackMouse:!1,constrainPosition:!0,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this),this.lastActive=new Date,this.initTarget()},initTarget:function(){this.target&&(this.target=Ext.get(this.target),this.target.on("mouseover",this.onTargetOver,this),this.target.on("mouseout",this.onTargetOut,this),this.target.on("mousemove",this.onMouseMove,this))},onMouseMove:function(a){this.targetXY=a.getXY(),!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY())},getTargetXY:function(){return[this.targetXY[0]+this.mouseOffset[0],this.targetXY[1]+this.mouseOffset[1]]},onTargetOver:function(a){this.disabled||a.within(this.target.dom,!0)||(this.clearTimer("hide"),this.targetXY=a.getXY(),this.delayShow())},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):this.hidden||this.autoHide===!1||this.show()},onTargetOut:function(a){this.disabled||a.within(this.target.dom,!0)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},delayHide:function(){this.hidden||this.hideTimer||(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss"),this.lastActive=new Date,Ext.ToolTip.superclass.hide.call(this)},show:function(){this.showAt(this.getTargetXY())},showAt:function(a){this.lastActive=new Date,this.clearTimers(),Ext.ToolTip.superclass.showAt.call(this,a),this.dismissDelay&&this.autoHide!==!1&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this))},clearTimer:function(a){a+="Timer",clearTimeout(this[a]),delete this[a]},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this),Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this),Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(a){this.autoHide===!0||a.within(this.el.dom)||(this.disable(),this.enable.defer(100,this))},onDisable:function(){this.clearTimers(),this.hide()},adjustPosition:function(a,b){var c=this.targetXY[1],d=this.getSize().height;return this.constrainPosition&&c>=b&&b+d>=c&&(b=c-d-5),{x:a,y:b}},onDestroy:function(){Ext.ToolTip.superclass.onDestroy.call(this),Ext.getDoc().un("mousedown",this.onDocMouseDown,this),this.target&&(this.target.un("mouseover",this.onTargetOver,this),this.target.un("mouseout",this.onTargetOut,this),this.target.un("mousemove",this.onMouseMove,this))}}),Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign"},initComponent:function(){this.target=this.target||Ext.getDoc(),this.targets=this.targets||{},Ext.QuickTip.superclass.initComponent.call(this)},register:function(a){for(var b=Ext.isArray(a)?a:arguments,c=0,d=b.length;d>c;c++){var e=b[c],f=e.target;if(f)if(Ext.isArray(f))for(var g=0,h=f.length;h>g;g++)this.targets[Ext.id(f[g])]=e;else this.targets[Ext.id(f)]=e}},unregister:function(a){delete this.targets[Ext.id(a)]},onTargetOver:function(a){if(!this.disabled){this.targetXY=a.getXY();var b=a.getTarget();if(b&&1===b.nodeType&&b!=document&&b!=document.body){if(this.activeTarget&&b==this.activeTarget.el)return this.clearTimer("hide"),this.show(),void 0;if(b&&this.targets[b.id])return this.activeTarget=this.targets[b.id],this.activeTarget.el=b,this.delayShow(),void 0;var c,d=Ext.fly(b),e=this.tagConfig,f=e.namespace;if(this.interceptTitles&&b.title?(c=b.title,b.qtip=c,b.removeAttribute("title"),a.preventDefault()):c=b.qtip||d.getAttributeNS(f,e.attribute),c){var g=d.getAttributeNS(f,e.hide);this.activeTarget={el:b,text:c,width:d.getAttributeNS(f,e.width),autoHide:"user"!=g&&"false"!==g,title:d.getAttributeNS(f,e.title),cls:d.getAttributeNS(f,e.cls),align:d.getAttributeNS(f,e.align)},this.delayShow()}}}},onTargetOut:function(){this.clearTimer("show"),this.autoHide!==!1&&this.delayHide()},showAt:function(a){var b=this.activeTarget;b&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=b),b.width?(this.setWidth(b.width),this.body.setWidth(this.adjustBodyWidth(b.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(b.title||""),this.body.update(b.text),this.autoHide=b.autoHide,this.dismissDelay=b.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),b.cls&&(this.el.addClass(b.cls),this.lastCls=b.cls),b.align?(a=this.el.getAlignToXY(b.el,b.align),this.constrainPosition=!1):this.constrainPosition=!0),Ext.QuickTip.superclass.showAt.call(this,a)},hide:function(){delete this.activeTarget,Ext.QuickTip.superclass.hide.call(this)}}),Ext.QuickTips=function(){var a,b=[];return{init:function(b){if(!a){if(!Ext.isReady)return Ext.onReady(function(){Ext.QuickTips.init(b)}),void 0;a=new Ext.QuickTip({elements:"header,body"}),b!==!1&&a.render(Ext.getBody())}},enable:function(){a&&(b.pop(),b.length<1&&a.enable())},disable:function(){a&&a.disable(),b.push(1)},isEnabled:function(){return void 0!==a&&!a.disabled},getQuickTip:function(){return a},register:function(){a.register.apply(a,arguments)},unregister:function(){a.unregister.apply(a,arguments)},tips:function(){a.register.apply(a,arguments)}}}(),Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this));var a=this.loader;a?"object"!=typeof a||a.load||(a=new Ext.tree.TreeLoader(a)):a=new Ext.tree.TreeLoader({dataUrl:this.dataUrl}),this.loader=a,this.nodeHash={},this.root&&this.setRootNode(this.root),this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand&&this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(a,b,c,d,e,f,g){return("collapse"==a||"expand"==a||"beforecollapse"==a||"beforeexpand"==a||"move"==a||"beforemove"==a)&&(a+="node"),this.fireEvent(a,b,c,d,e,f,g)},getRootNode:function(){return this.root},setRootNode:function(a){if(a.render||(a=this.loader.createNode(a)),this.root=a,a.ownerTree=this,a.isRoot=!0,this.registerNode(a),!this.rootVisible){var b=a.attributes.uiProvider;a.ui=b?new b(a):new Ext.tree.RootTreeNodeUI(a)}return a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(a){var b=a.parentNode;b&&(b.expandedChild&&b.expandedChild.parentNode==b&&b.expandedChild.collapse(),b.expandedChild=a)},getChecked:function(a,b){b=b||this.root;var c=[],d=function(){this.attributes.checked&&c.push(a?"id"==a?this.id:this.attributes[a]:this)};return b.cascade(d),c},getEl:function(){return this.el},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(a,b,c){b=b||"id";var d=a.split(this.pathSeparator),e=this.root;if(e.attributes[b]!=d[1])return c&&c(!1,null),void 0;var f=1,g=function(){if(++f==d.length)return c&&c(!0,e),void 0;var a=e.findChild(b,d[f]);return a?(e=a,a.expand(!1,!1,g),void 0):(c&&c(!1,e),void 0)};e.expand(!1,!1,g)},selectPath:function(a,b,c){b=b||"id";var d=a.split(this.pathSeparator),e=d.pop();if(d.length>0){var f=function(a,d){if(a&&d){var f=d.findChild(b,e);f?(f.select(),c&&c(!0,f)):c&&c(!1,f)}else c&&c(!1,f)};this.expandPath(d.join(this.pathSeparator),b,f)}else this.root.select(),c&&c(!0,this.root)},getTreeEl:function(){return this.body},onRender:function(a,b){Ext.tree.TreePanel.superclass.onRender.call(this,a,b),this.el.addClass("x-tree"),this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this),this.containerScroll&&Ext.dd.ScrollManager.register(this.body),!this.enableDD&&!this.enableDrop||this.dropZone||(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0})),!this.enableDD&&!this.enableDrag||this.dragZone||(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})),this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this),this.root.render(),this.rootVisible||this.root.renderChildren()},onDestroy:function(){this.rendered&&(this.body.removeAllListeners(),Ext.dd.ScrollManager.unregister(this.body),this.dropZone&&this.dropZone.unreg(),this.dragZone&&this.dragZone.unreg()),this.root.destroy(),this.nodeHash=null,Ext.tree.TreePanel.superclass.onDestroy.call(this)}}),Ext.tree.TreePanel.nodeTypes={},Ext.reg("treepanel",Ext.tree.TreePanel),Ext.tree.TreeEventModel=function(a){this.tree=a,this.tree.on("render",this.initEvents,this)},Ext.tree.TreeEventModel.prototype={initEvents:function(){var a=this.tree.getTreeEl();a.on("click",this.delegateClick,this),this.tree.trackMouseOver!==!1&&(a.on("mouseover",this.delegateOver,this),a.on("mouseout",this.delegateOut,this)),a.on("dblclick",this.delegateDblClick,this),a.on("contextmenu",this.delegateContextMenu,this)},getNode:function(a){var b;if(b=a.getTarget(".x-tree-node-el",10)){var c=Ext.fly(b,"_treeEvents").getAttributeNS("ext","tree-node-id");if(c)return this.tree.getNodeById(c)}return null},getNodeTarget:function(a){var b=a.getTarget(".x-tree-node-icon",1);return b||(b=a.getTarget(".x-tree-node-el",6)),b},delegateOut:function(a,b){if(this.beforeEvent(a)){if(a.getTarget(".x-tree-ec-icon",1)){var c=this.getNode(a);this.onIconOut(a,c),c==this.lastEcOver&&delete this.lastEcOver}(b=this.getNodeTarget(a))&&!a.within(b,!0)&&this.onNodeOut(a,this.getNode(a))}},delegateOver:function(a,b){this.beforeEvent(a)&&(this.lastEcOver&&(this.onIconOut(a,this.lastEcOver),delete this.lastEcOver),a.getTarget(".x-tree-ec-icon",1)&&(this.lastEcOver=this.getNode(a),this.onIconOver(a,this.lastEcOver)),(b=this.getNodeTarget(a))&&this.onNodeOver(a,this.getNode(a)))},delegateClick:function(a){this.beforeEvent(a)&&(a.getTarget("input[type=checkbox]",1)?this.onCheckboxClick(a,this.getNode(a)):a.getTarget(".x-tree-ec-icon",1)?this.onIconClick(a,this.getNode(a)):this.getNodeTarget(a)&&this.onNodeClick(a,this.getNode(a)))},delegateDblClick:function(a){this.beforeEvent(a)&&this.getNodeTarget(a)&&this.onNodeDblClick(a,this.getNode(a))},delegateContextMenu:function(a){this.beforeEvent(a)&&this.getNodeTarget(a)&&this.onNodeContextMenu(a,this.getNode(a))},onNodeClick:function(a,b){b.ui.onClick(a)},onNodeOver:function(a,b){b.ui.onOver(a)},onNodeOut:function(a,b){b.ui.onOut(a)},onIconOver:function(a,b){b.ui.addClass("x-tree-ec-over")},onIconOut:function(a,b){b.ui.removeClass("x-tree-ec-over")},onIconClick:function(a,b){b.ui.ecClick(a)},onCheckboxClick:function(a,b){b.ui.onCheckChange(a)},onNodeDblClick:function(a,b){b.ui.onDblClick(a)},onNodeContextMenu:function(a,b){b.ui.onContextMenu(a)},beforeEvent:function(a){return this.disabled?(a.stopEvent(),!1):!0},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},Ext.tree.DefaultSelectionModel=function(a){this.selNode=null,this.addEvents("selectionchange","beforeselect"),Ext.apply(this,a),Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(a){this.tree=a,a.getTreeEl().on("keydown",this.onKeyDown,this),a.on("click",this.onNodeClick,this)},onNodeClick:function(a){this.select(a)},select:function(a){var b=this.selNode;return a==b?a.ui.onSelectedChange(!0):this.fireEvent("beforeselect",this,a,b)!==!1&&(b&&b.ui.onSelectedChange(!1),this.selNode=a,a.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,a,b)),a},unselect:function(a){this.selNode==a&&this.clearSelections()},clearSelections:function(){var a=this.selNode;return a&&(a.ui.onSelectedChange(!1),this.selNode=null,this.fireEvent("selectionchange",this,null)),a},getSelectedNode:function(){return this.selNode},isSelected:function(a){return this.selNode==a},selectPrevious:function(){var a=this.selNode||this.lastSelNode;if(!a)return null;var b=a.previousSibling;if(b){if(!b.isExpanded()||b.childNodes.length<1)return this.select(b);for(var c=b.lastChild;c&&c.isExpanded()&&c.childNodes.length>0;)c=c.lastChild;return this.select(c)}return!a.parentNode||!this.tree.rootVisible&&a.parentNode.isRoot?null:this.select(a.parentNode)},selectNext:function(){var a=this.selNode||this.lastSelNode;if(!a)return null;if(a.firstChild&&a.isExpanded())return this.select(a.firstChild);if(a.nextSibling)return this.select(a.nextSibling);if(a.parentNode){var b=null;return a.parentNode.bubble(function(){return this.nextSibling?(b=this.getOwnerTree().selModel.select(this.nextSibling),!1):void 0}),b}return null},onKeyDown:function(a){var b=this.selNode||this.lastSelNode;if(b){var c=a.getKey();switch(c){case a.DOWN:a.stopEvent(),this.selectNext();break;case a.UP:a.stopEvent(),this.selectPrevious();break;case a.RIGHT:a.preventDefault(),b.hasChildNodes()&&(b.isExpanded()?b.firstChild&&this.select(b.firstChild,a):b.expand());break;case a.LEFT:a.preventDefault(),b.hasChildNodes()&&b.isExpanded()?b.collapse():b.parentNode&&(this.tree.rootVisible||b.parentNode!=this.tree.getRootNode())&&this.select(b.parentNode,a)}}}}),Ext.tree.MultiSelectionModel=function(a){this.selNodes=[],this.selMap={},this.addEvents("selectionchange"),Ext.apply(this,a),Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(a){this.tree=a,a.getTreeEl().on("keydown",this.onKeyDown,this),a.on("click",this.onNodeClick,this)},onNodeClick:function(a,b){b.ctrlKey&&this.isSelected(a)?this.unselect(a):this.select(a,b,b.ctrlKey)},select:function(a,b,c){return c!==!0&&this.clearSelections(!0),this.isSelected(a)?(this.lastSelNode=a,a):(this.selNodes.push(a),this.selMap[a.id]=a,this.lastSelNode=a,a.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,this.selNodes),a)},unselect:function(a){if(this.selMap[a.id]){a.ui.onSelectedChange(!1);var b=this.selNodes,c=b.indexOf(a);-1!=c&&this.selNodes.splice(c,1),delete this.selMap[a.id],this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(a){var b=this.selNodes;if(b.length>0){for(var c=0,d=b.length;d>c;c++)b[c].ui.onSelectedChange(!1);this.selNodes=[],this.selMap={},a!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(a){return this.selMap[a.id]?!0:!1},getSelectedNodes:function(){return this.selNodes},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious}),Ext.tree.TreeNode=function(a){a=a||{},"string"==typeof a&&(a={text:a}),this.childrenRendered=!1,this.rendered=!1,Ext.tree.TreeNode.superclass.constructor.call(this,a),this.expanded=a.expanded===!0,this.isTarget=a.isTarget!==!1,this.draggable=a.draggable!==!1&&a.allowDrag!==!1,this.allowChildren=a.allowChildren!==!1&&a.allowDrop!==!1,this.text=a.text,this.disabled=a.disabled===!0,this.hidden=a.hidden===!0,this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","dblclick","contextmenu","beforechildrenrendered");var b=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new b(this)},Ext.extend(Ext.tree.TreeNode,Ext.data.Node,{preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var a;return this.loader||((a=this.getOwnerTree())&&a.loader?a.loader:new Ext.tree.TreeLoader)},setFirstChild:function(a){var b=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,a),this.childrenRendered&&b&&a!=b&&b.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(a){var b=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,a),this.childrenRendered&&b&&a!=b&&b.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},appendChild:function(a){a.render||Ext.isArray(a)||(a=this.getLoader().createNode(a));var b=Ext.tree.TreeNode.superclass.appendChild.call(this,a);return b&&this.childrenRendered&&b.render(),this.ui.updateExpandIcon(),b},removeChild:function(a){return this.ownerTree.getSelectionModel().unselect(a),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),this.childrenRendered&&a.ui.remove(),this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1),a},insertBefore:function(a,b){a.render||(a=this.getLoader().createNode(a));var c=Ext.tree.TreeNode.superclass.insertBefore.apply(this,arguments);return c&&b&&this.childrenRendered&&a.render(),this.ui.updateExpandIcon(),c},setText:function(a){var b=this.text;this.text=a,this.attributes.text=a,this.rendered&&this.ui.onTextChange(this,a,b),this.fireEvent("textchange",this,a,b)},select:function(){this.getOwnerTree().getSelectionModel().select(this)},unselect:function(){this.getOwnerTree().getSelectionModel().unselect(this)},isSelected:function(){return this.getOwnerTree().getSelectionModel().isSelected(this)},expand:function(a,b,c){if(this.expanded)"function"==typeof c&&c(this);else{if(this.fireEvent("beforeexpand",this,a,b)===!1)return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&b!==!1||b)return this.ui.animExpand(function(){this.fireEvent("expand",this),"function"==typeof c&&c(this),a===!0&&this.expandChildNodes(!0)}.createDelegate(this)),void 0;this.ui.expand(),this.fireEvent("expand",this),"function"==typeof c&&c(this)}a===!0&&this.expandChildNodes(!0)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(a,b){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,a,b)===!1)return;if(this.expanded=!1,this.getOwnerTree().animate&&b!==!1||b)return this.ui.animCollapse(function(){this.fireEvent("collapse",this),a===!0&&this.collapseChildNodes(!0)}.createDelegate(this)),void 0;this.ui.collapse(),this.fireEvent("collapse",this)}if(a===!0)for(var c=this.childNodes,d=0,e=c.length;e>d;d++)c[d].collapse(!0,!1)},delayedExpand:function(a){this.expandProcId||(this.expandProcId=this.expand.defer(a,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId),this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(a){var b=this.getOwnerTree();b.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),!1,function(){var c=b.getNodeById(this.id);b.getTreeEl().scrollChildIntoView(c.ui.anchor),Ext.callback(a)}.createDelegate(this))},expandChildNodes:function(a){for(var b=this.childNodes,c=0,d=b.length;d>c;c++)b[c].expand(a)},collapseChildNodes:function(a){for(var b=this.childNodes,c=0,d=b.length;d>c;c++)b[c].collapse(a)},disable:function(){this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!0),this.fireEvent("disabledchange",this,!0)},enable:function(){this.disabled=!1,this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!1),this.fireEvent("disabledchange",this,!1)},renderChildren:function(a){a!==!1&&this.fireEvent("beforechildrenrendered",this);for(var b=this.childNodes,c=0,d=b.length;d>c;c++)b[c].render(!0);this.childrenRendered=!0},sort:function(){if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(var a=this.childNodes,b=0,c=a.length;c>b;b++)a[b].render(!0)},render:function(a){this.ui.render(a),this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(a,b){if(b&&(this.ui.childIndent=null),this.ui.renderIndent(),a===!0&&this.childrenRendered)for(var c=this.childNodes,d=0,e=c.length;e>d;d++)c[d].renderIndent(!0,b)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.rendered&&this.renderChildren()},destroy:function(){if(this.childNodes){for(var a=0,b=this.childNodes.length;b>a;a++)this.childNodes[a].destroy();this.childNodes=null}this.ui.destroy&&this.ui.destroy()}}),Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode,Ext.tree.AsyncTreeNode=function(a){this.loaded=a&&a.loaded===!0,this.loading=!1,Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments),this.addEvents("beforeload","load")},Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(a,b,c){if(this.loading){var d,e=function(){this.loading||(clearInterval(d),this.expand(a,b,c))}.createDelegate(this);return d=setInterval(e,200),void 0}if(!this.loaded){if(this.fireEvent("beforeload",this)===!1)return;this.loading=!0,this.ui.beforeLoad(this);var f=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(f)return f.load(this,this.loadComplete.createDelegate(this,[a,b,c])),void 0}Ext.tree.AsyncTreeNode.superclass.expand.call(this,a,b,c)},isLoading:function(){return this.loading},loadComplete:function(a,b,c){this.loading=!1,this.loaded=!0,this.ui.afterLoad(this),this.fireEvent("load",this),this.expand(a,b,c)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return this.isLeaf()||this.loaded?Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this):!0},reload:function(a){for(this.collapse(!1,!1);this.firstChild;)this.removeChild(this.firstChild).destroy();this.childrenRendered=!1,this.loaded=!1,this.isHiddenRoot()&&(this.expanded=!1),this.expand(!1,!1,a)}}),Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode,Ext.tree.TreeNodeUI=function(a){this.node=a,this.rendered=!1,this.animating=!1,this.wasLeaf=!0,this.ecc="x-tree-ec-icon x-tree-elbow",this.emptyIcon=Ext.BLANK_IMAGE_URL},Ext.tree.TreeNodeUI.prototype={removeChild:function(a){this.rendered&&this.ctNode.removeChild(a.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(a,b){this.rendered&&(this.textNode.innerHTML=b)},onDisableChange:function(a,b){this.disabled=b,this.checkbox&&(this.checkbox.disabled=b),b?this.addClass("x-tree-node-disabled"):this.removeClass("x-tree-node-disabled")},onSelectedChange:function(a){a?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(a,b,c,d,e,f){if(this.childIndent=null,this.rendered){var g=d.ui.getContainer();if(!g)return this.holder=document.createElement("div"),this.holder.appendChild(this.wrap),void 0;var h=f?f.ui.getEl():null;h?g.insertBefore(this.wrap,h):g.appendChild(this.wrap),this.node.renderIndent(!0,d!=c)}},addClass:function(a){this.elNode&&Ext.fly(this.elNode).addClass(a)},removeClass:function(a){this.elNode&&Ext.fly(this.elNode).removeClass(a)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this),this.node.disabled&&(this.addClass("x-tree-node-disabled"),this.checkbox&&(this.checkbox.disabled=!0)),this.node.hidden&&this.hide();var a=this.node.getOwnerTree(),b=a.enableDD||a.enableDrag||a.enableDrop;!b||this.node.isRoot&&!a.rootVisible||Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0,this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1,this.wrap&&(this.wrap.style.display="")},onContextMenu:function(a){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(a.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,a))},onClick:function(a){if(this.dropping)return a.stopEvent(),void 0;if(this.fireEvent("beforeclick",this.node,a)!==!1){var b=a.getTarget("a");if(!this.disabled&&this.node.attributes.href&&b)return this.fireEvent("click",this.node,a),void 0;if(b&&a.ctrlKey&&a.stopEvent(),a.preventDefault(),this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("click",this.node,a)}else a.stopEvent()},onDblClick:function(a){a.preventDefault(),this.disabled||(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("dblclick",this.node,a))},onOver:function(){this.addClass("x-tree-node-over")},onOut:function(){this.removeClass("x-tree-node-over")},onCheckChange:function(){var a=this.checkbox.checked;this.checkbox.defaultChecked=a,this.node.attributes.checked=a,this.fireEvent("checkchange",this.node,a)},ecClick:function(){!this.animating&&this.node.isExpandable()&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon(),this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll)try{var a=this.node.getOwnerTree().getTreeEl().dom,b=a.scrollLeft;this.anchor.focus(),a.scrollLeft=b}catch(c){}else try{this.anchor.focus()}catch(c){}},toggleCheck:function(a){var b=this.checkbox;b&&(b.checked=void 0===a?!b.checked:a,this.onCheckChange())},blur:function(){try{this.anchor.blur()}catch(a){}},animExpand:function(a){var b=Ext.get(this.ctNode);return b.stopFx(),this.node.isExpandable()?(this.animating=!0,this.updateExpandIcon(),b.slideIn("t",{callback:function(){this.animating=!1,Ext.callback(a)},scope:this,duration:this.node.ownerTree.duration||.25}),void 0):(this.updateExpandIcon(),this.ctNode.style.display="",Ext.callback(a),void 0)},highlight:function(){var a=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(a.hlColor||"C3DAF9",{endColor:a.hlBaseColor})},collapse:function(){this.updateExpandIcon(),this.ctNode.style.display="none"},animCollapse:function(a){var b=Ext.get(this.ctNode);b.enableDisplayMode("block"),b.stopFx(),this.animating=!0,this.updateExpandIcon(),b.slideOut("t",{callback:function(){this.animating=!1,Ext.callback(a)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(a){a.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(a){var b=this.node,c=b.attributes,d=b.parentNode?b.parentNode.ui.getContainer():b.ownerTree.innerCt.dom;this.rendered?a===!0&&d.appendChild(this.wrap):(this.rendered=!0,this.renderElements(b,c,d,a),c.qtip?this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",c.qtip),c.qtipTitle&&this.textNode.setAttributeNS("ext","qtitle",c.qtipTitle)):(this.textNode.setAttribute("ext:qtip",c.qtip),c.qtipTitle&&this.textNode.setAttribute("ext:qtitle",c.qtipTitle)):c.qtipCfg&&(c.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(c.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(a,b,c,d){this.indentMarkup=a.parentNode?a.parentNode.ui.getChildIndent():"";var e,f="boolean"==typeof b.checked,g=b.href?b.href:Ext.isGecko?"":"#",h=['<li class="x-tree-node"><div ext:tree-node-id="',a.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',b.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img src="',b.icon||this.emptyIcon,'" class="x-tree-node-icon',b.icon?" x-tree-node-inline-icon":"",b.iconCls?" "+b.iconCls:"",'" unselectable="on" />',f?'<input class="x-tree-node-cb" type="checkbox" '+(b.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',g,'" tabIndex="1" ',b.hrefTarget?' target="'+b.hrefTarget+'"':"",'><span unselectable="on">',a.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");this.wrap=d!==!0&&a.nextSibling&&(e=a.nextSibling.ui.getEl())?Ext.DomHelper.insertHtml("beforeBegin",e,h):Ext.DomHelper.insertHtml("beforeEnd",c,h),this.elNode=this.wrap.childNodes[0],this.ctNode=this.wrap.childNodes[1];var i=this.elNode.childNodes;this.indentNode=i[0],this.ecNode=i[1],this.iconNode=i[2];var j=3;f&&(this.checkbox=i[3],this.checkbox.defaultChecked=this.checkbox.checked,j++),this.anchor=i[j],this.textNode=i[j].firstChild},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){if(this.rendered){var a,b,c=this.node,d=c.isLast()?"x-tree-elbow-end":"x-tree-elbow";c.isExpandable()?(c.expanded?(d+="-minus",a="x-tree-node-collapsed",b="x-tree-node-expanded"):(d+="-plus",a="x-tree-node-expanded",b="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),(this.c1!=a||this.c2!=b)&&(Ext.fly(this.elNode).replaceClass(a,b),this.c1=a,this.c2=b)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-leaf"),delete this.c1,delete this.c2,this.wasLeaf=!0);var e="x-tree-ec-icon "+d;this.ecc!=e&&(this.ecNode.className=e,this.ecc=e)}},getChildIndent:function(){if(!this.childIndent){for(var a=[],b=this.node;b;)(!b.isRoot||b.isRoot&&b.ownerTree.rootVisible)&&(b.isLast()?a.unshift('<img src="'+this.emptyIcon+'" class="x-tree-icon" />'):a.unshift('<img src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),b=b.parentNode;this.childIndent=a.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var a="",b=this.node.parentNode;b&&(a=b.ui.getChildIndent()),this.indentMarkup!=a&&(this.indentNode.innerHTML=a,this.indentMarkup=a),this.updateExpandIcon()
}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id),delete this.elNode,delete this.ctNode,delete this.indentNode,delete this.ecNode,delete this.iconNode,delete this.checkbox,delete this.anchor,delete this.textNode,this.holder?(delete this.wrap,Ext.removeNode(this.holder),delete this.holder):(Ext.removeNode(this.wrap),delete this.wrap)}},Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var a=this.node.ownerTree.innerCt.dom;this.node.expanded=!0,a.innerHTML='<div class="x-tree-root-node"></div>',this.wrap=this.ctNode=a.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn}),Ext.tree.TreeLoader=function(a){this.baseParams={},Ext.apply(this,a),this.addEvents("beforeload","load","loadexception"),Ext.tree.TreeLoader.superclass.constructor.call(this)},Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,load:function(a,b){if(this.clearOnLoad)for(;a.firstChild;)a.removeChild(a.firstChild);this.doPreload(a)?"function"==typeof b&&b():(this.dataUrl||this.url)&&this.requestData(a,b)},doPreload:function(a){if(a.attributes.children){if(a.childNodes.length<1){var b=a.attributes.children;a.beginUpdate();for(var c=0,d=b.length;d>c;c++){var e=a.appendChild(this.createNode(b[c]));this.preloadChildren&&this.doPreload(e)}a.endUpdate()}return!0}return!1},getParams:function(a){var b=[],c=this.baseParams;for(var d in c)"function"!=typeof c[d]&&b.push(encodeURIComponent(d),"=",encodeURIComponent(c[d]),"&");return b.push("node=",encodeURIComponent(a.id)),b.join("")},requestData:function(a,b){this.fireEvent("beforeload",this,a,b)!==!1?this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:b,node:a},params:this.getParams(a)}):"function"==typeof b&&b()},isLoading:function(){return!!this.transId},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(attr){return this.baseAttrs&&Ext.applyIf(attr,this.baseAttrs),this.applyLoader!==!1&&(attr.loader=this),"string"==typeof attr.uiProvider&&(attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)),attr.nodeType?new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr):attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)},processResponse:function(response,node,callback){var json=response.responseText;try{var o=eval("("+json+")");node.beginUpdate();for(var i=0,len=o.length;len>i;i++){var n=this.createNode(o[i]);n&&node.appendChild(n)}node.endUpdate(),"function"==typeof callback&&callback(this,node)}catch(e){this.handleFailure(response)}},handleResponse:function(a){this.transId=!1;var b=a.argument;this.processResponse(a,b.node,b.callback),this.fireEvent("load",this,b.node,a)},handleFailure:function(a){this.transId=!1;var b=a.argument;this.fireEvent("loadexception",this,b.node,a),"function"==typeof b.callback&&b.callback(this,b.node)}}),Ext.tree.TreeFilter=function(a,b){this.tree=a,this.filtered={},Ext.apply(this,b)},Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(a,b,c){b=b||"text";var d;if("string"==typeof a){var e=a.length;if(0==e&&this.clearBlank)return this.clear(),void 0;a=a.toLowerCase(),d=function(c){return c.attributes[b].substr(0,e).toLowerCase()==a}}else{if(!a.exec)throw"Illegal filter type, must be string or regex";d=function(c){return a.test(c.attributes[b])}}this.filterBy(d,null,c)},filterBy:function(a,b,c){c=c||this.tree.root,this.autoClear&&this.clear();var d=this.filtered,e=this.reverse,f=function(f){if(f==c)return!0;if(d[f.id])return!1;var g=a.call(b||f,f);return!g||e?(d[f.id]=f,f.ui.hide(),!1):!0};if(c.cascade(f),this.remove)for(var g in d)if("function"!=typeof g){var h=d[g];h&&h.parentNode&&h.parentNode.removeChild(h)}},clear:function(){var a=(this.tree,this.filtered);for(var b in a)if("function"!=typeof b){var c=a[b];c&&c.ui.show()}this.filtered={}}},Ext.tree.TreeSorter=function(a,b){Ext.apply(this,b),a.on("beforechildrenrendered",this.doSort,this),a.on("append",this.updateSort,this),a.on("insert",this.updateSort,this),a.on("textchange",this.updateSortParent,this);var c=this.dir&&"desc"==this.dir.toLowerCase(),d=this.property||"text",e=this.sortType,f=this.folderSort,g=this.caseSensitive===!0,h=this.leafAttr||"leaf";this.sortFn=function(a,b){if(f){if(a.attributes[h]&&!b.attributes[h])return 1;if(!a.attributes[h]&&b.attributes[h])return-1}var i=e?e(a):g?a.attributes[d]:a.attributes[d].toUpperCase(),j=e?e(b):g?b.attributes[d]:b.attributes[d].toUpperCase();return j>i?c?1:-1:i>j?c?-1:1:0}},Ext.tree.TreeSorter.prototype={doSort:function(a){a.sort(this.sortFn)},compareNodes:function(a,b){return a.text.toUpperCase()>b.text.toUpperCase()?1:-1},updateSort:function(a,b){b.childrenRendered&&this.doSort.defer(1,this,[b])},updateSortParent:function(a){var b=a.parentNode;b&&b.childrenRendered&&this.doSort.defer(1,this,[b])}},Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(a,b){this.allowParentInsert=b.allowParentInsert||!1,this.allowContainerDrop=b.allowContainerDrop||!1,this.appendOnly=b.appendOnly||!1,Ext.tree.TreeDropZone.superclass.constructor.call(this,a.getTreeEl(),b),this.tree=a,this.dragOverData={},this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(a){a.hasChildNodes()&&!a.isExpanded()&&a.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(a){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[a])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(a,b,c,d,e){if(!a||!e)return!1;var f=a.node,g=e.node;if(!(f&&f.isTarget&&b))return!1;if("append"==b&&f.allowChildren===!1)return!1;if(("above"==b||"below"==b)&&f.parentNode&&f.parentNode.allowChildren===!1)return!1;if(g&&(f==g||g.contains(f)))return!1;var h=this.dragOverData;h.tree=this.tree,h.target=f,h.data=e,h.point=b,h.source=c,h.rawEvent=d,h.dropNode=g,h.cancel=!1;var i=this.tree.fireEvent("nodedragover",h);return h.cancel===!1&&i!==!1},getDropPoint:function(a,b){var c=b.node;if(c.isRoot)return c.allowChildren!==!1?"append":!1;var d=b.ddel,e=Ext.lib.Dom.getY(d),f=e+d.offsetHeight,g=Ext.lib.Event.getPageY(a),h=c.allowChildren===!1||c.isLeaf();if(this.appendOnly||c.parentNode.allowChildren===!1)return h?!1:"append";var i=!1;this.allowParentInsert||(i=c.hasChildNodes()&&c.isExpanded());var j=(f-e)/(h?2:3);return g>=e&&e+j>g?"above":!i&&(h||g>=f-j&&f>=g)?"below":"append"},onNodeEnter:function(){this.cancelExpand()},onContainerOver:function(a,b,c){return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,b,c)?this.dropAllowed:this.dropNotAllowed},onNodeOver:function(a,b,c,d){var e=this.getDropPoint(c,a,b),f=a.node;this.expandProcId||"append"!=e||!f.hasChildNodes()||a.node.isExpanded()?"append"!=e&&this.cancelExpand():this.queueExpand(f);var g=this.dropNotAllowed;if(this.isValidDropPoint(a,e,b,c,d)&&e){var h,i=a.ddel;"above"==e?(g=a.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",h="x-tree-drag-insert-above"):"below"==e?(g=a.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",h="x-tree-drag-insert-below"):(g="x-tree-drop-ok-append",h="x-tree-drag-append"),this.lastInsertClass!=h&&(Ext.fly(i).replaceClass(this.lastInsertClass,h),this.lastInsertClass=h)}return g},onNodeOut:function(a){this.cancelExpand(),this.removeDropIndicators(a)},onNodeDrop:function(a,b,c,d){var e=this.getDropPoint(c,a,b),f=a.node;if(f.ui.startDrop(),!this.isValidDropPoint(a,e,b,c,d))return f.ui.endDrop(),!1;var g=d.node||(b.getTreeNode?b.getTreeNode(d,f,e,c):null);return this.processDrop(f,d,e,b,c,g)},onContainerDrop:function(a,b,c){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,b,c)){var d=this.tree.getRootNode();d.ui.startDrop();var e=c.node||(a.getTreeNode?a.getTreeNode(c,d,"append",b):null);return this.processDrop(d,c,"append",a,b,e)}return!1},processDrop:function(a,b,c,d,e,f){var g={tree:this.tree,target:a,data:b,point:c,source:d,rawEvent:e,dropNode:f,cancel:!f,dropStatus:!1},h=this.tree.fireEvent("beforenodedrop",g);return h!==!1&&g.cancel!==!0&&g.dropNode?(a=g.target,"append"!=c||a.isExpanded()?this.completeDrop(g):a.expand(!1,null,function(){this.completeDrop(g)}.createDelegate(this)),!0):(a.ui.endDrop(),g.dropStatus)},completeDrop:function(a){var b=a.dropNode,c=a.point,d=a.target;Ext.isArray(b)||(b=[b]);for(var e,f=0,g=b.length;g>f;f++)e=b[f],"above"==c?d.parentNode.insertBefore(e,d):"below"==c?d.parentNode.insertBefore(e,d.nextSibling):d.appendChild(e);e.ui.focus(),Ext.enableFx&&this.tree.hlDrop&&e.ui.highlight(),d.ui.endDrop(),this.tree.fireEvent("nodedrop",a)},afterNodeMoved:function(a,b,c,d,e){Ext.enableFx&&this.tree.hlDrop&&(e.ui.focus(),e.ui.highlight()),this.tree.fireEvent("nodedrop",this.tree,d,b,a,c)},getTree:function(){return this.tree},removeDropIndicators:function(a){if(a&&a.ddel){var b=a.ddel;Ext.fly(b).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]),this.lastInsertClass="_noclass"}},beforeDragDrop:function(){return this.cancelExpand(),!0},afterRepair:function(a){a&&Ext.enableFx&&a.node.ui.highlight(),this.hideProxy()}})),Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(a,b){Ext.tree.TreeDragZone.superclass.constructor.call(this,a.innerCt,b),this.tree=a},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(a){var b=a.node;return b&&b.draggable&&!b.disabled},onInitDrag:function(a){var b=this.dragData;this.tree.getSelectionModel().select(b.node),this.tree.eventModel.disable(),this.proxy.update(""),b.node.ui.appendDDGhost(this.proxy.ghost.dom),this.tree.fireEvent("startdrag",this.tree,b.node,a)},getRepairXY:function(a,b){return b.node.ui.getDDRepairXY()},onEndDrag:function(a,b){this.tree.eventModel.enable.defer(100,this.tree.eventModel),this.tree.fireEvent("enddrag",this.tree,a.node,b)},onValidDrop:function(a,b){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,a,b),this.hideProxy()},beforeInvalidDrop:function(){var a=this.tree.getSelectionModel();a.clearSelections(),a.select(this.dragData.node)},afterRepair:function(){Ext.enableFx&&this.tree.hlDrop&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1}})),Ext.tree.TreeEditor=function(a,b,c){b=b||{};var d=b.events?b:new Ext.form.TextField(b);Ext.tree.TreeEditor.superclass.constructor.call(this,d,c),this.tree=a,a.rendered?this.initEditor(a):a.on("render",this.initEditor,this)},Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(a){a.on("beforeclick",this.beforeNodeClick,this),a.on("dblclick",this.onNodeDblClick,this),this.on("complete",this.updateNode,this),this.on("beforestartedit",this.fitToTree,this),this.on("startedit",this.bindScroll,this,{delay:10}),this.on("specialkey",this.onSpecialKey,this)},fitToTree:function(a,b){var c=this.tree.getTreeEl().dom,d=b.dom;c.scrollLeft>d.offsetLeft&&(c.scrollLeft=d.offsetLeft);var e=Math.min(this.maxWidth,(c.clientWidth>20?c.clientWidth:c.offsetWidth)-Math.max(0,d.offsetLeft-c.scrollLeft)-5);this.setSize(e,"")},triggerEdit:function(a){if(this.completeEdit(),a.attributes.editable!==!1){this.editNode=a,this.tree.autoScroll&&Ext.fly(a.ui.getEl()).scrollIntoView(this.tree.body);var b=a.text||"";return!Ext.isGecko&&Ext.isEmpty(a.text)&&a.setText("&nbsp;"),this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[a.ui.textNode,b]),!1}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(a,b){return clearTimeout(this.autoEditTimer),this.tree.getSelectionModel().isSelected(a)?(b.stopEvent(),this.triggerEdit(a)):void 0},onNodeDblClick:function(){clearTimeout(this.autoEditTimer)},updateNode:function(a,b){this.tree.getTreeEl().un("scroll",this.cancelEdit,this),this.editNode.setText(b)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this),this.editNode&&this.editNode.ui.focus.defer(50,this.editNode.ui)},onSpecialKey:function(a,b){var c=b.getKey();c==b.ESC?(b.stopEvent(),this.cancelEdit()):c!=b.ENTER||b.hasModifier()||(b.stopEvent(),this.completeEdit())}}),Ext.menu.Menu=function(a){Ext.isArray(a)&&(a={items:a}),Ext.apply(this,a),this.id=this.id||Ext.id(),this.addEvents("beforeshow","beforehide","show","hide","click","mouseover","mouseout","itemclick"),Ext.menu.MenuMgr.register(this),Ext.menu.Menu.superclass.constructor.call(this);var b=this.items;this.items=new Ext.util.MixedCollection,b&&this.add.apply(this,b)},Ext.extend(Ext.menu.Menu,Ext.util.Observable,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,ignoreParentClicks:!1,hidden:!0,createEl:function(){return new Ext.Layer({cls:"x-menu",shadow:this.shadow,constrain:!1,parentEl:this.parentEl||document.body,zindex:15e3})},render:function(){if(!this.el){var a=this.el=this.createEl();this.keyNav||(this.keyNav=new Ext.menu.MenuNav(this)),this.plain&&a.addClass("x-menu-plain"),this.cls&&a.addClass(this.cls),this.focusEl=a.createChild({tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"});var b=a.createChild({tag:"ul",cls:"x-menu-list"});b.on("click",this.onClick,this),b.on("mouseover",this.onMouseOver,this),b.on("mouseout",this.onMouseOut,this),this.items.each(function(a){var c=document.createElement("li");c.className="x-menu-list-item",b.dom.appendChild(c),a.render(c,this)},this),this.ul=b,this.autoWidth()}},autoWidth:function(){var a=this.el,b=this.ul;if(a){var c=this.width;if(c)a.setWidth(c);else if(Ext.isIE&&!Ext.isIE8){a.setWidth(this.minWidth);{a.dom.offsetWidth}a.setWidth(b.getWidth()+a.getFrameWidth("lr"))}}},delayAutoWidth:function(){this.el&&(this.awTask||(this.awTask=new Ext.util.DelayedTask(this.autoWidth,this)),this.awTask.delay(20))},findTargetItem:function(a){var b=a.getTarget(".x-menu-list-item",this.ul,!0);return b&&b.menuItemId?this.items.get(b.menuItemId):void 0},onClick:function(a){var b;(b=this.findTargetItem(a))&&(b.menu&&this.ignoreParentClicks?b.expandMenu():(b.onClick(a),this.fireEvent("click",this,b,a)))},setActiveItem:function(a,b){a!=this.activeItem?(this.activeItem&&this.activeItem.deactivate(),this.activeItem=a,a.activate(b)):b&&a.expandMenu()},tryActivate:function(a,b){for(var c=this.items,d=a,e=c.length;d>=0&&e>d;d+=b){var f=c.get(d);if(!f.disabled&&f.canActivate)return this.setActiveItem(f,!1),f}return!1},onMouseOver:function(a){var b;(b=this.findTargetItem(a))&&b.canActivate&&!b.disabled&&this.setActiveItem(b,!0),this.over=!0,this.fireEvent("mouseover",this,a,b)},onMouseOut:function(a){var b;(b=this.findTargetItem(a))&&b==this.activeItem&&b.shouldDeactivate(a)&&(this.activeItem.deactivate(),delete this.activeItem),this.over=!1,this.fireEvent("mouseout",this,a,b)},isVisible:function(){return this.el&&!this.hidden},show:function(a,b,c){this.parentMenu=c,this.el||this.render(),this.fireEvent("beforeshow",this),this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign),c,!1)},showAt:function(a,b,c){this.parentMenu=b,this.el||this.render(),c!==!1&&(this.fireEvent("beforeshow",this),a=this.el.adjustForConstraints(a)),this.el.setXY(a),this.el.show(),this.hidden=!1,this.focus(),this.fireEvent("show",this)},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(a){this.el&&this.isVisible()&&(this.fireEvent("beforehide",this),this.activeItem&&(this.activeItem.deactivate(),this.activeItem=null),this.el.hide(),this.hidden=!0,this.fireEvent("hide",this)),a===!0&&this.parentMenu&&this.parentMenu.hide(!0)},add:function(){for(var a,b=arguments,c=b.length,d=0;c>d;d++){var e=b[d];e.render?a=this.addItem(e):"string"==typeof e?a="separator"==e||"-"==e?this.addSeparator():this.addText(e):e.tagName||e.el?a=this.addElement(e):"object"==typeof e&&(Ext.applyIf(e,this.defaults),a=this.addMenuItem(e))}return a},getEl:function(){return this.el||this.render(),this.el},addSeparator:function(){return this.addItem(new Ext.menu.Separator)},addElement:function(a){return this.addItem(new Ext.menu.BaseItem(a))},addItem:function(a){if(this.items.add(a),this.ul){var b=document.createElement("li");b.className="x-menu-list-item",this.ul.dom.appendChild(b),a.render(b,this),this.delayAutoWidth()}return a},addMenuItem:function(a){return a instanceof Ext.menu.Item||(a="boolean"==typeof a.checked?new Ext.menu.CheckItem(a):new Ext.menu.Item(a)),this.addItem(a)},addText:function(a){return this.addItem(new Ext.menu.TextItem(a))},insert:function(a,b){if(this.items.insert(a,b),this.ul){var c=document.createElement("li");c.className="x-menu-list-item",this.ul.dom.insertBefore(c,this.ul.dom.childNodes[a]),b.render(c,this),this.delayAutoWidth()}return b},remove:function(a){this.items.removeKey(a.id),a.destroy()},removeAll:function(){if(this.items)for(var a;a=this.items.first();)this.remove(a)},destroy:function(){this.beforeDestroy(),Ext.menu.MenuMgr.unregister(this),this.keyNav&&this.keyNav.disable(),this.removeAll(),this.ul&&this.ul.removeAllListeners(),this.el&&this.el.destroy()},beforeDestroy:Ext.emptyFn}),Ext.menu.MenuNav=function(a){Ext.menu.MenuNav.superclass.constructor.call(this,a.el),this.scope=this.menu=a},Ext.extend(Ext.menu.MenuNav,Ext.KeyNav,{doRelay:function(a,b){var c=a.getKey();return!this.menu.activeItem&&a.isNavKeyPress()&&c!=a.SPACE&&c!=a.RETURN?(this.menu.tryActivate(0,1),!1):b.call(this.scope||this,a,this.menu)},up:function(a,b){b.tryActivate(b.items.indexOf(b.activeItem)-1,-1)||b.tryActivate(b.items.length-1,-1)},down:function(a,b){b.tryActivate(b.items.indexOf(b.activeItem)+1,1)||b.tryActivate(0,1)},right:function(a,b){b.activeItem&&b.activeItem.expandMenu(!0)},left:function(a,b){b.hide(),b.parentMenu&&b.parentMenu.activeItem&&b.parentMenu.activeItem.activate()},enter:function(a,b){return b.activeItem?(a.stopPropagation(),b.activeItem.onClick(a),b.fireEvent("click",this,b.activeItem),!0):void 0}}),Ext.menu.MenuMgr=function(){function a(){i={},j=new Ext.util.MixedCollection,Ext.getDoc().addKeyListener(27,function(){j.length>0&&b()})}function b(){if(j&&j.length>0){var a=j.clone();a.each(function(a){a.hide()})}}function c(a){j.remove(a),j.length<1&&(Ext.getDoc().un("mousedown",g),l=!1)}function d(a){var b=j.last();m=new Date,j.add(a),l||(Ext.getDoc().on("mousedown",g),l=!0),a.parentMenu?(a.getEl().setZIndex(parseInt(a.parentMenu.getEl().getStyle("z-index"),10)+3),a.parentMenu.activeChild=a):b&&b.isVisible()&&a.getEl().setZIndex(parseInt(b.getEl().getStyle("z-index"),10)+3)}function e(a){a.activeChild&&a.activeChild.hide(),a.autoHideTimer&&(clearTimeout(a.autoHideTimer),delete a.autoHideTimer)}function f(a){var c=a.parentMenu;c||a.allowOtherMenus?c&&c.activeChild&&c.activeChild.hide():b()}function g(a){m.getElapsed()>50&&j.length>0&&!a.getTarget(".x-menu")&&b()}function h(a,b){if(b)for(var c=k[a.group],d=0,e=c.length;e>d;d++)c[d]!=a&&c[d].setChecked(!1)}var i,j,k={},l=!1,m=new Date;return{hideAll:function(){b()},register:function(b){i||a(),i[b.id]=b,b.on("beforehide",e),b.on("hide",c),b.on("beforeshow",f),b.on("show",d);var g=b.group;g&&b.events.checkchange&&(k[g]||(k[g]=[]),k[g].push(b),b.on("checkchange",onCheck))},get:function(a){return"string"==typeof a?i?i[a]:null:a.events?a:"number"==typeof a.length?new Ext.menu.Menu({items:a}):new Ext.menu.Menu(a)},unregister:function(a){delete i[a.id],a.un("beforehide",e),a.un("hide",c),a.un("beforeshow",f),a.un("show",d);var b=a.group;b&&a.events.checkchange&&(k[b].remove(a),a.un("checkchange",onCheck))},registerCheckable:function(a){var b=a.group;b&&(k[b]||(k[b]=[]),k[b].push(a),a.on("beforecheckchange",h))},unregisterCheckable:function(a){var b=a.group;b&&(k[b].remove(a),a.un("beforecheckchange",h))},getCheckedItem:function(a){var b=k[a];if(b)for(var c=0,d=b.length;d>c;c++)if(b[c].checked)return b[c];return null},setCheckedItem:function(a,b){var c=k[a];if(c)for(var d=0,e=c.length;e>d;d++)c[d].id==b&&c[d].setChecked(!0);return null}}}(),Ext.menu.BaseItem=function(a){Ext.menu.BaseItem.superclass.constructor.call(this,a),this.addEvents("click","activate","deactivate"),this.handler&&this.on("click",this.handler,this.scope)},Ext.extend(Ext.menu.BaseItem,Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,hideDelay:100,ctype:"Ext.menu.BaseItem",actionMode:"container",destroy:function(){this.menu&&this.menu.destroy(),Ext.menu.BaseItem.superclass.destroy.call(this)},render:function(a,b){this.parentMenu=b,Ext.menu.BaseItem.superclass.render.call(this,a),this.container.menuItemId=this.id},onRender:function(a){this.el=Ext.get(this.el),this.id&&(this.el.id=this.id),a.dom.appendChild(this.el.dom)},setHandler:function(a,b){this.handler&&this.un("click",this.handler,this.scope),this.on("click",this.handler=a,this.scope=b)},onClick:function(a){this.disabled||this.fireEvent("click",this,a)===!1||this.parentMenu.fireEvent("itemclick",this,a)===!1?a.stopEvent():this.handleClick(a)},activate:function(){if(this.disabled)return!1;var a=this.container;return a.addClass(this.activeClass),this.region=a.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass),this.fireEvent("deactivate",this)},shouldDeactivate:function(a){return!this.region||!this.region.contains(a.getPoint())},handleClick:function(){this.hideOnClick&&this.parentMenu.hide.defer(this.hideDelay,this.parentMenu,[!0])},expandMenu:function(){},hideMenu:function(){}}),Ext.menu.TextItem=function(a){"string"==typeof a&&(a={text:a}),Ext.menu.TextItem.superclass.constructor.call(this,a)},Ext.extend(Ext.menu.TextItem,Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",onRender:function(){var a=document.createElement("span");a.className=this.itemCls,a.innerHTML=this.text,this.el=a,Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}}),Ext.menu.Separator=function(a){Ext.menu.Separator.superclass.constructor.call(this,a)},Ext.extend(Ext.menu.Separator,Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,onRender:function(a){var b=document.createElement("span");b.className=this.itemCls,b.innerHTML="&#160;",this.el=b,a.addClass("x-menu-sep-li"),Ext.menu.Separator.superclass.onRender.apply(this,arguments)}}),Ext.menu.Item=function(a){Ext.menu.Item.superclass.constructor.call(this,a),this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu))},Ext.extend(Ext.menu.Item,Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,hideDelay:200,ctype:"Ext.menu.Item",onRender:function(a,b){var c=document.createElement("a");c.hideFocus=!0,c.unselectable="on",c.href=this.href||"#",this.hrefTarget&&(c.target=this.hrefTarget),c.className=this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),c.innerHTML=String.format('<img src="{0}" class="x-menu-item-icon {2}" />{1}',this.icon||Ext.BLANK_IMAGE_URL,this.itemText||this.text,this.iconCls||""),this.el=c,Ext.menu.Item.superclass.onRender.call(this,a,b)},setText:function(a){this.text=a,this.rendered&&(this.el.update(String.format('<img src="{0}" class="x-menu-item-icon {2}">{1}',this.icon||Ext.BLANK_IMAGE_URL,this.text,this.iconCls||"")),this.parentMenu.autoWidth())},setIconClass:function(a){var b=this.iconCls;this.iconCls=a,this.rendered&&this.el.child("img.x-menu-item-icon").replaceClass(b,this.iconCls)},beforeDestroy:function(){this.menu&&this.menu.destroy(),Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(a){this.href||a.stopEvent(),Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(a){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),a&&this.expandMenu()),!0},shouldDeactivate:function(a){return Ext.menu.Item.superclass.shouldDeactivate.call(this,a)?this.menu&&this.menu.isVisible()?!this.menu.getEl().getRegion().contains(a.getPoint()):!0:!1},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments),this.hideMenu()},expandMenu:function(a){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,this.menu.isVisible()||this.showTimer?this.menu.isVisible()&&a&&this.menu.tryActivate(0,1):this.showTimer=this.deferExpand.defer(this.showDelay,this,[a]))},deferExpand:function(a){delete this.showTimer,this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu),a&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer),delete this.showTimer,!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer,this.menu.over?this.parentMenu.setActiveItem(this,!1):this.menu.hide()}}),Ext.menu.CheckItem=function(a){Ext.menu.CheckItem.superclass.constructor.call(this,a),this.addEvents("beforecheckchange","checkchange"),this.checkHandler&&this.on("checkchange",this.checkHandler,this.scope),Ext.menu.MenuMgr.registerCheckable(this)},Ext.extend(Ext.menu.CheckItem,Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",onRender:function(){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments),this.group&&this.el.addClass(this.groupClass),this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this),Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(a,b){this.checked!=a&&this.fireEvent("beforecheckchange",this,a)!==!1&&(this.container&&this.container[a?"addClass":"removeClass"]("x-menu-item-checked"),this.checked=a,b!==!0&&this.fireEvent("checkchange",this,a))},handleClick:function(){this.disabled||this.checked&&this.group||this.setChecked(!this.checked),Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}}),Ext.menu.Adapter=function(a,b){Ext.menu.Adapter.superclass.constructor.call(this,b),this.component=a},Ext.extend(Ext.menu.Adapter,Ext.menu.BaseItem,{canActivate:!0,onRender:function(a){this.component.render(a),this.el=this.component.getEl()},activate:function(){return this.disabled?!1:(this.component.focus(),this.fireEvent("activate",this),!0)},deactivate:function(){this.fireEvent("deactivate",this)},disable:function(){this.component.disable(),Ext.menu.Adapter.superclass.disable.call(this)},enable:function(){this.component.enable(),Ext.menu.Adapter.superclass.enable.call(this)}}),Ext.menu.DateItem=function(a){Ext.menu.DateItem.superclass.constructor.call(this,new Ext.DatePicker(a),a),this.picker=this.component,this.picker.purgeListeners(),this.addEvents("select"),this.picker.on("render",function(a){a.getEl().swallowEvent("click"),a.container.addClass("x-menu-date-item")}),this.picker.on("select",this.onSelect,this)},Ext.extend(Ext.menu.DateItem,Ext.menu.Adapter,{onSelect:function(a,b){this.fireEvent("select",this,b,a),Ext.menu.DateItem.superclass.handleClick.call(this)}}),Ext.menu.ColorItem=function(a){Ext.menu.ColorItem.superclass.constructor.call(this,new Ext.ColorPalette(a),a),this.palette=this.component,this.palette.purgeListeners(),this.relayEvents(this.palette,["select"]),this.selectHandler&&this.on("select",this.selectHandler,this.scope)},Ext.extend(Ext.menu.ColorItem,Ext.menu.Adapter),Ext.menu.DateMenu=function(a){Ext.menu.DateMenu.superclass.constructor.call(this,a),this.plain=!0;var b=new Ext.menu.DateItem(a);this.add(b),this.picker=b.picker,this.relayEvents(b,["select"]),this.on("beforeshow",function(){this.picker&&this.picker.hideMonthPicker(!0)},this)},Ext.extend(Ext.menu.DateMenu,Ext.menu.Menu,{cls:"x-date-menu",beforeDestroy:function(){this.picker.destroy()}}),Ext.menu.ColorMenu=function(a){Ext.menu.ColorMenu.superclass.constructor.call(this,a),this.plain=!0;var b=new Ext.menu.ColorItem(a);this.add(b),this.palette=b.palette,this.relayEvents(b,["select"])},Ext.extend(Ext.menu.ColorMenu,Ext.menu.Menu,{beforeDestroy:function(){this.palette.destroy()}}),Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,isFormField:!0,hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this),this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(a,b){if(Ext.form.Field.superclass.onRender.call(this,a,b),!this.el){var c=this.getAutoCreate();c.name||(c.name=this.name||this.id),this.inputType&&(c.type=this.inputType),this.el=a.createChild(c,b)}var d=this.el.dom.type;d&&("password"==d&&(d="text"),this.el.addClass("x-form-"+d)),this.readOnly&&(this.el.dom.readOnly=!0),void 0!==this.tabIndex&&this.el.dom.setAttribute("tabIndex",this.tabIndex),this.el.addClass([this.fieldClass,this.cls])},initValue:function(){void 0!==this.value?this.setValue(this.value):Ext.isEmpty(this.el.dom.value)||this.el.dom.value==this.emptyText||this.setValue(this.el.dom.value),this.originalValue=this.getValue()},isDirty:function(){return this.disabled||!this.rendered?!1:String(this.getValue())!==String(this.originalValue)},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this),this.initEvents(),this.initValue()},fireKey:function(a){a.isSpecialKey()&&this.fireEvent("specialkey",this,a)},reset:function(){this.setValue(this.originalValue),this.clearInvalid()},initEvents:function(){this.el.on(Ext.isIE||Ext.isWebKit&&!Ext.isSafari2?"keydown":"keypress",this.fireKey,this),this.el.on("focus",this.onFocus,this);var a=this.inEditor&&Ext.isWindows&&Ext.isGecko?{buffer:10}:null;this.el.on("blur",this.onBlur,this,a)},onFocus:function(){this.focusClass&&this.el.addClass(this.focusClass),this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur(),this.focusClass&&this.el.removeClass(this.focusClass),this.hasFocus=!1,this.validationEvent!==!1&&this.validateOnBlur&&"blur"!=this.validationEvent&&this.validate();var a=this.getValue();String(a)!==String(this.startValue)&&this.fireEvent("change",this,a,this.startValue),this.fireEvent("blur",this)},isValid:function(a){if(this.disabled)return!0;var b=this.preventMark;this.preventMark=a===!0;var c=this.validateValue(this.processValue(this.getRawValue()));return this.preventMark=b,c},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(a){return a},validateValue:function(){return!0},markInvalid:function(a){if(this.rendered&&!this.preventMark){switch(this.el.addClass(this.invalidClass),a=a||this.invalidText,this.msgTarget){case"qtip":this.el.dom.qtip=a,this.el.dom.qclass="x-form-invalid-tip",Ext.QuickTips&&Ext.QuickTips.enable();break;case"title":this.el.dom.title=a;break;case"under":if(!this.errorEl){var b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorEl=b.createChild({cls:"x-form-invalid-msg"}),this.errorEl.setWidth(b.getWidth(!0)-20)}this.errorEl.update(a),Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this);break;case"side":if(!this.errorIcon){var b=this.getErrorCt();if(!b){this.el.dom.title=a;break}this.errorIcon=b.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon(),this.errorIcon.dom.qtip=a,this.errorIcon.dom.qclass="x-form-invalid-tip",this.errorIcon.show(),this.on("resize",this.alignErrorIcon,this);break;default:var c=Ext.getDom(this.msgTarget);c.innerHTML=a,c.style.display=this.msgDisplay}this.fireEvent("invalid",this,a)}},getErrorCt:function(){return this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)
},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},clearInvalid:function(){if(this.rendered&&!this.preventMark){switch(this.el.removeClass(this.invalidClass),this.msgTarget){case"qtip":this.el.dom.qtip="";break;case"title":this.el.dom.title="";break;case"under":this.errorEl&&Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this);break;case"side":this.errorIcon&&(this.errorIcon.dom.qtip="",this.errorIcon.hide(),this.un("resize",this.alignErrorIcon,this));break;default:var a=Ext.getDom(this.msgTarget);a.innerHTML="",a.style.display="none"}this.fireEvent("valid",this)}},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,"");return a===this.emptyText&&(a=""),a},getValue:function(){if(!this.rendered)return this.value;var a=this.el.getValue();return(a===this.emptyText||void 0===a)&&(a=""),a},setRawValue:function(a){return this.el.dom.value=null===a||void 0===a?"":a},setValue:function(a){this.value=a,this.rendered&&(this.el.dom.value=null===a||void 0===a?"":a,this.validate())},adjustSize:function(a,b){var c=Ext.form.Field.superclass.adjustSize.call(this,a,b);return c.width=this.adjustWidth(this.el.dom.tagName,c.width),c},adjustWidth:function(a,b){if(a=a.toLowerCase(),"number"==typeof b&&!Ext.isWebKit)if(!Ext.isIE||"input"!=a&&"textarea"!=a){if(Ext.isOpera&&Ext.isStrict){if("input"==a)return b+2;if("textarea"==a)return b-2}}else{if("input"==a&&!Ext.isStrict)return this.inEditor?b:b-3;if("input"==a&&Ext.isStrict)return b-(Ext.isIE6?4:1);if("textarea"==a&&Ext.isStrict)return b-2}return b}}),Ext.form.MessageTargets={qtip:{mark:function(){this.el.dom.qtip=msg,this.el.dom.qclass="x-form-invalid-tip",Ext.QuickTips&&Ext.QuickTips.enable()},clear:function(){this.el.dom.qtip=""}},title:{mark:function(){this.el.dom.title=msg},clear:function(){this.el.dom.title=""}},under:{mark:function(){if(!this.errorEl){var a=this.getErrorCt();if(!a)return this.el.dom.title=msg,void 0;this.errorEl=a.createChild({cls:"x-form-invalid-msg"}),this.errorEl.setWidth(a.getWidth(!0)-20)}this.errorEl.update(msg),Ext.form.Field.msgFx[this.msgFx].show(this.errorEl,this)},clear:function(){this.errorEl?Ext.form.Field.msgFx[this.msgFx].hide(this.errorEl,this):this.el.dom.title=""}},side:{mark:function(){if(!this.errorIcon){var a=this.getErrorCt();if(!a)return this.el.dom.title=msg,void 0;this.errorIcon=a.createChild({cls:"x-form-invalid-icon"})}this.alignErrorIcon(),this.errorIcon.dom.qtip=msg,this.errorIcon.dom.qclass="x-form-invalid-tip",this.errorIcon.show(),this.on("resize",this.alignErrorIcon,this)},clear:function(){this.errorIcon?(this.errorIcon.dom.qtip="",this.errorIcon.hide(),this.un("resize",this.alignErrorIcon,this)):this.el.dom.title=""}},around:{mark:function(){},clear:function(){}}},Ext.form.Field.msgFx={normal:{show:function(a){a.setDisplayed("block")},hide:function(a){a.setDisplayed(!1).update("")}},slide:{show:function(a){a.slideIn("t",{stopFx:!0})},hide:function(a){a.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(a,b){a.fixDisplay(),a.alignTo(b.el,"tl-tr"),a.slideIn("l",{stopFx:!0})},hide:function(a){a.slideOut("l",{stopFx:!0,useDisplay:!0})}}},Ext.reg("field",Ext.form.Field),Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this),this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this),"keyup"==this.validationEvent?(this.validationTask=new Ext.util.DelayedTask(this.validate,this),this.el.on("keyup",this.filterValidation,this)):this.validationEvent!==!1&&this.el.on(this.validationEvent,this.validate,this,{buffer:this.validationDelay}),(this.selectOnFocus||this.emptyText)&&(this.on("focus",this.preFocus,this),this.el.on("mousedown",function(){this.hasFocus||this.el.on("mouseup",function(a){a.preventDefault()},this,{single:!0})},this),this.emptyText&&(this.on("blur",this.postBlur,this),this.applyEmptyText())),(this.maskRe||this.vtype&&this.disableKeyFilter!==!0&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))&&this.el.on("keypress",this.filterKeys,this),this.grow&&(this.el.on("keyup",this.onKeyUpBuffered,this,{buffer:50}),this.el.on("click",this.autoSize,this)),this.enableKeyEvents&&(this.el.on("keyup",this.onKeyUp,this),this.el.on("keydown",this.onKeyDown,this),this.el.on("keypress",this.onKeyPress,this))},processValue:function(a){if(this.stripCharsRe){var b=a.replace(this.stripCharsRe,"");if(b!==a)return this.setRawValue(b),b}return a},filterValidation:function(a){a.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this),Ext.isIE&&(this.el.dom.unselectable="on")},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this),Ext.isIE&&(this.el.dom.unselectable="")},onKeyUpBuffered:function(a){a.isNavKeyPress()||this.autoSize()},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.TextField.superclass.reset.call(this),this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){var a=this.el;this.emptyText&&(a.dom.value==this.emptyText&&this.setRawValue(""),a.removeClass(this.emptyClass)),this.selectOnFocus&&function(){a.dom.select()}.defer(this.inEditor&&Ext.isIE?50:0)},postBlur:function(){this.applyEmptyText()},filterKeys:function(a){a.ctrlKey||a.isSpecialKey()||this.maskRe.test(String.fromCharCode(a.getCharCode()))||a.stopEvent()},setValue:function(a){this.emptyText&&this.el&&!Ext.isEmpty(a)&&this.el.removeClass(this.emptyClass),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize()},validateValue:function(a){if(a.length<1||a===this.emptyText)return this.allowBlank?(this.clearInvalid(),!0):(this.markInvalid(this.blankText),!1);if(a.length<this.minLength)return this.markInvalid(String.format(this.minLengthText,this.minLength)),!1;if(a.length>this.maxLength)return this.markInvalid(String.format(this.maxLengthText,this.maxLength)),!1;if(this.vtype){var b=Ext.form.VTypes;if(!b[this.vtype](a,this))return this.markInvalid(this.vtypeText||b[this.vtype+"Text"]),!1}if("function"==typeof this.validator){var c=this.validator(a);if(c!==!0)return this.markInvalid(c),!1}return this.regex&&!this.regex.test(a)?(this.markInvalid(this.regexText),!1):!0},selectText:function(a,b){var c=this.getRawValue(),d=!1;if(c.length>0){a=void 0===a?0:a,b=void 0===b?c.length:b;var e=this.el.dom;if(e.setSelectionRange)e.setSelectionRange(a,b);else if(e.createTextRange){var f=e.createTextRange();f.moveStart("character",a),f.moveEnd("character",b-c.length),f.select()}d=Ext.isGecko||Ext.isOpera}else d=!0;d&&this.focus()},autoSize:function(){if(this.grow&&this.rendered){this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var a=this.el,b=a.dom.value,c=document.createElement("div");c.appendChild(document.createTextNode(b)),b=c.innerHTML,Ext.removeNode(c),c=null,b+="&#160;";var d=Math.min(this.growMax,Math.max(this.metrics.getWidth(b)+10,this.growMin));this.el.setWidth(d),this.fireEvent("autosize",this,d)}}}),Ext.reg("textfield",Ext.form.TextField),Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,actionMode:"wrap",onResize:function(a,b){Ext.form.TriggerField.superclass.onResize.call(this,a,b),"number"==typeof a&&this.el.setWidth(this.adjustWidth("input",a-this.trigger.getWidth())),this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(a,b){Ext.form.TriggerField.superclass.onRender.call(this,a,b),this.wrap=this.el.wrap({cls:"x-form-field-wrap"}),this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.triggerClass}),this.hideTrigger&&this.trigger.setDisplayed(!1),this.initTrigger(),this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);var a;Ext.isIE&&!this.hideTrigger&&this.el.getY()!=(a=this.trigger.getY())&&(this.el.position(),this.el.setY(a))},initTrigger:function(){this.trigger.on("click",this.onTriggerClick,this,{preventDefault:!0}),this.trigger.addClassOnOver("x-form-trigger-over"),this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){this.trigger&&(this.trigger.removeAllListeners(),this.trigger.remove()),this.wrap&&this.wrap.remove(),this.mimicing&&Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this),Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this),this.mimicing||(this.wrap.addClass("x-trigger-wrap-focus"),this.mimicing=!0,Ext.get(Ext.isIE?document.body:document).on("mousedown",this.mimicBlur,this,{delay:10}),this.monitorTab&&this.el.on("keydown",this.checkTab,this))},checkTab:function(a){a.getKey()==a.TAB&&this.triggerBlur()},onBlur:function(){},mimicBlur:function(a){!this.wrap.contains(a.target)&&this.validateBlur(a)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=!1,Ext.get(Ext.isIE?document.body:document).un("mousedown",this.mimicBlur,this),this.monitorTab&&this.el&&this.el.un("keydown",this.checkTab,this),Ext.form.TriggerField.superclass.onBlur.call(this),this.wrap&&this.wrap.removeClass("x-trigger-wrap-focus")},beforeBlur:Ext.emptyFn,validateBlur:function(){return!0},onTriggerClick:Ext.emptyFn}),Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this),this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(a){return this.triggers[a]},initTrigger:function(){var a=this.trigger.select(".x-form-trigger",!0);this.wrap.setStyle("overflow","hidden");var b=this;a.each(function(a,c,d){a.hide=function(){var a=b.wrap.getWidth();this.dom.style.display="none",b.el.setWidth(a-b.trigger.getWidth())},a.show=function(){var a=b.wrap.getWidth();this.dom.style.display="",b.el.setWidth(a-b.trigger.getWidth())};var e="Trigger"+(d+1);this["hide"+e]&&(a.dom.style.display="none"),a.on("click",this["on"+e+"Click"],this,{preventDefault:!0}),a.addClassOnOver("x-form-trigger-over"),a.addClassOnClick("x-form-trigger-click")},this),this.triggers=a.elements},onDestroy:function(){Ext.destroy.apply(this,this.triggers),Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn}),Ext.reg("trigger",Ext.form.TriggerField),Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",growPad:Ext.isWebKit?-6:0,enterIsSpecial:!1,preventScrollbars:!1,onRender:function(a,b){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}),Ext.form.TextArea.superclass.onRender.call(this,a,b),this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){this.textSizeEl&&Ext.removeNode(this.textSizeEl),Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(a){a.isSpecialKey()&&(this.enterIsSpecial||a.getKey()!=a.ENTER||a.hasModifier())&&this.fireEvent("specialkey",this,a)},onKeyUp:function(a){a.isNavKeyPress()&&a.getKey()!=a.ENTER||this.autoSize(),Ext.form.TextArea.superclass.onKeyUp.call(this,a)},autoSize:function(){if(this.grow&&this.textSizeEl){var a=this.el,b=a.dom.value,c=this.textSizeEl;c.innerHTML="",c.appendChild(document.createTextNode(b)),b=c.innerHTML,Ext.fly(c).setWidth(this.el.getWidth()),b.length<1?b="&#160;&#160;":(b+=this.growAppend,Ext.isIE&&(b=b.replace(/\n/g,"<br />"))),c.innerHTML=b;var d=Math.min(this.growMax,Math.max(c.offsetHeight,this.growMin)+this.growPad);d!=this.lastHeight&&(this.lastHeight=d,this.el.setHeight(d),this.fireEvent("autosize",this,d))}}}),Ext.reg("textarea",Ext.form.TextArea),Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",initEvents:function(){var a=this.baseChars+"";this.allowDecimals&&(a+=this.decimalSeparator),this.allowNegative&&(a+="-"),this.maskRe=new RegExp("["+Ext.escapeRe(a)+"]"),Ext.form.NumberField.superclass.initEvents.call(this)},validateValue:function(a){if(!Ext.form.NumberField.superclass.validateValue.call(this,a))return!1;if(a.length<1)return!0;if(a=String(a).replace(this.decimalSeparator,"."),isNaN(a))return this.markInvalid(String.format(this.nanText,a)),!1;var b=this.parseValue(a);return b<this.minValue?(this.markInvalid(String.format(this.minText,this.minValue)),!1):b>this.maxValue?(this.markInvalid(String.format(this.maxText,this.maxValue)),!1):!0},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(a){a="number"==typeof a?a:parseFloat(String(a).replace(this.decimalSeparator,".")),a=isNaN(a)?"":String(a).replace(".",this.decimalSeparator),Ext.form.NumberField.superclass.setValue.call(this,a)},parseValue:function(a){return a=parseFloat(String(a).replace(this.decimalSeparator,".")),isNaN(a)?"":a},fixPrecision:function(a){var b=isNaN(a);return this.allowDecimals&&-1!=this.decimalPrecision&&!b&&a?parseFloat(parseFloat(a).toFixed(this.decimalPrecision)):b?"":a},beforeBlur:function(){var a=this.parseValue(this.getRawValue());Ext.isEmpty(a)||this.setValue(this.fixPrecision(a))}}),Ext.reg("numberfield",Ext.form.NumberField),Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:!0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this),this.addEvents("select"),"string"==typeof this.minValue&&(this.minValue=this.parseDate(this.minValue)),"string"==typeof this.maxValue&&(this.maxValue=this.parseDate(this.maxValue)),this.disabledDatesRE=null,this.initDisabledDays()},initDisabledDays:function(){if(this.disabledDates){for(var a=this.disabledDates,b="(?:",c=0;c<a.length;c++)b+=a[c],c!=a.length-1&&(b+="|");this.disabledDatesRE=new RegExp(b+")")}},setDisabledDates:function(a){this.disabledDates=a,this.initDisabledDays(),this.menu&&this.menu.picker.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(a){this.disabledDays=a,this.menu&&this.menu.picker.setDisabledDays(a)},setMinValue:function(a){this.minValue="string"==typeof a?this.parseDate(a):a,this.menu&&this.menu.picker.setMinDate(this.minValue)},setMaxValue:function(a){this.maxValue="string"==typeof a?this.parseDate(a):a,this.menu&&this.menu.picker.setMaxDate(this.maxValue)},validateValue:function(a){if(a=this.formatDate(a),!Ext.form.DateField.superclass.validateValue.call(this,a))return!1;if(a.length<1)return!0;var b=a;if(a=this.parseDate(a),!a)return this.markInvalid(String.format(this.invalidText,b,this.format)),!1;var c=a.getTime();if(this.minValue&&c<this.minValue.getTime())return this.markInvalid(String.format(this.minText,this.formatDate(this.minValue))),!1;if(this.maxValue&&c>this.maxValue.getTime())return this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue))),!1;if(this.disabledDays)for(var d=a.getDay(),e=0;e<this.disabledDays.length;e++)if(d===this.disabledDays[e])return this.markInvalid(this.disabledDaysText),!1;var f=this.formatDate(a);return this.disabledDatesRE&&this.disabledDatesRE.test(f)?(this.markInvalid(String.format(this.disabledDatesText,f)),!1):!0},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(a){Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=Date.parseDate(a,this.format);if(!b&&this.altFormats){this.altFormatsArray||(this.altFormatsArray=this.altFormats.split("|"));for(var c=0,d=this.altFormatsArray.length;d>c&&!b;c++)b=Date.parseDate(a,this.altFormatsArray[c])}return b},onDestroy:function(){this.menu&&this.menu.destroy(),Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(a){return Ext.isDate(a)?a.dateFormat(this.format):a},menuListeners:{select:function(a,b){this.setValue(b),this.fireEvent("select",this,b)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var a=this.menuListeners;this.menu.un("select",a.select,this),this.menu.un("show",a.show,this),this.menu.un("hide",a.hide,this)}},onTriggerClick:function(){this.disabled||(null==this.menu&&(this.menu=new Ext.menu.DateMenu),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))}),this.menu.on(Ext.apply({},this.menuListeners,{scope:this})),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"))},beforeBlur:function(){var a=this.parseDate(this.getRawValue());a&&this.setValue(a)}}),Ext.reg("datefield",Ext.form.DateField),Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,editable:!0,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,initComponent:function(){if(Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){this.allowDomMove=!1;var a=Ext.getDom(this.transform);if(this.hiddenName||(this.hiddenName=a.name),!this.store){this.mode="local";for(var b=[],c=a.options,d=0,e=c.length;e>d;d++){var f=c[d],g=(f.hasAttribute?f.hasAttribute("value"):f.getAttributeNode("value").specified)?f.value:f.text;f.selected&&(this.value=g),b.push([g,f.text])}this.store=new Ext.data.SimpleStore({id:0,fields:["value","text"],data:b}),this.valueField="value",this.displayField="text"}a.name=Ext.id(),this.lazyRender?Ext.removeNode(a):(this.target=!0,this.el=Ext.DomHelper.insertBefore(a,this.autoCreate||this.defaultAutoCreate),Ext.removeNode(a),this.render(this.el.parentNode))}else Ext.isArray(this.store)&&(Ext.isArray(this.store[0])?(this.store=new Ext.data.SimpleStore({fields:["value","text"],data:this.store}),this.valueField="value"):(this.store=new Ext.data.SimpleStore({fields:["text"],data:this.store,expandData:!0}),this.valueField="text"),this.displayField="text",this.mode="local");this.selectedIndex=-1,"local"==this.mode&&(void 0===this.initialConfig.queryDelay&&(this.queryDelay=10),void 0===this.initialConfig.minChars&&(this.minChars=0))},onRender:function(a,b){Ext.form.ComboBox.superclass.onRender.call(this,a,b),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||this.hiddenName},"before",!0),this.el.dom.removeAttribute("name")),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit?this.on("focus",this.initList,this,{single:!0}):this.initList(),this.editable||(this.editable=!0,this.setEditable(!1))},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this),this.hiddenField&&(this.hiddenField.value=void 0!==this.hiddenValue?this.hiddenValue:void 0!==this.value?this.value:"")},initList:function(){if(!this.list){var a="x-combo-list";this.list=new Ext.Layer({shadow:this.shadow,cls:[a,this.listClass].join(" "),constrain:!1});var b=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setWidth(b),this.list.swallowEvent("mousewheel"),this.assetHeight=0,this.title&&(this.header=this.list.createChild({cls:a+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight()),this.innerList=this.list.createChild({cls:a+"-inner"}),this.innerList.on("mouseover",this.onViewOver,this),this.innerList.on("mousemove",this.onViewMove,this),this.innerList.setWidth(b-this.list.getFrameWidth("lr")),this.pageSize&&(this.footer=this.list.createChild({cls:a+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight()),this.tpl||(this.tpl='<tpl for="."><div class="'+a+'-item">{'+this.displayField+"}</div></tpl>"),this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+a+"-item"}),this.view.on("click",this.onViewClick,this),this.bindStore(this.store,!0),this.resizable&&(this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"}),this.resizer.on("resize",function(a,b,c){this.maxHeight=c-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight,this.listWidth=b,this.innerList.setWidth(b-this.list.getFrameWidth("lr")),this.restrictHeight()},this),this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px"))}},getStore:function(){return this.store},bindStore:function(a,b){this.store&&!b&&(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("loadexception",this.collapse,this),a||(this.store=null,this.view&&this.view.setStore(null))),a&&(this.store=Ext.StoreMgr.lookup(a),this.store.on("beforeload",this.onBeforeLoad,this),this.store.on("load",this.onLoad,this),this.store.on("loadexception",this.collapse,this),this.view&&this.view.setStore(a))},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{up:function(){this.inKeyMode=!0,this.selectPrev()},down:function(){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(){this.onViewClick(),this.delayedCheck=!0,this.unsetDelayCheck.defer(10,this)},esc:function(){this.collapse()},tab:function(){return this.onViewClick(!1),!0},scope:this,doRelay:function(a,b,c){return"down"==c||this.scope.isExpanded()?Ext.KeyNav.prototype.doRelay.apply(this,arguments):!0},forceKeyDown:!0}),this.queryDelay=Math.max(this.queryDelay||10,"local"==this.mode?10:250),this.dqTask=new Ext.util.DelayedTask(this.initQuery,this),this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),this.editable===!1||this.enableKeyEvents||this.el.on("keyup",this.onKeyUp,this)},onDestroy:function(){this.dqTask&&(this.dqTask.cancel(),this.dqTask=null),this.bindStore(null),Ext.destroy(this.resizer,this.view,this.pageTb,this.innerList,this.list),Ext.form.ComboBox.superclass.onDestroy.call(this)},unsetDelayCheck:function(){delete this.delayedCheck},fireKey:function(a){var b=function(a){!a.isNavKeyPress()||this.isExpanded()||this.delayedCheck||this.fireEvent("specialkey",this,a)};this.inEditor&&Ext.isWebKit&&a.getKey()==a.TAB?b.defer(10,this,[new Ext.EventObjectImpl(a)]):b.call(this,a)},onResize:function(a){if(Ext.form.ComboBox.superclass.onResize.apply(this,arguments),this.list&&void 0===this.listWidth){var b=Math.max(a,this.minListWidth);this.list.setWidth(b),this.innerList.setWidth(b-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!0)},setEditable:function(a){a!=this.editable&&(this.editable=a,a?(this.el.dom.removeAttribute("readOnly"),this.el.un("mousedown",this.onTriggerClick,this),this.el.removeClass("x-combo-noedit")):(this.el.dom.setAttribute("readOnly",!0),this.el.on("mousedown",this.onTriggerClick,this),this.el.addClass("x-combo-noedit")))},onBeforeLoad:function(){this.hasFocus&&(this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":""),this.restrictHeight(),this.selectedIndex=-1)},onLoad:function(){this.hasFocus&&(this.store.getCount()>0?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),this.selectByValue(this.value,!0)||this.select(0,!0)):(this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.onEmptyResults())},onTypeAhead:function(){if(this.store.getCount()>0){var a=this.store.getAt(0),b=a.data[this.displayField],c=b.length,d=this.getRawValue().length;d!=c&&(this.setRawValue(b),this.selectText(d,b.length))}},onSelect:function(a,b){this.fireEvent("beforeselect",this,a,b)!==!1&&(this.setValue(a.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,a,b))},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){return this.valueField?"undefined"!=typeof this.value?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value=""),this.setRawValue(""),this.lastSelectionText="",this.applyEmptyText(),this.value=""},setValue:function(a){var b=a;if(this.valueField){var c=this.findRecord(this.valueField,a);c?b=c.data[this.displayField]:void 0!==this.valueNotFoundText&&(b=this.valueNotFoundText)}this.lastSelectionText=b,this.hiddenField&&(this.hiddenField.value=a),Ext.form.ComboBox.superclass.setValue.call(this,b),this.value=a},findRecord:function(a,b){var c;return this.store.getCount()>0&&this.store.each(function(d){return d.data[a]==b?(c=d,!1):void 0}),c},onViewMove:function(){this.inKeyMode=!1},onViewOver:function(a,b){if(!this.inKeyMode){var c=this.view.findItemFromChild(b);if(c){var d=this.view.indexOf(c);this.select(d,!1)}}},onViewClick:function(a){var b=this.view.getSelectedIndexes()[0],c=this.store.getAt(b);c&&this.onSelect(c,b),a!==!1&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var a=this.innerList.dom,b=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,c=Math.max(a.clientHeight,a.offsetHeight,a.scrollHeight),d=this.getPosition()[1]-Ext.getBody().getScroll().top,e=Ext.lib.Dom.getViewHeight()-d-this.getSize().height,f=Math.max(d,e,this.minHeight||0)-this.list.shadowOffset-b-5;c=Math.min(c,f,this.maxHeight),this.innerList.setHeight(c),this.list.beginUpdate(),this.list.setHeight(c+b),this.list.alignTo(this.wrap,this.listAlign),this.list.endUpdate()},onEmptyResults:function(){this.collapse()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(a,b){if(void 0!==a&&null!==a){var c=this.findRecord(this.valueField||this.displayField,a);if(c)return this.select(this.store.indexOf(c),b),!0}return!1},select:function(a,b){if(this.selectedIndex=a,this.view.select(a),b!==!1){var c=this.view.getNode(a);c&&this.innerList.scrollChildIntoView(c,!1)}},selectNext:function(){var a=this.store.getCount();a>0&&(-1==this.selectedIndex?this.select(0):this.selectedIndex<a-1&&this.select(this.selectedIndex+1))},selectPrev:function(){var a=this.store.getCount();a>0&&(-1==this.selectedIndex?this.select(0):0!=this.selectedIndex&&this.select(this.selectedIndex-1))},onKeyUp:function(a){var b=a.getKey();this.editable===!1||b!=a.BACKSPACE&&a.isSpecialKey()||(this.lastKey=b,this.dqTask.delay(this.queryDelay)),Ext.form.ComboBox.superclass.onKeyUp.call(this,a)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){var a=this.getRawValue();if(this.forceSelection)a.length>0&&a!=this.emptyText?(this.el.dom.value=void 0===this.lastSelectionText?"":this.lastSelectionText,this.applyEmptyText()):this.clearValue();else{var b=this.findRecord(this.displayField,a);b&&(a=b.get(this.valueField||this.displayField)),this.setValue(a)}},doQuery:function(a,b){(void 0===a||null===a)&&(a="");var c={query:a,forceAll:b,combo:this,cancel:!1};return this.fireEvent("beforequery",c)===!1||c.cancel?!1:(a=c.query,b=c.forceAll,(b===!0||a.length>=this.minChars)&&(this.lastQuery!==a?(this.lastQuery=a,"local"==this.mode?(this.selectedIndex=-1,b?this.store.clearFilter():this.store.filter(this.displayField,a),this.onLoad()):(this.store.baseParams[this.queryParam]=a,this.store.load({params:this.getParams(a)}),this.expand())):(this.selectedIndex=-1,this.onLoad())),void 0)},getParams:function(){var a={};return this.pageSize&&(a.start=0,a.limit=this.pageSize),a},collapse:function(){this.isExpanded()&&(this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this))},collapseIf:function(a){a.within(this.wrap)||a.within(this.list)||this.collapse()},expand:function(){!this.isExpanded()&&this.hasFocus&&(this.list.alignTo(this.wrap,this.listAlign),this.list.show(),Ext.isGecko2&&this.innerList.setOverflow("auto"),Ext.getDoc().on("mousewheel",this.collapseIf,this),Ext.getDoc().on("mousedown",this.collapseIf,this),this.fireEvent("expand",this))},onTriggerClick:function(){this.disabled||(this.isExpanded()?(this.collapse(),this.el.focus()):(this.onFocus({}),"all"==this.triggerAction?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue()),this.el.focus()))}}),Ext.reg("combo",Ext.form.ComboBox),Ext.form.Checkbox=Ext.extend(Ext.form.Field,{checkedCls:"x-form-check-checked",focusCls:"x-form-check-focus",overCls:"x-form-check-over",mouseDownCls:"x-form-check-down",tabIndex:0,checked:!1,defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",baseCls:"x-form-check",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this),this.addEvents("check")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this),this.initCheckEvents()},initCheckEvents:function(){this.innerWrap.removeAllListeners(),this.innerWrap.addClassOnOver(this.overCls),this.innerWrap.addClassOnClick(this.mouseDownCls),this.innerWrap.on("click",this.onClick,this),this.innerWrap.on("keyup",this.onKeyUp,this)
},onRender:function(a,b){Ext.form.Checkbox.superclass.onRender.call(this,a,b),void 0!==this.inputValue&&(this.el.dom.value=this.inputValue),this.el.addClass("x-hidden"),this.innerWrap=this.el.wrap({tabIndex:this.tabIndex,cls:this.baseCls+"-wrap-inner"}),this.wrap=this.innerWrap.wrap({cls:this.baseCls+"-wrap"}),this.boxLabel&&(this.labelEl=this.innerWrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})),this.imageEl=this.innerWrap.createChild({tag:"img",src:Ext.BLANK_IMAGE_URL,cls:this.baseCls},this.el),this.checked?this.setValue(!0):this.checked=this.el.dom.checked,this.originalValue=this.checked},afterRender:function(){Ext.form.Checkbox.superclass.afterRender.call(this),this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)},onDestroy:function(){this.rendered&&Ext.destroy(this.imageEl,this.labelEl,this.innerWrap,this.wrap),Ext.form.Checkbox.superclass.onDestroy.call(this)},onFocus:function(a){Ext.form.Checkbox.superclass.onFocus.call(this,a),this.el.addClass(this.focusCls)},onBlur:function(a){Ext.form.Checkbox.superclass.onBlur.call(this,a),this.el.removeClass(this.focusCls)},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments),this.boxLabel||this.fieldLabel||this.el.alignTo(this.wrap,"c-c")},onKeyUp:function(a){a.getKey()==Ext.EventObject.SPACE&&this.onClick(a)},onClick:function(a){this.disabled||this.readOnly||this.toggleValue(),a.stopEvent()},onEnable:function(){Ext.form.Checkbox.superclass.onEnable.call(this),this.initCheckEvents()},onDisable:function(){Ext.form.Checkbox.superclass.onDisable.call(this),this.innerWrap.removeAllListeners()},toggleValue:function(){this.setValue(!this.checked)},getResizeEl:function(){return this.resizeEl||(this.resizeEl=Ext.isWebKit?this.wrap:this.wrap.up(".x-form-element",5)||this.wrap),this.resizeEl},getPositionEl:function(){return this.wrap},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,initValue:function(){this.originalValue=this.getValue()},getValue:function(){return this.rendered?this.el.dom.checked:this.checked},setValue:function(a){var b=this.checked;this.checked=a===!0||"true"===a||"1"==a||"on"==String(a).toLowerCase(),this.rendered&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked,this.wrap[this.checked?"addClass":"removeClass"](this.checkedCls)),b!=this.checked&&(this.fireEvent("check",this,this.checked),this.handler&&this.handler.call(this.scope||this,this,this.checked))}}),Ext.reg("checkbox",Ext.form.Checkbox),Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change"),Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(a,b){if(!this.el){var c={cls:this.groupCls,layout:"column",border:!1,renderTo:a},d={defaultType:this.defaultType,layout:"form",border:!1,defaults:{hideLabel:!0,anchor:"100%"}};if(this.items[0].items){Ext.apply(c,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var e=0,f=this.items.length;f>e;e++)Ext.applyIf(this.items[e],d)}else{var g,h=[];if("string"==typeof this.columns&&(this.columns=this.items.length),!Ext.isArray(this.columns)){for(var i=[],e=0;e<this.columns;e++)i.push(100/this.columns*.01);this.columns=i}g=this.columns.length;for(var e=0;g>e;e++){var j=Ext.apply({items:[]},d);j[this.columns[e]<=1?"columnWidth":"width"]=this.columns[e],this.defaults&&(j.defaults=Ext.apply(j.defaults||{},this.defaults)),h.push(j)}if(this.vertical)for(var k=Math.ceil(this.items.length/g),l=0,e=0,f=this.items.length;f>e;e++)e>0&&e%k==0&&l++,this.items[e].fieldLabel&&(this.items[e].hideLabel=!1),h[l].items.push(this.items[e]);else for(var e=0,f=this.items.length;f>e;e++){var m=e%g;this.items[e].fieldLabel&&(this.items[e].hideLabel=!1),h[m].items.push(this.items[e])}Ext.apply(c,{layoutConfig:{columns:g},items:h})}if(this.panel=new Ext.Panel(c),this.panel.ownerCt=this,this.el=this.panel.getEl(),this.forId&&this.itemCls){var n=this.el.up(this.itemCls).child("label",!0);n&&n.setAttribute("htmlFor",this.forId)}var o=this.panel.findBy(function(a){return a.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(o)}Ext.form.CheckboxGroup.superclass.onRender.call(this,a,b)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this),this.items.each(function(a){a.on("check",this.fireChecked,this)},this)},fireChecked:function(){var a=[];this.items.each(function(b){b.checked&&a.push(b)}),this.fireEvent("change",this,a)},validateValue:function(){if(!this.allowBlank){var a=!0;if(this.items.each(function(b){return b.checked?a=!1:void 0},this),a)return this.markInvalid(this.blankText),!1}return!0},onDestroy:function(){Ext.destroy(this.panel),Ext.form.CheckboxGroup.superclass.onDestroy.call(this)},onDisable:function(){this.items.each(function(a){a.disable()})},onEnable:function(){this.items.each(function(a){a.enable()})},isDirty:function(){if(this.disabled||!this.rendered)return!1;var a=!1;return this.items.each(function(b){return b.isDirty()?(a=!0,!1):void 0}),a},onResize:function(a,b){this.panel.setSize(a,b),this.panel.doLayout()},reset:function(){Ext.form.CheckboxGroup.superclass.reset.call(this),this.items.each(function(a){a.reset&&a.reset()},this)},initValue:Ext.emptyFn,getValue:Ext.emptyFn,getRawValue:Ext.emptyFn,setValue:Ext.emptyFn,setRawValue:Ext.emptyFn}),Ext.reg("checkboxgroup",Ext.form.CheckboxGroup),Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",baseCls:"x-form-radio",getGroupValue:function(){var a=this.getParent().child("input[name="+this.el.dom.name+"]:checked",!0);return a?a.value:null},getParent:function(){return this.el.up("form")||Ext.getBody()},toggleValue:function(){if(!this.checked){var a=this.getParent().select("input[name="+this.el.dom.name+"]");a.each(function(a){a.dom.id==this.id?this.setValue(!0):Ext.getCmp(a.dom.id).setValue(!1)},this)}},setValue:function(a){if("boolean"==typeof a)Ext.form.Radio.superclass.setValue.call(this,a);else{var b=this.getParent().child("input[name="+this.el.dom.name+"][value="+a+"]",!0);b&&!b.checked&&Ext.getCmp(b.id).toggleValue()}},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.reg("radio",Ext.form.Radio),Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",initComponent:function(){this.addEvents("change"),Ext.form.RadioGroup.superclass.initComponent.call(this)},fireChecked:function(){this.checkTask||(this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)),this.checkTask.delay(10)},bufferChecked:function(){var a=null;this.items.each(function(b){return b.checked?(a=b,!1):void 0}),this.fireEvent("change",this,a)},onDestroy:function(){this.checkTask&&(this.checkTask.cancel(),this.checkTask=null),Ext.form.RadioGroup.superclass.onDestroy.call(this)}}),Ext.reg("radiogroup",Ext.form.RadioGroup),Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.reg("hidden",Ext.form.Hidden),Ext.form.BasicForm=function(a,b){Ext.apply(this,b),this.items=new Ext.util.MixedCollection(!1,function(a){return a.id||(a.id=Ext.id())}),this.addEvents("beforeaction","actionfailed","actioncomplete"),a&&this.initEl(a),Ext.form.BasicForm.superclass.constructor.call(this)},Ext.extend(Ext.form.BasicForm,Ext.util.Observable,{timeout:30,activeAction:null,trackResetOnLoad:!1,initEl:function(a){this.el=Ext.get(a),this.id=this.el.id||Ext.id(),this.standardSubmit||this.el.on("submit",this.onSubmit,this),this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(a){a.stopEvent()},destroy:function(){this.items.each(function(a){Ext.destroy(a)}),this.el&&(this.el.removeAllListeners(),this.el.remove()),this.purgeListeners()},isValid:function(){var a=!0;return this.items.each(function(b){b.validate()||(a=!1)}),a},isDirty:function(){var a=!1;return this.items.each(function(b){return b.isDirty()?(a=!0,!1):void 0}),a},doAction:function(a,b){return"string"==typeof a&&(a=new Ext.form.Action.ACTION_TYPES[a](this,b)),this.fireEvent("beforeaction",this,a)!==!1&&(this.beforeAction(a),a.run.defer(100,a)),this},submit:function(a){if(this.standardSubmit){var b=this.isValid();return b&&this.el.dom.submit(),b}return this.doAction("submit",a),this},load:function(a){return this.doAction("load",a),this},updateRecord:function(a){a.beginEdit();var b=a.fields;return b.each(function(b){var c=this.findField(b.name);c&&a.set(b.name,c.getValue())},this),a.endEdit(),this},loadRecord:function(a){return this.setValues(a.data),this},beforeAction:function(a){var b=a.options;b.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(b.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(b.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(b.waitMsg,b.waitTitle||this.waitTitle||"Please Wait..."))},afterAction:function(a,b){this.activeAction=null;var c=a.options;c.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide())),b?(c.reset&&this.reset(),Ext.callback(c.success,c.scope,[this,a]),this.fireEvent("actioncomplete",this,a)):(Ext.callback(c.failure,c.scope,[this,a]),this.fireEvent("actionfailed",this,a))},findField:function(a){var b=this.items.get(a);return b&&"object"==typeof b||this.items.each(function(c){return!c.isFormField||c.dataIndex!=a&&c.id!=a&&c.getName()!=a?void 0:(b=c,!1)}),b},markInvalid:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;c>b;b++){var d=a[b],e=this.findField(d.id);e&&e.markInvalid(d.msg)}else{var f,g;for(g in a)"function"!=typeof a[g]&&(f=this.findField(g))&&f.markInvalid(a[g])}return this},setValues:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;c>b;b++){var d=a[b],e=this.findField(d.id);e&&(e.setValue(d.value),this.trackResetOnLoad&&(e.originalValue=e.getValue()))}else{var f,g;for(g in a)"function"!=typeof a[g]&&(f=this.findField(g))&&(f.setValue(a[g]),this.trackResetOnLoad&&(f.originalValue=f.getValue()))}return this},getValues:function(a){var b=Ext.lib.Ajax.serializeForm(this.el.dom);return a===!0?b:Ext.urlDecode(b)},clearInvalid:function(){return this.items.each(function(a){a.clearInvalid()}),this},reset:function(){return this.items.each(function(a){a.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(a){return this.items.remove(a),this},render:function(){return this.items.each(function(a){a.isFormField&&!a.rendered&&document.getElementById(a.id)&&a.applyToMarkup(a.id)}),this},applyToFields:function(a){return this.items.each(function(b){Ext.apply(b,a)}),this},applyIfToFields:function(a){return this.items.each(function(b){Ext.applyIf(b,a)}),this}}),Ext.BasicForm=Ext.form.BasicForm,Ext.FormPanel=Ext.extend(Ext.Panel,{buttonAlign:"center",minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm(),this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()},this.fileUpload&&(this.bodyCfg.enctype="multipart/form-data"),Ext.FormPanel.superclass.initComponent.call(this),this.initItems(),this.addEvents("clientvalidation"),this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var a=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,a)},initFields:function(){var a=this.form,b=this,c=function(d){d.isFormField?a.add(d):d.doLayout&&d!=b&&(Ext.applyIf(d,{labelAlign:d.ownerCt.labelAlign,labelWidth:d.ownerCt.labelWidth,itemCls:d.ownerCt.itemCls}),d.items&&d.items.each(c))};this.items.each(c)},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(a,b){this.initFields(),Ext.FormPanel.superclass.onRender.call(this,a,b),this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring(),Ext.FormPanel.superclass.beforeDestroy.call(this),this.form.items.clear(),Ext.destroy(this.form)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this),this.items.on("remove",this.onRemove,this),this.items.on("add",this.onAdd,this),this.monitorValid&&this.startMonitoring()},onAdd:function(a,b){b.isFormField&&this.form.add(b)},onRemove:function(a){a.isFormField&&(Ext.destroy(a.container.up(".x-form-item")),this.form.remove(a))},startMonitoring:function(){this.validTask||(this.validTask=new Ext.util.TaskRunner,this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.validTask&&(this.validTask.stopAll(),this.validTask=null)},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this),this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this),this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var a=!0;if(this.form.items.each(function(b){return b.isValid(!0)?void 0:(a=!1,!1)}),this.buttons)for(var b=0,c=this.buttons.length;c>b;b++){var d=this.buttons[b];d.formBind===!0&&d.disabled===a&&d.setDisabled(!a)}this.fireEvent("clientvalidation",this,a)}}),Ext.reg("form",Ext.FormPanel),Ext.form.FormPanel=Ext.FormPanel,Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:!1,onRender:function(a,b){if(this.el||(this.el=document.createElement("fieldset"),this.el.id=this.id,(this.title||this.header||this.checkboxToggle)&&(this.el.appendChild(document.createElement("legend")).className="x-fieldset-header")),Ext.form.FieldSet.superclass.onRender.call(this,a,b),this.checkboxToggle){var c="object"==typeof this.checkboxToggle?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(c),this.checkbox.dom.checked=!this.collapsed,this.checkbox.on("click",this.onCheckClick,this)}},onCollapse:function(a,b){this.checkbox&&(this.checkbox.dom.checked=!1),Ext.form.FieldSet.superclass.onCollapse.call(this,a,b)},onExpand:function(a,b){this.checkbox&&(this.checkbox.dom.checked=!0),Ext.form.FieldSet.superclass.onExpand.call(this,a,b)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()},beforeDestroy:function(){this.checkbox&&this.checkbox.un("click",this.onCheckClick,this),Ext.form.FieldSet.superclass.beforeDestroy.call(this)}}),Ext.reg("fieldset",Ext.form.FieldSet),Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera?"&nbsp;":"&#8203;",actionMode:"wrap",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange")},createFontOptions:function(){for(var a,b,c=[],d=this.fontFamilies,e=0,f=d.length;f>e;e++)a=d[e],b=a.toLowerCase(),c.push('<option value="',b,'" style="font-family:',a,';"',this.defaultFont==b?' selected="true">':">",a,"</option>");return c.join("")},createToolbar:function(a){function b(b,d,e){return{itemId:b,cls:"x-btn-icon x-edit-"+b,enableToggle:d!==!1,scope:a,handler:e||a.relayBtnCmd,clickEvent:"mousedown",tooltip:c?a.buttonTips[b]||void 0:void 0,tabIndex:-1}}var c=Ext.QuickTips&&Ext.QuickTips.isEnabled(),d=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild});d.el.on("click",function(a){a.preventDefault()}),this.enableFont&&!Ext.isSafari2&&(this.fontSelect=d.el.createChild({tag:"select",cls:"x-font-select",html:this.createFontOptions()}),this.fontSelect.on("change",function(){var a=this.fontSelect.dom.value;this.relayCmd("fontname",a),this.deferFocus()},this),d.add(this.fontSelect.dom,"-")),this.enableFormat&&d.add(b("bold"),b("italic"),b("underline")),this.enableFontSize&&d.add("-",b("increasefontsize",!1,this.adjustFont),b("decreasefontsize",!1,this.adjustFont)),this.enableColors&&d.add("-",{itemId:"forecolor",cls:"x-btn-icon x-edit-forecolor",clickEvent:"mousedown",tooltip:c?a.buttonTips.forecolor||void 0:void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,selectHandler:function(a,b){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+b:b),this.deferFocus()},scope:this,clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon x-edit-backcolor",clickEvent:"mousedown",tooltip:c?a.buttonTips.backcolor||void 0:void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,selectHandler:function(a,b){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",b),this.execCmd("useCSS",!0),this.deferFocus()):(this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+b:b),this.deferFocus())},scope:this,clickEvent:"mousedown"})}),this.enableAlignments&&d.add("-",b("justifyleft"),b("justifycenter"),b("justifyright")),Ext.isSafari2||(this.enableLinks&&d.add("-",b("createlink",!1,this.createLink)),this.enableLists&&d.add("-",b("insertorderedlist"),b("insertunorderedlist")),this.enableSourceEdit&&d.add("-",b("sourceedit",!0,function(a){this.toggleSourceEdit(a.pressed)}))),this.tb=d},getDocMarkup:function(){return'<html><head><style type="text/css">body{border:0;margin:0;padding:3px;height:98%;cursor:text;}</style></head><body></body></html>'},getEditorBody:function(){return this.doc.body||this.doc.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(a,b){Ext.form.HtmlEditor.superclass.onRender.call(this,a,b),this.el.dom.style.border="0 none",this.el.dom.setAttribute("tabIndex",-1),this.el.addClass("x-hidden"),Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;"),this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}}),this.createToolbar(this),this.tb.items.each(function(a){"sourceedit"!=a.itemId&&a.disable()});var c=document.createElement("iframe");if(c.name=Ext.id(),c.frameBorder="0",c.src=Ext.isIE?Ext.SSL_SECURE_URL:"javascript:;",this.wrap.dom.appendChild(c),this.iframe=c,this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100}),!this.width){var d=this.el.getSize();this.setSize(d.width,this.height||d.height)}},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask),this.doc=this.getDoc(),this.win=this.getWin(),this.doc.open(),this.doc.write(this.getDocMarkup()),this.doc.close();var a={run:function(){(this.doc.body||"complete"==this.doc.readyState)&&(Ext.TaskMgr.stop(a),this.doc.designMode="on",this.initEditor.defer(10,this))},interval:10,duration:1e4,scope:this};Ext.TaskMgr.start(a)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var a=this.getDoc();if(!a)return;a.editorInitialized&&"on"==String(a.designMode).toLowerCase()||this.initFrame()}},onResize:function(a,b){if(Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments),this.el&&this.iframe){if("number"==typeof a){var c=a-this.wrap.getFrameWidth("lr");this.el.setWidth(this.adjustWidth("textarea",c)),this.iframe.style.width=Math.max(c,0)+"px"}if("number"==typeof b){var d=b-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(this.adjustWidth("textarea",d)),this.iframe.style.height=Math.max(d,0)+"px",this.doc&&(this.getEditorBody().style.height=Math.max(d-2*this.iframePad,0)+"px")}}},toggleSourceEdit:function(a){void 0===a&&(a=!this.sourceEditMode),this.sourceEditMode=a===!0;var b=this.tb.items.get("sourceedit");if(b.pressed!==this.sourceEditMode)return b.toggle(this.sourceEditMode),void 0;this.sourceEditMode?(this.tb.items.each(function(a){"sourceedit"!=a.itemId&&a.disable()}),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus()):(this.initialized&&this.tb.items.each(function(a){a.enable()}),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus());var c=this.lastSize;c&&(delete this.lastSize,this.setSize(c)),this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);a&&"http://"!=a&&this.relayCmd("createlink",a)},adjustSize:Ext.BoxComponent.prototype.adjustSize,getResizeEl:function(){return this.wrap},getPositionEl:function(){return this.wrap},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(a){Ext.form.HtmlEditor.superclass.setValue.call(this,a),this.pushValue()},cleanHtml:function(a){return a=String(a),a.length>5&&Ext.isWebKit&&(a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),a==this.defaultValue&&(a=""),a},syncValue:function(){if(this.initialized){var a=this.getEditorBody(),b=a.innerHTML;if(Ext.isWebKit){var c=a.getAttribute("style"),d=c.match(/text-align:(.*?);/i);d&&d[1]&&(b='<div style="'+d[0]+'">'+b+"</div>")}b=this.cleanHtml(b),this.fireEvent("beforesync",this,b)!==!1&&(this.el.dom.value=b,this.fireEvent("sync",this,b))}},getValue:function(){return this[this.sourceEditMode?"pushValue":"syncValue"](),Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var a=this.el.dom.value;if(!this.activated&&a.length<1&&(a=this.defaultValue),this.fireEvent("beforepush",this,a)!==!1){if(this.getEditorBody().innerHTML=a,Ext.isGecko){var b=this.doc,c=b.designMode.toLowerCase();b.designMode=c.toggle("on","off"),b.designMode=c}this.fireEvent("push",this,a)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){this.win&&!this.sourceEditMode?this.win.focus():this.el.focus()},initEditor:function(){try{var a=this.getEditorBody(),b=this.el.getStyles("font-size","font-family","background-image","background-repeat");if(b["background-attachment"]="fixed",a.bgProperties="fixed",Ext.DomHelper.applyStyles(a,b),this.doc)try{Ext.EventManager.removeAll(this.doc)}catch(c){}this.doc=this.getDoc(),Ext.EventManager.on(this.doc,{mousedown:this.onEditorEvent,dblclick:this.onEditorEvent,click:this.onEditorEvent,keyup:this.onEditorEvent,buffer:100,scope:this}),Ext.isGecko&&Ext.EventManager.on(this.doc,"keypress",this.applyCommand,this),(Ext.isIE||Ext.isWebKit||Ext.isOpera)&&Ext.EventManager.on(this.doc,"keydown",this.fixKeys,this),this.initialized=!0,this.fireEvent("initialize",this),this.doc.editorInitialized=!0,this.pushValue()}catch(c){}},onDestroy:function(){if(this.monitorTask&&Ext.TaskMgr.stop(this.monitorTask),this.rendered&&(Ext.destroy(this.tb),this.wrap&&(this.wrap.dom.innerHTML="",this.wrap.remove())),this.el&&(this.el.removeAllListeners(),this.el.remove()),this.doc)try{Ext.EventManager.removeAll(this.doc);for(var a in this.doc)delete this.doc[a]}catch(b){}this.purgeListeners()},onFirstFocus:function(){if(this.activated=!0,this.tb.items.each(function(a){a.enable()}),Ext.isGecko){this.win.focus();var a=this.win.getSelection();if(!a.focusNode||3!=a.focusNode.nodeType){var b=a.getRangeAt(0);b.selectNodeContents(this.getEditorBody()),b.collapse(!0),this.deferFocus()}try{this.execCmd("useCSS",!0),this.execCmd("styleWithCSS",!1)}catch(c){}}this.fireEvent("activate",this)},adjustFont:function(a){var b="increasefontsize"==a.itemId?1:-1,c=parseInt(this.doc.queryCommandValue("FontSize")||2,10);Ext.isWebKit&&!Ext.isSafari2||Ext.isAir?(c=10>=c?1+b:13>=c?2+b:16>=c?3+b:18>=c?4+b:24>=c?5+b:6+b,c=c.constrain(1,6)):(Ext.isSafari&&(b*=2),c=Math.max(1,c+b)+(Ext.isSafari?"px":0)),this.execCmd("FontSize",c)},onEditorEvent:function(){this.updateToolbar()},updateToolbar:function(){if(!this.activated)return this.onFirstFocus(),void 0;var a=this.tb.items.map,b=this.doc;if(this.enableFont&&!Ext.isSafari2){var c=(this.doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase();c!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=c)}this.enableFormat&&(a.bold.toggle(b.queryCommandState("bold")),a.italic.toggle(b.queryCommandState("italic")),a.underline.toggle(b.queryCommandState("underline"))),this.enableAlignments&&(a.justifyleft.toggle(b.queryCommandState("justifyleft")),a.justifycenter.toggle(b.queryCommandState("justifycenter")),a.justifyright.toggle(b.queryCommandState("justifyright"))),!Ext.isSafari2&&this.enableLists&&(a.insertorderedlist.toggle(b.queryCommandState("insertorderedlist")),a.insertunorderedlist.toggle(b.queryCommandState("insertunorderedlist"))),Ext.menu.MenuMgr.hideAll(),this.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.itemId)},relayCmd:function(a,b){(function(){this.focus(),this.execCmd(a,b),this.updateToolbar()}).defer(10,this)},execCmd:function(a,b){this.doc.execCommand(a,!1,void 0===b?null:b),this.syncValue()},applyCommand:function(a){if(a.ctrlKey){var b,c=a.getCharCode();if(c>0){switch(c=String.fromCharCode(c)){case"b":b="bold";break;case"i":b="italic";break;case"u":b="underline"}b&&(this.win.focus(),this.execCmd(b),this.deferFocus(),a.preventDefault())}}},insertAtCursor:function(a){if(this.activated)if(Ext.isIE){this.win.focus();var b=this.doc.selection.createRange();b&&(b.collapse(!0),b.pasteHTML(a),this.syncValue(),this.deferFocus())}else Ext.isGecko||Ext.isOpera?(this.win.focus(),this.execCmd("InsertHTML",a),this.deferFocus()):Ext.isWebKit&&(this.execCmd("InsertText",a),this.deferFocus())},fixKeys:function(){return Ext.isIE?function(a){var b,c=a.getKey();if(c==a.TAB)a.stopEvent(),b=this.doc.selection.createRange(),b&&(b.collapse(!0),b.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus());else if(c==a.ENTER&&(b=this.doc.selection.createRange())){var d=b.parentElement();d&&"li"==d.tagName.toLowerCase()||(a.stopEvent(),b.pasteHTML("<br />"),b.collapse(!1),b.select())}}:Ext.isOpera?function(a){var b=a.getKey();b==a.TAB&&(a.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())}:Ext.isWebKit?function(a){var b=a.getKey();b==a.TAB&&(a.stopEvent(),this.execCmd("InsertText","	"),this.deferFocus())}:void 0}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}}),Ext.reg("htmleditor",Ext.form.HtmlEditor),Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:null,maxValue:null,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initDate:"1/1/2008",initComponent:function(){if(Ext.form.TimeField.superclass.initComponent.call(this),"string"==typeof this.minValue&&(this.minValue=this.parseDate(this.minValue)),"string"==typeof this.maxValue&&(this.maxValue=this.parseDate(this.maxValue)),!this.store){var a=this.parseDate(this.minValue);a||(a=new Date(this.initDate).clearTime());var b=this.parseDate(this.maxValue);b||(b=new Date(this.initDate).clearTime().add("mi",1439));for(var c=[];b>=a;)c.push([a.dateFormat(this.format)]),a=a.add("mi",this.increment);this.store=new Ext.data.SimpleStore({fields:["text"],data:c}),this.displayField="text"}},getValue:function(){var a=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(a))||""},setValue:function(a){Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},validateValue:Ext.form.DateField.prototype.validateValue,parseDate:Ext.form.DateField.prototype.parseDate,formatDate:Ext.form.DateField.prototype.formatDate,beforeBlur:function(){var a=this.parseDate(this.getRawValue());a&&this.setValue(a.dateFormat(this.format)),Ext.form.TimeField.superclass.beforeBlur.call(this)}}),Ext.reg("timefield",Ext.form.TimeField),Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(a,b){this.el||(this.el=document.createElement("label"),this.el.id=this.getId(),this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",this.forId&&this.el.setAttribute("for",this.forId)),Ext.form.Label.superclass.onRender.call(this,a,b)},setText:function(a,b){var c=b===!1;return this[c?"html":"text"]=a,delete this[c?"text":"html"],this.rendered&&(this.el.dom.innerHTML=b!==!1?Ext.util.Format.htmlEncode(a):a),this}}),Ext.reg("label",Ext.form.Label),Ext.form.Action=function(a,b){this.form=a,this.options=b||{}},Ext.form.Action.CLIENT_INVALID="client",Ext.form.Action.SERVER_INVALID="server",Ext.form.Action.CONNECT_FAILURE="connect",Ext.form.Action.LOAD_FAILURE="load",Ext.form.Action.prototype={type:"default",run:function(){},success:function(){},handleResponse:function(){},failure:function(a){this.response=a,this.failureType=Ext.form.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(a){return this.response=a,a.responseText||a.responseXML?(this.result=this.handleResponse(a),this.result):!0},getUrl:function(a){var b=this.options.url||this.form.url||this.form.el.dom.action;if(a){var c=this.getParams();c&&(b+=(-1!=b.indexOf("?")?"&":"?")+c)}return b},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var a=this.form.baseParams,b=this.options.params;return b?"object"==typeof b?b=Ext.urlEncode(Ext.applyIf(b,a)):"string"==typeof b&&a&&(b+="&"+Ext.urlEncode(a)):a&&(b=Ext.urlEncode(a)),b},createCallback:function(a){var a=a||{};return{success:this.success,failure:this.failure,scope:this,timeout:1e3*a.timeout||1e3*this.form.timeout,upload:this.form.fileUpload?this.success:void 0}}},Ext.form.Action.Submit=function(a,b){Ext.form.Action.Submit.superclass.constructor.call(this,a,b)},Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var a=this.options,b=this.getMethod(),c="GET"==b;a.clientValidation===!1||this.form.isValid()?Ext.Ajax.request(Ext.apply(this.createCallback(a),{form:this.form.el.dom,url:this.getUrl(c),method:b,headers:a.headers,params:c?null:this.getParams(),isUpload:this.form.fileUpload})):a.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))
},success:function(a){var b=this.processResponse(a);return b===!0||b.success?(this.form.afterAction(this,!0),void 0):(b.errors&&(this.form.markInvalid(b.errors),this.failureType=Ext.form.Action.SERVER_INVALID),this.form.afterAction(this,!1),void 0)},handleResponse:function(a){if(this.form.errorReader){var b=this.form.errorReader.read(a),c=[];if(b.records)for(var d=0,e=b.records.length;e>d;d++){var f=b.records[d];c[d]=f.data}return c.length<1&&(c=null),{success:b.success,errors:c}}return Ext.decode(a.responseText)}}),Ext.form.Action.Load=function(a,b){Ext.form.Action.Load.superclass.constructor.call(this,a,b),this.reader=this.form.reader},Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),headers:this.options.headers,params:this.getParams()}))},success:function(a){var b=this.processResponse(a);return b!==!0&&b.success&&b.data?(this.form.clearInvalid(),this.form.setValues(b.data),this.form.afterAction(this,!0),void 0):(this.failureType=Ext.form.Action.LOAD_FAILURE,this.form.afterAction(this,!1),void 0)},handleResponse:function(a){if(this.form.reader){var b=this.form.reader.read(a),c=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:c}}return Ext.decode(a.responseText)}}),Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit},Ext.form.VTypes=function(){var a=/^[a-zA-Z_]+$/,b=/^[a-zA-Z0-9_]+$/,c=/^(\w+)([-+.][\w]+)*@(\w[-\w]*\.){1,5}([A-Za-z]){2,4}$/,d=/(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(a){return c.test(a)},emailText:'This field should be an e-mail address in the format "user@domain.com"',emailMask:/[a-z0-9_\.\-@]/i,url:function(a){return d.test(a)},urlText:'This field should be a URL in the format "http://www.domain.com"',alpha:function(b){return a.test(b)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return b.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}(),Ext.grid.GridPanel=Ext.extend(Ext.Panel,{ddText:"{0} selected row{1}",minColumnWidth:25,trackMouseOver:!0,enableDragDrop:!1,enableColumnMove:!0,enableColumnHide:!0,enableHdMenu:!0,stripeRows:!1,autoExpandColumn:!1,autoExpandMin:50,autoExpandMax:1e3,view:null,loadMask:!1,deferRowRender:!0,rendered:!1,viewReady:!1,stateEvents:["columnmove","columnresize","sortchange"],initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this),this.autoScroll=!1,this.autoWidth=!1,Ext.isArray(this.columns)&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns),this.ds&&(this.store=this.ds,delete this.ds),this.cm&&(this.colModel=this.cm,delete this.cm),this.sm&&(this.selModel=this.sm,delete this.sm),this.store=Ext.StoreMgr.lookup(this.store),this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","bodyscroll","columnresize","columnmove","sortchange")},onRender:function(){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var a=this.body;this.el.addClass("x-grid-panel");var b=this.getView();b.init(this),a.on("mousedown",this.onMouseDown,this),a.on("click",this.onClick,this),a.on("dblclick",this.onDblClick,this),a.on("contextmenu",this.onContextMenu,this),a.on("keydown",this.onKeyDown,this),this.relayEvents(a,["mousedown","mouseup","mouseover","mouseout","keypress"]),this.getSelectionModel().init(this),this.view.render()},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this),this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this),this.colModel.on("hiddenchange",this.saveState,this,{delay:100})},applyState:function(a){var b=this.colModel,c=a.columns;if(c)for(var d=0,e=c.length;e>d;d++){var f=c[d],g=b.getColumnById(f.id);if(g){g.hidden=f.hidden,g.width=f.width;var h=b.getIndexById(f.id);h!=d&&b.moveColumn(h,d)}}a.sort&&this.store[this.store.remoteSort?"setDefaultSort":"sort"](a.sort.field,a.sort.direction),delete a.columns,delete a.sort,Ext.grid.GridPanel.superclass.applyState.call(this,a)},getState:function(){for(var a,b={columns:[]},c=0;a=this.colModel.config[c];c++)b.columns[c]={id:a.id,width:a.width},a.hidden&&(b.columns[c].hidden=!0);var d=this.store.getSortState();return d&&(b.sort=d),b},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this),this.view.layout(),this.deferRowRender?this.view.afterRender.defer(10,this.view):this.view.afterRender(),this.viewReady=!0},reconfigure:function(a,b){this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:a},this.initialConfig.loadMask))),this.view.bind(a,b),this.store=a,this.colModel=b,this.rendered&&this.view.refresh(!0)},onKeyDown:function(a){this.fireEvent("keydown",a)},onDestroy:function(){if(this.rendered){var a=this.body;a.removeAllListeners(),a.update(""),Ext.destroy(this.view,this.loadMask)}Ext.destroy(this.colModel,this.selModel),Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(a,b){this.fireEvent(a,b);var c=b.getTarget(),d=this.view,e=d.findHeaderIndex(c);if(e!==!1)this.fireEvent("header"+a,this,e,b);else{var f=d.findRowIndex(c),g=d.findCellIndex(c);f!==!1&&(this.fireEvent("row"+a,this,f,b),g!==!1&&this.fireEvent("cell"+a,this,f,g,b))}},onClick:function(a){this.processEvent("click",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onContextMenu:function(a){this.processEvent("contextmenu",a)},onDblClick:function(a){this.processEvent("dblclick",a)},walkCells:function(a,b,c,d,e){var f=this.colModel,g=f.getColumnCount(),h=this.store,i=h.getCount(),j=!0;if(0>c)for(0>b&&(a--,j=!1);a>=0;){for(j||(b=g-1),j=!1;b>=0;){if(d.call(e||this,a,b,f)===!0)return[a,b];b--}a--}else for(b>=g&&(a++,j=!1);i>a;){for(j||(b=0),j=!1;g>b;){if(d.call(e||this,a,b,f)===!0)return[a,b];b++}a++}return null},onResize:function(){Ext.grid.GridPanel.superclass.onResize.apply(this,arguments),this.viewReady&&this.view.layout()},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var a=this.selModel.getCount();return String.format(this.ddText,a,1==a?"":"s")}}),Ext.reg("grid",Ext.grid.GridPanel),Ext.grid.GridView=function(a){Ext.apply(this,a),this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh"),Ext.grid.GridView.superclass.constructor.call(this)},Ext.extend(Ext.grid.GridView,Ext.util.Observable,{deferEmptyText:!0,scrollOffset:19,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",cellSelectorDepth:4,rowSelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,initTemplates:function(){var a=this.templates||{};a.master||(a.master=new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header"><div class="x-grid3-header-inner"><div class="x-grid3-header-offset" style="{ostyle}">{header}</div></div><div class="x-clear"></div></div>','<div class="x-grid3-scroller"><div class="x-grid3-body" style="{bstyle}">{body}</div><a href="#" class="x-grid3-focus" tabIndex="-1"></a></div>',"</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>")),a.header||(a.header=new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">','<thead><tr class="x-grid3-hd-row">{cells}</tr></thead>',"</table>")),a.hcell||(a.hcell=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"",'{value}<img class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div></td>")),a.body||(a.body=new Ext.Template("{rows}")),a.row||(a.row=new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}"><table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody><tr>{cells}</tr>",this.enableRowBody?'<tr class="x-grid3-row-body-tr" style="{bodyStyle}"><td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on"><div class="x-grid3-row-body">{body}</div></td></tr>':"","</tbody></table></div>")),a.cell||(a.cell=new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>"));for(var b in a){var c=a[b];c&&"function"==typeof c.compile&&!c.compiled&&(c.disableFormats=!0,c.compile())}this.templates=a,this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(a){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=a,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var a=Ext.Element,b=this.grid.getGridEl().dom.firstChild,c=b.childNodes;this.el=new a(b),this.mainWrap=new a(c[0]),this.mainHd=new a(this.mainWrap.dom.firstChild),this.grid.hideHeaders&&this.mainHd.setDisplayed(!1),this.innerHd=this.mainHd.dom.firstChild,this.scroller=new a(this.mainWrap.dom.childNodes[1]),this.forceFit&&this.scroller.setStyle("overflow-x","hidden"),this.mainBody=new a(this.scroller.dom.firstChild),this.focusEl=new a(this.scroller.dom.childNodes[1]),this.focusEl.swallowEvent("click",!0),this.resizeMarker=new a(c[1]),this.resizeProxy=new a(c[2])},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(a){return a?this.fly(a).findParent(this.cellSelector,this.cellSelectorDepth):!1},findCellIndex:function(a,b){var c=this.findCell(a);return!c||b&&!this.fly(c).hasClass(b)?!1:this.getCellIndex(c)},getCellIndex:function(a){if(a){var b=a.className.match(this.colRe);if(b&&b[1])return this.cm.getIndexById(b[1])}return!1},findHeaderCell:function(a){var b=this.findCell(a);return b&&this.fly(b).hasClass(this.hdCls)?b:null},findHeaderIndex:function(a){return this.findCellIndex(a,this.hdCls)},findRow:function(a){return a?this.fly(a).findParent(this.rowSelector,this.rowSelectorDepth):!1},findRowIndex:function(a){var b=this.findRow(a);return b?b.rowIndex:!1},getRow:function(a){return this.getRows()[a]},getCell:function(a,b){return this.getRow(a).getElementsByTagName("td")[b]},getHeaderCell:function(a){return this.mainHd.dom.getElementsByTagName("td")[a]},addRowClass:function(a,b){var c=this.getRow(a);c&&this.fly(c).addClass(b)},removeRowClass:function(a,b){var c=this.getRow(a);c&&this.fly(c).removeClass(b)},removeRow:function(a){Ext.removeNode(this.getRow(a)),this.syncFocusEl(a)},removeRows:function(a,b){for(var c=this.mainBody.dom,d=a;b>=d;d++)Ext.removeNode(c.childNodes[a]);this.syncFocusEl(a)},getScrollState:function(){var a=this.scroller.dom;return{left:a.scrollLeft,top:a.scrollTop}},restoreScroll:function(a){var b=this.scroller.dom;b.scrollLeft=a.left,b.scrollTop=a.top},scrollToTop:function(){this.scroller.dom.scrollTop=0,this.scroller.dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.scroller.dom;this.grid.fireEvent("bodyscroll",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.scroller.dom;this.innerHd.scrollLeft=a.scrollLeft,this.innerHd.scrollLeft=a.scrollLeft},updateSortIcon:function(a,b){var c=this.sortClasses,d=this.mainHd.select("td").removeClass(c);d.item(a).addClass(c["DESC"==b?1:0])},updateAllColumnWidths:function(){for(var a=this.getTotalWidth(),b=this.cm.getColumnCount(),c=[],d=0;b>d;d++)c[d]=this.getColumnWidth(d);this.innerHd.firstChild.style.width=this.getOffsetWidth(),this.innerHd.firstChild.firstChild.style.width=a,this.mainBody.dom.style.width=a;for(var d=0;b>d;d++){var e=this.getHeaderCell(d);e.style.width=c[d]}for(var f,g,h=this.getRows(),d=0,i=h.length;i>d;d++)if(f=h[d],f.style.width=a,f.firstChild){f.firstChild.style.width=a,g=f.firstChild.rows[0];for(var j=0;b>j;j++)g.childNodes[j].style.width=c[j]}this.onAllColumnWidthsUpdated(c,a)},updateColumnWidth:function(a){var b=this.getColumnWidth(a),c=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth(),this.innerHd.firstChild.firstChild.style.width=c,this.mainBody.dom.style.width=c;var d=this.getHeaderCell(a);d.style.width=b;for(var e,f=this.getRows(),g=0,h=f.length;h>g;g++)e=f[g],e.style.width=c,e.firstChild&&(e.firstChild.style.width=c,e.firstChild.rows[0].childNodes[a].style.width=b);this.onColumnWidthUpdated(a,b,c)},updateColumnHidden:function(a,b){var c=this.getTotalWidth();this.innerHd.firstChild.style.width=this.getOffsetWidth(),this.innerHd.firstChild.firstChild.style.width=c,this.mainBody.dom.style.width=c;var d=b?"none":"",e=this.getHeaderCell(a);e.style.display=d;for(var f,g=this.getRows(),h=0,i=g.length;i>h;h++)f=g[h],f.style.width=c,f.firstChild&&(f.firstChild.style.width=c,f.firstChild.rows[0].childNodes[a].style.display=d);this.onColumnHiddenUpdated(a,b,c),delete this.lastViewWidth,this.layout()},doRender:function(a,b,c,d,e,f){for(var g,h,i,j=this.templates,k=j.cell,l=j.row,m=e-1,n="width:"+this.getTotalWidth()+";",o=[],p={},q={tstyle:n},r=0,s=b.length;s>r;r++){i=b[r],g=[];for(var t=r+d,u=0;e>u;u++)h=a[u],p.id=h.id,p.css=0==u?"x-grid3-cell-first ":u==m?"x-grid3-cell-last ":"",p.attr=p.cellAttr="",p.value=h.renderer(i.data[h.name],p,i,t,u,c),p.style=h.style,(void 0==p.value||""===p.value)&&(p.value="&#160;"),i.dirty&&"undefined"!=typeof i.modified[h.name]&&(p.css+=" x-grid3-dirty-cell"),g[g.length]=k.apply(p);var v=[];f&&(t+1)%2==0&&(v[0]="x-grid3-row-alt"),i.dirty&&(v[1]=" x-grid3-dirty-row"),q.cols=e,this.getRowClass&&(v[2]=this.getRowClass(i,t,q,c)),q.alt=v.join(" "),q.cells=g.join(""),o[o.length]=l.apply(q)}return o.join("")},processRows:function(a,b){if(this.ds&&!(this.ds.getCount()<1)){var c=this.getRows();b=b||!this.grid.stripeRows,a=a||0,Ext.each(c,function(a,c){a.rowIndex=c,a.className=a.className.replace(this.rowClsRe," "),b||(c+1)%2!==0||(a.className+=" x-grid3-row-alt")}),0===a&&Ext.fly(c[0]).addClass(this.firstRowCls),Ext.fly(c[c.length-1]).addClass(this.lastRowCls)}},afterRender:function(){this.mainBody.dom.innerHTML=this.renderRows()||"&nbsp;",this.processRows(0,!0),this.deferEmptyText!==!0&&this.applyEmptyText()},renderUI:function(){var a=this.renderHeaders(),b=this.templates.body.apply({rows:"&nbsp;"}),c=this.templates.master.apply({body:b,header:a,ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"}),d=this.grid;d.getGridEl().dom.innerHTML=c,this.initElements(),Ext.fly(this.innerHd).on("click",this.handleHdDown,this),this.mainHd.on("mouseover",this.handleHdOver,this),this.mainHd.on("mouseout",this.handleHdOut,this),this.mainHd.on("mousemove",this.handleHdMove,this),this.scroller.on("scroll",this.syncScroll,this),d.enableColumnResize!==!1&&(this.splitZone=new Ext.grid.GridView.SplitDragZone(d,this.mainHd.dom)),d.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(d,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(d,this.mainHd.dom)),d.enableHdMenu!==!1&&(d.enableColumnHide!==!1&&(this.colMenu=new Ext.menu.Menu({id:d.id+"-hcols-menu"}),this.colMenu.on("beforeshow",this.beforeColMenuShow,this),this.colMenu.on("itemclick",this.handleHdMenuClick,this)),this.hmenu=new Ext.menu.Menu({id:d.id+"-hctx"}),this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"}),d.enableColumnHide!==!1&&this.hmenu.add("-",{id:"columns",hideOnClick:!1,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"}),this.hmenu.on("itemclick",this.handleHdMenuClick,this)),d.trackMouseOver&&(this.mainBody.on("mouseover",this.onRowOver,this),this.mainBody.on("mouseout",this.onRowOut,this)),(d.enableDragDrop||d.enableDrag)&&(this.dragZone=new Ext.grid.GridDragZone(d,{ddGroup:d.ddGroup||"GridDD"})),this.updateHeaderSortState()},layout:function(){if(this.mainBody){var a=this.grid,b=a.getGridEl(),c=b.getSize(!0),d=c.width;if(!(20>d||c.height<20)){if(a.autoHeight)this.scroller.dom.style.overflow="visible",Ext.isWebKit&&(this.scroller.dom.style.position="static");else{this.el.setSize(c.width,c.height);var e=this.mainHd.getHeight(),f=c.height-e;this.scroller.setSize(d,f),this.innerHd&&(this.innerHd.style.width=d+"px")}this.forceFit?this.lastViewWidth!=d&&(this.fitColumns(!1,!1),this.lastViewWidth=d):(this.autoExpand(),this.syncHeaderScroll()),this.onLayout(d,f)}}},onLayout:function(){},onColumnWidthUpdated:function(){},onAllColumnWidthsUpdated:function(){},onColumnHiddenUpdated:function(){},updateColumnText:function(){},afterMove:function(){},init:function(a){this.grid=a,this.initTemplates(),this.initData(a.store,a.colModel),this.initUI(a)},getColumnId:function(a){return this.cm.getColumnId(a)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.scrollOffset+"px"},renderHeaders:function(){for(var a=this.cm,b=this.templates,c=b.hcell,d=[],e={},f=a.getColumnCount(),g=f-1,h=0;f>h;h++)e.id=a.getColumnId(h),e.value=a.getColumnHeader(h)||"",e.style=this.getColumnStyle(h,!0),e.tooltip=this.getColumnTooltip(h),e.css=0==h?"x-grid3-cell-first ":h==g?"x-grid3-cell-last ":"","right"==a.config[h].align?e.istyle="padding-right:16px":delete e.istyle,d[d.length]=c.apply(e);return b.header.apply({cells:d.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},getColumnTooltip:function(a){var b=this.cm.getColumnTooltip(a);return b?Ext.QuickTips.isEnabled()?'ext:qtip="'+b+'"':'title="'+b+'"':""},beforeUpdate:function(){this.grid.stopEditing(!0)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders(),this.innerHd.firstChild.style.width=this.getOffsetWidth(),this.innerHd.firstChild.firstChild.style.width=this.getTotalWidth()},focusRow:function(a){this.focusCell(a,0,!1)},focusCell:function(a,b,c){this.syncFocusEl(this.ensureVisible(a,b,c)),Ext.isGecko?this.focusEl.focus():this.focusEl.focus.defer(1,this.focusEl)},resolveCell:function(a,b,c){if("number"!=typeof a&&(a=a.rowIndex),!this.ds)return null;if(0>a||a>=this.ds.getCount())return null;b=void 0!==b?b:0;var d,e=this.getRow(a),f=this.cm,g=f.getColumnCount();if(c!==!1||0!==b){for(;g>b&&f.isHidden(b);)b++;d=this.getCell(a,b)}return{row:e,cell:d}},getResolvedXY:function(a){if(!a)return null;var b=(this.scroller.dom,a.cell),c=a.row;return b?Ext.fly(b).getXY():[this.el.getX(),Ext.fly(c).getY()]},syncFocusEl:function(a,b,c){var d=a;Ext.isArray(d)||(a=Math.min(a,Math.max(0,this.getRows().length-1)),d=this.getResolvedXY(this.resolveCell(a,b,c))),this.focusEl.setXY(d||this.scroller.getXY())},ensureVisible:function(a,b,c){var d=this.resolveCell(a,b,c);if(d&&d.row){for(var e=d.row,f=d.cell,g=this.scroller.dom,h=0,i=e,j=this.el.dom;i&&i!=j;)h+=i.offsetTop,i=i.offsetParent;h-=this.mainHd.dom.offsetHeight;var k=h+e.offsetHeight,l=g.clientHeight,j=parseInt(g.scrollTop,10),m=j+l;if(j>h?g.scrollTop=h:k>m&&(g.scrollTop=k-l),c!==!1){var n=parseInt(f.offsetLeft,10),o=n+f.offsetWidth,p=parseInt(g.scrollLeft,10),q=p+g.clientWidth;p>n?g.scrollLeft=n:o>q&&(g.scrollLeft=o-g.clientWidth)}return this.getResolvedXY(d)}},insertRows:function(a,b,c,d){var e=a.getCount()-1;if(!d&&0===b&&c>=e)this.refresh();else{d||this.fireEvent("beforerowsinserted",this,b,c);var f=this.renderRows(b,c),g=this.getRow(b);if(g)0===b&&Ext.fly(this.getRow(0)).removeClass(this.firstRowCls),Ext.DomHelper.insertHtml("beforeBegin",g,f);else{var h=this.getRow(e-1);h&&Ext.fly(h).removeClass(this.lastRowCls),Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,f)}d?(0===b||b>=e)&&Ext.fly(this.getRow(b)).addClass(0===b?this.firstRowCls:this.lastRowCls):(this.fireEvent("rowsinserted",this,b,c),this.processRows(b))}this.syncFocusEl(b)},deleteRows:function(a,b,c){a.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,b,c),this.removeRows(b,c),this.processRows(b),this.fireEvent("rowsdeleted",this,b,c))},getColumnStyle:function(a,b){var c=b?"":this.cm.config[a].css||"";c+="width:"+this.getColumnWidth(a)+";",this.cm.isHidden(a)&&(c+="display:none;");var d=this.cm.config[a].align;return d&&(c+="text-align:"+d+";"),c},getColumnWidth:function(a){var b=this.cm.getColumnWidth(a);return"number"==typeof b?(Ext.isBorderBox||Ext.isWebKit&&!Ext.isSafari2?b:b-this.borderWidth>0?b-this.borderWidth:0)+"px":b},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(a,b,c){var d,e=this.cm,f=e.getTotalWidth(!1),g=this.grid.getGridEl().getWidth(!0)-this.scrollOffset;if(!(20>g)){var h=g-f;if(0===h)return!1;var i=e.getColumnCount(!0),j=i-("number"==typeof c?1:0);0===j&&(j=1,c=void 0);var k,l=e.getColumnCount(),m=[],n=0,o=0;for(d=0;l>d;d++)e.isHidden(d)||e.isFixed(d)||d===c||(k=e.getColumnWidth(d),m.push(d),n=d,m.push(k),o+=k);for(var p=(g-e.getTotalWidth())/o;m.length;)k=m.pop(),d=m.pop(),e.setColumnWidth(d,Math.max(this.grid.minColumnWidth,Math.floor(k+k*p)),!0);if((f=e.getTotalWidth(!1))>g){var q=j!=i?c:n;e.setColumnWidth(q,Math.max(1,e.getColumnWidth(q)-(f-g)),!0)}return a!==!0&&this.updateAllColumnWidths(),!0}},autoExpand:function(a){var b=this.grid,c=this.cm;if(!this.userResized&&b.autoExpandColumn){var d=c.getTotalWidth(!1),e=this.grid.getGridEl().getWidth(!0)-this.scrollOffset;if(d!=e){var f=c.getIndexById(b.autoExpandColumn),g=c.getColumnWidth(f),h=Math.min(Math.max(e-d+g,b.autoExpandMin),b.autoExpandMax);h!=g&&(c.setColumnWidth(f,h,!0),a!==!0&&this.updateColumnWidth(f,h))}}},getColumnData:function(){for(var a=[],b=this.cm,c=b.getColumnCount(),d=0;c>d;d++){var e=b.getDataIndex(d);a[d]={name:"undefined"==typeof e?this.ds.fields.get(d).name:e,renderer:b.getRenderer(d),id:b.getColumnId(d),style:this.getColumnStyle(d)}}return a},renderRows:function(a,b){var c=this.grid,d=c.colModel,e=c.store,f=c.stripeRows,g=d.getColumnCount();if(e.getCount()<1)return"";var h=this.getColumnData();a=a||0,b="undefined"==typeof b?e.getCount()-1:b;var i=e.getRange(a,b);return this.doRender(h,i,e,a,g,f)},renderBody:function(){var a=this.renderRows()||"&nbsp;";return this.templates.body.apply({rows:a})},refreshRow:function(a){var b,c=this.ds;if("number"==typeof a){if(b=a,a=c.getAt(b),!a)return}else if(b=c.indexOf(a),0>b)return;this.insertRows(c,b,b,!0),this.getRow(b).rowIndex=b,this.onRemove(c,a,b+1,!0),this.fireEvent("rowupdated",this,b,a)},refresh:function(a){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var b=this.renderBody();this.mainBody.update(b).setWidth(this.getTotalWidth()),a===!0&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")},updateHeaderSortState:function(){var a=this.ds.getSortState();if(a){this.sortState&&this.sortState.field==a.field&&this.sortState.direction==a.direction||this.grid.fireEvent("sortchange",this.grid,a),this.sortState=a;var b=this.cm.findColumnIndex(a.field);if(-1!=b){var c=a.direction;this.updateSortIcon(b,c)}}},destroy:function(){if(this.colMenu&&(Ext.menu.MenuMgr.unregister(this.colMenu),this.colMenu.destroy(),delete this.colMenu),this.hmenu&&(Ext.menu.MenuMgr.unregister(this.hmenu),this.hmenu.destroy(),delete this.hmenu),this.grid.enableColumnMove){var a=Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id];if(a){for(var b in a){if(!a[b].config.isTarget&&a[b].dragElId){var c=a[b].dragElId;a[b].unreg(),Ext.get(c).remove()}else a[b].config.isTarget&&(a[b].proxyTop.remove(),a[b].proxyBottom.remove(),a[b].unreg());Ext.dd.DDM.locationCache[b]&&delete Ext.dd.DDM.locationCache[b]}delete Ext.dd.DDM.ids["gridHeader"+this.grid.getGridEl().id]}}this.dragZone&&this.dragZone.unreg(),Ext.fly(this.innerHd).removeAllListeners(),Ext.removeNode(this.innerHd),Ext.destroy(this.resizeMarker,this.resizeProxy,this.focusEl,this.mainBody,this.scroller,this.mainHd,this.mainWrap,this.dragZone,this.splitZone,this.columnDrag,this.columnDrop),this.initData(null,null),Ext.EventManager.removeResizeListener(this.onWindowResize,this),this.purgeListeners()},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var a=this.grid.ownerCt;a&&a.getLayout()?a.on("afterlayout",function(){this.fitColumns(!0,!0),this.updateHeaders()},this,{single:!0}):this.fitColumns(!0,!0)}else this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.renderUI()},initData:function(a,b){this.ds&&(this.ds.un("load",this.onLoad,this),this.ds.un("datachanged",this.onDataChange,this),this.ds.un("add",this.onAdd,this),this.ds.un("remove",this.onRemove,this),this.ds.un("update",this.onUpdate,this),this.ds.un("clear",this.onClear,this)),a&&(a.on("load",this.onLoad,this),a.on("datachanged",this.onDataChange,this),a.on("add",this.onAdd,this),a.on("remove",this.onRemove,this),a.on("update",this.onUpdate,this),a.on("clear",this.onClear,this)),this.ds=a,this.cm&&(this.cm.un("configchange",this.onColConfigChange,this),this.cm.un("widthchange",this.onColWidthChange,this),this.cm.un("headerchange",this.onHeaderChange,this),this.cm.un("hiddenchange",this.onHiddenChange,this),this.cm.un("columnmoved",this.onColumnMove,this),this.cm.un("columnlockchange",this.onColumnLock,this)),b&&(delete this.lastViewWidth,b.on("configchange",this.onColConfigChange,this),b.on("widthchange",this.onColWidthChange,this),b.on("headerchange",this.onHeaderChange,this),b.on("hiddenchange",this.onHiddenChange,this),b.on("columnmoved",this.onColumnMove,this),b.on("columnlockchange",this.onColumnLock,this)),this.cm=b},onDataChange:function(){this.refresh(),this.updateHeaderSortState(),this.syncFocusEl(0)},onClear:function(){this.refresh(),this.syncFocusEl(0)},onUpdate:function(a,b){this.refreshRow(b)},onAdd:function(a,b,c){this.insertRows(a,c,c+(b.length-1))},onRemove:function(a,b,c,d){d!==!0&&this.fireEvent("beforerowremoved",this,c,b),this.removeRow(c),d!==!0&&(this.processRows(c),this.applyEmptyText(),this.fireEvent("rowremoved",this,c,b))},onLoad:function(){this.scrollToTop()},onColWidthChange:function(a,b,c){this.updateColumnWidth(b,c)},onHeaderChange:function(){this.updateHeaders()},onHiddenChange:function(a,b,c){this.updateColumnHidden(b,c)},onColumnMove:function(a,b,c){this.indexMap=null;var d=this.getScrollState();this.refresh(!0),this.restoreScroll(d),this.afterMove(c),this.grid.fireEvent("columnmove",b,c)},onColConfigChange:function(){delete this.lastViewWidth,this.indexMap=null,this.refresh(!0)},initUI:function(a){a.on("headerclick",this.onHeaderClick,this)},initEvents:function(){},onHeaderClick:function(a,b){!this.headersDisabled&&this.cm.isSortable(b)&&(a.stopEditing(!0),a.store.sort(this.cm.getDataIndex(b)))},onRowOver:function(a,b){var c;(c=this.findRowIndex(b))!==!1&&this.addRowClass(c,"x-grid3-row-over")},onRowOut:function(a,b){var c;(c=this.findRowIndex(b))===!1||a.within(this.getRow(c),!0)||this.removeRowClass(c,"x-grid3-row-over")},handleWheel:function(a){a.stopPropagation()},onRowSelect:function(a){this.addRowClass(a,"x-grid3-row-selected")},onRowDeselect:function(a){this.removeRowClass(a,"x-grid3-row-selected")},onCellSelect:function(a,b){var c=this.getCell(a,b);c&&this.fly(c).addClass("x-grid3-cell-selected")},onCellDeselect:function(a,b){var c=this.getCell(a,b);c&&this.fly(c).removeClass("x-grid3-cell-selected")},onColumnSplitterMoved:function(a,b){this.userResized=!0;var c=this.grid.colModel;c.setColumnWidth(a,b,!0),this.forceFit?(this.fitColumns(!0,!1,a),this.updateAllColumnWidths()):(this.updateColumnWidth(a,b),this.syncHeaderScroll()),this.grid.fireEvent("columnresize",a,b)},handleHdMenuClick:function(a){var b=this.hdCtxIndex,c=this.cm,d=this.ds;switch(a.id){case"asc":d.sort(c.getDataIndex(b),"ASC");break;case"desc":d.sort(c.getDataIndex(b),"DESC");break;default:if(b=c.getIndexById(a.id.substr(4)),-1!=b){if(a.checked&&c.getColumnsBy(this.isHideableColumn,this).length<=1)return this.onDenyColumnHide(),!1;c.setHidden(b,a.checked)}}return!0},isHideableColumn:function(a){return!a.hidden&&!a.fixed},beforeColMenuShow:function(){var a=this.cm,b=a.getColumnCount();this.colMenu.removeAll();for(var c=0;b>c;c++)a.config[c].fixed!==!0&&a.config[c].hideable!==!1&&this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+a.getColumnId(c),text:a.getColumnHeader(c),checked:!a.isHidden(c),hideOnClick:!1,disabled:a.config[c].hideable===!1}))},handleHdDown:function(a,b){if(Ext.fly(b).hasClass("x-grid3-hd-btn")){a.stopEvent();var c=this.findHeaderCell(b);Ext.fly(c).addClass("x-grid3-hd-menu-open");var d=this.getCellIndex(c);this.hdCtxIndex=d;var e=this.hmenu.items,f=this.cm;e.get("asc").setDisabled(!f.isSortable(d)),e.get("desc").setDisabled(!f.isSortable(d)),this.hmenu.on("hide",function(){Ext.fly(c).removeClass("x-grid3-hd-menu-open")},this,{single:!0}),this.hmenu.show(b,"tl-bl?")}},handleHdOver:function(a,b){var c=this.findHeaderCell(b);if(c&&!this.headersDisabled){this.activeHd=c,this.activeHdIndex=this.getCellIndex(c);var d=this.fly(c);this.activeHdRegion=d.getRegion(),this.cm.isMenuDisabled(this.activeHdIndex)||(d.addClass("x-grid3-hd-over"),this.activeHdBtn=d.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=c.firstChild.offsetHeight-1+"px"))}},handleHdMove:function(a){if(this.activeHd&&!this.headersDisabled){var b=this.splitHandleWidth||5,c=this.activeHdRegion,d=a.getPageX(),e=this.activeHd.style;e.cursor=d-c.left<=b&&this.cm.isResizable(this.activeHdIndex-1)?Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":c.right-d<=(this.activeHdBtn?2:b)&&this.cm.isResizable(this.activeHdIndex)?Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize":""}},handleHdOut:function(a,b){var c=this.findHeaderCell(b);!c||Ext.isIE&&a.within(c,!0)||(this.activeHd=null,this.fly(c).removeClass("x-grid3-hd-over"),c.style.cursor="")},hasRows:function(){var a=this.mainBody.dom.firstChild;return a&&1==a.nodeType&&"x-grid-empty"!=a.className},bind:function(a,b){this.initData(a,b)}}),Ext.grid.GridView.SplitDragZone=function(a,b){this.grid=a,this.view=a.getView(),this.marker=this.view.resizeMarker,this.proxy=this.view.resizeProxy,Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,b,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.scroll=!1,this.hw=this.view.splitHandleWidth||5},Ext.extend(Ext.grid.GridView.SplitDragZone,Ext.dd.DDProxy,{b4StartDrag:function(a,b){this.view.headersDisabled=!0;var c=this.view.mainWrap.getHeight();this.marker.setHeight(c),this.marker.show(),this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]),this.proxy.setHeight(c);var d=this.cm.getColumnWidth(this.cellIndex),e=Math.max(d-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(e,1e3),this.setYConstraint(0,0),this.minX=a-e,this.maxX=a+1e3,this.startPos=a,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,b)},handleMouseDown:function(a){var b=this.view.findHeaderCell(a.getTarget());if(b){var c=this.view.fly(b).getXY(),d=c[0],e=(c[1],a.getXY()),f=e[0],g=(e[1],b.offsetWidth),h=!1;if(f-d<=this.hw?h=-1:d+g-f<=this.hw&&(h=0),h!==!1){this.cm=this.grid.colModel;
var i=this.view.getCellIndex(b);if(-1==h){if(0>i+h)return;for(;this.cm.isHidden(i+h);)if(--h,0>i+h)return}this.cellIndex=i+h,this.split=b.dom,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(a)}},endDrag:function(a){this.marker.hide();var b=this.view,c=Math.max(this.minX,a.getPageX()),d=c-this.startPos;b.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+d),setTimeout(function(){b.headersDisabled=!1},50)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",gidSeed:1e3,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this),this.state={};var a=this.grid.getSelectionModel();a.on(a.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this),this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div>',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')),this.startGroup.compile(),this.endGroup="</div></div>"},findGroup:function(a){return Ext.fly(a).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(){if(this.enableGrouping&&!this.ignoreAdd){var a=this.getScrollState();this.refresh(),this.restoreScroll(a)}else this.enableGrouping||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(a,b){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var c=document.getElementById(b._groupId);c&&c.childNodes[1].childNodes.length<1&&Ext.removeNode(c),this.applyEmptyText()},refreshRow:function(){1==this.ds.getCount()?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var a=this.getGroupField(),b=this.hmenu.items.get("groupBy");b&&b.setDisabled(this.cm.config[this.hdCtxIndex].groupable===!1);var c=this.hmenu.items.get("showGroups");c&&(c.setDisabled(!a&&this.cm.config[this.hdCtxIndex].groupable===!1),c.setChecked(!!a,!0))},renderUI:function(){Ext.grid.GroupingView.superclass.renderUI.call(this),this.mainBody.on("mousedown",this.interceptMouse,this),this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{id:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({id:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this))},onGroupByClick:function(){this.grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex)),this.beforeMenuShow()},onShowGroupsClick:function(a,b){b?this.onGroupByClick():this.grid.store.clearGrouping()},toggleGroup:function(a,b){this.grid.stopEditing(!0),a=Ext.getDom(a);var c=Ext.fly(a);b=void 0!==b?b:c.hasClass("x-grid-group-collapsed"),this.state[c.dom.id]=b,c[b?"removeClass":"addClass"]("x-grid-group-collapsed")},toggleAllGroups:function(a){for(var b=this.getGroups(),c=0,d=b.length;d>c;c++)this.toggleGroup(b[c],a)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},interceptMouse:function(a){var b=a.getTarget(".x-grid-group-hd",this.mainBody);b&&(a.stopEvent(),this.toggleGroup(b.parentNode))},getGroup:function(a,b,c,d,e,f){var g=c?c(a,{},b,d,e,f):String(a);return""===g&&(g=this.cm.config[e].emptyGroupText||this.emptyGroupText),g},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){Ext.grid.GroupingView.superclass.afterRender.call(this),this.grid.deferRowRender&&this.updateGroupWidths()},renderRows:function(){var a=this.getGroupField(),b=!!a;if(this.hideGroupedColumn){var c=this.cm.findColumnIndex(a);if(b||void 0===this.lastGroupField){if(b&&void 0===this.lastGroupField)this.lastGroupField=a,this.cm.setHidden(c,!0);else if(b&&void 0!==this.lastGroupField&&a!==this.lastGroupField){this.mainBody.update("");var d=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(d,!1),this.lastGroupField=a,this.cm.setHidden(c,!0)}}else this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(a,b,c,d,e,f){if(b.length<1)return"";var g=this.getGroupField(),h=this.cm.findColumnIndex(g);if(this.enableGrouping=!!g,!this.enableGrouping||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);var i,j,k,l,m="width:"+this.getTotalWidth()+";",n=this.grid.getGridEl().id,o=this.cm.config[h],p=o.groupRenderer||o.renderer,q=this.showGroupName?(o.groupName||o.header)+": ":"",r=[];for(j=0,k=b.length;k>j;j++){var s=d+j,t=b[j],u=t.data[g],v=this.getGroup(u,t,p,s,h,c);if(i&&i.group==v)i.rs.push(t);else{l=n+"-gp-"+g+"-"+Ext.util.Format.htmlEncode(v);var w="undefined"!=typeof this.state[l]?!this.state[l]:this.startCollapsed,x=w?"x-grid-group-collapsed":"";i={group:v,gvalue:u,text:q+v,groupId:l,startRow:s,rs:[t],cls:x,style:m},r.push(i)}t._groupId=l}var y=[];for(j=0,k=r.length;k>j;j++){var v=r[j];this.doGroupStart(y,v,a,c,e),y[y.length]=Ext.grid.GroupingView.superclass.doRender.call(this,a,v.rs,c,v.startRow,e,f),this.doGroupEnd(y,v,a,c,e)}return y.join("")},getGroupId:function(a){{var b=this.grid.getGridEl().id,c=this.getGroupField(),d=this.cm.findColumnIndex(c),e=this.cm.config[d],f=e.groupRenderer||e.renderer;this.getGroup(a,{data:{}},f,0,d,this.ds)}return b+"-gp-"+c+"-"+Ext.util.Format.htmlEncode(a)},doGroupStart:function(a,b){a[a.length]=this.startGroup.apply(b)},doGroupEnd:function(a){a[a.length]=this.endGroup},getRows:function(){if(!this.enableGrouping)return Ext.grid.GroupingView.superclass.getRows.call(this);for(var a,b=[],c=this.getGroups(),d=0,e=c.length;e>d;d++){a=c[d].childNodes[1].childNodes;for(var f=0,g=a.length;g>f;f++)b[b.length]=a[f]}return b},updateGroupWidths:function(){if(this.enableGrouping&&this.hasRows())for(var a=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.scrollOffset)+"px",b=this.getGroups(),c=0,d=b.length;d>c;c++)b[c].firstChild.style.width=a},onColumnWidthUpdated:function(a,b,c){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,a,b,c),this.updateGroupWidths()},onAllColumnWidthsUpdated:function(a,b){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,a,b),this.updateGroupWidths()},onColumnHiddenUpdated:function(a,b,c){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,a,b,c),this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(a,b){if(this.enableGrouping){var c=this.getRow(b);if(c&&!c.offsetParent){var d=this.findGroup(c);this.toggleGroup(d,!0)}}},groupByText:"Group By This Field",showGroupsText:"Show in Groups"}),Ext.grid.GroupingView.GROUP_ID=1e3,Ext.grid.HeaderDragZone=function(a,b,c){this.grid=a,this.view=a.getView(),this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDragZone.superclass.constructor.call(this,b),c&&(this.setHandleElId(Ext.id(b)),this.setOuterHandleElId(Ext.id(c))),this.scroll=!1},Ext.extend(Ext.grid.HeaderDragZone,Ext.dd.DragZone,{maxDragWidth:120,getDragData:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findHeaderCell(b);return c?{ddel:c.firstChild,header:c}:!1},onInitDrag:function(){this.view.headersDisabled=!0;var a=this.dragData.ddel.cloneNode(!0);return a.id=Ext.id(),a.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(a),!0},afterValidDrop:function(){var a=this.view;setTimeout(function(){a.headersDisabled=!1},50)},afterInvalidDrop:function(){var a=this.view;setTimeout(function(){a.headersDisabled=!1},50)}}),Ext.grid.HeaderDropZone=function(a){this.grid=a,this.view=a.getView(),this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0),this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0),this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100),this.setStyle("visibility","hidden")},this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDropZone.superclass.constructor.call(this,a.getGridEl().dom)},Ext.extend(Ext.grid.HeaderDropZone,Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,getTargetFromEvent:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findCellIndex(b);return c!==!1?this.view.getHeaderCell(c):void 0},nextVisible:function(a){var b=this.view,c=this.grid.colModel;for(a=a.nextSibling;a;){if(!c.isHidden(b.getCellIndex(a)))return a;a=a.nextSibling}return null},prevVisible:function(a){var b=this.view,c=this.grid.colModel;for(a=a.prevSibling;a;){if(!c.isHidden(b.getCellIndex(a)))return a;a=a.prevSibling}return null},positionIndicator:function(a,b,c){var d,e,f=Ext.lib.Event.getPageX(c),g=Ext.lib.Dom.getRegion(b.firstChild),h=g.top+this.proxyOffsets[1];g.right-f<=(g.right-g.left)/2?(d=g.right+this.view.borderWidth,e="after"):(d=g.left,e="before");var i=this.view.getCellIndex(a),j=this.view.getCellIndex(b);if(this.grid.colModel.isFixed(j))return!1;var k=this.grid.colModel.isLocked(j);return"after"==e&&j++,j>i&&j--,i==j&&k==this.grid.colModel.isLocked(i)?!1:(d+=this.proxyOffsets[0],this.proxyTop.setLeftTop(d,h),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(d,h+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),e)},onNodeEnter:function(a,b,c,d){d.header!=a&&this.positionIndicator(d.header,a,c)},onNodeOver:function(a,b,c,d){var e=!1;return d.header!=a&&(e=this.positionIndicator(d.header,a,c)),e||(this.proxyTop.hide(),this.proxyBottom.hide()),e?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(){this.proxyTop.hide(),this.proxyBottom.hide()},onNodeDrop:function(a,b,c,d){var e=d.header;if(e!=a){var f=this.grid.colModel,g=Ext.lib.Event.getPageX(c),h=Ext.lib.Dom.getRegion(a.firstChild),i=h.right-g<=(h.right-h.left)/2?"after":"before",j=this.view.getCellIndex(e),k=this.view.getCellIndex(a),l=f.isLocked(k);return"after"==i&&k++,k>j&&k--,j==k&&l==f.isLocked(j)?!1:(f.setLocked(j,l,!0),f.moveColumn(j,k),this.grid.fireEvent("columnmove",j,k),!0)}return!1}}),Ext.grid.GridView.ColumnDragZone=function(a,b){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,a,b,null),this.proxy.el.addClass("x-grid3-col-dd")},Ext.extend(Ext.grid.GridView.ColumnDragZone,Ext.grid.HeaderDragZone,{handleMouseDown:function(){},callHandleMouseDown:function(a){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,a)}}),Ext.grid.SplitDragZone=function(a,b,c){this.grid=a,this.view=a.getView(),this.proxy=this.view.resizeProxy,Ext.grid.SplitDragZone.superclass.constructor.call(this,b,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.setHandleElId(Ext.id(b)),this.setOuterHandleElId(Ext.id(c)),this.scroll=!1},Ext.extend(Ext.grid.SplitDragZone,Ext.dd.DDProxy,{fly:Ext.Element.fly,b4StartDrag:function(a,b){this.view.headersDisabled=!0,this.proxy.setHeight(this.view.mainWrap.getHeight());var c=this.cm.getColumnWidth(this.cellIndex),d=Math.max(c-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(d,1e3),this.setYConstraint(0,0),this.minX=a-d,this.maxX=a+1e3,this.startPos=a,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,b)},handleMouseDown:function(a){ev=Ext.EventObject.setEvent(a);var b=this.fly(ev.getTarget());b.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(b.dom),this.split=b.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(a){this.view.headersDisabled=!1;var b=Math.max(this.minX,Ext.lib.Event.getPageX(a)),c=b-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+c)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.GridDragZone=function(a,b){this.view=a.getView(),Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,b),this.view.lockedBody&&(this.setHandleElId(Ext.id(this.view.mainBody.dom)),this.setOuterHandleElId(Ext.id(this.view.lockedBody.dom))),this.scroll=!1,this.grid=a,this.ddel=document.createElement("div"),this.ddel.className="x-grid-dd-wrap"},Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findRowIndex(b);if(c!==!1){var d=this.grid.selModel;return(!d.isSelected(c)||a.hasModifier())&&d.handleMouseDown(this.grid,c,a),{grid:this.grid,ddel:this.ddel,rowIndex:c,selections:d.getSelections()}}return!1},onInitDrag:function(){this.dragData;this.ddel.innerHTML=this.grid.getDragDropText(),this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(){return!1},onEndDrag:function(){},onValidDrop:function(){this.hideProxy()},beforeInvalidDrop:function(){}}),Ext.grid.ColumnModel=function(a){this.defaultWidth=100,this.defaultSortable=!1,a.columns?(Ext.apply(this,a),this.setConfig(a.columns,!0)):this.setConfig(a,!0),this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","columnlockchange","configchange"),Ext.grid.ColumnModel.superclass.constructor.call(this)},Ext.extend(Ext.grid.ColumnModel,Ext.util.Observable,{getColumnId:function(a){return this.config[a].id},setConfig:function(a,b){if(!b){delete this.totalWidth;for(var c=0,d=this.config.length;d>c;c++){var e=this.config[c];e.editor&&e.editor.destroy()}}this.config=a,this.lookup={};for(var c=0,d=a.length;d>c;c++){var e=a[c];"string"==typeof e.renderer&&(e.renderer=Ext.util.Format[e.renderer]),"undefined"==typeof e.id&&(e.id=c),e.editor&&e.editor.isFormField&&(e.editor=new Ext.grid.GridEditor(e.editor)),this.lookup[e.id]=e}b||this.fireEvent("configchange",this)},getColumnById:function(a){return this.lookup[a]},getIndexById:function(a){for(var b=0,c=this.config.length;c>b;b++)if(this.config[b].id==a)return b;return-1},moveColumn:function(a,b){var c=this.config[a];this.config.splice(a,1),this.config.splice(b,0,c),this.dataMap=null,this.fireEvent("columnmoved",this,a,b)},isLocked:function(a){return this.config[a].locked===!0},setLocked:function(a,b,c){this.isLocked(a)!=b&&(this.config[a].locked=b,c||this.fireEvent("columnlockchange",this,a,b))},getTotalLockedWidth:function(){for(var a=0,b=0;b<this.config.length;b++)this.isLocked(b)&&!this.isHidden(b)&&(this.totalWidth+=this.getColumnWidth(b));return a},getLockedCount:function(){for(var a=0,b=this.config.length;b>a;a++)if(!this.isLocked(a))return a},getColumnCount:function(a){if(a===!0){for(var b=0,c=0,d=this.config.length;d>c;c++)this.isHidden(c)||b++;return b}return this.config.length},getColumnsBy:function(a,b){for(var c=[],d=0,e=this.config.length;e>d;d++){var f=this.config[d];a.call(b||this,f,d)===!0&&(c[c.length]=f)}return c},isSortable:function(a){return"undefined"==typeof this.config[a].sortable?this.defaultSortable:this.config[a].sortable},isMenuDisabled:function(a){return!!this.config[a].menuDisabled},getRenderer:function(a){return this.config[a].renderer?this.config[a].renderer:Ext.grid.ColumnModel.defaultRenderer},setRenderer:function(a,b){this.config[a].renderer=b},getColumnWidth:function(a){return this.config[a].width||this.defaultWidth},setColumnWidth:function(a,b,c){this.config[a].width=b,this.totalWidth=null,c||this.fireEvent("widthchange",this,a,b)},getTotalWidth:function(a){if(!this.totalWidth){this.totalWidth=0;for(var b=0,c=this.config.length;c>b;b++)(a||!this.isHidden(b))&&(this.totalWidth+=this.getColumnWidth(b))}return this.totalWidth},getColumnHeader:function(a){return this.config[a].header},setColumnHeader:function(a,b){this.config[a].header=b,this.fireEvent("headerchange",this,a,b)},getColumnTooltip:function(a){return this.config[a].tooltip},setColumnTooltip:function(a,b){this.config[a].tooltip=b},getDataIndex:function(a){return this.config[a].dataIndex},setDataIndex:function(a,b){this.config[a].dataIndex=b},findColumnIndex:function(a){for(var b=this.config,c=0,d=b.length;d>c;c++)if(b[c].dataIndex==a)return c;return-1},isCellEditable:function(a){return this.config[a].editable||"undefined"==typeof this.config[a].editable&&this.config[a].editor?!0:!1},getCellEditor:function(a){return this.config[a].editor},setEditable:function(a,b){this.config[a].editable=b},isHidden:function(a){return this.config[a].hidden},isFixed:function(a){return this.config[a].fixed},isResizable:function(a){return a>=0&&this.config[a].resizable!==!1&&this.config[a].fixed!==!0},setHidden:function(a,b){var c=this.config[a];c.hidden!==b&&(c.hidden=b,this.totalWidth=null,this.fireEvent("hiddenchange",this,a,b))},setEditor:function(a,b){Ext.destroy(this.config[a].editor),this.config[a].editor=b},destroy:function(){for(var a=this.config,b=0,a=this.config,c=a.length;c>b;b++)Ext.destroy(a[b].editor);this.purgeListeners()}}),Ext.grid.ColumnModel.defaultRenderer=function(a){return"string"==typeof a&&a.length<1?"&#160;":a},Ext.grid.DefaultColumnModel=Ext.grid.ColumnModel,Ext.grid.AbstractSelectionModel=function(){this.locked=!1,Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},Ext.extend(Ext.grid.AbstractSelectionModel,Ext.util.Observable,{init:function(a){this.grid=a,this.initEvents()},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},destroy:function(){this.purgeListeners()}}),Ext.grid.RowSelectionModel=function(a){Ext.apply(this,a),this.selections=new Ext.util.MixedCollection(!1,function(a){return a.id}),this.last=!1,this.lastActive=!1,this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect"),Ext.grid.RowSelectionModel.superclass.constructor.call(this)},Ext.extend(Ext.grid.RowSelectionModel,Ext.grid.AbstractSelectionModel,{singleSelect:!1,initEvents:function(){this.grid.enableDragDrop||this.grid.enableDrag||this.grid.on("rowmousedown",this.handleMouseDown,this),this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:function(a){if(!a.shiftKey||this.singleSelect)this.selectPrevious(!1);else if(this.last!==!1&&this.lastActive!==!1){var b=this.last;this.selectRange(this.last,this.lastActive-1),this.grid.getView().focusRow(this.lastActive),b!==!1&&(this.last=b)}else this.selectFirstRow()},down:function(a){if(!a.shiftKey||this.singleSelect)this.selectNext(!1);else if(this.last!==!1&&this.lastActive!==!1){var b=this.last;this.selectRange(this.last,this.lastActive+1),this.grid.getView().focusRow(this.lastActive),b!==!1&&(this.last=b)}else this.selectFirstRow()},scope:this});var a=this.grid.view;a.on("refresh",this.onRefresh,this),a.on("rowupdated",this.onRowUpdated,this),a.on("rowremoved",this.onRemove,this)},onRefresh:function(){var a,b=this.grid.store,c=this.getSelections();this.clearSelections(!0);for(var d=0,e=c.length;e>d;d++){var f=c[d];-1!=(a=b.indexOfId(f.id))&&this.selectRow(a,!0)}c.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this)},onRemove:function(a,b,c){this.selections.remove(c)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(a,b,c){this.isSelected(c)&&a.onRowSelect(b)},selectRecords:function(a,b){b||this.clearSelections();for(var c=this.grid.store,d=0,e=a.length;e>d;d++)this.selectRow(c.indexOf(a[d]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(a){this.selectRow(this.grid.store.getCount()-1,a)},selectNext:function(a){return this.hasNext()?(this.selectRow(this.last+1,a),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(a){return this.hasPrevious()?(this.selectRow(this.last-1,a),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(a,b){for(var c=this.getSelections(),d=0,e=c.length;e>d;d++)if(a.call(b||this,c[d],d)===!1)return!1;return!0},clearSelections:function(a){if(!this.isLocked()){if(a!==!0){var b=this.grid.store,c=this.selections;c.each(function(a){this.deselectRow(b.indexOfId(a.id))},this),c.clear()}else this.selections.clear();this.last=!1}},selectAll:function(){if(!this.isLocked()){this.selections.clear();for(var a=0,b=this.grid.store.getCount();b>a;a++)this.selectRow(a,!0)}},hasSelection:function(){return this.selections.length>0},isSelected:function(a){var b="number"==typeof a?this.grid.store.getAt(a):a;return b&&this.selections.key(b.id)?!0:!1},isIdSelected:function(a){return this.selections.key(a)?!0:!1},handleMouseDown:function(a,b,c){if(0===c.button&&!this.isLocked()){var d=this.grid.getView();if(c.shiftKey&&!this.singleSelect&&this.last!==!1){var e=this.last;this.selectRange(e,b,c.ctrlKey),this.last=e,d.focusRow(b)}else{var f=this.isSelected(b);c.ctrlKey&&f?this.deselectRow(b):(!f||this.getCount()>1)&&(this.selectRow(b,c.ctrlKey||c.shiftKey),d.focusRow(b))}}},selectRows:function(a,b){b||this.clearSelections();for(var c=0,d=a.length;d>c;c++)this.selectRow(a[c],!0)},selectRange:function(a,b,c){if(!this.isLocked())if(c||this.clearSelections(),b>=a)for(var d=a;b>=d;d++)this.selectRow(d,!0);else for(var d=a;d>=b;d--)this.selectRow(d,!0)},deselectRange:function(a,b,c){if(!this.isLocked())for(var d=a;b>=d;d++)this.deselectRow(d,c)},selectRow:function(a,b,c){if(!(this.isLocked()||0>a||a>=this.grid.store.getCount()||b&&this.isSelected(a))){var d=this.grid.store.getAt(a);d&&this.fireEvent("beforerowselect",this,a,b,d)!==!1&&((!b||this.singleSelect)&&this.clearSelections(),this.selections.add(d),this.last=this.lastActive=a,c||this.grid.getView().onRowSelect(a),this.fireEvent("rowselect",this,a,d),this.fireEvent("selectionchange",this))}},deselectRow:function(a,b){if(!this.isLocked()){this.last==a&&(this.last=!1),this.lastActive==a&&(this.lastActive=!1);var c=this.grid.store.getAt(a);c&&(this.selections.remove(c),b||this.grid.getView().onRowDeselect(a),this.fireEvent("rowdeselect",this,a,c),this.fireEvent("selectionchange",this))}},restoreLast:function(){this._last&&(this.last=this._last)},acceptsNav:function(a,b,c){return!c.isHidden(b)&&c.isCellEditable(b,a)},onEditorKey:function(a,b){var c,d=b.getKey(),e=this.grid,f=e.activeEditor,g=b.shiftKey;d==b.TAB?(b.stopEvent(),f.completeEdit(),c=g?e.walkCells(f.row,f.col-1,-1,this.acceptsNav,this):e.walkCells(f.row,f.col+1,1,this.acceptsNav,this)):d==b.ENTER?(b.stopEvent(),f.completeEdit(),this.moveEditorOnEnter!==!1&&(c=g?e.walkCells(f.row-1,f.col,-1,this.acceptsNav,this):e.walkCells(f.row+1,f.col,1,this.acceptsNav,this))):d==b.ESC&&f.cancelEdit(),c&&e.startEditing(c[0],c[1])},destroy:function(){this.rowNav&&(this.rowNav.disable(),this.rowNav=null),Ext.grid.RowSelectionModel.superclass.destroy.call(this)}}),Ext.grid.CellSelectionModel=function(a){Ext.apply(this,a),this.selection=null,this.addEvents("beforecellselect","cellselect","selectionchange"),Ext.grid.CellSelectionModel.superclass.constructor.call(this)},Ext.extend(Ext.grid.CellSelectionModel,Ext.grid.AbstractSelectionModel,{initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this),this.grid.getGridEl().on(Ext.isIE||Ext.isWebKit&&!Ext.isSafari2?"keydown":"keypress",this.handleKeyDown,this);var a=this.grid.view;a.on("refresh",this.onViewChange,this),a.on("rowupdated",this.onRowUpdated,this),a.on("beforerowremoved",this.clearSelections,this),a.on("beforerowsinserted",this.clearSelections,this),this.grid.isEditor&&this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(a){this.select(a.row,a.column,!1,!0,a.record)},onRowUpdated:function(a,b,c){this.selection&&this.selection.record==c&&a.onCellSelect(b,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(a){var b=this.selection;b&&(a!==!0&&this.grid.view.onCellDeselect(b.cell[0],b.cell[1]),this.selection=null,this.fireEvent("selectionchange",this,null))},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(a,b,c,d){0!==d.button||this.isLocked()||this.select(b,c)},select:function(a,b,c,d,e){if(this.fireEvent("beforecellselect",this,a,b)!==!1){if(this.clearSelections(),e=e||this.grid.store.getAt(a),this.selection={record:e,cell:[a,b]},!c){var f=this.grid.getView();f.onCellSelect(a,b),d!==!0&&f.focusCell(a,b)}this.fireEvent("cellselect",this,a,b),this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(a,b,c){return!c.isHidden(b)},handleKeyDown:function(a){if(a.isNavKeyPress()){var b=this.grid,c=this.selection;if(!c){a.stopEvent();var d=b.walkCells(0,0,1,this.isSelectable,this);return d&&this.select(d[0],d[1]),void 0}var e,f=this,g=function(a,c,d){return b.walkCells(a,c,d,f.isSelectable,f)},h=a.getKey(),i=c.cell[0],j=c.cell[1];switch(h){case a.TAB:e=a.shiftKey?g(i,j-1,-1):g(i,j+1,1);break;case a.DOWN:e=g(i+1,j,1);break;case a.UP:e=g(i-1,j,-1);break;case a.RIGHT:e=g(i,j+1,1);break;case a.LEFT:e=g(i,j-1,-1);break;case a.ENTER:if(b.isEditor&&!b.editing)return b.startEditing(i,j),a.stopEvent(),void 0}e&&(this.select(e[0],e[1]),a.stopEvent())}},acceptsNav:function(a,b,c){return!c.isHidden(b)&&c.isCellEditable(b,a)},onEditorKey:function(a,b){var c,d=b.getKey(),e=this.grid,f=e.activeEditor;d==b.TAB?(c=b.shiftKey?e.walkCells(f.row,f.col-1,-1,this.acceptsNav,this):e.walkCells(f.row,f.col+1,1,this.acceptsNav,this),b.stopEvent()):d==b.ENTER?(f.completeEdit(),b.stopEvent()):d==b.ESC&&(b.stopEvent(),f.cancelEdit()),c&&e.startEditing(c[0],c[1])}}),Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this),this.selModel||(this.selModel=new Ext.grid.CellSelectionModel),this.activeEditor=null,this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this),this.on("bodyscroll",this.stopEditing,this,[!0]),this.on("columnresize",this.stopEditing,this,[!0]),1==this.clicksToEdit?this.on("cellclick",this.onCellDblClick,this):("auto"==this.clicksToEdit&&this.view.mainBody&&this.view.mainBody.on("mousedown",this.onAutoEditClick,this),this.on("celldblclick",this.onCellDblClick,this))},onCellDblClick:function(a,b,c){this.startEditing(b,c)},onAutoEditClick:function(a,b){if(0===a.button){var c=this.view.findRowIndex(b),d=this.view.findCellIndex(b);if(c!==!1&&d!==!1)if(this.stopEditing(),this.selModel.getSelectedCell){var e=this.selModel.getSelectedCell();e&&e[0]===c&&e[1]===d&&this.startEditing(c,d)}else this.selModel.isSelected(c)&&this.startEditing(c,d)}},onEditComplete:function(a,b,c){this.editing=!1,this.activeEditor=null,a.un("specialkey",this.selModel.onEditorKey,this.selModel);var d=a.record,e=this.colModel.getDataIndex(a.col);if(b=this.postEditValue(b,c,d,e),String(b)!==String(c)){var f={grid:this,record:d,field:e,originalValue:c,value:b,row:a.row,column:a.col,cancel:!1};this.fireEvent("validateedit",f)===!1||f.cancel||(d.set(e,f.value),delete f.cancel,this.fireEvent("afteredit",f))}this.view.focusCell(a.row,a.col)},startEditing:function(a,b){if(this.stopEditing(),this.colModel.isCellEditable(b,a)){this.view.ensureVisible(a,b,!0);var c=this.store.getAt(a),d=this.colModel.getDataIndex(b),e={grid:this,record:c,field:d,value:c.data[d],row:a,column:b,cancel:!1};if(this.fireEvent("beforeedit",e)!==!1&&!e.cancel){this.editing=!0;var f=this.colModel.getCellEditor(b,a);f.rendered||f.render(this.view.getEditorParent(f)),function(){f.row=a,f.col=b,f.record=c,f.on("complete",this.onEditComplete,this,{single:!0}),f.on("specialkey",this.selModel.onEditorKey,this.selModel),this.activeEditor=f;var e=this.preEditValue(c,d);f.startEdit(this.view.getCell(a,b).firstChild,void 0===e?"":e)}.defer(50,this)}}},preEditValue:function(a,b){var c=a.data[b];return this.autoEncode&&"string"==typeof c?Ext.util.Format.htmlDecode(c):c},postEditValue:function(a){return this.autoEncode&&"string"==typeof a?Ext.util.Format.htmlEncode(a):a},stopEditing:function(a){this.activeEditor&&this.activeEditor[a===!0?"cancelEdit":"completeEdit"](),this.activeEditor=null}}),Ext.reg("editorgrid",Ext.grid.EditorGridPanel),Ext.grid.GridEditor=function(a,b){Ext.grid.GridEditor.superclass.constructor.call(this,a,b),a.monitorTab=!1},Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1}),Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]),Ext.grid.PropertyStore=function(a,b){this.grid=a,this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord}),this.store.on("update",this.onUpdate,this),b&&this.setSource(b),Ext.grid.PropertyStore.superclass.constructor.call(this)},Ext.extend(Ext.grid.PropertyStore,Ext.util.Observable,{setSource:function(a){this.source=a,this.store.removeAll();var b=[];for(var c in a)this.isEditableValue(a[c])&&b.push(new Ext.grid.PropertyRecord({name:c,value:a[c]},c));this.store.loadRecords({records:b},{},!0)},onUpdate:function(a,b,c){if(c==Ext.data.Record.EDIT){var d=b.data.value,e=b.modified.value;this.grid.fireEvent("beforepropertychange",this.source,b.id,d,e)!==!1?(this.source[b.id]=d,b.commit(),this.grid.fireEvent("propertychange",this.source,b.id,d,e)):b.reject()}},getProperty:function(a){return this.store.getAt(a)},isEditableValue:function(a){return Ext.isDate(a)?!0:"object"==typeof a||"function"==typeof a?!1:!0},setValue:function(a,b){this.source[a]=b,this.store.getById(a).set("value",b)},getSource:function(){return this.source}}),Ext.grid.PropertyColumnModel=function(a,b){this.grid=a;var c=Ext.grid;c.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name",menuDisabled:!0},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value",menuDisabled:!0}]),this.store=b;var d=Ext.form,e=new d.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:"true"},{tag:"option",value:"false",html:"false"}]},getValue:function(){return"true"==this.el.value}});this.editors={date:new c.GridEditor(new d.DateField({selectOnFocus:!0})),string:new c.GridEditor(new d.TextField({selectOnFocus:!0})),number:new c.GridEditor(new d.NumberField({selectOnFocus:!0,style:"text-align:left;"})),"boolean":new c.GridEditor(e)},this.renderCellDelegate=this.renderCell.createDelegate(this),this.renderPropDelegate=this.renderProp.createDelegate(this)},Ext.extend(Ext.grid.PropertyColumnModel,Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",renderDate:function(a){return a.dateFormat(this.dateFormat)},renderBool:function(a){return a?"true":"false"},isCellEditable:function(a){return 1==a},getRenderer:function(a){return 1==a?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(a){var b=a;return Ext.isDate(a)?b=this.renderDate(a):"boolean"==typeof a&&(b=this.renderBool(a)),Ext.util.Format.htmlEncode(b)},getPropertyName:function(a){var b=this.grid.propertyNames;return b&&b[a]?b[a]:a},getCellEditor:function(a,b){var c=this.store.getProperty(b),d=c.data.name,e=c.data.value;return this.grid.customEditors[d]?this.grid.customEditors[d]:Ext.isDate(e)?this.editors.date:"number"==typeof e?this.editors.number:"boolean"==typeof e?this.editors["boolean"]:this.editors.string},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);for(var a in this.editors)Ext.destroy(a)
}}),Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){this.customEditors=this.customEditors||{},this.lastEditRow=null;var a=new Ext.grid.PropertyStore(this);this.propStore=a;var b=new Ext.grid.PropertyColumnModel(this,a);a.store.sort("name","ASC"),this.addEvents("beforepropertychange","propertychange"),this.cm=b,this.ds=a.store,Ext.grid.PropertyGrid.superclass.initComponent.call(this),this.selModel.on("beforecellselect",function(a,b,c){return 0===c?(this.startEditing.defer(200,this,[b,1]),!1):void 0},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments),this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments),this.source&&this.setSource(this.source)},setSource:function(a){this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()}}),Ext.reg("propertygrid",Ext.grid.PropertyGrid),Ext.grid.RowNumberer=function(a){Ext.apply(this,a),this.rowspan&&(this.renderer=this.renderer.createDelegate(this))},Ext.grid.RowNumberer.prototype={header:"",width:23,sortable:!1,fixed:!0,menuDisabled:!0,dataIndex:"",id:"numberer",rowspan:void 0,renderer:function(a,b,c,d){return this.rowspan&&(b.cellAttr='rowspan="'+this.rowspan+'"'),d+1}},Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:!1,menuDisabled:!0,fixed:!0,dataIndex:"",id:"checker",initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this),this.grid.on("render",function(){var a=this.grid.getView();a.mainBody.on("mousedown",this.onMouseDown,this),Ext.fly(a.innerHd).on("mousedown",this.onHdMouseDown,this)},this)},onMouseDown:function(a,b){if(0===a.button&&"x-grid3-row-checker"==b.className){a.stopEvent();var c=a.getTarget(".x-grid3-row");if(c){var d=c.rowIndex;this.isSelected(d)?this.deselectRow(d):this.selectRow(d,!0)}}},onHdMouseDown:function(a,b){if("x-grid3-hd-checker"==b.className){a.stopEvent();var c=Ext.fly(b.parentNode),d=c.hasClass("x-grid3-hd-checker-on");d?(c.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(c.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(){return'<div class="x-grid3-row-checker">&#160;</div>'}}),Ext.LoadMask=function(a,b){if(this.el=Ext.get(a),Ext.apply(this,b),this.store)this.store.on("beforeload",this.onBeforeLoad,this),this.store.on("load",this.onLoad,this),this.store.on("loadexception",this.onLoad,this),this.removeMask=Ext.value(this.removeMask,!1);else{var c=this.el.getUpdater();c.showLoadIndicator=!1,c.on("beforeupdate",this.onBeforeLoad,this),c.on("update",this.onLoad,this),c.on("failure",this.onLoad,this),this.removeMask=Ext.value(this.removeMask,!0)}},Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("loadexception",this.onLoad,this);else{var a=this.el.getUpdater();a.un("beforeupdate",this.onBeforeLoad,this),a.un("update",this.onLoad,this),a.un("failure",this.onLoad,this)}}},Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:!1,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this),this.addEvents("update")},onRender:function(a,b){Ext.ProgressBar.superclass.onRender.call(this,a,b);var c=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=b?c.insertBefore(b,{cls:this.baseCls},!0):c.append(a,{cls:this.baseCls},!0),this.id&&(this.el.dom.id=this.id);var d=this.el.dom.firstChild;if(this.progressBar=Ext.get(d.firstChild),this.textEl)this.textEl=Ext.get(this.textEl),delete this.textTopEl;else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var e=Ext.get(d.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,e.dom.firstChild]),this.textEl.setWidth(d.offsetWidth)}this.progressBar.setHeight(d.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this),this.value?this.updateProgress(this.value,this.text):this.updateText(this.text)},updateProgress:function(a,b,c){if(this.value=a||0,b&&this.updateText(b),this.rendered){var d=Math.floor(a*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(d,c===!0||c!==!1&&this.animate),this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(d)}return this.fireEvent("update",this,a,b),this},wait:function(a){if(!this.waitTimer){var b=this;a=a||{},this.updateText(a.text),this.waitTimer=Ext.TaskMgr.start({run:function(b){var c=a.increment||10;this.updateProgress(((b+c)%c+1)*(100/c)*.01,null,a.animate)},interval:a.interval||1e3,duration:a.duration,onStop:function(){a.fn&&a.fn.apply(a.scope||this),this.reset()},scope:b})}return this},isWaiting:function(){return null!=this.waitTimer},updateText:function(a){return this.text=a||"&#160;",this.rendered&&this.textEl.update(this.text),this},syncProgressBar:function(){return this.value&&this.updateProgress(this.value,this.text),this},setSize:function(a,b){if(Ext.ProgressBar.superclass.setSize.call(this,a,b),this.textTopEl){var c=this.el.dom.firstChild;this.textEl.setSize(c.offsetWidth,c.offsetHeight)}return this.syncProgressBar(),this},reset:function(a){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null),a===!0&&this.hide(),this}}),Ext.reg("progress",Ext.ProgressBar),Ext.Slider=Ext.extend(Ext.BoxComponent,{vertical:!1,minValue:0,maxValue:100,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,initComponent:function(){void 0===this.value&&(this.value=this.minValue),Ext.Slider.superclass.initComponent.call(this),this.keyIncrement=Math.max(this.increment,this.keyIncrement),this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),this.vertical&&Ext.apply(this,Ext.Slider.Vertical)},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{cls:"x-slider-thumb"},{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}},Ext.Slider.superclass.onRender.apply(this,arguments),this.endEl=this.el.first(),this.innerEl=this.endEl.first(),this.thumb=this.innerEl.first(),this.halfThumb=(this.vertical?this.thumb.getHeight():this.thumb.getWidth())/2,this.focusEl=this.thumb.next(),this.initEvents()},initEvents:function(){this.thumb.addClassOnOver("x-slider-thumb-over"),this.el.on("mousedown",this.onMouseDown,this),this.el.on("keydown",this.onKeyDown,this),this.focusEl.swallowEvent("click",!0),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(this.thumb),this.on("beforedestroy",this.tracker.destroy,this.tracker)},onMouseDown:function(a){if(!this.disabled){if(this.clickToChange&&a.target!=this.thumb.dom){var b=this.innerEl.translatePoints(a.getXY());this.onClickChange(b)}this.focus()}},onClickChange:function(a){a.top>this.clickRange[0]&&a.top<this.clickRange[1]&&this.setValue(Math.round(this.reverseValue(a.left)),void 0,!0)},onKeyDown:function(a){if(this.disabled)return a.preventDefault(),void 0;var b=a.getKey();switch(b){case a.UP:case a.RIGHT:a.stopEvent(),a.ctrlKey?this.setValue(this.maxValue,void 0,!0):this.setValue(this.value+this.keyIncrement,void 0,!0);break;case a.DOWN:case a.LEFT:a.stopEvent(),a.ctrlKey?this.setValue(this.minValue,void 0,!0):this.setValue(this.value-this.keyIncrement,void 0,!0);break;default:a.preventDefault()}},doSnap:function(a){if(!this.increment||1==this.increment||!a)return a;var b=a,c=this.increment,d=a%c;return 0!=d&&(b-=d,2*d>c?b+=c:-c>2*d&&(b-=c)),b.constrain(this.minValue,this.maxValue)},afterRender:function(){if(Ext.Slider.superclass.afterRender.apply(this,arguments),void 0!==this.value){var a=this.normalizeValue(this.value);a!==this.value?(delete this.value,this.setValue(a,!1)):this.moveThumb(this.translateValue(a),!1)}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return 0==b?a:a/b},normalizeValue:function(a){return"number"!=typeof a&&(a=parseInt(a)),a=Math.round(a),a=this.doSnap(a),a=a.constrain(this.minValue,this.maxValue)},setValue:function(a,b,c){a=this.normalizeValue(a),a!==this.value&&this.fireEvent("beforechange",this,a,this.value)!==!1&&(this.value=a,this.moveThumb(this.translateValue(a),b!==!1),this.fireEvent("change",this,a),c&&this.fireEvent("changecomplete",this,a))},translateValue:function(a){var b=this.getRatio();return a*b-this.minValue*b-this.halfThumb},reverseValue:function(a){var b=this.getRatio();return(a+this.halfThumb+this.minValue*b)/b},moveThumb:function(a,b){b&&this.animate!==!1?this.thumb.shift({left:a,stopFx:!0,duration:.35}):this.thumb.setLeft(a)},focus:function(){this.focusEl.focus(10)},onBeforeDragStart:function(){return!this.disabled},onDragStart:function(a){this.thumb.addClass("x-slider-thumb-drag"),this.dragging=!0,this.dragStartValue=this.value,this.fireEvent("dragstart",this,a)},onDrag:function(a){var b=this.innerEl.translatePoints(this.tracker.getXY());this.setValue(Math.round(this.reverseValue(b.left)),!1),this.fireEvent("drag",this,a)},onDragEnd:function(a){this.thumb.removeClass("x-slider-thumb-drag"),this.dragging=!1,this.fireEvent("dragend",this,a),this.dragStartValue!=this.value&&this.fireEvent("changecomplete",this,this.value)},onDisable:function(){if(Ext.Slider.superclass.onDisable.call(this),this.thumb.addClass(this.disabledClass),Ext.isIE){var a=this.thumb.getXY();this.thumb.hide(),this.innerEl.addClass(this.disabledClass).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})),this.thumbHolder.show().setXY(a)}},onEnable:function(){Ext.Slider.superclass.onEnable.call(this),this.thumb.removeClass(this.disabledClass),Ext.isIE&&(this.innerEl.removeClass(this.disabledClass).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),this.thumb.show(),this.syncThumb())},onResize:function(a){this.innerEl.setWidth(a-(this.el.getPadding("l")+this.endEl.getPadding("r"))),this.syncThumb()},syncThumb:function(){this.rendered&&this.moveThumb(this.translateValue(this.value))},getValue:function(){return this.value}}),Ext.reg("slider",Ext.Slider),Ext.Slider.Vertical={onResize:function(a,b){this.innerEl.setHeight(b-(this.el.getPadding("t")+this.endEl.getPadding("b"))),this.syncThumb()},getRatio:function(){var a=this.innerEl.getHeight(),b=this.maxValue-this.minValue;return a/b},moveThumb:function(a,b){b&&this.animate!==!1?this.thumb.shift({bottom:a,stopFx:!0,duration:.35}):this.thumb.setBottom(a)},onDrag:function(a){var b=this.innerEl.translatePoints(this.tracker.getXY()),c=this.innerEl.getHeight()-b.top;this.setValue(this.minValue+Math.round(c/this.getRatio()),!1),this.fireEvent("drag",this,a)},onClickChange:function(a){if(a.left>this.clickRange[0]&&a.left<this.clickRange[1]){var b=this.innerEl.getHeight()-a.top;this.setValue(this.minValue+Math.round(b/this.getRatio()),void 0,!0)}}},Ext.StatusBar=Ext.extend(Ext.Toolbar,{cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,activeThreadId:0,initComponent:function(){"right"==this.statusAlign&&(this.cls+=" x-status-right"),Ext.StatusBar.superclass.initComponent.call(this)},afterRender:function(){Ext.StatusBar.superclass.afterRender.call(this);var a="right"==this.statusAlign,b=Ext.get(this.nextBlock());a?this.tr.appendChild(b.dom):b.insertBefore(this.tr.firstChild),this.statusEl=b.createChild({cls:"x-status-text "+(this.iconCls||this.defaultIconCls||""),html:this.text||this.defaultText||""}),this.statusEl.unselectable(),this.spacerEl=b.insertSibling({tag:"td",style:"width:100%",cn:[{cls:"ytb-spacer"}]},a?"before":"after")},setStatus:function(a){if(a=a||{},"string"==typeof a&&(a={text:a}),void 0!==a.text&&this.setText(a.text),void 0!==a.iconCls&&this.setIcon(a.iconCls),a.clear){var b=a.clear,c=this.autoClear,d={useDefaults:!0,anim:!0};"object"==typeof b?(b=Ext.applyIf(b,d),b.wait&&(c=b.wait)):"number"==typeof b?(c=b,b=d):"boolean"==typeof b&&(b=d),b.threadId=this.activeThreadId,this.clearStatus.defer(c,this,[b])}return this},clearStatus:function(a){if(a=a||{},a.threadId&&a.threadId!==this.activeThreadId)return this;var b=a.useDefaults?this.defaultText:"",c=a.useDefaults?this.defaultIconCls?this.defaultIconCls:"":"";return a.anim?this.statusEl.fadeOut({remove:!1,useDisplay:!0,scope:this,callback:function(){this.setStatus({text:b,iconCls:c}),this.statusEl.show()}}):(this.statusEl.hide(),this.setStatus({text:b,iconCls:c}),this.statusEl.show()),this},setText:function(a){return this.activeThreadId++,this.text=a||"",this.rendered&&this.statusEl.update(this.text),this},getText:function(){return this.text},setIcon:function(a){return this.activeThreadId++,a=a||"",this.rendered?(this.currIconCls&&(this.statusEl.removeClass(this.currIconCls),this.currIconCls=null),a.length>0&&(this.statusEl.addClass(a),this.currIconCls=a)):this.currIconCls=a,this},showBusy:function(a){return"string"==typeof a&&(a={text:a}),a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(a)}}),Ext.reg("statusbar",Ext.StatusBar),Ext.History=function(){function a(){var a=top.location.href,b=a.indexOf("#");return b>=0?a.substr(b+1):null}function b(){h.value=i}function c(a){i=a,Ext.History.fireEvent("change",a)}function d(a){var b=['<html><body><div id="state">',a,"</div></body></html>"].join("");try{var c=g.contentWindow.document;return c.open(),c.write(b),c.close(),!0}catch(d){return!1}}function e(){if(!g.contentWindow||!g.contentWindow.document)return setTimeout(e,10),void 0;var f=g.contentWindow.document,h=f.getElementById("state"),i=h?h.innerText:null,k=a();setInterval(function(){f=g.contentWindow.document,h=f.getElementById("state");var e=h?h.innerText:null,j=a();e!==i?(i=e,c(i),top.location.hash=i,k=i,b()):j!==k&&(k=j,d(j))},50),j=!0,Ext.History.fireEvent("ready",Ext.History)}function f(){if(i=h.value?h.value:a(),Ext.isIE)e();else{var d=a();setInterval(function(){var e=a();e!==d&&(d=e,c(d),b())},50),j=!0,Ext.History.fireEvent("ready",Ext.History)}}var g,h,i,j=!1;return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(a,b){return j?(Ext.callback(a,b,[this]),void 0):Ext.isReady?(h=Ext.getDom(Ext.History.fieldId),Ext.isIE&&(g=Ext.getDom(Ext.History.iframeId)),this.addEvents("ready","change"),a&&this.on("ready",a,b,{single:!0}),f(),void 0):(Ext.onReady(function(){Ext.History.init(a,b)}),void 0)},add:function(a,b){return b!==!1&&this.getToken()==a?!0:Ext.isIE?d(a):(top.location.hash=a,!0)},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return j?i:a()}}}(),Ext.apply(Ext.History,new Ext.util.Observable),Ext.debug={},function(){function a(){function a(){b.setWidth(Ext.getBody().getViewSize().width)}var c=new Ext.debug.ScriptsPanel,d=new Ext.debug.LogPanel,e=new Ext.debug.DomTree,f=new Ext.TabPanel({activeTab:0,border:!1,tabPosition:"bottom",items:[{title:"Debug Console",layout:"border",items:[d,c]},{title:"DOM Inspector",layout:"border",items:[e]}]});b=new Ext.Panel({id:"x-debug-browser",title:"Console",collapsible:!0,animCollapse:!1,style:"position:absolute;left:0;bottom:0;",height:200,logView:d,layout:"fit",tools:[{id:"close",handler:function(){b.destroy(),b=null,Ext.EventManager.removeResizeListener(a)}}],items:f}),b.render(document.body),b.resizer=new Ext.Resizable(b.el,{minHeight:50,handles:"n",pinned:!0,transparent:!0,resizeElement:function(){var a=this.proxy.getBox();return this.proxy.hide(),b.setHeight(a.height),a}}),Ext.EventManager.onWindowResize(a),a()}var b;Ext.apply(Ext,{log:function(){b||a(),b.logView.log.apply(b.logView,arguments)},logf:function(){Ext.log(String.format.apply(String,arguments))},dump:function(a){if("string"==typeof a||"number"==typeof a||"undefined"==typeof a||Ext.isDate(a))Ext.log(a);else if(a)if("object"!=typeof a)Ext.log("Unknown return type");else if(Ext.isArray(a))Ext.log("["+a.join(",")+"]");else{var b=["{\n"];for(var c in a){var d=typeof a[c];"function"!=d&&"object"!=d&&b.push(String.format("  {0}: {1},\n",c,a[c]))}var e=b.join("");e.length>3&&(e=e.substr(0,e.length-2)),Ext.log(e+"\n}")}else Ext.log("null")},_timers:{},time:function(a){a=a||"def",Ext._timers[a]=(new Date).getTime()},timeEnd:function(a,b){var c=(new Date).getTime();a=a||"def";var d=String.format("{0} ms",c-Ext._timers[a]);return Ext._timers[a]=(new Date).getTime(),b!==!1&&Ext.log("Timer "+("def"==a?d:a+": "+d)),d}})}(),Ext.debug.ScriptsPanel=Ext.extend(Ext.Panel,{id:"x-debug-scripts",region:"east",minWidth:200,split:!0,width:350,border:!1,layout:"anchor",style:"border-width:0 0 0 1px;",initComponent:function(){this.scriptField=new Ext.form.TextArea({anchor:"100% -26",style:"border-width:0;"}),this.trapBox=new Ext.form.Checkbox({id:"console-trap",boxLabel:"Trap Errors",checked:!0}),this.toolbar=new Ext.Toolbar([{text:"Run",scope:this,handler:this.evalScript},{text:"Clear",scope:this,handler:this.clear},"->",this.trapBox," "," "]),this.items=[this.toolbar,this.scriptField],Ext.debug.ScriptsPanel.superclass.initComponent.call(this)},evalScript:function(){var s=this.scriptField.getValue();if(this.trapBox.getValue())try{var rt=eval(s);Ext.dump(void 0===rt?"(no return)":rt)}catch(e){Ext.log(e.message||e.descript)}else{var rt=eval(s);Ext.dump(void 0===rt?"(no return)":rt)}},clear:function(){this.scriptField.setValue(""),this.scriptField.focus()}}),Ext.debug.LogPanel=Ext.extend(Ext.Panel,{autoScroll:!0,region:"center",border:!1,style:"border-width:0 1px 0 0",log:function(){var a=['<div style="padding:5px !important;border-bottom:1px solid #ccc;">',Ext.util.Format.htmlEncode(Array.prototype.join.call(arguments,", ")).replace(/\n/g,"<br />").replace(/\s/g,"&#160;"),"</div>"].join("");this.body.insertHtml("beforeend",a),this.body.scrollTo("top",1e5)},clear:function(){this.body.update(""),this.body.dom.scrollTop=0}}),Ext.debug.DomTree=Ext.extend(Ext.tree.TreePanel,{enableDD:!1,lines:!1,rootVisible:!1,animate:!1,hlColor:"ffff9c",autoScroll:!0,region:"center",border:!1,initComponent:function(){Ext.debug.DomTree.superclass.initComponent.call(this);var a,b=/^\s*$/,c=Ext.util.Format.htmlEncode,d=Ext.util.Format.ellipsis;this.loader=new Ext.tree.TreeLoader,this.loader.load=function(a,e){for(var f,g=a.htmlNode==document.body,h=a.htmlNode.childNodes,i=0;f=h[i];i++)g&&"x-debug-browser"==f.id||(1==f.nodeType?a.appendChild(new Ext.debug.HtmlNode(f)):3!=f.nodeType||b.test(f.nodeValue)||a.appendChild(new Ext.tree.TreeNode({text:"<em>"+d(c(String(f.nodeValue)),35)+"</em>",cls:"x-tree-noicon"})));e()},this.root=this.setRootNode(new Ext.tree.TreeNode("Ext")),a=this.root.appendChild(new Ext.debug.HtmlNode(document.getElementsByTagName("html")[0]))}}),Ext.debug.HtmlNode=function(){function a(a){for(var b,c=0;b=a.childNodes[c];c++)if(1==b.nodeType)return!0;return!1}function b(a,b){for(var g=a.tagName.toLowerCase(),h="&lt;"+g,i=0,j=f.length;j>i;i++){var k=f[i],l=a[k.n];l&&!e.test(l)&&(h+=" "+k.v+"=&quot;<i>"+c(l)+"</i>&quot;")}var m=a.style?a.style.cssText:"";return m&&(h+=" style=&quot;<i>"+c(m.toLowerCase())+"</i>&quot;"),h+=b&&a.childNodes.length>0?"&gt;<em>"+d(c(String(a.innerHTML)),35)+"</em>&lt;/"+g+"&gt;":b?" /&gt;":"&gt;"}var c=Ext.util.Format.htmlEncode,d=Ext.util.Format.ellipsis,e=/^\s*$/,f=[{n:"id",v:"id"},{n:"className",v:"class"},{n:"name",v:"name"},{n:"type",v:"type"},{n:"src",v:"src"},{n:"href",v:"href"}],g=function(c){var d=!a(c);this.htmlNode=c,this.tagName=c.tagName.toLowerCase();var e={text:b(c,d),leaf:d,cls:"x-tree-noicon"};g.superclass.constructor.call(this,e),this.attributes.htmlNode=c,d||(this.on("expand",this.onExpand,this),this.on("collapse",this.onCollapse,this))};return Ext.extend(g,Ext.tree.AsyncTreeNode,{cls:"x-tree-noicon",preventHScroll:!0,refresh:function(c){var d=!a(this.htmlNode);this.setText(b(this.htmlNode,d)),c&&Ext.fly(this.ui.textNode).highlight()},onExpand:function(){!this.closeNode&&this.parentNode?this.closeNode=this.parentNode.insertBefore(new Ext.tree.TreeNode({text:"&lt;/"+this.tagName+"&gt;",cls:"x-tree-noicon"}),this.nextSibling):this.closeNode&&this.closeNode.ui.show()},onCollapse:function(){this.closeNode&&this.closeNode.ui.hide()},render:function(a){g.superclass.render.call(this,a)},highlightNode:function(){},highlight:function(){},frame:function(){this.htmlNode.style.border="1px solid #0000ff"},unframe:function(){this.htmlNode.style.border=""}}),g}(),function(){Ext.namespace("Ext.ux");var a=!1;Ext.ux.TinyMCE=Ext.extend(function(a){var b={tinymceSettings:{accessibility_focus:!1}};Ext.apply(b,a),this.addEvents({editorcreated:!0}),Ext.ux.TinyMCE.superclass.constructor.call(this,b)},Ext.form.Field,{tinymceSettings:null,defaultAutoCreate:{tag:"div",style:{overflow:"hidden"},children:[{tag:"textarea"}]},width:200,height:200,initComponent:function(){this.tinymceSettings=this.tinymceSettings||{},Ext.ux.TinyMCE.initTinyMCE({language:this.tinymceSettings.language})},onRender:function(a,d){Ext.ux.TinyMCE.superclass.onRender.call(this,a,d);var e=this.getEl();"number"==Ext.type(this.width)&&(e.setWidth(this.width),this.tinymceSettings.width=this.width),"number"==Ext.type(this.height)&&(e.setHeight(this.height),this.tinymceSettings.height=this.height);var f=e.child("textarea");this.textareaEl=f,this.name&&f.set({name:this.name});var g=f.id;this.ed=new tinymce.Editor(g,this.tinymceSettings),this.ed.onBeforeRenderUI.add(function(a){a.controlManager=new c(this,a)}.createDelegate(this)),this.ed.onPostRender.add(function(a){a.windowManager=new b(this.ed)}.createDelegate(this)),this.ed.onInit.add(function(){var a=Ext.get(Ext.DomQuery.selectNode("#"+this.ed.id+"_tbl td.mceToolbar")),b=a.select("> table.mceToolbar");Ext.DomHelper.append(a,{tag:"div",style:{overflow:"hidden"}},!0).appendChild(b)}.createDelegate(this)),this.ed.render(),tinyMCE.add(this.ed),this.fireEvent("editorcreated")},getName:function(){return this.rendered&&this.textareaEl.dom.name?this.textareaEl.dom.name:this.name||""},initValue:function(){if(void 0!==this.value)this.setValue(this.value);else{var a=this.getEl().child("textarea",!0);a.value.length>0&&this.setValue(a.value)}},onDestroy:function(){this.ed&&tinyMCE.remove(this.ed),Ext.ux.TinyMCE.superclass.onDestroy.call(this)},getValue:function(){if(!this.rendered||!this.ed.initialized)return this.value;var a=this.ed.getContent();return(a===this.emptyText||void 0===a)&&(a=""),a},setValue:function(a){this.value=a,this.rendered&&this.withEd(function(){this.ed.undoManager.clear(),this.ed.setContent(null===a||void 0===a?"":a),this.ed.startContent=this.ed.getContent({format:"raw"}),this.validate()})},isDirty:function(){return this.disabled||!this.rendered?!1:this.ed.isDirty()},syncValue:function(){this.rendered&&this.ed.initialized&&this.ed.save()},getEd:function(){return this.ed},onResize:function(a,b){this.rendered&&this.withEd(function(){"number"!=Ext.type(a)&&(a=this.el.getWidth()),"number"!=Ext.type(b)&&(b=this.el.getHeight()),this.ed.theme.resizeTo(a,b)})},focus:function(a,b){Ext.ux.TinyMCE.superclass.focus.call(this,a,b)},onFocus:function(){this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.withEd(function(){this.ed.focus(),this.fireEvent("focus",this)}))},withEd:function(a){this.ed?this.ed.initialized?a.call(this):this.ed.onInit.add(function(){a.defer(10,this)}.createDelegate(this)):this.on("editorcreated",function(){this.withEd(a)},this)}}),Ext.apply(Ext.ux.TinyMCE,{tinymcePlugins:"safari,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,noneditable,visualchars,nonbreaking,xhtmlxtras,template",initTinyMCE:function(b){if(!a){var c={mode:"none",plugins:Ext.ux.TinyMCE.tinymcePlugins,theme:"advanced"};Ext.apply(c,b),tinyMCE.init(c),a=!0}}}),Ext.ComponentMgr.registerType("tinymce",Ext.ux.TinyMCE);var b=Ext.extend(function(a){b.superclass.constructor.call(this,a)},tinymce.WindowManager,{alert:function(a,b,c){Ext.MessageBox.alert("",a,function(){b.call(this)},c)},confirm:function(a,b,c){Ext.MessageBox.confirm("",a,function(a){b.call(this,"yes"==a)},c)},open:function(a,b){a=a||{},b=b||{},a.type||(this.bookmark=this.editor.selection.getBookmark("simple")),a.width=parseInt(a.width||320),a.height=parseInt(a.height||240)+(tinymce.isIE?8:0),a.min_width=parseInt(a.min_width||150),a.min_height=parseInt(a.min_height||100),a.max_width=parseInt(a.max_width||2e3),a.max_height=parseInt(a.max_height||2e3),a.movable=a.resizable=!0,b.mce_width=a.width,b.mce_height=a.height,b.mce_inline=!0,this.features=a,this.params=b;var c=new Ext.Window({title:a.name,width:a.width,height:a.height,minWidth:a.min_width,minHeight:a.min_height,resizable:!0,maximizable:1==a.maximizable,minimizable:1==a.minimizable,modal:!0,layout:"fit",items:[{xtype:"iframepanel",defaultSrc:a.url||a.file}]});return b.mce_window_id=c.getId(),c.show(null,function(){a.left&&a.top&&c.setPagePosition(a.left,a.top);var d=c.getPosition();a.left=d[0],a.top=d[1],this.onOpen.dispatch(this,a,b)},this),c.setZIndex(89999),c},close:function(a){if(!a.tinyMCEPopup||!a.tinyMCEPopup.id)return b.superclass.close.call(this,a),void 0;var c=Ext.getCmp(a.tinyMCEPopup.id);c&&(this.onClose.dispatch(this),c.close())},setTitle:function(a,c){if(!a.tinyMCEPopup||!a.tinyMCEPopup.id)return b.superclass.setTitle.call(this,a,c),void 0;var d=Ext.getCmp(a.tinyMCEPopup.id);d&&d.setTitle(c)},resizeBy:function(a,b,c){var d=Ext.getCmp(c);if(d){var e=d.getSize();d.setSize(e.width+a,e.height+b)}},focus:function(a){var b=Ext.getCmp(a);b&&b.setActive(!0)}}),c=Ext.extend(function(a,b,d){this.control=a,c.superclass.constructor.call(this,b,d)},tinymce.ControlManager,{control:null,createDropMenu:function(a,b){var d=c.superclass.createDropMenu.call(this,a,b),e=d.showMenu;return d.showMenu=function(a,b,c){e.call(this,a,b,c),Ext.fly("menu_"+this.id).setStyle("z-index",200001)},d},createColorSplitButton:function(a,b){var d=c.superclass.createColorSplitButton.call(this,a,b),e=d.showMenu;return d.showMenu=function(a,b,c){e.call(this,a,b,c),Ext.fly(this.id+"_menu").setStyle("z-index",200001)},d}})}(),Ext.ux.ToastLars=function(){function a(a,b){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc"><h3>',a,"</h3>",b,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}var b;return{msg:function(c,d,e){var f=e||2;b||(b=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},!0));var g=String.format.apply(String,Array.prototype.slice.call(arguments,1)),h=Ext.DomHelper.append(b,{html:a(c,g)},!0);b.alignTo(document,"br-br",[-50,-5]),h.slideIn("b").pause(f).ghost("",{remove:!0})}}}(),Ext.ux.ToastLarsDiscussion=function(){function a(a,b,c){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc-discussion">',a,"<h3>",b,"</h3>",c,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}var b;return{msg:function(c,d,e,f){var g=f||2;b||(b=Ext.DomHelper.insertFirst(document.body,{id:"msg-div",style:"position:absolute;z-index:100000"},!0));var h=String.format.apply(String,Array.prototype.slice.call(arguments,2)),i=Ext.DomHelper.append(b,{html:a(c,d,h)},!0);b.alignTo(document,"br-br",[-50,-5]),i.slideIn("b").pause(g),i.on("mouseover",function(){i.ghost("",{remove:!0})},i.dom)}}}(),function(){var a=Ext.lib.Event;Ext.ux.ManagedIFrame=function(){var a=Array.prototype.slice.call(arguments,0),b=Ext.get(a[0]),c=a[0];if(b&&b.dom&&"IFRAME"==b.dom.tagName?c=a[1]||{}:(c=a[0]||a[1]||{},b=c.autoCreate?Ext.get(Ext.DomHelper.append(c.autoCreate.parent||document.body,Ext.apply({tag:"iframe",src:Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:""},c.autoCreate))):null),!b||"IFRAME"!=b.dom.tagName)return b;b.dom.name||(b.dom.name=b.dom.id),b.dom.mifId=b.dom.id,this.addEvents({focus:!0,blur:!0,unload:!0,domready:!0,documentloaded:!0,exception:!0,message:!0}),c.listeners&&(this.listeners=c.listeners,Ext.ux.ManagedIFrame.superclass.constructor.call(this)),Ext.apply(b,this),b.addClass("x-managed-iframe"),c.style&&b.applyStyles(c.style),b._maskEl=b.parent(".x-managed-iframe-mask")||b.parent().addClass("x-managed-iframe-mask"),Ext.apply(b,{disableMessaging:c.disableMessaging===!0,loadMask:Ext.apply({msg:"Loading..",msgCls:"x-mask-loading",maskEl:b._maskEl,hideOnReady:!0,disabled:!c.loadMask},c.loadMask),_eventName:Ext.isIE?"onreadystatechange":"onload",_windowContext:null,eventsFollowFrameLinks:"undefined"==typeof c.eventsFollowFrameLinks?!0:c.eventsFollowFrameLinks}),b.dom[b._eventName]=b.loadHandler.createDelegate(b);var d=b.updateManager=new Ext.UpdateManager(b,!0);if(d.showLoadIndicator=c.showLoadIndicator||!1,c.src)b.setSrc(c.src);else{var e=c.html||c.content||!1;e&&b.update.defer(10,b,[e])}return Ext.ux.ManagedIFrame.Manager.register(b)};var b=Ext.ux.ManagedIFrame.Manager=function(){var a={},c=function(a,b){try{var c,d=b?b.mifId:null;(c=this.getFrameById(d||b.id))&&c._frameAction&&c.loadHandler({type:"domready"})}catch(e){}},e={shimCls:"x-frame-shim",register:function(b){return b.manager=this,a[b.id]=a[b.dom.name]={ref:b,elCache:{}},b},deRegister:function(b){b._unHook(),delete a[b.id],delete a[b.dom.name]},hideShims:function(){this.shimApplied&&(Ext.select("."+this.shimCls,!0).removeClass(this.shimCls+"-on"),this.shimApplied=!1)},showShims:function(){this.shimApplied||(this.shimApplied=!0,Ext.select("."+this.shimCls,!0).addClass(this.shimCls+"-on"))},getFrameById:function(b){return"string"==typeof b?a[b]?a[b].ref||null:null:null},getFrameByName:function(a){return this.getFrameById(a)},getFrameHash:function(b){return b.id?a[b.id]:null},eventProxy:function(a){if(a){a=Ext.EventObject.setEvent(a);var b=a.browserEvent||a;return"unload"==a.type&&this._unHook(),b.eventPhase&&b.eventPhase!=(b.AT_TARGET||2)?void 0:this.fireEvent(a.type,a)}},_flyweights:{},destroy:function(){this._domreadySignature&&Ext.EventManager.un.apply(Ext.EventManager,this._domreadySignature)},removeNode:Ext.isIE?function(a,c){a=b.getFrameHash(a),a&&c&&"BODY"!=c.tagName&&(d=a.scratchDiv||(a.scratchDiv=a.getDocument().createElement("div")),d.appendChild(c),d.innerHTML="")}:function(a,b){b&&b.parentNode&&"BODY"!=b.tagName&&b.parentNode.removeChild(b)}};return document.addEventListener&&Ext.EventManager.on.apply(Ext.EventManager,e._domreadySignature=[window,"DOMFrameContentLoaded",c,e]),Ext.EventManager.on(window,"beforeunload",e.destroy,e),e}();b.showDragMask=b.showShims,b.hideDragMask=b.hideShims,b.El=function(a,c,d){var e;if(a=(e=b.getFrameHash(a))?e.ref:null,!a)return null;var f=e.elCache||(e.elCache={}),g=a.getDom(c);if(!g)return null;var h=g.id;return d!==!0&&h&&f[h]?f[h]:(this.dom=g,this.id=h||Ext.id(g),void 0)},b.El.get=function(a,c){var d,e,f,g;if(!a||!c)return null;var h;if(a=(h=b.getFrameHash(a))?h.ref:null,!a)return null;var i=h.elCache||(h.elCache={});
if(!(g=a.getDocument()))return null;if("string"==typeof c)return(e=a.getDom(c))?((d=i[c])?d.dom=e:d=i[c]=new b.El(a,e),d):null;if(c.tagName)return(f=c.id)||(f=Ext.id(c)),(d=i[f])?d.dom=c:d=i[f]=new b.El(a,c),d;if(c instanceof b.El)return c!=h.docEl&&(c.dom=a.getDom(c.id)||c.dom,i[c.id]=c),c;if(c.isComposite)return c;if(Ext.isArray(c))return a.select(c);if(c==g){if(!h.docEl){var j=function(){};j.prototype=b.El.prototype,h.docEl=new j,h.docEl.dom=g}return h.docEl}return null},Ext.apply(b.El.prototype,Ext.Element.prototype),Ext.extend(Ext.ux.ManagedIFrame,Ext.util.Observable,{src:null,resetUrl:Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"about:blank",setSrc:function(a,b,c){var d=a||this.src||this.resetUrl;return this._windowContext=null,this._unHook(),this._frameAction=this.frameInit=this._domReady=!1,Ext.isOpera&&this.reset(),this._callBack=c||!1,this.showMask(),function(){var a="function"==typeof d?d()||"":d;try{this._frameAction=!0,this.dom.src=a,this.frameInit=!0,this.checkDOM()}catch(b){this.fireEvent("exception",this,b)}}.defer(100,this),b!==!0&&(this.src=d),this},reset:function(a,b){return this.dom.src=a||this.resetUrl,"function"==typeof b&&b.defer(100),this},scriptRE:/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,update:function(a,b,c){b=b||this.getUpdateManager().loadScripts||!1,a=Ext.DomHelper.markup(a||""),a=b===!0?a:a.replace(this.scriptRE,"");var d;return(d=this.getDocument())?(this._frameAction=!!a.length,this._windowContext=this.src=null,this._callBack=c||!1,this._unHook(),this.showMask(),d.open(),d.write(a),d.close(),this.frameInit=!0,this._frameAction?this.checkDOM():(this.hideMask(!0),this._callBack&&this._callBack())):(this.hideMask(!0),this._callBack&&this._callBack()),this},disableMessaging:!0,_XFrameMessaging:function(){var a={$:[]},b=function(a,b){return null===a||void 0===a||(b?!1:""===a)};window.sendMessage=function(c,d,e){var f;if(f=arguments.callee.manager){if(c._fromHost){for(var g,h,i=c.tag||d||null,j=b(i)?a.$:a[i.toLowerCase()]||[],k=0,l=j.length;l>k&&(!(g=j[k])||(h=g.apply(g.__scope,arguments)===!1?!1:h,g.__single&&(j[k]=null),h!==!1));k++);return h}c={type:b(d)?"message":"message:"+d.toLowerCase().replace(/^\s+|\s+$/g,""),data:c,domain:e||document.domain,uri:document.documentURI,source:window,tag:b(d)?null:d.toLowerCase()};try{return f.disableMessaging!==!0?f.fireEvent.call(f,c.type,f,c):null}catch(m){}return null}},window.onhostmessage=function(c,d,e,f){if("function"!=typeof c)throw"onhostmessage: function required";if(!b(c.__index))throw"onhostmessage: duplicate handler definition"+(f?" for tag:"+f:"");var g=b(f)?"$":f.toLowerCase();a[g]||(a[g]=[]),Ext.apply(c,{__tag:g,__single:e||!1,__scope:d||window,__index:a[g].length}),a[g].push(c)},window.unhostmessage=function(b){if("function"==typeof b&&"undefined"!=typeof b.__index){var c=b.__tag||"$";a[c][b.__index]=null}}},get:function(a){return b.El.get(this,a)},fly:function(a,c){return c=c||"_global",(a=this.getDom(a))?(b._flyweights[c]||(b._flyweights[c]=new Ext.Element.Flyweight),b._flyweights[c].dom=a,b._flyweights[c]):null},getDom:function(a){var b;return a&&(b=this.getDocument())?a.dom?a.dom:"string"==typeof a?b.getElementById(a):a:null},select:function(a,b){var c;return(c=this.getDocument())?Ext.Element.select(a,b,c):null},query:function(a){var b;return(b=this.getDocument())?Ext.DomQuery.select(a,b):null},getDoc:function(){return this.get(this.getDocument())},removeNode:function(a){b.removeNode(this,this.getDom(a))},_unHook:function(){var a,c=b.getFrameHash(this)||{};if(this._hooked&&c&&(a=c.elCache)){for(var d in a){var e=a[d];delete a[d],e.removeAllListeners&&e.removeAllListeners()}c.docEl&&(c.docEl.removeAllListeners(),c.docEl=null,delete c.docEl)}this._hooked=this._domReady=this._domFired=!1},_renderHook:function(){this._windowContext=this.CSS=null,this._hooked=!1;try{if(this.writeScript('(function(){(window.hostMIF = parent.Ext.get("'+this.dom.id+'"))._windowContext='+(Ext.isIE?"window":"{eval:function(s){return eval(s);}}")+";})();")){this._frameProxy||(this._frameProxy=b.eventProxy.createDelegate(this));var c=this.getWindow();if(a.doAdd(c,"focus",this._frameProxy),a.doAdd(c,"blur",this._frameProxy),a.doAdd(c,"unload",this._frameProxy),this.disableMessaging!==!0){this.loadFunction({name:"XMessage",fn:this._XFrameMessaging},!1,!0);var d;(d=c.sendMessage)&&(d.manager=this)}this.CSS=new f(this.getDocument())}}catch(e){}return this.domWritable()},sendMessage:function(a,b,c){var d;return this.disableMessaging!==!0&&(d=this.getWindow())?(b||(b=a.tag||""),b=b.toLowerCase(),a=Ext.applyIf(a.data?a:{data:a},{type:Ext.isEmpty(b)?"message":"message:"+b,domain:c||document.domain,uri:document.documentURI,source:window,tag:b||null,_fromHost:this}),d.sendMessage?d.sendMessage.call(null,a,b,c):null):null},_windowContext:null,getDocument:function(){var a=this.getWindow(),b=null;try{b=(Ext.isIE&&a?a.document:null)||this.dom.contentDocument||window.frames[this.id].document||null}catch(c){return!1}return b},getBody:function(){var a;return(a=this.getDocument())?a.body:null},getDocumentURI:function(){var a,b;try{a=this.src&&(b=this.getDocument())?b.location.href:null}catch(c){}return a||this.src},getWindow:function(){var a=this.dom,b=null;try{b=a.contentWindow||window.frames[a.name]||null}catch(c){}return b},print:function(){try{var a=this.getWindow();Ext.isIE&&a.focus(),a.print()}catch(b){throw"print exception: "+(b.description||b.message||b)}},destroy:function(){this.removeAllListeners(),this.dom&&(this.dom[this._eventName]=null,Ext.ux.ManagedIFrame.Manager.deRegister(this),this._windowContext=null,Ext.isIE&&this.dom.src&&(this.dom.src="javascript:false"),this._maskEl=null,this.remove()),this.loadMask&&Ext.apply(this.loadMask,{masker:null,maskEl:null})},domWritable:function(){return!!this._windowContext},execScript:function(a,b){try{if(!this.domWritable())throw"execScript:non-secure context";if(!b)return this._windowContext.eval(a);this.writeScript(a)}catch(c){return this.fireEvent("exception",this,c),!1}return!0},writeScript:function(a,b){b=Ext.apply({},b||{},{type:"text/javascript",text:a});try{var c,d,e=this.getDocument();if(e&&"undefined"!=typeof e.getElementsByTagName&&((c=e.getElementsByTagName("head")[0])||(c=e.createElement("head"),e.getElementsByTagName("html")[0].appendChild(c)),c&&(d=e.createElement("script")))){for(var f in b)b.hasOwnProperty(f)&&f in d&&(d[f]=b[f]);return!!c.appendChild(d)}}catch(g){this.fireEvent("exception",this,g)}return!1},loadFunction:function(a,b,c){var d=a.name||a,a=a.fn||window[a];this.execScript(d+"="+a,b),c&&this.execScript(d+"()")},showMask:function(a,b,c){var d;if((d=this.loadMask)&&(!d.disabled||c)){if(d._vis)return;d.masker||(d.masker=Ext.get(d.maskEl||this.dom.parentNode||this.wrap({tag:"div",style:{position:"relative"}}))),d._vis=!0,d.masker.mask.defer(d.delay||5,d.masker,[a||d.msg,b||d.msgCls])}},hideMask:function(a){var b;if((b=this.loadMask)&&!b.disabled&&b.masker){if(!a&&b.hideOnReady!==!0&&this._domReady)return;b._vis=!1,b.masker.unmask.defer(b.delay||5,b.masker)}},loadHandler:function(a,b){if(this.frameInit&&(this._frameAction||this.eventsFollowFrameLinks)){b||(b={});var c=a&&"undefined"!=typeof a.type?a.type:this.dom.readyState;switch(c){case"loading":case"interactive":break;case"domready":if(this._domReady)return;this._domReady=!0,(this._hooked=this._renderHook())&&(this._domFired=!0,this.fireEvent("domready",this));case"domfail":this._domReady=!0,this.hideMask();break;case"load":case"complete":this._domReady||this.loadHandler({type:"domready",id:this.id}),this.hideMask(!0),(this._frameAction||this.eventsFollowFrameLinks)&&this.fireEvent.defer(50,this,["documentloaded",this]),this._frameAction=this._frameInit=!1,this.eventsFollowFrameLinks&&(this._domFired=this._domReady=!1),this._callBack&&this._callBack(this)}this.frameState=c}},checkDOM:function(a){if(!Ext.isOpera&&!Ext.isGecko&&this._frameAction){var b=0,a=a||this.getWindow(),c=this,d=!1,e=300,f=function(){try{var a=c.getDocument(),f=null;if(a===!1)throw"Document Access Denied";c._domReady||(d=!(!a||!a.getElementsByTagName),d=d&&(f=a.getElementsByTagName("body")[0])&&!!f.innerHTML.length)}catch(g){b=e}if(c._frameAction&&!c._domReady)return++b<e&&!d?(setTimeout(arguments.callee,10),void 0):(c.loadHandler({type:d?"domready":"domfail"}),void 0)};setTimeout(f,40)}}});var c=/(-[a-z])/gi,e=function(a,b){return b.charAt(1).toUpperCase()},f=function(a){var b;return a?(b=a,{rules:null,createStyleSheet:function(a,c){var d;if(b){var e=b.getElementsByTagName("head")[0],f=b.createElement("style");if(f.setAttribute("type","text/css"),c&&f.setAttribute("id",c),Ext.isIE)e.appendChild(f),d=f.styleSheet,d.cssText=a;else{try{f.appendChild(b.createTextNode(a))}catch(g){f.cssText=a}e.appendChild(f),d=f.styleSheet?f.styleSheet:f.sheet||b.styleSheets[b.styleSheets.length-1]}return this.cacheStyleSheet(d),d}},removeStyleSheet:function(a){if(b){var c=b.getElementById(a);c&&c.parentNode.removeChild(c)}},swapStyleSheet:function(a,c){if(this.removeStyleSheet(a),b){var d=b.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("id",a),d.setAttribute("href",c),b.getElementsByTagName("head")[0].appendChild(d)}},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(a){this.rules&&(this.rules={});try{for(var b=a.cssRules||a.rules,c=b.length-1;c>=0;--c)this.rules[b[c].selectorText]=b[c]}catch(d){}},getRules:function(a){if((null==this.rules||a)&&(this.rules={},b))for(var c=b.styleSheets,d=0,e=c.length;e>d;d++)try{this.cacheStyleSheet(c[d])}catch(f){}return this.rules},getRule:function(a,b){var c=this.getRules(b);if(!Ext.isArray(a))return c[a];for(var d=0;d<a.length;d++)if(c[a[d]])return c[a[d]];return null},updateRule:function(a,b,d){if(Ext.isArray(a)){for(var f=0;f<a.length;f++)if(this.updateRule(a[f],b,d))return!0}else{var g=this.getRule(a);if(g)return g.style[b.replace(c,e)]=d,!0}return!1}}):void 0};Ext.ux.ManagedIframePanel=Ext.extend(Ext.Panel,{defaultSrc:null,bodyStyle:{height:"100%",width:"100%",position:"relative"},frameStyle:{overflow:"auto"},frameConfig:null,hideMode:Ext.isIE?"display":"nosize",shimCls:Ext.ux.ManagedIFrame.Manager.shimCls,shimUrl:null,loadMask:!1,stateful:!1,animCollapse:Ext.isIE&&Ext.enableFx,autoScroll:!1,closable:!0,ctype:"Ext.ux.ManagedIframePanel",showLoadIndicator:!1,unsupportedText:"Inline frames are NOT enabled/supported by your browser.",initComponent:function(){this.bodyCfg||(this.bodyCfg={cls:"x-managed-iframe-mask",children:[Ext.apply({tag:"iframe",frameborder:0,cls:"x-managed-iframe",style:this.frameStyle||null,html:this.unsupportedText||null},this.frameConfig?this.frameConfig.autoCreate||{}:!1,Ext.isIE&&Ext.isSecure?{src:Ext.SSL_SECURE_URL}:!1),{tag:"img",src:this.shimUrl||Ext.BLANK_IMAGE_URL,cls:this.shimCls,galleryimg:"no"}]}),this.autoScroll=!1,this.items=null,this.stateful!==!1&&(this.stateEvents||(this.stateEvents=["documentloaded"])),Ext.ux.ManagedIframePanel.superclass.initComponent.call(this),this.monitorResize||(this.monitorResize=this.fitToParent),this.addEvents({documentloaded:!0,domready:!0,message:!0,exception:!0}),this.addListener=this.on},doLayout:function(){if(this.fitToParent&&!this.ownerCt){var a=this.getPosition(),b=(Ext.get(this.fitToParent)||this.getEl().parent()).getViewSize();this.setSize(b.width-a[0],b.height-a[1])}Ext.ux.ManagedIframePanel.superclass.doLayout.apply(this,arguments)},beforeDestroy:function(){if(this.rendered){if(this.tools)for(var a in this.tools)Ext.destroy(this.tools[a]);if(this.header&&this.headerAsText){var b;(b=this.header.child("span"))&&b.remove(),this.header.update("")}Ext.each(["iframe","shim","header","topToolbar","bottomToolbar","footer","loadMask","body","bwrap"],function(a){this[a]&&("function"==typeof this[a].destroy?this[a].destroy():Ext.destroy(this[a]),this[a]=null,delete this[a])},this)}Ext.ux.ManagedIframePanel.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.Panel.superclass.onDestroy.call(this)},onRender:function(a,b){if(Ext.ux.ManagedIframePanel.superclass.onRender.call(this,a,b),this.iframe=this.body.child("iframe.x-managed-iframe")){this.iframe.ownerCt=this;var c=Ext.Element,d=c[this.hideMode.toUpperCase()]||"x-hide-nosize";Ext.each([this[this.collapseEl],this.floating?null:this.getActionEl(),this.iframe],function(a){a&&a.setVisibilityMode(d)},this),this.loadMask&&(this.loadMask=Ext.apply({disabled:!1,maskEl:this.body,hideOnReady:!0},this.loadMask)),(this.iframe=new Ext.ux.ManagedIFrame(this.iframe,{loadMask:this.loadMask,showLoadIndicator:this.showLoadIndicator,disableMessaging:this.disableMessaging,style:this.frameStyle}))&&(this.loadMask=this.iframe.loadMask,this.relayEvents(this.iframe,["blur","focus","unload","documentloaded","domready","exception","message"].concat(this._msgTagHandlers||[])),delete this._msgTagHandlers),this.getUpdater().showLoadIndicator=this.showLoadIndicator||!1;for(var e=this.ownerCt;e;)e.on("afterlayout",function(a,b){var c=Ext.ux.ManagedIFrame.Manager,d=!1;Ext.each(["north","south","east","west"],function(a){var e;(e=b[a])&&e.splitEl&&(d=!0,e.split._splitTrapped||(e.split.on("beforeresize",c.showShims,c),e.split._splitTrapped=!0))},this),d&&!this._splitTrapped&&(this.on("resize",c.hideShims,c),this._splitTrapped=!0)},this,{single:!0}),e=e.ownerCt}this.shim=Ext.get(this.body.child("."+this.shimCls))},toggleShim:function(){this.shim&&this.shimCls&&this.shim.toggleClass(this.shimCls+"-on")},afterRender:function(){var a=this.html;delete this.html,Ext.ux.ManagedIframePanel.superclass.afterRender.call(this),this.iframe&&(this.defaultSrc?this.setSrc():a&&this.iframe.update("object"==typeof a?Ext.DomHelper.markup(a):a))},sendMessage:function(){this.iframe&&this.iframe.sendMessage.apply(this.iframe,arguments)},on:function(a){var b=/^message\:/i,c=null;if("object"==typeof a)for(var d in a)!this.filterOptRe.test(d)&&b.test(d)&&(c||(c=[]),c.push(d.toLowerCase()));else b.test(a)&&(c=[a.toLowerCase()]);this.getFrame()&&c?this.relayEvents(this.iframe,c):(this._msgTagHandlers||(this._msgTagHandlers=[]),c&&(this._msgTagHandlers=this._msgTagHandlers.concat(c))),Ext.ux.ManagedIframePanel.superclass.on.apply(this,arguments)},setSrc:function(a,b,c){if(a=a||this.defaultSrc||!1,!a)return this;a.url&&(c=a.callback||!1,b=a.discardUrl||!1,a=a.url||!1);var d=a||(Ext.isIE&&Ext.isSecure?Ext.SSL_SECURE_URL:"");return this.rendered&&this.iframe&&this.iframe.setSrc(d,b,c),this},getState:function(){var a=this.iframe?this.iframe.getDocumentURI()||null:null;return Ext.apply(Ext.ux.ManagedIframePanel.superclass.getState.call(this)||{},a?{defaultSrc:"function"==typeof a?a():a}:null)},getUpdater:function(){return this.rendered?(this.iframe||this.body).getUpdater():null},getFrame:function(){return this.rendered?this.iframe:null},getFrameWindow:function(){return this.rendered&&this.iframe?this.iframe.getWindow():null},getFrameDocument:function(){return this.rendered&&this.iframe?this.iframe.getDocument():null},getFrameDoc:function(){return this.rendered&&this.iframe?this.iframe.getDoc():null},getFrameBody:function(){return this.rendered&&this.iframe?this.iframe.getBody():null},load:function(a){var b;return(b=this.getUpdater())&&(a&&a.renderer&&(b.setRenderer(a.renderer),delete a.renderer),b.update.apply(b,arguments)),this},doAutoLoad:function(){this.load("object"==typeof this.autoLoad?this.autoLoad:{url:this.autoLoad})}}),Ext.reg("iframepanel",Ext.ux.ManagedIframePanel),Ext.ux.ManagedIframePortlet=Ext.extend(Ext.ux.ManagedIframePanel,{anchor:"100%",frame:!0,collapseEl:"bwrap",collapsible:!0,draggable:!0,cls:"x-portlet"}),Ext.reg("iframeportlet",Ext.ux.ManagedIframePortlet),Ext.apply(Ext.Element.prototype,{setVisible:function(a,b){if(b&&Ext.lib.Anim){var c=this.dom,d=this.visibilityMode;a&&(this.setOpacity(.01),this.setVisible(!0)),this.anim({opacity:{to:a?1:0}},this.preanim(arguments,1),null,.35,"easeIn",function(){a||(d==Ext.Element.DISPLAY?c.style.display="none":d==Ext.Element.VISIBILITY?c.style.visibility="hidden":Ext.get(c).addClass(String(d)),Ext.get(c).setOpacity(1))})}else this.visibilityMode==Ext.Element.DISPLAY?this.setDisplayed(a):this.visibilityMode==Ext.Element.VISIBILITY?(this.fixDisplay(),this.dom.style.visibility=a?"visible":"hidden"):this[a?"removeClass":"addClass"](String(this.visibilityMode));return this},isVisible:function(a){var b=!("hidden"==this.getStyle("visibility")||"none"==this.getStyle("display")||this.hasClass(this.visibilityMode));if(a!==!0||!b)return b;for(var c=this.dom.parentNode;c&&"body"!=c.tagName.toLowerCase();){if(!Ext.fly(c,"_isVisible").isVisible())return!1;c=c.parentNode}return!0}}),Ext.onReady(function(){var a=Ext.util.CSS,b=[];a.getRule(".x-managed-iframe")||b.push(".x-managed-iframe {height:100%;width:100%;overflow:auto;}"),a.getRule(".x-managed-iframe-mask")||b.push(".x-managed-iframe-mask{width:100%;height:100%;position:relative;}"),a.getRule(".x-frame-shim")||(b.push(".x-frame-shim {z-index:8500;position:absolute;top:0px;left:0px;background:transparent!important;overflow:hidden;display:none;}"),b.push(".x-frame-shim-on{width:100%;height:100%;display:block;zoom:1;}"),b.push(".ext-ie6 .x-frame-shim{margin-left:5px;margin-top:3px;}")),a.getRule(".x-hide-nosize")||b.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none;}"),b.length&&a.createStyleSheet(b.join(" "))})}(),Ext.ux.TabCloseMenu=function(){function a(a,e,f){c||(c=new Ext.menu.Menu([{id:b.id+"-close",text:Lars.close_tab,handler:function(){b.remove(d)}},{id:b.id+"-close-others",text:Lars.close_tab_others,handler:function(){b.items.each(function(a){a.closable&&a!=d&&b.remove(a)})}}])),d=e;var g=c.items;g.get(b.id+"-close").setDisabled(!e.closable);var h=!0;b.items.each(function(){return this!=e&&this.closable?(h=!1,!1):void 0}),g.get(b.id+"-close-others").setDisabled(h),c.showAt(f.getPoint())}var b,c,d;this.init=function(c){b=c,b.on("contextmenu",a)}},function(){Ext.ux.Media=function(a){Ext.apply(this,a||{}),this.toString=this.mediaMarkup,this.initMedia()};var a=Ext.ux.Media;a.mediaTypes={PDF:Ext.apply({tag:"object",cls:"x-media x-media-pdf",type:"application/pdf",data:"@url",autoSize:!0,params:{src:"@url"}},Ext.isIE?{classid:"CLSID:CA8A9780-280D-11CF-A24D-444553540000"}:!1),PDFFRAME:{tag:"iframe",cls:"x-media x-media-pdf-frame",frameBorder:0,style:{overflow:"none",width:"100%",height:"100%"},src:"@url",autoSize:!0},WMV:Ext.apply({tag:"object",cls:"x-media x-media-wmv",type:"application/x-mplayer2",data:"@url",autoSize:!1,params:{filename:"@url",displaysize:0,autostart:"@start",showControls:"@controls",showStatusBar:"@status",showaudiocontrols:!0,stretchToFit:!0,Volume:"@volume",PlayCount:1}},Ext.isIE?{classid:"CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95",codebase:"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701",type:"application/x-oleobject"}:{src:"@url"}),SWF:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",scripting:"sameDomain",standby:"Loading..",loop:!0,start:!1,unsupportedText:{cn:["The Adobe Flash Player is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",menu:"@controls",play:"@start",quality:"high",allowscriptaccess:"@scripting",bgcolor:"#FFFFFF",wmode:"opaque",loop:"@loop"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),JWP:Ext.apply({tag:"object",cls:"x-media x-media-swf x-media-flv",type:"application/x-shockwave-flash",data:"@url",loop:!1,start:!1,params:{movie:"@url",flashVars:{autostart:"@start",repeat:"@loop",height:"@height",width:"@width",id:"@id"}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"}:!1),QT:Ext.apply({tag:"object",cls:"x-media x-media-quicktime",type:"video/quicktime",style:{position:"relative","z-index":1,behavior:"url(#qt_event_source)"},scale:"aspect",unsupportedText:'<a href="http://www.apple.com/quicktime/download/">Get QuickTime</a>',scripting:!0,volume:"50%",data:"@url",params:{src:Ext.isIE?"@url":null,href:"http://quicktime.com",target:"_blank",autoplay:"@start",targetcache:!0,cache:!0,wmode:"transparent",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",volume:"@volume",QTSRC:"@url"}},Ext.isIE?{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"}:{PLUGINSPAGE:"http://www.apple.com/quicktime/download/"}),QTEVENTS:{tag:"object",id:"qt_event_source",cls:"x-media x-media-qtevents",type:"video/quicktime",params:{},classid:"clsid:CB927D12-4FF7-4a9e-A169-56E4B8A75598",codebase:"http://www.apple.com/qtactivex/qtplugin.cab#version=7,2,1,0"},WPMP3:Ext.apply({tag:"object",cls:"x-media x-media-audio x-media-wordpress",type:"application/x-shockwave-flash",data:"@url",start:!0,loop:!1,params:{movie:"@url",width:"@width",flashVars:{autostart:"@start",controller:"@controls",enablejavascript:"@scripting",loop:"@loop",scale:"@scale",initialvolume:"@volume",width:"@width",encode:"no",soundFile:""}}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}:!1),REAL:Ext.apply({tag:"object",cls:"x-media x-media-real",type:"audio/x-pn-realaudio",data:"@url",controls:"imagewindow,all",start:!1,standby:"Loading Real Media Player components...",params:{src:"@url",autostart:"@start",center:!1,maintainaspect:!0,controller:"@controls",controls:"@controls",volume:"@volume",loop:"@loop",console:"_master",backgroundcolor:"#000000"}},Ext.isIE?{classid:"clsid:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA"}:!1),SVG:{tag:"object",cls:"x-media x-media-img x-media-svg",type:"image/svg+xml",data:"@url",params:{src:"@url"}},GIF:{tag:"img",cls:"x-media x-media-img x-media-gif",src:"@url"},JPEG:{tag:"img",cls:"x-media x-media-img x-media-jpeg",src:"@url"},JP2:{tag:"object",cls:"x-media x-media-img x-media-jp2",type:"image/jpeg2000-image",data:"@url"},PNG:{tag:"img",cls:"x-media x-media-img x-media-png",src:"@url"},HTM:{tag:"iframe",cls:"x-media x-media-html",frameBorder:0,style:{overflow:"auto",width:"100%",height:"100%"},src:"@url"},TXT:{tag:"object",cls:"x-media x-media-text",type:"text/plain",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},RTF:{tag:"object",cls:"x-media x-media-rtf",type:"application/rtf",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},JS:{tag:"object",cls:"x-media x-media-js",type:"text/javascript",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},CSS:{tag:"object",cls:"x-media x-media-css",type:"text/css",style:{overflow:"auto",width:"100%",height:"100%"},data:"@url"},SILVERLIGHT:{tag:"object",cls:"x-media x-media-silverlight",type:"application/ag-plugin",data:"@url",params:{MinRuntimeVersion:"1.0",source:"@url"}},SILVERLIGHT2:{tag:"object",cls:"x-media x-media-silverlight",type:"application/x-silverlight-2-b2",data:"data:application/x-silverlight-2-b2,",params:{MinRuntimeVersion:"2.0"},unsupportedText:'<a href="http://go2.microsoft.com/fwlink/?LinkID=114576&v=2.0"><img style="border-width: 0pt;" alt="Get Microsoft Silverlight" src="http://go2.microsoft.com/fwlink/?LinkID=108181"/></a>'},DATAVIEW:{tag:"object",cls:"x-media x-media-dataview",classid:"CLSID:0ECD9B64-23AA-11D0-B351-00A0C9055D8E",type:"application/x-oleobject",unsupportedText:"MS Dataview Control is not installed"},"OWC:XLS":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",controltype:"excel",params:{DataType:"CSVURL",CSVURL:"@url",DisplayTitleBar:!0,AutoFit:!0}},Ext.isIE?{codebase:"file:msowc.cab",classid:"CLSID:0002E510-0000-0000-C000-000000000046"}:!1),"OWC:CHART":Ext.apply({tag:"object",cls:"x-media x-media-xls",type:"application/vnd.ms-excel",data:"@url",params:{DataType:"CSVURL"}},Ext.isIE?{classid:"CLSID:0002E500-0000-0000-C000-000000000046"}:!1),OFFICE:{tag:"object",cls:"x-media x-media-office",type:"application/x-msoffice",data:"@url"},POWERPOINT:Ext.apply({tag:"object",cls:"x-media x-media-ppt",type:"application/vnd.ms-powerpoint",file:"@url"},Ext.isIE?{classid:"CLSID:EFBD14F0-6BFB-11CF-9177-00805F8813FF"}:!1),XML:{tag:"iframe",cls:"x-media x-media-xml",style:{overflow:"auto"},src:"@url"},VLC:{tag:"object",cls:"x-media x-media-vlc",type:"application/x-vlc-plugin",version:"VideoLAN.VLCPlugin.2",pluginspage:"http://www.videolan.org",data:"@url"},RDP:Ext.apply({tag:"object",cls:"x-media x-media-rdp",type:"application/rds",unsupportedText:'Remote Desktop Web Connection ActiveX control is required. <a target="_msd" href="http://go.microsoft.com/fwlink/?linkid=44333">Download it here</a>.',params:{Server:"@url",Fullscreen:!1,StartConnected:!1,DesktopWidth:"@width",DesktopHeight:"@height"}},Ext.isIE?{classid:"CLSID:9059f30f-4eb1-4bd2-9fdc-36f43a218f4a",CODEBASE:"msrdp.cab#version=5,2,3790,0"}:!1)};var b=/4$/i,c=function(a,d,e){a&&"undefined"!=typeof a.readyState&&((e||b).test(a.readyState)?d({type:"load"}):c.defer(10,null,[a,d]))};if(parseFloat(Ext.version)<2.1)throw"Ext.ux.Media and sub-classes are not License-Compatible with your Ext release.";Ext.extend(a,Object,{mediaObject:null,mediaCfg:null,mediaVersion:null,requiredVersion:null,unsupportedText:null,init:function(a){a&&void 0===this.getEl&&Ext.applyIf(a,this)},initMedia:function(){!Ext.isIE&&this.initialConfig&&new a.VisibilityFix({mode:this.visibilityCls,hideMode:this.hideMode,elements:this.visModeTargets||null}).init(this),this.events&&this.addEvents("mediarender","mediaload")},getMediaType:function(b){return a.mediaTypes[b]},assert:function(a,b){return a="function"==typeof a?a.call(a.scope||null):a,Ext.value(a,b)},mediaMarkup:function(a,b,c){if(a=a||this.mediaCfg,!a)return"";var d=Ext.apply({url:!1,autoSize:!1},a);if(d.url=this.assert(d.url,!1),d.mediaType){var e,f=Ext.Element,g=Ext.apply({},this.getMediaType(this.assert(d.mediaType,!1))||!1),h=Ext.apply(g.params||{},d.params||{});for(var i in h)h.hasOwnProperty(i)&&(d.children||(d.children=[]),e=this.assert(h[i],null),null!==e&&d.children.push({tag:"param",name:i,value:"object"==typeof e?Ext.urlEncode(e):encodeURI(e)}));delete g.params;var j=this.assert(d.unsupportedText||this.unsupportedText||g.unsupportedText,null);if(j&&(d.children||(d.children=[]),d.children.push(j)),d.style&&"object"!=typeof d.style)throw"Style must be JSON formatted";d.style=this.assert(Ext.apply(g.style||{},d.style||{}),{}),delete g.style,d.height=this.assert(c||d.height||g.height||d.style.height,null),d.width=this.assert(b||d.width||g.width||d.style.width,null),d=Ext.apply({tag:"object"},d,g),(d.height||d.autoSize)&&Ext.apply(d.style,{height:f.addUnits(d.autoSize?"100%":d.height,f.prototype.defaultUnit)}),(d.width||d.autoSize)&&Ext.apply(d.style,{width:f.addUnits(d.autoSize?"100%":d.width,f.prototype.defaultUnit)}),d.id||(d.id=Ext.id()),d.name=this.assert(d.name,d.id);var k={url:d.url||"",height:/%$/.test(d.height)?d.height:parseInt(d.height,10)||100,width:/%$/.test(d.width)?d.width:parseInt(d.width,10)||100,scripting:this.assert(d.scripting,!1),controls:this.assert(d.controls,!1),scale:this.assert(d.scale,1),status:this.assert(d.status,!1),start:this.assert(d.start,!1),loop:this.assert(d.loop,!1),volume:this.assert(d.volume,20),id:d.id};return delete d.url,delete d.mediaType,delete d.controls,delete d.status,delete d.start,delete d.loop,delete d.scale,delete d.scripting,delete d.volume,delete d.autoSize,delete d.params,delete d.unsupportedText,delete d.renderOnResize,delete d.listeners,delete d.height,delete d.width,Ext.DomHelper.markup(d).replace(/(%40url|@url)/g,k.url).replace(/(%40start|@start)/g,k.start+"").replace(/(%40controls|@controls)/g,k.controls+"").replace(/(%40scale|@scale)/g,k.scale+"").replace(/(%40status|@status)/g,k.status+"").replace(/(%40id|@id)/g,k.id+"").replace(/(%40loop|@loop)/g,k.loop+"").replace(/(%40volume|@volume)/g,k.volume+"").replace(/(%40scripting|@scripting)/g,k.scripting+"").replace(/(%40width|@width)/g,k.width+"").replace(/(%40height|@height)/g,k.height+"")}var j=this.assert(d.unsupportedText||this.unsupportedText||g.unsupportedText,null);return j=j?Ext.DomHelper.markup(j):null,String.format(j||"Media Configuration/Plugin Error"," "," ")},setMask:function(a){this.mediaMask&&!this.mediaMask.enable&&(a=Ext.get(a),(this.mediaMask=new Ext.ux.IntelliMask(a||this[this.mediaEl],Ext.apply({fixElementForMedia:!0},this.mediaMask)))&&this.mediaMask.el.addClass("x-media-mask"))},renderMedia:function(a,b,c,d,e){if(!Ext.isReady)return Ext.onReady(this.renderMedia.createDelegate(this,Array.prototype.slice.call(arguments,0))),void 0;var f=this.mediaCfg=a||this.mediaCfg;if(b=Ext.get(b||this.lastCt||(this.mediaObject?this.mediaObject.dom.parentNode:null)),this.onBeforeMedia.call(this,f,b,c,d,e),b){this.lastCt=b;var g;f&&(g=this.mediaMarkup(f,d,e,b))&&(this.setMask(b),this.clearMedia(),b.update(g),this.mediaMask&&this.autoMask&&this.mediaMask.show())}this.onAfterMedia(b)},clearMedia:function(){if(Ext.isReady&&this.mediaObject)try{this.mediaObject.removeAllListeners(),this.mediaObject.remove()}catch(a){}this.mediaObject=null},onBeforeMedia:function(a,b){var c,d=a||this.mediaCfg;d&&(c=this.getMediaType(d.mediaType))&&(d.autoSize=d.autoSize||c.autoSize===!0,d.autoSize&&(b=Ext.isReady?Ext.get(b||this.lastCt):null)&&(d.height=b.getHeight(!0)||this.assert(d.height,"auto"),d.width=b.getWidth(!0)||this.assert(d.width,"auto")))},onMediaLoad:function(a){a&&"load"==a.type&&(this.fireEvent("mediaload",this,this.mediaObject),this.mediaMask&&this.autoMask&&this.mediaMask.hide())},onAfterMedia:function(a){if(this.mediaCfg&&a&&(this.mediaObject=a.child(".x-media"))){this.mediaObject.ownerCt=this,"object"!==this.mediaCfg.tag&&this.mediaObject.on({load:this.onMediaLoad,scope:this,single:!0}),c(this.mediaObject.dom,this.onMediaLoad.createDelegate(this));var b;(b=this.mediaCfg.listeners||null)&&this.mediaObject.on(b),this.fireEvent("mediarender",this,this.mediaObject)}},getInterface:function(){return this.mediaObject?this.mediaObject.dom||null:null},detectVersion:Ext.emptyFn,autoMask:Ext.isIE});var d=function(){};Ext.extend(d,Object,{hideMode:Ext.isIE?"display":"nosize",animCollapse:!1,visibilityCls:Ext.isIE?null:"x-hide-nosize",autoScroll:!0,shadow:!1,bodyStyle:{position:"relative"},resizeMedia:function(){var a=this.mediaCfg;a&&this.boxReady&&arguments.length>3&&(!this.mediaObject||a.renderOnResize)&&this.refreshMedia(this[this.mediaEl])},onAfterRender:function(){this.mediaCfg.renderOnResize?this.on("resize",this.resizeMedia,this):this.renderMedia(this.mediaCfg,this[this.mediaEl]||this.getEl())},doAutoLoad:Ext.emptyFn,refreshMedia:function(a){this.mediaCfg&&this.renderMedia(null,a)},mediaMask:!1}),Ext.ux.MediaComponent=Ext.extend(Ext.BoxComponent,{ctype:"Ext.ux.MediaComponent",autoEl:"div",cls:"x-media-comp",mediaEl:"el",getId:function(){return this.id||(this.id="media-comp"+ ++Ext.Component.AUTO_ID)},initComponent:function(){this.visModeTargets=[this.actionMode],this.initMedia(),Ext.ux.MediaComponent.superclass.initComponent.apply(this,arguments)},onRender:function(){Ext.ux.MediaComponent.superclass.onRender.apply(this,arguments),this.onAfterRender()},afterRender:function(){this.setAutoScroll(),Ext.ux.MediaComponent.superclass.afterRender.apply(this,arguments)},beforeDestroy:function(){this.clearMedia(),Ext.destroy(this.mediaMask,this.loadMask),Ext.ux.MediaComponent.superclass.beforeDestroy.call(this)},setAutoScroll:function(){this.rendered&&this.autoScroll&&this.getEl().setOverflow("auto")}}),Ext.apply(Ext.ux.MediaComponent.prototype,Ext.ux.Media.prototype),Ext.apply(Ext.ux.MediaComponent.prototype,d.prototype),Ext.reg("media",Ext.ux.MediaComponent),a.Panel=Ext.extend(Ext.Panel,{ctype:"Ext.ux.Media.Panel",cls:"x-media-panel",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode],this.initMedia(),this.html=this.contentEl=this.items=null,a.Panel.superclass.initComponent.call(this)
},onRender:function(){a.Panel.superclass.onRender.apply(this,arguments),this.onAfterRender()},beforeDestroy:function(){this.clearMedia(),a.Panel.superclass.beforeDestroy.call(this)}}),Ext.apply(a.Panel.prototype,a.prototype),Ext.apply(a.Panel.prototype,d.prototype),Ext.reg("mediapanel",Ext.ux.MediaPanel=a.Panel),a.Window=Ext.extend(Ext.Window,{cls:"x-media-window",ctype:"Ext.ux.Media.Window",mediaEl:"body",initComponent:function(){this.visModeTargets=[this.collapseEl,this.floating?null:this.actionMode],this.initMedia(),this.html=this.contentEl=this.items=null,a.Window.superclass.initComponent.call(this)},onRender:function(){a.Window.superclass.onRender.apply(this,arguments),this.onAfterRender()},beforeDestroy:function(){this.clearMedia(),a.Window.superclass.beforeDestroy.call(this)}}),Ext.apply(a.Window.prototype,a.prototype),Ext.apply(a.Window.prototype,d.prototype),Ext.reg("mediawindow",Ext.ux.MediaWindow=a.Window),Ext.onReady(function(){var a=Ext.util.CSS,b=[];a.getRule(".x-media")||b.push(".x-media{width:100%;height:100%;display:block;overflow:none;outline:none;}"),a.getRule(".x-media-mask")||b.push(".x-media-mask{width:100%;height:100%;position:relative;zoom:1;}"),a.getRule(".x-media-img")||b.push(".x-media-img{background-color:transparent;width:auto;height:auto;zoom:1;}"),a.getRule(".x-hide-nosize")||b.push(".x-hide-nosize,.x-hide-nosize *{height:0px!important;width:0px!important;border:none!important;}"),b.length&&a.createStyleSheet(b.join(""))}),Ext.apply(Ext.Element.prototype,{setVisible:function(a,b){if(b&&Ext.lib.Anim){var c=this.dom,d=this.visibilityMode;a&&(this.setOpacity(.01),this.setVisible(!0)),this.anim({opacity:{to:a?1:0}},this.preanim(arguments,1),null,.35,"easeIn",function(){a||(d===Ext.Element.DISPLAY?c.style.display="none":d===Ext.Element.VISIBILITY?c.style.visibility="hidden":Ext.get(c).addClass(String(d)),Ext.get(c).setOpacity(1))})}else this.visibilityMode===Ext.Element.DISPLAY?this.setDisplayed(a):this.visibilityMode===Ext.Element.VISIBILITY?(this.fixDisplay(),this.dom.style.visibility=a?"visible":"hidden"):this[a?"removeClass":"addClass"](String(this.visibilityMode));return this},isVisible:function(a){var b=!("hidden"===this.getStyle("visibility")||"none"===this.getStyle("display")||this.hasClass(this.visibilityMode));if(a!==!0||!b)return b;for(var c=this.dom.parentNode;c&&"body"!==c.tagName.toLowerCase();){if(!Ext.fly(c,"_isVisible").isVisible())return!1;c=c.parentNode}return!0}});var e={mask:function(a,b,c){if("static"==this.getStyle("position")&&this.setStyle("position","relative"),this._maskMsg&&this._maskMsg.remove(),this._mask,this._mask||(this._mask=Ext.DomHelper.append(this.dom,{cls:c||"ext-el-mask"},!0)),!Ext.isIE||this.addClass("x-masked"),this._mask.setVisible(!0),"string"==typeof a){var d=this._maskMsg=Ext.DomHelper.append(this.dom,{cls:"ext-el-mask-msg "+b||"",style:{visibility:"hidden"},cn:{tag:"div",html:a}},!0),e=this.dom;(function(){try{d.center(e).setVisible(!0)}catch(a){}}).defer(4)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||"auto"!=this.getStyle("height")||this._mask.setSize(this.dom.clientWidth,this.getHeight()),this._mask},unmask:function(a){this._maskMsg&&(a?(this._maskMsg.remove(),delete this._maskMsg):this._maskMsg.setVisible.defer(4,this._maskMsg,[!1])),this._mask&&(a?(this._mask.remove(),delete this._mask):this._mask.setVisible(!1)),this.removeClass("x-masked")}};a.VisibilityFix=function(a){a||(a={}),this.init=function(b){b.hideMode=a.hideMode||b.hideMode,b.on("render",function(b){var c=[b.collapseEl,b.floating?null:b.actionMode].concat(a.elements||[]),d=Ext.Element,e=a.mode||b.visibilityCls||d[b.hideMode.toUpperCase()]||d.VISIBILITY;Ext.each(c,function(a){var c=b[a]||a;c&&c.setVisibilityMode&&c.setVisibilityMode(e)})},b,{single:!0})}},Ext.ux.IntelliMask=function(a,b){Ext.apply(this,b),this.el=Ext.get(a),this.removeMask=Ext.value(this.removeMask,!0),a&&this.fixElementForMedia&&Ext.apply(a,e)},Ext.ux.IntelliMask.prototype={msg:"Loading Media...",msgCls:"x-mask-loading",zIndex:null,disabled:!1,active:!1,autoHide:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},show:function(a,b,c,d){if(this.disabled||!this.el)return null;var e={},f=this.autoHide;d=parseInt(d,10)||20,"object"==typeof a&&(e=a,a=e.msg,b=e.msgCls,c=e.fn,f="undefined"!=typeof e.autoHide?e.autoHide:f,d=e.fnDelay||d);this.el.mask(a||this.msg,b||this.msgCls);return this.active=!!this.el._mask,this.active&&this.zIndex&&(this.el._mask.setStyle("z-index",this.zIndex),this.el._maskMsg&&this.el._maskMsg.setStyle("z-index",this.zIndex+1)),"function"==typeof c?c.defer(d,e.scope||null):d=0,f&&(f=parseInt(f,10)||2e3)&&this.hide.defer(f+(d||0),this),this.active?{mask:this.el._mask,maskMsg:this.el._maskMsg}:null},hide:function(a){return this.el&&this.el.unmask(a||this.removeMask),this.active=!1,this},destroy:function(){this.hide(!0),this.el=null}}}(),function(){var a=Ext.ux.Media;a.Flash=Ext.extend(a,{constructor:function(){a.Flash.superclass.constructor.apply(this,arguments)},SWFObject:null,varsName:"flashVars",hideMode:"nosize",mediaType:Ext.apply({tag:"object",cls:"x-media x-media-swf",type:"application/x-shockwave-flash",loop:null,scripting:"sameDomain",start:!0,unsupportedText:{cn:["The Adobe Flash Player{0}is required.",{tag:"br"},{tag:"a",cn:[{tag:"img",src:"http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"}],href:"http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash",target:"_flash"}]},params:{movie:"@url",play:"@start",loop:"@loop",quality:"high",bgcolor:"#FFFFFF",allowscriptaccess:"@scripting"}},Ext.isIE?{classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"}:{data:"@url"}),getMediaType:function(){return this.mediaType},initMedia:function(){var b=Ext.apply({},this.mediaCfg||{}),c=this.requiredVersion=b.requiredVersion||this.requiredVersion||!1,d=!!(this.playerVersion=this.detectVersion()),e=d&&(c?this.assertVersion(c):!0),f=this.assert(b.unsupportedText||this.unsupportedText||(this.getMediaType()||{}).unsupportedText,null);if(f&&(f=Ext.DomHelper.markup(f),f=b.unsupportedText=String.format(f,c?" "+c+" ":" ",this.playerVersion?" "+this.playerVersion+" ":" Not installed.")),!e){this.autoMask=!1;var g=d&&this.assertVersion("6.0.65");g&&b.installUrl?(b=b.installDescriptor||{tag:"object",cls:"x-media x-media-swf x-media-swfinstaller",id:"SWFInstaller",type:"application/x-shockwave-flash",data:"@url",url:b.installUrl,width:/%$/.test(b.width)?b.width:(parseInt(b.width,10)||0)<310?310:b.width,height:/%$/.test(b.height)?b.height:(parseInt(b.height,10)||0)<138?138:b.height,loop:!1,start:!0,unsupportedText:f,params:{quality:"high",movie:"@url",allowscriptacess:"always",align:"middle",bgcolor:"#3A6EA5",pluginspage:b.pluginsPage||this.pluginsPage||"http://www.adobe.com/go/getflashplayer"}},b.params[this.varsName]="MMredirectURL="+(b.installRedirect||window.location)+"&MMplayerType="+(Ext.isIE?"ActiveX":"Plugin")+"&MMdoctitle="+(document.title=document.title.slice(0,47)+" - Flash Player Installation")):b.mediaType=null}if(b.eventSynch){b.params||(b.params={});var h=b.params[this.varsName]||(b.params[this.varsName]={});"string"==typeof h&&(h=Ext.urlDecode(h,!0));var i=b.eventSynch===!0?{allowedDomain:h.allowedDomain||document.location.hostname,elementID:b.id||(b.id=Ext.id()),eventHandler:"Ext.ux.Media.Flash.eventSynch"}:b.eventSynch;Ext.apply(b.params,{allowscriptaccess:"always"})[this.varsName]=Ext.applyIf(h,i)}delete b.requiredVersion,delete b.installUrl,delete b.installRedirect,delete b.installDescriptor,delete b.eventSynch,b.mediaType="SWF",this.mediaCfg=b,this.events&&this.addEvents("flashinit","fscommand"),a.Flash.superclass.initMedia.call(this)},assertVersion:function(a){var b;a||(a=[]),b=Ext.isArray(a)?a:String(a).split("."),b=b.concat([0,0,0,0]).slice(0,3);var c;if(!(c=this.playerVersion||(this.playerVersion=this.detectVersion())))return!1;if(c.major>parseFloat(b[0]))return!0;if(c.major==parseFloat(b[0])){if(c.minor>parseFloat(b[1]))return!0;if(c.minor==parseFloat(b[1])&&c.rev>=parseFloat(b[2]))return!0}return!1},detectVersion:function(){if(this.mediaVersion)return this.mediaVersion;var a=!1,b=function(a){return a&&a.length?{major:null!==a[0]?parseInt(a[0],10):0,minor:null!==a[1]?parseInt(a[1],10):0,rev:null!==a[2]?parseInt(a[2],10):0,toString:function(){return this.major+"."+this.minor+"."+this.rev}}:!1},c=null;if(Ext.isIE){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(d){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a=[6,0,21],c.allowscriptaccess="always"}catch(e){if(a&&6===a[0])return b(a)}try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){}}c&&(a=c.GetVariable("$version").split(" ")[1].split(","))}else navigator.plugins&&navigator.mimeTypes.length&&(c=navigator.plugins["Shockwave Flash"],c&&c.description&&(a=c.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")));return this.mediaVersion=b(a)},_applyFixes:function(){var a;if(Ext.isIE&&Ext.isWindows&&(a=this.SWFObject)&&(a.style.display="none",4==a.readyState))for(var b in a)"function"==typeof a[b]&&(a[b]=null)},onAfterMedia:function(){if(a.Flash.superclass.onAfterMedia.apply(this,arguments),this.SWFObject=this.getInterface(),this.mediaObject){var c=this.mediaObject.id;Ext.isIE?Ext.query("script[for="+c+"]").length||b('var c;if(c=Ext.getCmp("'+this.id+'")){c.onfsCommand.apply(c,arguments);}',{event:"FSCommand",htmlFor:c}):window[c+"_DoFSCommand"]||(window[c+"_DoFSCommand"]=this.onfsCommand.createDelegate(this))}},clearMedia:function(){if(this.mediaObject){var b=this.mediaObject.id;Ext.isIE?Ext.select("script[for="+b+"]",!0).remove():(window[b+"_DoFSCommand"]=null,delete window[b+"_DoFSCommand"]),this._applyFixes()}a.Flash.superclass.clearMedia.call(this),this.SWFObject=null},getSWFObject:function(){return this.getInterface()},onfsCommand:function(a,b){this.events&&this.fireEvent("fscommand",this,a,b)},setVariable:function(a,b){var c=this.getInterface();return c&&"undefined"!=typeof c.SetVariable?(c.SetVariable(a,b),!0):!1},getVariable:function(a){var b=this.getInterface();return b&&"undefined"!=typeof b.GetVariable?b.GetVariable(a):void 0},onFlashInit:function(){this.mediaMask&&this.autoMask&&this.mediaMask.hide(),this.fireEvent.defer(10,this,["flashinit",this,this.getInterface()])},_handleSWFEvent:function(a){var b=a.type||a||!1;return b?(this.events&&!this.events[String(b)]&&this.addEvents(String(b)),this.fireEvent.apply(this,[String(b),this].concat(Array.prototype.slice.call(arguments,0)))):void 0}}),a.Flash.eventSynch=function(a){var b=Ext.get(a);return b&&b.ownerCt?b.ownerCt._handleSWFEvent.apply(b.ownerCt,Array.prototype.slice.call(arguments,1)):void 0},Ext.ux.FlashComponent=Ext.extend(Ext.ux.MediaComponent,{ctype:"Ext.ux.FlashComponent",getId:function(){return this.id||(this.id="flash-comp"+ ++Ext.Component.AUTO_ID)}}),Ext.apply(Ext.ux.FlashComponent.prototype,a.Flash.prototype),Ext.reg("uxflash",Ext.ux.FlashComponent),a.Panel.Flash=Ext.extend(a.Panel,{ctype:"Ext.ux.Media.Panel.Flash"}),Ext.apply(a.Panel.Flash.prototype,a.Flash.prototype),Ext.reg("flashpanel",Ext.ux.MediaPanel.Flash=Ext.ux.FlashPanel=a.Panel.Flash),Ext.reg("uxflashpanel",a.Panel.Flash),Ext.ux.FlashWindow=a.Window.Flash=Ext.extend(a.Window,{ctype:"Ext.ux.FlashWindow",animCollpase:!0}),Ext.apply(a.Window.Flash.prototype,a.Flash.prototype);var b=function(a,b){b=Ext.apply({},b||{},{type:"text/javascript",text:a});try{var c,d,e=document;if(e&&e.getElementsByTagName&&((c=e.getElementsByTagName("head")[0])||(c=e.createElement("head"),e.getElementsByTagName("html")[0].appendChild(c)),c&&(d=e.createElement("script")))){for(var f in b)b.hasOwnProperty(f)&&f in d&&(d[f]=b[f]);return!!c.appendChild(d)}}catch(g){}return!1}}();var AMTcgiloc="cgi-bin/mimetex.cgi",AScgiloc="tools/asciisvg/svgimg.php",mathcolor="blue",mathfontsize="1em",mathfontfamily="serif",automathrecognize=!1,checkForMathML=!0,notifyIfNoMathML=!1,alertIfNoMathML=!1,translateOnLoad=!0,translateLaTeX=!0,translateLaTeXformatting=!0,translateASCIIMath=!0,translateASCIIsvg=!0,avoidinnerHTML=!1,displaystyle=!0,showasciiformulaonhover=!0,decimalsign=".",AMdelimiter1="`",AMescape1="\\\\`",AMdocumentId="wikitext",checkforprocessasciimathinmoodle=!1,dsvglocation="moko/tiny_mce/plugins/asciisvg/js/",isIE=null==document.createElementNS,noMathML=!1,translated=!1;isIE&&(document.write('<object id="mathplayer"  classid="clsid:32F66A20-7614-11D4-BD11-00104BD3F987"></object>'),document.write('<?import namespace="m" implementation="#mathplayer"?>')),setStylesheet("#AMMLcloseDiv {font-size:0.8em; padding-top:1em; color:#014}\n#AMMLwarningBox {position:absolute; width:100%; top:0; left:0; z-index:200; text-align:center; font-size:1em; font-weight:bold; padding:0.5em 0 0.5em 0; color:#ffc; background:#c30}");var AMcal=[61237,8492,61238,61239,8496,8497,61240,8459,8464,61241,61242,8466,8499,61243,61244,61245,61246,8475,61247,61248,61249,61250,61251,61252,61253,61254],AMfrk=[61277,61278,8493,61279,61280,61281,61282,8460,8465,61283,61284,61285,61286,61287,61288,61289,61290,8476,61291,61292,61293,61294,61295,61296,61297,8488],AMbbb=[61324,61325,8450,61326,61327,61328,61329,8461,61330,61331,61332,61333,61334,8469,61335,8473,8474,8477,61336,61337,61338,61339,61340,61341,61342,8484],CONST=0,UNARY=1,BINARY=2,INFIX=3,LEFTBRACKET=4,RIGHTBRACKET=5,SPACE=6,UNDEROVER=7,DEFINITION=8,LEFTRIGHT=9,TEXT=10,BIG=11,LONG=12,STRETCHY=13,MATRIX=14,AMquote={input:'"',tag:"mtext",output:"mbox",tex:null,ttype:TEXT},AMsymbols=[{input:"alpha",tag:"mi",output:"α",tex:null,ttype:CONST},{input:"beta",tag:"mi",output:"β",tex:null,ttype:CONST},{input:"chi",tag:"mi",output:"χ",tex:null,ttype:CONST},{input:"delta",tag:"mi",output:"δ",tex:null,ttype:CONST},{input:"Delta",tag:"mo",output:"Δ",tex:null,ttype:CONST},{input:"epsi",tag:"mi",output:"ε",tex:"epsilon",ttype:CONST},{input:"varepsilon",tag:"mi",output:"ɛ",tex:null,ttype:CONST},{input:"eta",tag:"mi",output:"η",tex:null,ttype:CONST},{input:"gamma",tag:"mi",output:"γ",tex:null,ttype:CONST},{input:"Gamma",tag:"mo",output:"Γ",tex:null,ttype:CONST},{input:"iota",tag:"mi",output:"ι",tex:null,ttype:CONST},{input:"kappa",tag:"mi",output:"κ",tex:null,ttype:CONST},{input:"lambda",tag:"mi",output:"λ",tex:null,ttype:CONST},{input:"Lambda",tag:"mo",output:"Λ",tex:null,ttype:CONST},{input:"mu",tag:"mi",output:"μ",tex:null,ttype:CONST},{input:"nu",tag:"mi",output:"ν",tex:null,ttype:CONST},{input:"omega",tag:"mi",output:"ω",tex:null,ttype:CONST},{input:"Omega",tag:"mo",output:"Ω",tex:null,ttype:CONST},{input:"phi",tag:"mi",output:"φ",tex:null,ttype:CONST},{input:"varphi",tag:"mi",output:"ϕ",tex:null,ttype:CONST},{input:"Phi",tag:"mo",output:"Φ",tex:null,ttype:CONST},{input:"pi",tag:"mi",output:"π",tex:null,ttype:CONST},{input:"Pi",tag:"mo",output:"Π",tex:null,ttype:CONST},{input:"psi",tag:"mi",output:"ψ",tex:null,ttype:CONST},{input:"Psi",tag:"mi",output:"Ψ",tex:null,ttype:CONST},{input:"rho",tag:"mi",output:"ρ",tex:null,ttype:CONST},{input:"sigma",tag:"mi",output:"σ",tex:null,ttype:CONST},{input:"Sigma",tag:"mo",output:"Σ",tex:null,ttype:CONST},{input:"tau",tag:"mi",output:"τ",tex:null,ttype:CONST},{input:"theta",tag:"mi",output:"θ",tex:null,ttype:CONST},{input:"vartheta",tag:"mi",output:"ϑ",tex:null,ttype:CONST},{input:"Theta",tag:"mo",output:"Θ",tex:null,ttype:CONST},{input:"upsilon",tag:"mi",output:"υ",tex:null,ttype:CONST},{input:"xi",tag:"mi",output:"ξ",tex:null,ttype:CONST},{input:"Xi",tag:"mo",output:"Ξ",tex:null,ttype:CONST},{input:"zeta",tag:"mi",output:"ζ",tex:null,ttype:CONST},{input:"*",tag:"mo",output:"⋅",tex:"cdot",ttype:CONST},{input:"**",tag:"mo",output:"⋆",tex:"star",ttype:CONST},{input:"//",tag:"mo",output:"/",tex:null,ttype:CONST},{input:"\\\\",tag:"mo",output:"\\",tex:"backslash",ttype:CONST},{input:"setminus",tag:"mo",output:"\\",tex:null,ttype:CONST},{input:"xx",tag:"mo",output:"×",tex:"times",ttype:CONST},{input:"-:",tag:"mo",output:"÷",tex:"divide",ttype:CONST},{input:"@",tag:"mo",output:"∘",tex:"circ",ttype:CONST},{input:"o+",tag:"mo",output:"⊕",tex:"oplus",ttype:CONST},{input:"ox",tag:"mo",output:"⊗",tex:"otimes",ttype:CONST},{input:"o.",tag:"mo",output:"⊙",tex:"odot",ttype:CONST},{input:"sum",tag:"mo",output:"∑",tex:null,ttype:UNDEROVER},{input:"prod",tag:"mo",output:"∏",tex:null,ttype:UNDEROVER},{input:"^^",tag:"mo",output:"∧",tex:"wedge",ttype:CONST},{input:"^^^",tag:"mo",output:"⋀",tex:"bigwedge",ttype:UNDEROVER},{input:"vv",tag:"mo",output:"∨",tex:"vee",ttype:CONST},{input:"vvv",tag:"mo",output:"⋁",tex:"bigvee",ttype:UNDEROVER},{input:"nn",tag:"mo",output:"∩",tex:"cap",ttype:CONST},{input:"nnn",tag:"mo",output:"⋂",tex:"bigcap",ttype:UNDEROVER},{input:"uu",tag:"mo",output:"∪",tex:"cup",ttype:CONST},{input:"uuu",tag:"mo",output:"⋃",tex:"bigcup",ttype:UNDEROVER},{input:"!=",tag:"mo",output:"≠",tex:"ne",ttype:CONST},{input:":=",tag:"mo",output:":=",tex:null,ttype:CONST},{input:"lt",tag:"mo",output:"<",tex:null,ttype:CONST},{input:"<=",tag:"mo",output:"≤",tex:"le",ttype:CONST},{input:"lt=",tag:"mo",output:"≤",tex:"leq",ttype:CONST},{input:">=",tag:"mo",output:"≥",tex:"ge",ttype:CONST},{input:"geq",tag:"mo",output:"≥",tex:null,ttype:CONST},{input:"-<",tag:"mo",output:"≺",tex:"prec",ttype:CONST},{input:"-lt",tag:"mo",output:"≺",tex:null,ttype:CONST},{input:">-",tag:"mo",output:"≻",tex:"succ",ttype:CONST},{input:"-<=",tag:"mo",output:"⪯",tex:"preceq",ttype:CONST},{input:">-=",tag:"mo",output:"⪰",tex:"succeq",ttype:CONST},{input:"in",tag:"mo",output:"∈",tex:null,ttype:CONST},{input:"!in",tag:"mo",output:"∉",tex:"notin",ttype:CONST},{input:"sub",tag:"mo",output:"⊂",tex:"subset",ttype:CONST},{input:"sup",tag:"mo",output:"⊃",tex:"supset",ttype:CONST},{input:"sube",tag:"mo",output:"⊆",tex:"subseteq",ttype:CONST},{input:"supe",tag:"mo",output:"⊇",tex:"supseteq",ttype:CONST},{input:"-=",tag:"mo",output:"≡",tex:"equiv",ttype:CONST},{input:"~=",tag:"mo",output:"≅",tex:"cong",ttype:CONST},{input:"~~",tag:"mo",output:"≈",tex:"approx",ttype:CONST},{input:"prop",tag:"mo",output:"∝",tex:"propto",ttype:CONST},{input:"and",tag:"mtext",output:"and",tex:null,ttype:SPACE},{input:"or",tag:"mtext",output:"or",tex:null,ttype:SPACE},{input:"not",tag:"mo",output:"¬",tex:"neg",ttype:CONST},{input:"=>",tag:"mo",output:"⇒",tex:"implies",ttype:CONST},{input:"if",tag:"mo",output:"if",tex:null,ttype:SPACE},{input:"<=>",tag:"mo",output:"⇔",tex:"iff",ttype:CONST},{input:"AA",tag:"mo",output:"∀",tex:"forall",ttype:CONST},{input:"EE",tag:"mo",output:"∃",tex:"exists",ttype:CONST},{input:"_|_",tag:"mo",output:"⊥",tex:"bot",ttype:CONST},{input:"TT",tag:"mo",output:"⊤",tex:"top",ttype:CONST},{input:"|--",tag:"mo",output:"⊢",tex:"vdash",ttype:CONST},{input:"|==",tag:"mo",output:"⊨",tex:"models",ttype:CONST},{input:"(",tag:"mo",output:"(",tex:null,ttype:LEFTBRACKET},{input:")",tag:"mo",output:")",tex:null,ttype:RIGHTBRACKET},{input:"[",tag:"mo",output:"[",tex:null,ttype:LEFTBRACKET},{input:"]",tag:"mo",output:"]",tex:null,ttype:RIGHTBRACKET},{input:"{",tag:"mo",output:"{",tex:null,ttype:LEFTBRACKET},{input:"}",tag:"mo",output:"}",tex:null,ttype:RIGHTBRACKET},{input:"|",tag:"mo",output:"|",tex:null,ttype:LEFTRIGHT},{input:"(:",tag:"mo",output:"〈",tex:"langle",ttype:LEFTBRACKET},{input:":)",tag:"mo",output:"〉",tex:"rangle",ttype:RIGHTBRACKET},{input:"<<",tag:"mo",output:"〈",tex:null,ttype:LEFTBRACKET},{input:">>",tag:"mo",output:"〉",tex:null,ttype:RIGHTBRACKET},{input:"{:",tag:"mo",output:"{:",tex:null,ttype:LEFTBRACKET,invisible:!0},{input:":}",tag:"mo",output:":}",tex:null,ttype:RIGHTBRACKET,invisible:!0},{input:"int",tag:"mo",output:"∫",tex:null,ttype:CONST},{input:"dx",tag:"mi",output:"{:d x:}",tex:null,ttype:DEFINITION},{input:"dy",tag:"mi",output:"{:d y:}",tex:null,ttype:DEFINITION},{input:"dz",tag:"mi",output:"{:d z:}",tex:null,ttype:DEFINITION},{input:"dt",tag:"mi",output:"{:d t:}",tex:null,ttype:DEFINITION},{input:"oint",tag:"mo",output:"∮",tex:null,ttype:CONST},{input:"del",tag:"mo",output:"∂",tex:"partial",ttype:CONST},{input:"grad",tag:"mo",output:"∇",tex:"nabla",ttype:CONST},{input:"+-",tag:"mo",output:"±",tex:"pm",ttype:CONST},{input:"O/",tag:"mo",output:"∅",tex:"emptyset",ttype:CONST},{input:"oo",tag:"mo",output:"∞",tex:"infty",ttype:CONST},{input:"aleph",tag:"mo",output:"ℵ",tex:null,ttype:CONST},{input:"...",tag:"mo",output:"...",tex:"ldots",ttype:CONST},{input:":.",tag:"mo",output:"∴",tex:"therefore",ttype:CONST},{input:"/_",tag:"mo",output:"∠",tex:"angle",ttype:CONST},{input:"\\ ",tag:"mo",output:" ",tex:null,ttype:CONST},{input:"quad",tag:"mo",output:"  ",tex:null,ttype:CONST},{input:"qquad",tag:"mo",output:"    ",tex:null,ttype:CONST},{input:"cdots",tag:"mo",output:"⋯",tex:null,ttype:CONST},{input:"vdots",tag:"mo",output:"⋮",tex:null,ttype:CONST},{input:"ddots",tag:"mo",output:"⋱",tex:null,ttype:CONST},{input:"diamond",tag:"mo",output:"⋄",tex:null,ttype:CONST},{input:"square",tag:"mo",output:"□",tex:null,ttype:CONST},{input:"|__",tag:"mo",output:"⌊",tex:"lfloor",ttype:CONST},{input:"__|",tag:"mo",output:"⌋",tex:"rfloor",ttype:CONST},{input:"|~",tag:"mo",output:"⌈",tex:"lceiling",ttype:CONST},{input:"~|",tag:"mo",output:"⌉",tex:"rceiling",ttype:CONST},{input:"CC",tag:"mo",output:"ℂ",tex:null,ttype:CONST},{input:"NN",tag:"mo",output:"ℕ",tex:null,ttype:CONST},{input:"QQ",tag:"mo",output:"ℚ",tex:null,ttype:CONST},{input:"RR",tag:"mo",output:"ℝ",tex:null,ttype:CONST},{input:"ZZ",tag:"mo",output:"ℤ",tex:null,ttype:CONST},{input:"f",tag:"mi",output:"f",tex:null,ttype:UNARY,func:!0},{input:"g",tag:"mi",output:"g",tex:null,ttype:UNARY,func:!0},{input:"lim",tag:"mo",output:"lim",tex:null,ttype:UNDEROVER},{input:"Lim",tag:"mo",output:"Lim",tex:null,ttype:UNDEROVER},{input:"sin",tag:"mo",output:"sin",tex:null,ttype:UNARY,func:!0},{input:"cos",tag:"mo",output:"cos",tex:null,ttype:UNARY,func:!0},{input:"tan",tag:"mo",output:"tan",tex:null,ttype:UNARY,func:!0},{input:"sinh",tag:"mo",output:"sinh",tex:null,ttype:UNARY,func:!0},{input:"cosh",tag:"mo",output:"cosh",tex:null,ttype:UNARY,func:!0},{input:"tanh",tag:"mo",output:"tanh",tex:null,ttype:UNARY,func:!0},{input:"cot",tag:"mo",output:"cot",tex:null,ttype:UNARY,func:!0},{input:"sec",tag:"mo",output:"sec",tex:null,ttype:UNARY,func:!0},{input:"csc",tag:"mo",output:"csc",tex:null,ttype:UNARY,func:!0},{input:"log",tag:"mo",output:"log",tex:null,ttype:UNARY,func:!0},{input:"ln",tag:"mo",output:"ln",tex:null,ttype:UNARY,func:!0},{input:"det",tag:"mo",output:"det",tex:null,ttype:UNARY,func:!0},{input:"dim",tag:"mo",output:"dim",tex:null,ttype:CONST},{input:"mod",tag:"mo",output:"mod",tex:null,ttype:CONST},{input:"gcd",tag:"mo",output:"gcd",tex:null,ttype:UNARY,func:!0},{input:"lcm",tag:"mo",output:"lcm",tex:null,ttype:UNARY,func:!0},{input:"lub",tag:"mo",output:"lub",tex:null,ttype:CONST},{input:"glb",tag:"mo",output:"glb",tex:null,ttype:CONST},{input:"min",tag:"mo",output:"min",tex:null,ttype:UNDEROVER},{input:"max",tag:"mo",output:"max",tex:null,ttype:UNDEROVER},{input:"uarr",tag:"mo",output:"↑",tex:"uparrow",ttype:CONST},{input:"darr",tag:"mo",output:"↓",tex:"downarrow",ttype:CONST},{input:"rarr",tag:"mo",output:"→",tex:"rightarrow",ttype:CONST},{input:"->",tag:"mo",output:"→",tex:"to",ttype:CONST},{input:">->",tag:"mo",output:"↣",tex:"rightarrowtail",ttype:CONST},{input:"->>",tag:"mo",output:"↠",tex:"twoheadrightarrow",ttype:CONST},{input:">->>",tag:"mo",output:"⤖",tex:"twoheadrightarrowtail",ttype:CONST},{input:"|->",tag:"mo",output:"↦",tex:"mapsto",ttype:CONST},{input:"larr",tag:"mo",output:"←",tex:"leftarrow",ttype:CONST},{input:"harr",tag:"mo",output:"↔",tex:"leftrightarrow",ttype:CONST},{input:"rArr",tag:"mo",output:"⇒",tex:"Rightarrow",ttype:CONST},{input:"lArr",tag:"mo",output:"⇐",tex:"Leftarrow",ttype:CONST},{input:"hArr",tag:"mo",output:"⇔",tex:"Leftrightarrow",ttype:CONST},{input:"sqrt",tag:"msqrt",output:"sqrt",tex:null,ttype:UNARY},{input:"root",tag:"mroot",output:"root",tex:null,ttype:BINARY},{input:"frac",tag:"mfrac",output:"/",tex:null,ttype:BINARY},{input:"/",tag:"mfrac",output:"/",tex:null,ttype:INFIX},{input:"stackrel",tag:"mover",output:"stackrel",tex:null,ttype:BINARY},{input:"_",tag:"msub",output:"_",tex:null,ttype:INFIX},{input:"^",tag:"msup",output:"^",tex:null,ttype:INFIX},{input:"hat",tag:"mover",output:"^",tex:null,ttype:UNARY,acc:!0},{input:"bar",tag:"mover",output:"¯",tex:"overline",ttype:UNARY,acc:!0},{input:"vec",tag:"mover",output:"→",tex:null,ttype:UNARY,acc:!0},{input:"dot",tag:"mover",output:".",tex:null,ttype:UNARY,acc:!0},{input:"ddot",tag:"mover",output:"..",tex:null,ttype:UNARY,acc:!0},{input:"ul",tag:"munder",output:"̲",tex:"underline",ttype:UNARY,acc:!0},{input:"text",tag:"mtext",output:"text",tex:null,ttype:TEXT},{input:"mbox",tag:"mtext",output:"mbox",tex:null,ttype:TEXT},AMquote,{input:"bb",tag:"mstyle",atname:"fontweight",atval:"bold",output:"bb",tex:null,ttype:UNARY},{input:"mathbf",tag:"mstyle",atname:"fontweight",atval:"bold",output:"mathbf",tex:null,ttype:UNARY},{input:"sf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"sf",tex:null,ttype:UNARY},{input:"mathsf",tag:"mstyle",atname:"fontfamily",atval:"sans-serif",output:"mathsf",tex:null,ttype:UNARY},{input:"bbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"bbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",output:"mathbb",tex:null,ttype:UNARY,codes:AMbbb},{input:"cc",tag:"mstyle",atname:"mathvariant",atval:"script",output:"cc",tex:null,ttype:UNARY,codes:AMcal},{input:"mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",output:"mathcal",tex:null,ttype:UNARY,codes:AMcal},{input:"tt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"tt",tex:null,ttype:UNARY},{input:"mathtt",tag:"mstyle",atname:"fontfamily",atval:"monospace",output:"mathtt",tex:null,ttype:UNARY},{input:"fr",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"fr",tex:null,ttype:UNARY,codes:AMfrk},{input:"mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",output:"mathfrak",tex:null,ttype:UNARY,codes:AMfrk}],AMnames=[],AMnestingDepth,AMpreviousSymbol,AMcurrentSymbol,LMsymbols=[{input:"\\alpha",tag:"mi",output:"α",ttype:CONST},{input:"\\beta",tag:"mi",output:"β",ttype:CONST},{input:"\\gamma",tag:"mi",output:"γ",ttype:CONST},{input:"\\delta",tag:"mi",output:"δ",ttype:CONST},{input:"\\epsilon",tag:"mi",output:"ε",ttype:CONST},{input:"\\varepsilon",tag:"mi",output:"ɛ",ttype:CONST},{input:"\\zeta",tag:"mi",output:"ζ",ttype:CONST},{input:"\\eta",tag:"mi",output:"η",ttype:CONST},{input:"\\theta",tag:"mi",output:"θ",ttype:CONST},{input:"\\vartheta",tag:"mi",output:"ϑ",ttype:CONST},{input:"\\iota",tag:"mi",output:"ι",ttype:CONST},{input:"\\kappa",tag:"mi",output:"κ",ttype:CONST},{input:"\\lambda",tag:"mi",output:"λ",ttype:CONST},{input:"\\mu",tag:"mi",output:"μ",ttype:CONST},{input:"\\nu",tag:"mi",output:"ν",ttype:CONST},{input:"\\xi",tag:"mi",output:"ξ",ttype:CONST},{input:"\\pi",tag:"mi",output:"π",ttype:CONST},{input:"\\varpi",tag:"mi",output:"ϖ",ttype:CONST},{input:"\\rho",tag:"mi",output:"ρ",ttype:CONST},{input:"\\varrho",tag:"mi",output:"ϱ",ttype:CONST},{input:"\\varsigma",tag:"mi",output:"ς",ttype:CONST},{input:"\\sigma",tag:"mi",output:"σ",ttype:CONST},{input:"\\tau",tag:"mi",output:"τ",ttype:CONST},{input:"\\upsilon",tag:"mi",output:"υ",ttype:CONST},{input:"\\phi",tag:"mi",output:"φ",ttype:CONST},{input:"\\varphi",tag:"mi",output:"ϕ",ttype:CONST},{input:"\\chi",tag:"mi",output:"χ",ttype:CONST},{input:"\\psi",tag:"mi",output:"ψ",ttype:CONST},{input:"\\omega",tag:"mi",output:"ω",ttype:CONST},{input:"\\Gamma",tag:"mo",output:"Γ",ttype:CONST},{input:"\\Delta",tag:"mo",output:"Δ",ttype:CONST},{input:"\\Theta",tag:"mo",output:"Θ",ttype:CONST},{input:"\\Lambda",tag:"mo",output:"Λ",ttype:CONST},{input:"\\Xi",tag:"mo",output:"Ξ",ttype:CONST},{input:"\\Pi",tag:"mo",output:"Π",ttype:CONST},{input:"\\Sigma",tag:"mo",output:"Σ",ttype:CONST},{input:"\\Upsilon",tag:"mo",output:"Υ",ttype:CONST},{input:"\\Phi",tag:"mo",output:"Φ",ttype:CONST},{input:"\\Psi",tag:"mo",output:"Ψ",ttype:CONST},{input:"\\Omega",tag:"mo",output:"Ω",ttype:CONST},{input:"\\frac12",tag:"mo",output:"½",ttype:CONST},{input:"\\frac14",tag:"mo",output:"¼",ttype:CONST},{input:"\\frac34",tag:"mo",output:"¾",ttype:CONST},{input:"\\frac13",tag:"mo",output:"⅓",ttype:CONST},{input:"\\frac23",tag:"mo",output:"⅔",ttype:CONST},{input:"\\frac15",tag:"mo",output:"⅕",ttype:CONST},{input:"\\frac25",tag:"mo",output:"⅖",ttype:CONST},{input:"\\frac35",tag:"mo",output:"⅗",ttype:CONST},{input:"\\frac45",tag:"mo",output:"⅘",ttype:CONST},{input:"\\frac16",tag:"mo",output:"⅙",ttype:CONST},{input:"\\frac56",tag:"mo",output:"⅚",ttype:CONST},{input:"\\frac18",tag:"mo",output:"⅛",ttype:CONST},{input:"\\frac38",tag:"mo",output:"⅜",ttype:CONST},{input:"\\frac58",tag:"mo",output:"⅝",ttype:CONST},{input:"\\frac78",tag:"mo",output:"⅞",ttype:CONST},{input:"\\pm",tag:"mo",output:"±",ttype:CONST},{input:"\\mp",tag:"mo",output:"∓",ttype:CONST},{input:"\\triangleleft",tag:"mo",output:"⊲",ttype:CONST},{input:"\\triangleright",tag:"mo",output:"⊳",ttype:CONST},{input:"\\cdot",tag:"mo",output:"⋅",ttype:CONST},{input:"\\star",tag:"mo",output:"⋆",ttype:CONST},{input:"\\ast",tag:"mo",output:"*",ttype:CONST},{input:"\\times",tag:"mo",output:"×",ttype:CONST},{input:"\\div",tag:"mo",output:"÷",ttype:CONST},{input:"\\circ",tag:"mo",output:"∘",ttype:CONST},{input:"\\bullet",tag:"mo",output:"•",ttype:CONST},{input:"\\oplus",tag:"mo",output:"⊕",ttype:CONST},{input:"\\ominus",tag:"mo",output:"⊖",ttype:CONST},{input:"\\otimes",tag:"mo",output:"⊗",ttype:CONST},{input:"\\bigcirc",tag:"mo",output:"○",ttype:CONST},{input:"\\oslash",tag:"mo",output:"⊘",ttype:CONST},{input:"\\odot",tag:"mo",output:"⊙",ttype:CONST},{input:"\\land",tag:"mo",output:"∧",ttype:CONST},{input:"\\wedge",tag:"mo",output:"∧",ttype:CONST},{input:"\\lor",tag:"mo",output:"∨",ttype:CONST},{input:"\\vee",tag:"mo",output:"∨",ttype:CONST},{input:"\\cap",tag:"mo",output:"∩",ttype:CONST},{input:"\\cup",tag:"mo",output:"∪",ttype:CONST},{input:"\\sqcap",tag:"mo",output:"⊓",ttype:CONST},{input:"\\sqcup",tag:"mo",output:"⊔",ttype:CONST},{input:"\\uplus",tag:"mo",output:"⊎",ttype:CONST},{input:"\\amalg",tag:"mo",output:"∐",ttype:CONST},{input:"\\bigtriangleup",tag:"mo",output:"△",ttype:CONST},{input:"\\bigtriangledown",tag:"mo",output:"▽",ttype:CONST},{input:"\\dag",tag:"mo",output:"†",ttype:CONST},{input:"\\dagger",tag:"mo",output:"†",ttype:CONST},{input:"\\ddag",tag:"mo",output:"‡",ttype:CONST},{input:"\\ddagger",tag:"mo",output:"‡",ttype:CONST},{input:"\\lhd",tag:"mo",output:"⊲",ttype:CONST},{input:"\\rhd",tag:"mo",output:"⊳",ttype:CONST},{input:"\\unlhd",tag:"mo",output:"⊴",ttype:CONST},{input:"\\unrhd",tag:"mo",output:"⊵",ttype:CONST},{input:"\\sum",tag:"mo",output:"∑",ttype:UNDEROVER},{input:"\\prod",tag:"mo",output:"∏",ttype:UNDEROVER},{input:"\\bigcap",tag:"mo",output:"⋂",ttype:UNDEROVER},{input:"\\bigcup",tag:"mo",output:"⋃",ttype:UNDEROVER},{input:"\\bigwedge",tag:"mo",output:"⋀",ttype:UNDEROVER},{input:"\\bigvee",tag:"mo",output:"⋁",ttype:UNDEROVER},{input:"\\bigsqcap",tag:"mo",output:"⨅",ttype:UNDEROVER},{input:"\\bigsqcup",tag:"mo",output:"⨆",ttype:UNDEROVER},{input:"\\coprod",tag:"mo",output:"∐",ttype:UNDEROVER},{input:"\\bigoplus",tag:"mo",output:"⨁",ttype:UNDEROVER},{input:"\\bigotimes",tag:"mo",output:"⨂",ttype:UNDEROVER},{input:"\\bigodot",tag:"mo",output:"⨀",ttype:UNDEROVER},{input:"\\biguplus",tag:"mo",output:"⨄",ttype:UNDEROVER},{input:"\\int",tag:"mo",output:"∫",ttype:CONST},{input:"\\oint",tag:"mo",output:"∮",ttype:CONST},{input:":=",tag:"mo",output:":=",ttype:CONST},{input:"\\lt",tag:"mo",output:"<",ttype:CONST},{input:"\\gt",tag:"mo",output:">",ttype:CONST},{input:"\\ne",tag:"mo",output:"≠",ttype:CONST},{input:"\\neq",tag:"mo",output:"≠",ttype:CONST},{input:"\\le",tag:"mo",output:"≤",ttype:CONST},{input:"\\leq",tag:"mo",output:"≤",ttype:CONST},{input:"\\leqslant",tag:"mo",output:"≤",ttype:CONST},{input:"\\ge",tag:"mo",output:"≥",ttype:CONST},{input:"\\geq",tag:"mo",output:"≥",ttype:CONST},{input:"\\geqslant",tag:"mo",output:"≥",ttype:CONST},{input:"\\equiv",tag:"mo",output:"≡",ttype:CONST},{input:"\\ll",tag:"mo",output:"≪",ttype:CONST},{input:"\\gg",tag:"mo",output:"≫",ttype:CONST},{input:"\\doteq",tag:"mo",output:"≐",ttype:CONST},{input:"\\prec",tag:"mo",output:"≺",ttype:CONST},{input:"\\succ",tag:"mo",output:"≻",ttype:CONST},{input:"\\preceq",tag:"mo",output:"≼",ttype:CONST},{input:"\\succeq",tag:"mo",output:"≽",ttype:CONST},{input:"\\subset",tag:"mo",output:"⊂",ttype:CONST},{input:"\\supset",tag:"mo",output:"⊃",ttype:CONST},{input:"\\subseteq",tag:"mo",output:"⊆",ttype:CONST},{input:"\\supseteq",tag:"mo",output:"⊇",ttype:CONST},{input:"\\sqsubset",tag:"mo",output:"⊏",ttype:CONST},{input:"\\sqsupset",tag:"mo",output:"⊐",ttype:CONST},{input:"\\sqsubseteq",tag:"mo",output:"⊑",ttype:CONST},{input:"\\sqsupseteq",tag:"mo",output:"⊒",ttype:CONST},{input:"\\sim",tag:"mo",output:"∼",ttype:CONST},{input:"\\simeq",tag:"mo",output:"≃",ttype:CONST},{input:"\\approx",tag:"mo",output:"≈",ttype:CONST},{input:"\\cong",tag:"mo",output:"≅",ttype:CONST},{input:"\\Join",tag:"mo",output:"⋈",ttype:CONST},{input:"\\bowtie",tag:"mo",output:"⋈",ttype:CONST},{input:"\\in",tag:"mo",output:"∈",ttype:CONST},{input:"\\ni",tag:"mo",output:"∋",ttype:CONST},{input:"\\owns",tag:"mo",output:"∋",ttype:CONST},{input:"\\propto",tag:"mo",output:"∝",ttype:CONST},{input:"\\vdash",tag:"mo",output:"⊢",ttype:CONST},{input:"\\dashv",tag:"mo",output:"⊣",ttype:CONST},{input:"\\models",tag:"mo",output:"⊨",ttype:CONST},{input:"\\perp",tag:"mo",output:"⊥",ttype:CONST},{input:"\\smile",tag:"mo",output:"⌣",ttype:CONST},{input:"\\frown",tag:"mo",output:"⌢",ttype:CONST},{input:"\\asymp",tag:"mo",output:"≍",ttype:CONST},{input:"\\notin",tag:"mo",output:"∉",ttype:CONST},{input:"\\begin{eqnarray}",output:"X",ttype:MATRIX,invisible:!0},{input:"\\begin{array}",output:"X",ttype:MATRIX,invisible:!0},{input:"\\\\",output:"}&{",ttype:DEFINITION},{input:"\\end{eqnarray}",output:"}}",ttype:DEFINITION},{input:"\\end{array}",output:"}}",ttype:DEFINITION},{input:"\\big",tag:"mo",output:"X",atval:"1.2",ieval:"2.2",ttype:BIG},{input:"\\Big",tag:"mo",output:"X",atval:"1.6",ieval:"2.6",ttype:BIG},{input:"\\bigg",tag:"mo",output:"X",atval:"2.2",ieval:"3.2",ttype:BIG},{input:"\\Bigg",tag:"mo",output:"X",atval:"2.9",ieval:"3.9",ttype:BIG},{input:"\\left",tag:"mo",output:"X",ttype:LEFTBRACKET},{input:"\\right",tag:"mo",output:"X",ttype:RIGHTBRACKET},{input:"{",output:"{",ttype:LEFTBRACKET,invisible:!0},{input:"}",output:"}",ttype:RIGHTBRACKET,invisible:!0},{input:"(",tag:"mo",output:"(",atval:"1",ttype:STRETCHY},{input:"[",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\lbrack",tag:"mo",output:"[",atval:"1",ttype:STRETCHY},{input:"\\{",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\lbrace",tag:"mo",output:"{",atval:"1",ttype:STRETCHY},{input:"\\langle",tag:"mo",output:"〈",atval:"1",ttype:STRETCHY},{input:"\\lfloor",tag:"mo",output:"⌊",atval:"1",ttype:STRETCHY},{input:"\\lceil",tag:"mo",output:"⌈",atval:"1",ttype:STRETCHY},{input:")",tag:"mo",output:")",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"]",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrack",tag:"mo",output:"]",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\}",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rbrace",tag:"mo",output:"}",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rangle",tag:"mo",output:"〉",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rfloor",tag:"mo",output:"⌋",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"\\rceil",tag:"mo",output:"⌉",rtag:"mi",atval:"1",ttype:STRETCHY},{input:"|",tag:"mo",output:"∣",atval:"1",ttype:STRETCHY},{input:"\\|",tag:"mo",output:"∥",atval:"1",ttype:STRETCHY},{input:"\\vert",tag:"mo",output:"∣",atval:"1",ttype:STRETCHY},{input:"\\Vert",tag:"mo",output:"∥",atval:"1",ttype:STRETCHY},{input:"\\mid",tag:"mo",output:"∣",atval:"1",ttype:STRETCHY},{input:"\\parallel",tag:"mo",output:"∥",atval:"1",ttype:STRETCHY},{input:"/",tag:"mo",output:"/",atval:"1.01",ttype:STRETCHY},{input:"\\backslash",tag:"mo",output:"∖",atval:"1",ttype:STRETCHY},{input:"\\setminus",tag:"mo",output:"\\",ttype:CONST},{input:"\\!",tag:"mspace",atname:"width",atval:"-0.167em",ttype:SPACE},{input:"\\,",tag:"mspace",atname:"width",atval:"0.167em",ttype:SPACE},{input:"\\>",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\:",tag:"mspace",atname:"width",atval:"0.222em",ttype:SPACE},{input:"\\;",tag:"mspace",atname:"width",atval:"0.278em",ttype:SPACE},{input:"~",tag:"mspace",atname:"width",atval:"0.333em",ttype:SPACE},{input:"\\quad",tag:"mspace",atname:"width",atval:"1em",ttype:SPACE},{input:"\\qquad",tag:"mspace",atname:"width",atval:"2em",ttype:SPACE},{input:"\\prime",tag:"mo",output:"′",ttype:CONST},{input:"'",tag:"mo",output:"ʹ",ttype:CONST},{input:"''",tag:"mo",output:"ʺ",ttype:CONST},{input:"'''",tag:"mo",output:"‴",ttype:CONST},{input:"''''",tag:"mo",output:"⁗",ttype:CONST},{input:"\\ldots",tag:"mo",output:"…",ttype:CONST},{input:"\\cdots",tag:"mo",output:"⋯",ttype:CONST},{input:"\\vdots",tag:"mo",output:"⋮",ttype:CONST},{input:"\\ddots",tag:"mo",output:"⋱",ttype:CONST},{input:"\\forall",tag:"mo",output:"∀",ttype:CONST},{input:"\\exists",tag:"mo",output:"∃",ttype:CONST},{input:"\\Re",tag:"mo",output:"ℜ",ttype:CONST},{input:"\\Im",tag:"mo",output:"ℑ",ttype:CONST},{input:"\\aleph",tag:"mo",output:"ℵ",ttype:CONST},{input:"\\hbar",tag:"mo",output:"ℏ",ttype:CONST},{input:"\\ell",tag:"mo",output:"ℓ",ttype:CONST},{input:"\\wp",tag:"mo",output:"℘",ttype:CONST},{input:"\\emptyset",tag:"mo",output:"∅",ttype:CONST},{input:"\\infty",tag:"mo",output:"∞",ttype:CONST},{input:"\\surd",tag:"mo",output:"\\sqrt{}",ttype:DEFINITION},{input:"\\partial",tag:"mo",output:"∂",ttype:CONST},{input:"\\nabla",tag:"mo",output:"∇",ttype:CONST},{input:"\\triangle",tag:"mo",output:"△",ttype:CONST},{input:"\\therefore",tag:"mo",output:"∴",ttype:CONST},{input:"\\angle",tag:"mo",output:"∠",ttype:CONST},{input:"\\diamond",tag:"mo",output:"⋄",ttype:CONST},{input:"\\Diamond",tag:"mo",output:"◇",ttype:CONST},{input:"\\neg",tag:"mo",output:"¬",ttype:CONST},{input:"\\lnot",tag:"mo",output:"¬",ttype:CONST},{input:"\\bot",tag:"mo",output:"⊥",ttype:CONST},{input:"\\top",tag:"mo",output:"⊤",ttype:CONST},{input:"\\square",tag:"mo",output:"▫",ttype:CONST},{input:"\\Box",tag:"mo",output:"□",ttype:CONST},{input:"\\wr",tag:"mo",output:"≀",ttype:CONST},{input:"\\arccos",tag:"mi",output:"arccos",ttype:UNARY,func:!0},{input:"\\arcsin",tag:"mi",output:"arcsin",ttype:UNARY,func:!0},{input:"\\arctan",tag:"mi",output:"arctan",ttype:UNARY,func:!0},{input:"\\arg",tag:"mi",output:"arg",ttype:UNARY,func:!0},{input:"\\cos",tag:"mi",output:"cos",ttype:UNARY,func:!0},{input:"\\cosh",tag:"mi",output:"cosh",ttype:UNARY,func:!0},{input:"\\cot",tag:"mi",output:"cot",ttype:UNARY,func:!0},{input:"\\coth",tag:"mi",output:"coth",ttype:UNARY,func:!0},{input:"\\csc",tag:"mi",output:"csc",ttype:UNARY,func:!0},{input:"\\deg",tag:"mi",output:"deg",ttype:UNARY,func:!0},{input:"\\det",tag:"mi",output:"det",ttype:UNARY,func:!0},{input:"\\dim",tag:"mi",output:"dim",ttype:UNARY,func:!0},{input:"\\exp",tag:"mi",output:"exp",ttype:UNARY,func:!0},{input:"\\gcd",tag:"mi",output:"gcd",ttype:UNARY,func:!0},{input:"\\hom",tag:"mi",output:"hom",ttype:UNARY,func:!0},{input:"\\inf",tag:"mo",output:"inf",ttype:UNDEROVER},{input:"\\ker",tag:"mi",output:"ker",ttype:UNARY,func:!0},{input:"\\lg",tag:"mi",output:"lg",ttype:UNARY,func:!0},{input:"\\lim",tag:"mo",output:"lim",ttype:UNDEROVER},{input:"\\liminf",tag:"mo",output:"liminf",ttype:UNDEROVER},{input:"\\limsup",tag:"mo",output:"limsup",ttype:UNDEROVER},{input:"\\ln",tag:"mi",output:"ln",ttype:UNARY,func:!0},{input:"\\log",tag:"mi",output:"log",ttype:UNARY,func:!0},{input:"\\max",tag:"mo",output:"max",ttype:UNDEROVER},{input:"\\min",tag:"mo",output:"min",ttype:UNDEROVER},{input:"\\Pr",tag:"mi",output:"Pr",ttype:UNARY,func:!0},{input:"\\sec",tag:"mi",output:"sec",ttype:UNARY,func:!0},{input:"\\sin",tag:"mi",output:"sin",ttype:UNARY,func:!0},{input:"\\sinh",tag:"mi",output:"sinh",ttype:UNARY,func:!0},{input:"\\sup",tag:"mo",output:"sup",ttype:UNDEROVER},{input:"\\tan",tag:"mi",output:"tan",ttype:UNARY,func:!0},{input:"\\tanh",tag:"mi",output:"tanh",ttype:UNARY,func:!0},{input:"\\gets",tag:"mo",output:"←",ttype:CONST},{input:"\\leftarrow",tag:"mo",output:"←",ttype:CONST},{input:"\\to",tag:"mo",output:"→",ttype:CONST},{input:"\\rightarrow",tag:"mo",output:"→",ttype:CONST},{input:"\\leftrightarrow",tag:"mo",output:"↔",ttype:CONST},{input:"\\uparrow",tag:"mo",output:"↑",ttype:CONST},{input:"\\downarrow",tag:"mo",output:"↓",ttype:CONST},{input:"\\updownarrow",tag:"mo",output:"↕",ttype:CONST},{input:"\\Leftarrow",tag:"mo",output:"⇐",ttype:CONST},{input:"\\Rightarrow",tag:"mo",output:"⇒",ttype:CONST},{input:"\\Leftrightarrow",tag:"mo",output:"⇔",ttype:CONST},{input:"\\iff",tag:"mo",output:"~\\Longleftrightarrow~",ttype:DEFINITION},{input:"\\Uparrow",tag:"mo",output:"⇑",ttype:CONST},{input:"\\Downarrow",tag:"mo",output:"⇓",ttype:CONST},{input:"\\Updownarrow",tag:"mo",output:"⇕",ttype:CONST},{input:"\\mapsto",tag:"mo",output:"↦",ttype:CONST},{input:"\\longleftarrow",tag:"mo",output:"←",ttype:LONG},{input:"\\longrightarrow",tag:"mo",output:"→",ttype:LONG},{input:"\\longleftrightarrow",tag:"mo",output:"↔",ttype:LONG},{input:"\\Longleftarrow",tag:"mo",output:"⇐",ttype:LONG},{input:"\\Longrightarrow",tag:"mo",output:"⇒",ttype:LONG},{input:"\\implies",tag:"mo",output:"⇒",ttype:LONG},{input:"\\Longleftrightarrow",tag:"mo",output:"⇔",ttype:LONG},{input:"\\longmapsto",tag:"mo",output:"↦",ttype:CONST},{input:"\\sqrt",tag:"msqrt",output:"sqrt",ttype:UNARY},{input:"\\root",tag:"mroot",output:"root",ttype:BINARY},{input:"\\frac",tag:"mfrac",output:"/",ttype:BINARY},{input:"\\stackrel",tag:"mover",output:"stackrel",ttype:BINARY},{input:"\\atop",tag:"mfrac",output:"",ttype:INFIX},{input:"\\choose",tag:"mfrac",output:"",ttype:INFIX},{input:"_",tag:"msub",output:"_",ttype:INFIX},{input:"^",tag:"msup",output:"^",ttype:INFIX},{input:"\\mathrm",tag:"mtext",output:"text",ttype:TEXT},{input:"\\mbox",tag:"mtext",output:"mbox",ttype:TEXT},{input:"\\acute",tag:"mover",output:"´",ttype:UNARY,acc:!0},{input:"\\grave",tag:"mover",output:"`",ttype:UNARY,acc:!0},{input:"\\breve",tag:"mover",output:"˘",ttype:UNARY,acc:!0},{input:"\\check",tag:"mover",output:"ˇ",ttype:UNARY,acc:!0},{input:"\\dot",tag:"mover",output:".",ttype:UNARY,acc:!0},{input:"\\ddot",tag:"mover",output:"..",ttype:UNARY,acc:!0},{input:"\\mathring",tag:"mover",output:"°",ttype:UNARY,acc:!0},{input:"\\vec",tag:"mover",output:"⃗",ttype:UNARY,acc:!0},{input:"\\overrightarrow",tag:"mover",output:"⃗",ttype:UNARY,acc:!0},{input:"\\overleftarrow",tag:"mover",output:"⃖",ttype:UNARY,acc:!0},{input:"\\hat",tag:"mover",output:"^",ttype:UNARY,acc:!0},{input:"\\widehat",tag:"mover",output:"̂",ttype:UNARY,acc:!0},{input:"\\tilde",tag:"mover",output:"~",ttype:UNARY,acc:!0},{input:"\\widetilde",tag:"mover",output:"˜",ttype:UNARY,acc:!0},{input:"\\bar",tag:"mover",output:"‾",ttype:UNARY,acc:!0},{input:"\\overbrace",tag:"mover",output:"⎴",ttype:UNARY,acc:!0},{input:"\\overline",tag:"mover",output:"¯",ttype:UNARY,acc:!0},{input:"\\underbrace",tag:"munder",output:"⎵",ttype:UNARY,acc:!0},{input:"\\underline",tag:"munder",output:"¯",ttype:UNARY,acc:!0},{input:"\\displaystyle",tag:"mstyle",atname:"displaystyle",atval:"true",ttype:UNARY},{input:"\\textstyle",tag:"mstyle",atname:"displaystyle",atval:"false",ttype:UNARY},{input:"\\scriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"1",ttype:UNARY},{input:"\\scriptscriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"2",ttype:UNARY},{input:"\\textrm",tag:"mstyle",output:"\\mathrm",ttype:DEFINITION},{input:"\\mathbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\textbf",tag:"mstyle",atname:"mathvariant",atval:"bold",ttype:UNARY},{input:"\\mathit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\textit",tag:"mstyle",atname:"mathvariant",atval:"italic",ttype:UNARY},{input:"\\mathtt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\texttt",tag:"mstyle",atname:"mathvariant",atval:"monospace",ttype:UNARY},{input:"\\mathsf",tag:"mstyle",atname:"mathvariant",atval:"sans-serif",ttype:UNARY},{input:"\\mathbb",tag:"mstyle",atname:"mathvariant",atval:"double-struck",ttype:UNARY,codes:AMbbb},{input:"\\mathcal",tag:"mstyle",atname:"mathvariant",atval:"script",ttype:UNARY,codes:AMcal},{input:"\\mathfrak",tag:"mstyle",atname:"mathvariant",atval:"fraktur",ttype:UNARY,codes:AMfrk}],LMnames=[],LMpreviousSymbol,LMcurrentSymbol,tcnt=0,dcnt=0,checkIfSVGavailable=!0,notifyIfNoSVG=!0,alertIfNoSVG=!1,noSVG=!1,defaultwidth=300;
defaultheight=200;var defaultxmin=-5.5;defaultxmax=5.5;var defaultborder=0;border=defaultborder;var defaultstrokewidth="1",defaultstroke="blue",defaultstrokeopacity=1,defaultstrokedasharray=null,defaultfill="none",defaultfillopacity=1,defaultfontstyle="normal",defaultfontfamily="times",defaultfontsize="16",defaultfontweight="normal",defaultfontstroke="none",defaultfontfill="none",defaultmarker="none",defaultendpoints="",showcoordinates=!0,markerstrokewidth="1",markerstroke="black",markerfill="yellow",markersize=4,arrowfill=stroke,dotradius=4,ticklength=4,axesstroke="black",gridstroke="grey",backgroundstyle="fill-opacity:1; fill:white",singlelettersitalic=!0,picturepos=null,xunitlength,yunitlength,origin=[0,0],above="above",below="below",left="left",right="right",aboveleft="aboveleft",aboveright="aboveright",belowleft="belowleft",belowright="belowright",xmin,xmax,ymin,ymax,xscl,yscl,xgrid,ygrid,xtick,ytick,initialized,strokewidth,strokedasharray,stroke,fill,strokeopacity,fillopacity,fontstyle,fontfamily,fontsize,fontweight,fontstroke,fontfill,marker,endpoints,dynamic={},picture,svgpicture,doc,width,height,isIE=null==document.createElementNS,cpi="π",ctheta="θ",log=function(a){return ln(a)/ln(10)},pi=Math.PI,e=Math.E,ln=Math.log,sqrt=Math.sqrt,floor=Math.floor,ceil=Math.ceil,abs=Math.abs,sin=Math.sin,cos=Math.cos,tan=Math.tan,arcsin=Math.asin,arccos=Math.acos,arctan=Math.atan,sec=function(a){return 1/Math.cos(a)},csc=function(a){return 1/Math.sin(a)},cot=function(a){return 1/Math.tan(a)},arcsec=function(a){return arccos(1/a)},arccsc=function(a){return arcsin(1/a)},arccot=function(a){return arctan(1/a)},sinh=function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh=function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsinh=function(a){return ln(a+Math.sqrt(a*a+1))},arccosh=function(a){return ln(a+Math.sqrt(a*a-1))},arctanh=function(a){return ln((1+a)/(1-a))/2},sech=function(a){return 1/cosh(a)},csch=function(a){return 1/sinh(a)},coth=function(a){return 1/tanh(a)},arcsech=function(a){return arccosh(1/a)},arccsch=function(a){return arcsinh(1/a)},arccoth=function(a){return arctanh(1/a)},sign=function(a){return 0==a?0:0>a?-1:1},lastSlot=0,sinceFirstClick=0,dblClkTimer;point=dot;var calcstr='<table align="center">\n<tr><th>\nASCIIMath Scientific Calculator\n</th></tr>\n<tr><td>\nClick in the box to use your keyboard or use the buttons\n</td></tr>\n<tr><td>\n<textarea id="in" rows="3" cols="40" onkeyup="calculate(\'in\',\'out\')"></textarea></td></tr>\n<tr><td height="50">Result: &nbsp; &nbsp; <span id="out"></span></td></tr>\n</table>\n<table align="center" cellspacing="0" cellpadding="0">\n<tbody align="center">\n<tr>\n<td colspan="4">\n<button onclick="append(\'sin^-1(\')"><font size=2>`sin^-1`</font></button><button onclick="append(\'cos^-1(\')"><font size=2>`cos^-1`</font></button><button onclick="append(\'tan^-1(\')"><font size=2>`tan^-1`</font></button></td>\n<td><button onclick="clearTextArea()">&nbsp;`C`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td><button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button></td>\n<td><button onclick="append(\'sin(\')">&nbsp;`sin`</button></td>\n<td><button onclick="append(\'cos(\')">&nbsp;`cos`</button></td>\n<td><button onclick="append(\'tan(\')">&nbsp;`tan`</button></td>\n<td><button onclick="append(\'^\')">`x^y`</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'!\')">&nbsp; `!` &nbsp;</button></td>\n\n<td><button onclick="append(\'(\')"><font size=2>&nbsp;&nbsp;`(`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\')\')"><font size=2>&nbsp;&nbsp;`)`&nbsp;&nbsp;</font></button></td>\n<td><button onclick="append(\'sqrt(\')"><font size=2>`sqrt({::}^ )`</font></button></td>\n<td><button onclick="append(\'/\')">&nbsp;`-: `</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'log(\')">`log`</button></td>\n<td><button onclick="append(\'7\')">&nbsp; `7` &nbsp;</button></td>\n<td><button onclick="append(\'8\')">&nbsp; `8` &nbsp;</button></td>\n\n<td><button onclick="append(\'9\')">&nbsp; `9` &nbsp;</button></td>\n<td><button onclick="append(\'*\')">&nbsp;`times`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'ln(\')">&nbsp;`ln`&nbsp;</button></td>\n<td><button onclick="append(\'4\')">&nbsp; `4` &nbsp;</button></td>\n<td><button onclick="append(\'5\')">&nbsp; `5` &nbsp;</button></td>\n<td><button onclick="append(\'6\')">&nbsp; `6` &nbsp;</button></td>\n\n<td><button onclick="append(\'-\')">&nbsp;`-{::}`&nbsp;</button></td>\n</tr>\n<tr>\n<td><button onclick="append(\'e\')">&nbsp; `e` &nbsp;</button></td>\n<td><button onclick="append(\'1\')">&nbsp;&nbsp;`1` &nbsp;</button></td>\n<td><button onclick="append(\'2\')">&nbsp; `2` &nbsp;</button></td>\n<td><button onclick="append(\'3\')">&nbsp; `3` &nbsp;</button></td>\n<td><button onclick="append(\'+\')">&nbsp;`+{::}`&nbsp;</button></td>\n\n</tr>\n<tr>\n<td> <!--button onclick="append(\'pi\')">&nbsp;`pi` &nbsp;</button--></td>\n<td><button onclick="append(\'0\')">&nbsp; `0` &nbsp;</button></td>\n<td><button onclick="append(\'.\')">&nbsp; `.` &nbsp;</button></td>\n<td><button onclick="append(\'\\n\')">&nbsp;`"ent"`</button></td>\n</tr>\n</tbody>\n</table>';if("undefined"!=typeof window.addEventListener)window.addEventListener("load",generic,!1);else if("undefined"!=typeof document.addEventListener)document.addEventListener("load",generic,!1);else if("undefined"!=typeof window.attachEvent)window.attachEvent("onload",generic);else if("function"==typeof window.onload){var existing=onload;window.onload=function(){existing(),generic()}}else window.onload=generic;Ext.menu.EditableItem=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",hideOnClick:!1,initComponent:function(){Ext.menu.EditableItem.superclass.initComponent.call(this),this.addEvents("keyup"),this.editor=this.editor||new Ext.form.TextField,this.text&&this.editor.setValue(this.text)},onRender:function(a){var b=a.createChild({cls:this.itemCls,html:'<img src="'+this.icon+'" class="x-menu-item-icon" style="margin: 3px 3px 2px 2px;" />'});Ext.apply(this.config,{width:125}),this.editor.render(b),this.el=b,this.relayEvents(this.editor.el,["keyup"]),Ext.isGecko&&b.setStyle("overflow","auto"),Ext.menu.EditableItem.superclass.onRender.call(this,a)},getValue:function(){return this.editor.getValue()},setValue:function(a){this.editor.setValue(a)},isValid:function(a){return this.editor.isValid(a)}}),Ext.menu.RangeMenu=function(a){Ext.menu.RangeMenu.superclass.constructor.call(this,a),this.updateTask=new Ext.util.DelayedTask(this.fireUpdate,this);var b=this.fieldCfg,c=this.fieldCls,d=this.fields=Ext.applyIf(this.fields||{},{gt:new Ext.menu.EditableItem({icon:this.icons.gt,editor:new c("object"==typeof b?b.gt||"":b)}),lt:new Ext.menu.EditableItem({icon:this.icons.lt,editor:new c("object"==typeof b?b.lt||"":b)}),eq:new Ext.menu.EditableItem({icon:this.icons.eq,editor:new c("object"==typeof b?b.gt||"":b)})});this.add(d.gt,d.lt,"-",d.eq);for(var e in d)d[e].on("keyup",this.onKeyUp.createDelegate(this,[d[e]],!0),this);this.addEvents("update")},Ext.extend(Ext.menu.RangeMenu,Ext.menu.Menu,{fieldCls:Ext.form.NumberField,fieldCfg:"",updateBuffer:500,icons:{gt:"/img/small_icons/greater_then.png",lt:"/img/small_icons/less_then.png",eq:"/img/small_icons/equals.png"},fireUpdate:function(){this.fireEvent("update",this)},setValue:function(a){for(var b in this.fields)this.fields[b].setValue(void 0!==a[b]?a[b]:"");this.fireEvent("update",this)},getValue:function(){var a={};for(var b in this.fields){var c=this.fields[b];c.isValid()&&String(c.getValue()).length>0&&(a[b]=c.getValue())}return a},onKeyUp:function(a,b,c,d){return a.getKey()==a.ENTER&&d.isValid()?(this.hide(!0),void 0):(d==this.fields.eq?(this.fields.gt.setValue(null),this.fields.lt.setValue(null)):this.fields.eq.setValue(null),this.updateTask.delay(this.updateBuffer),void 0)}}),Ext.grid.CheckColumn=function(a){this.id||(this.id=Ext.id()),this.addEvents({click:!0}),Ext.grid.CheckColumn.superclass.constructor.call(this),Ext.apply(this,a,{init:function(a){this.grid=a,this.grid.on("render",function(){var a=this.grid.getView();a.mainBody.on("mousedown",this.onMouseDown,this)},this)},onMouseDown:function(a,b){if(b.className&&-1!=b.className.indexOf("x-grid3-cc-"+this.id)){var c=this.grid.view.findRowIndex(b),d=this.grid.view.findCellIndex(b),e=this.grid.store.getAt(c),f=this.grid.colModel.getDataIndex(d),g={grid:this.grid,record:e,field:f,value:e.data[f],row:c,column:d,cancel:!1};if(this.grid.fireEvent("beforeedit",g,this.grid)!==!1&&g.cancel!==!0){a.stopEvent();var h=this.grid.getView().findRowIndex(b),i=this.grid.store.getAt(h);i.set(this.dataIndex,!i.data[this.dataIndex]),g.value=i.data[this.dataIndex],this.grid.fireEvent("afteredit",g,this.grid)}}},renderer:function(a,b){return b.css+=" x-grid3-check-col-td",'<div class="x-grid3-check-col'+(a?"-on":"")+" x-grid3-cc-"+this.id+'">&#160;</div>'}}),this.renderer=this.renderer.createDelegate(this)},Ext.extend(Ext.grid.CheckColumn,Ext.util.Observable),"function"!=typeof RegExp.escape&&(RegExp.escape=function(a){return"string"!=typeof a?a:a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}),Ext.ns("Ext.ux.grid"),Ext.ux.grid.RowActions=function(a){Ext.apply(this,a),this.addEvents("beforeaction","action","beforegroupaction","groupaction"),Ext.ux.grid.RowActions.superclass.constructor.call(this)},Ext.extend(Ext.ux.grid.RowActions,Ext.util.Observable,{actionEvent:"mousedown",autoWidth:!0,dataIndex:"",header:"",menuDisabled:!0,sortable:!1,tplGroup:'<tpl for="actions"><div class="ux-grow-action-item<tpl if="\'right\'===align"> ux-action-right</tpl> {cls}" style="{style}" qtip="{qtip}">{text}</div></tpl>',tplRow:'<div class="ux-row-action"><tpl for="actions"><div class="ux-row-action-item {cls} <tpl if="text">ux-row-action-text</tpl>" style="{hide}{style}" qtip="{qtip}"><tpl if="text"><span qtip="{qtip}">{text}</span></tpl></div></tpl></div>',hideMode:"visiblity",widthIntercept:4,widthSlope:21,init:function(a){this.grid=a,this.tpl||(this.tpl=this.processActions(this.actions)),this.autoWidth&&(this.width=this.widthSlope*this.actions.length+this.widthIntercept,this.fixed=!0);var b=a.getView(),c={scope:this};c[this.actionEvent]=this.onClick,a.afterRender=a.afterRender.createSequence(function(){b.mainBody.on(c)},this),this.renderer||(this.renderer=function(a,b,c,d,e,f){return b.css+=(b.css?" ":"")+"ux-row-action-cell",this.tpl.apply(this.getData(a,b,c,d,e,f))}.createDelegate(this)),b.groupTextTpl&&this.groupActions&&(b.interceptMouse=b.interceptMouse.createInterceptor(function(a){return a.getTarget(".ux-grow-action-item")?!1:void 0}),b.groupTextTpl='<div class="ux-grow-action-text">'+b.groupTextTpl+"</div>"+this.processActions(this.groupActions,this.tplGroup).apply())},getData:function(a,b,c){return c.data||{}},processActions:function(a,b){var c=[];Ext.each(a,function(a){a.iconCls&&"function"==typeof(a.callback||a.cb)&&(this.callbacks=this.callbacks||{},this.callbacks[a.iconCls]=a.callback||a.cb);var b={cls:a.iconIndex?"{"+a.iconIndex+"}":a.iconCls?a.iconCls:"",qtip:a.qtipIndex?"{"+a.qtipIndex+"}":a.tooltip||a.qtip?a.tooltip||a.qtip:"",text:a.textIndex?"{"+a.textIndex+"}":a.text?a.text:"",hide:a.hideIndex?'<tpl if="'+a.hideIndex+'">'+("display"===this.hideMode?"display:none":"visibility:hidden")+";</tpl>":a.hide?"display"===this.hideMode?"display:none":"visibility:hidden;":"",align:a.align||"right",style:a.style?a.style:""};c.push(b)},this);var d=new Ext.XTemplate(b||this.tplRow);return new Ext.XTemplate(d.apply({actions:c}))},onClick:function(a,b){var c=this.grid.getView(),d=!1,e=a.getTarget(".x-grid3-row"),f=c.findCellIndex(b.parentNode.parentNode),g=a.getTarget(".ux-row-action-item");if(g&&(d=g.className.replace(/ux-row-action-item /,""),d&&(d=d.replace(/ ux-row-action-text/,""),d=d.trim())),!1!==e&&!1!==f&&!1!==d){var h=this.grid.store.getAt(e.rowIndex);if(this.callbacks&&"function"==typeof this.callbacks[d]&&this.callbacks[d](this.grid,h,d,e.rowIndex,f),!0!==this.eventsSuspended&&!1===this.fireEvent("beforeaction",this.grid,h,d,e.rowIndex,f))return;!0!==this.eventsSuspended&&this.fireEvent("action",this.grid,h,d,e.rowIndex,f)}if(g=a.getTarget(".ux-grow-action-item")){var i,j=c.findGroup(b),k=j?j.id.replace(/ext-gen[0-9]+-gp-/,""):null;if(k){var l=new RegExp(RegExp.escape(k));i=this.grid.store.queryBy(function(a){return a._groupId.match(l)}),i=i?i.items:[]}if(d=g.className.replace(/ux-grow-action-item (ux-action-right )*/,""),"function"==typeof this.callbacks[d]&&this.callbacks[d](this.grid,i,d,k),!0!==this.eventsSuspended&&!1===this.fireEvent("beforegroupaction",this.grid,i,d,k))return!1;this.fireEvent("groupaction",this.grid,i,d,k)}}}),Ext.reg("rowactions",Ext.ux.grid.RowActions),Ext.ns("Ext.ux.grid"),Ext.ux.grid.Search=function(a){Ext.apply(this,a),Ext.ux.grid.Search.superclass.constructor.call(this)},Ext.extend(Ext.ux.grid.Search,Ext.util.Observable,{searchText:"Suche",searchTipText:"Gib einen Text ein und drück die Enter-Taste",selectAllText:"Alle auswählen",position:"bottom",iconCls:"icon-magnifier",checkIndexes:"all",disableIndexes:[],dateFormat:void 0,showSelectAll:!0,mode:"remote",width:100,xtype:"gridsearch",paramNames:{fields:"fields",query:"query"},shortcutKey:"r",shortcutModifier:"alt",init:function(a){this.grid=a,"string"==typeof this.toolbarContainer&&(this.toolbarContainer=Ext.getCmp(this.toolbarContainer)),a.onRender=a.onRender.createSequence(this.onRender,this),a.reconfigure=a.reconfigure.createSequence(this.reconfigure,this)},onRender:function(){var a=this.toolbarContainer||this.grid,b="bottom"===this.position?a.bottomToolbar:a.topToolbar;if(this.menu=new Ext.menu.Menu,"right"===this.align?b.addFill():0<b.items.getCount()&&b.addSeparator(),b.add({text:this.searchText,menu:this.menu,iconCls:this.iconCls}),this.field=new Ext.form.TwinTriggerField({width:this.width,selectOnFocus:void 0===this.selectOnFocus?!0:this.selectOnFocus,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",onTrigger1Click:this.onTriggerClear.createDelegate(this),onTrigger2Click:this.onTriggerSearch.createDelegate(this),minLength:this.minLength}),this.field.on("render",function(){this.field.el.dom.qtip=this.searchTipText;var a=new Ext.KeyMap(this.field.el,[{key:Ext.EventObject.ENTER,scope:this,fn:this.onTriggerSearch},{key:Ext.EventObject.ESC,scope:this,fn:this.onTriggerClear}]);a.stopEvent=!0},this,{single:!0}),b.add(this.field),this.reconfigure(),this.shortcutKey&&this.shortcutModifier){var c=this.grid.getEl(),d=[{key:this.shortcutKey,scope:this,stopEvent:!0,fn:function(){this.field.focus()}}];d[0][this.shortcutModifier]=!0,this.keymap=new Ext.KeyMap(c,d)}},onTriggerClear:function(){this.field.getValue()&&(this.field.setValue(""),this.field.focus(),this.onTriggerSearch())},onTriggerSearch:function(){if(this.field.isValid()){var a=this.field.getValue(),b=this.grid.store;if("local"===this.mode)b.clearFilter(),a&&b.filterBy(function(b){var c=!1;return this.menu.items.each(function(d){if(d.checked&&!c){var e=b.get(d.dataIndex);e=e instanceof Date?e.format(this.dateFormat||b.fields.get(d.dataIndex).dateFormat):e;var f=new RegExp(a,"gi");c=f.test(e)}},this),c?!0:c},this);else{b.lastOptions&&b.lastOptions.params&&(b.lastOptions.params[b.paramNames.start]=0);var c=[];this.menu.items.each(function(a){a.checked&&c.push(a.dataIndex)}),delete b.baseParams[this.paramNames.fields],delete b.baseParams[this.paramNames.query],b.lastOptions&&b.lastOptions.params&&(delete b.lastOptions.params[this.paramNames.fields],delete b.lastOptions.params[this.paramNames.query]),c.length&&(b.baseParams[this.paramNames.fields]=Ext.encode(c),b.baseParams[this.paramNames.query]=a),b.reload()}}},setDisabled:function(){this.field.setDisabled.apply(this.field,arguments)},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},reconfigure:function(){var a=this.menu;a.removeAll(),this.showSelectAll&&a.add(new Ext.menu.CheckItem({text:this.selectAllText,checked:!(this.checkIndexes instanceof Array),hideOnClick:!1,handler:function(a){var b=!a.checked;a.parentMenu.items.each(function(c){a!==c&&c.setChecked&&!c.disabled&&c.setChecked(b)})}}),"-");var b=this.grid.colModel;Ext.each(b.config,function(b){var c=!1;b.header&&b.dataIndex&&(Ext.each(this.disableIndexes,function(a){c=c?c:a===b.dataIndex}),c||a.add(new Ext.menu.CheckItem({text:b.header,hideOnClick:!1,checked:"all"===this.checkIndexes,dataIndex:b.dataIndex})))},this),this.checkIndexes instanceof Array&&Ext.each(this.checkIndexes,function(b){var c=a.items.find(function(a){return a.dataIndex===b});c&&c.setChecked(!0,!0)},this),this.readonlyIndexes instanceof Array&&Ext.each(this.readonlyIndexes,function(b){var c=a.items.find(function(a){return a.dataIndex===b});c&&c.disable()},this)}}),Ext.grid.RowExpander=function(a){Ext.apply(this,a),this.addEvents({beforeexpand:!0,expand:!0,beforecollapse:!0,collapse:!0}),Ext.grid.RowExpander.superclass.constructor.call(this),this.tpl&&("string"==typeof this.tpl&&(this.tpl=new Ext.Template(this.tpl)),this.tpl.compile()),this.state={},this.bodyContent={}},Ext.extend(Ext.grid.RowExpander,Ext.util.Observable,{header:"",width:20,sortable:!1,fixed:!0,hidden:!0,menuDisabled:!0,dataIndex:"",id:"expander",lazyRender:!0,enableCaching:!1,getRowClass:function(a,b,c){c.cols=c.cols-1;var d=this.bodyContent[a.id];return d||this.lazyRender||(d=this.getBodyContent(a,b)),d&&(c.body=d),this.state[a.id]?"x-grid3-row-expanded":"x-grid3-row-collapsed"},init:function(a){this.grid=a;var b=a.getView();b.getRowClass=this.getRowClass.createDelegate(this),b.enableRowBody=!0,a.on("render",function(){b.mainBody.on("mousedown",this.onMouseDown,this)},this)},getBodyContent:function(a){if(!this.enableCaching)return this.tpl.apply(a.data);var b=this.bodyContent[a.id];return b||(b=this.tpl.apply(a.data),this.bodyContent[a.id]=b),b},onMouseDown:function(a,b){if("x-grid3-row-expander"==b.className){a.stopEvent();var c=a.getTarget(".x-grid3-row");this.toggleRow(c)}},renderer:function(a,b){return b.cellAttr='rowspan="2"','<div class="x-grid3-row-expander">&#160;</div>'},beforeExpand:function(a,b,c){return this.fireEvent("beforeexpand",this,a,b,c)!==!1?(this.tpl&&this.lazyRender&&(b.innerHTML=this.getBodyContent(a,c)),!0):!1},toggleRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a)),this[Ext.fly(a).hasClass("x-grid3-row-collapsed")?"expandRow":"collapseRow"](a)},expandRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));var b=this.grid.store.getAt(a.rowIndex),c=Ext.DomQuery.selectNode("tr:nth(2) div.x-grid3-row-body",a);this.beforeExpand(b,c,a.rowIndex)&&(this.state[b.id]=!0,Ext.fly(a).replaceClass("x-grid3-row-collapsed","x-grid3-row-expanded"),this.fireEvent("expand",this,b,c,a.rowIndex))},collapseRow:function(a){"number"==typeof a&&(a=this.grid.view.getRow(a));var b=this.grid.store.getAt(a.rowIndex),c=Ext.fly(a).child("tr:nth(1) div.x-grid3-row-body",!0);this.fireEvent("beforecollapse",this,b,c,a.rowIndex)!==!1&&(this.state[b.id]=!1,Ext.fly(a).replaceClass("x-grid3-row-expanded","x-grid3-row-collapsed"),this.fireEvent("collapse",this,b,c,a.rowIndex))}}),Ext.UpdateManager.defaults.indicatorText='<div class="loading-indicator">En cours de chargement...</div>',Ext.View&&(Ext.View.prototype.emptyText=""),Ext.grid.GridPanel&&(Ext.grid.GridPanel.prototype.ddText="{0} ligne(s) sélectionnée(s)"),Ext.TabPanelItem&&(Ext.TabPanelItem.prototype.closeText="Fermer cet onglet"),Ext.form.Field&&(Ext.form.Field.prototype.invalidText="La valeur de ce champ est invalide"),Ext.LoadMask&&(Ext.LoadMask.prototype.msg="En cours de chargement..."),Date.monthNames=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],Date.getShortMonthName=function(a){return Date.monthNames[a].substring(0,3)},Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.getMonthNumber=function(a){return Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},Date.dayNames=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],Date.getShortDayName=function(a){return Date.dayNames[a].substring(0,3)},Ext.MessageBox&&(Ext.MessageBox.buttonText={ok:"OK",cancel:"Annuler",yes:"Oui",no:"Non"}),Ext.util.Format&&(Ext.util.Format.date=function(a,b){return a?(a instanceof Date||(a=new Date(Date.parse(a))),a.dateFormat(b||"d/m/Y")):""}),Ext.DatePicker&&Ext.apply(Ext.DatePicker.prototype,{todayText:"Aujourd'hui",minText:"Cette date est antérieure à la date minimum",maxText:"Cette date est postérieure à la date maximum",disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Mois suivant (CTRL+Flèche droite)",prevText:"Mois précédent (CTRL+Flèche gauche)",monthYearText:"Choisissez un mois (CTRL+Flèche haut ou bas pour changer d'année.)",todayTip:"{0} (Barre d'espace)",okText:"&#160;OK&#160;",cancelText:"Annuler",format:"d/m/y",startDay:1}),Ext.PagingToolbar&&Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:"Page",afterPageText:"sur {0}",firstText:"Première page",prevText:"Page précédente",nextText:"Page suivante",lastText:"Dernière page",refreshText:"Actualiser la page",displayMsg:"Page courante {0} - {1} sur {2}",emptyMsg:"Aucune donnée à afficher"}),Ext.form.TextField&&Ext.apply(Ext.form.TextField.prototype,{minLengthText:"La longueur minimum de ce champ est de {0} caractères",maxLengthText:"La longueur maximum de ce champ est de {0} caractères",blankText:"Ce champ est obligatoire",regexText:"",emptyText:null}),Ext.form.NumberField&&Ext.apply(Ext.form.NumberField.prototype,{minText:"La valeur minimum de ce champ doit être de {0}",maxText:"La valeur maximum de ce champ doit être de {0}",nanText:"{0} n'est pas un nombre valide"}),Ext.form.DateField&&Ext.apply(Ext.form.DateField.prototype,{disabledDaysText:"Désactivé",disabledDatesText:"Désactivé",minText:"La date de ce champ ne peut être antérieure au {0}",maxText:"La date de ce champ ne peut être postérieure au {0}",invalidText:"{0} n'est pas une date valide - elle doit être au format suivant: {1}",format:"d/m/y",altFormats:"d/m/Y|d-m-y|d-m-Y|d/m|d-m|dm|dmy|dmY|d|Y-m-d"}),Ext.form.ComboBox&&Ext.apply(Ext.form.ComboBox.prototype,{loadingText:"En cours de chargement...",valueNotFoundText:void 0}),Ext.form.VTypes&&Ext.apply(Ext.form.VTypes,{emailText:'Ce champ doit contenir une adresse email au format: "usager@domaine.com"',urlText:'Ce champ doit contenir une URL au format suivant: "http://www.domaine.com"',alphaText:"Ce champ ne peut contenir que des lettres et le caractère souligné (_)",alphanumText:"Ce champ ne peut contenir que des caractères alphanumériques ainsi que le caractère souligné (_)"}),Ext.form.HtmlEditor&&Ext.apply(Ext.form.HtmlEditor.prototype,{createLinkText:"Veuillez entrer l'URL pour ce lien:",buttonTips:{bold:{title:"Gras (Ctrl+B)",text:"Met le texte sélectionné en gras.",cls:"x-html-editor-tip"},italic:{title:"Italique (Ctrl+I)",text:"Met le texte sélectionné en italique.",cls:"x-html-editor-tip"},underline:{title:"Souligné (Ctrl+U)",text:"Souligne le texte sélectionné.",cls:"x-html-editor-tip"},increasefontsize:{title:"Agrandir la police",text:"Augmente la taille de la police.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Réduire la police",text:"Réduit la taille de la police.",cls:"x-html-editor-tip"},backcolor:{title:"Couleur de surbrillance",text:"Modifie la couleur de fond du texte sélectionné.",cls:"x-html-editor-tip"},forecolor:{title:"Couleur de police",text:"Modifie la couleur du texte sélectionné.",cls:"x-html-editor-tip"},justifyleft:{title:"Aligner à gauche",text:"Aligne le texte à gauche.",cls:"x-html-editor-tip"},justifycenter:{title:"Centrer",text:"Centre le texte.",cls:"x-html-editor-tip"},justifyright:{title:"Aligner à droite",text:"Aligner le texte à droite.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Liste à puce",text:"Démarre une liste à puce.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Liste numérotée",text:"Démarre une liste numérotée.",cls:"x-html-editor-tip"},createlink:{title:"Lien hypertexte",text:"Transforme en lien hypertexte.",cls:"x-html-editor-tip"},sourceedit:{title:"Code source",text:"Basculer en mode édition du code source.",cls:"x-html-editor-tip"}}}),Ext.form.TimeField&&Ext.apply(Ext.form.TimeField.prototype,{minText:"L'heure de ce champ ne peut être antérieure au {0}",maxText:"L'heure de ce champ ne peut être postérieure au {0}",invalidText:"{0} n'est pas une heure valide",format:"H:i",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|h a|g a|g A|gi|hi|Hi|gia|hia|g|H"}),Ext.grid.GridView&&Ext.apply(Ext.grid.GridView.prototype,{sortAscText:"Tri croissant",sortDescText:"Tri décroissant",lockText:"Verrouiller la colonne",unlockText:"Déverrouiller la colonne",columnsText:"Colonnes"}),Ext.grid.GroupingView&&Ext.apply(Ext.grid.GroupingView.prototype,{emptyGroupText:"(Aucun)",groupByText:"Grouper par ce champ",showGroupsText:"Afficher par groupes"}),Ext.grid.PropertyColumnModel&&Ext.apply(Ext.grid.PropertyColumnModel.prototype,{nameText:"Propriété",valueText:"Valeur",dateFormat:"d/m/Y"}),Ext.layout.BorderLayout&&Ext.layout.BorderLayout.SplitRegion&&Ext.apply(Ext.layout.BorderLayout.SplitRegion.prototype,{splitTip:"Cliquer et glisser pour redimensionner le panneau.",collapsibleSplitTip:"Cliquer et glisser pour redimensionner le panneau. Double-cliquer pour le cacher."});var Lars={tinyMceLanguage:"fr",button_cancel:"Annuler",button_save:"Sauvegarder",refresh:"Rafraîchir",closedown:"Fermer",del:"Supprimer",copy_document:"Copier le document.",copy_document_tt:"Copier ce document <br>Insérer via le click droit de la souris dans un dossier dans les ressources ou dans un ensemble de travaux.",msg_success_new_content:"Sauvegardé avec succès.",edit:"Editer",printer:"Imprimer",today:"Aujourd'hui",close_tab:"Fermer cet onglet.",close_tab_others:"Fermer les autres onglets.",rename:"Renommer",msg:{loading:"Un moment, s'il vous plaît.",loading_data:"Transférer des données.",connecting:"connexion",warning:"Avertissement",attention:"Attention",attention_firefox:'Veuillez utiliser <a href="http://www.firefox-browser.de" target="_blank">Firefox Browser</a> pour cette application. <br> Ce navigateur n\'est pas supporté, par conséquent, il n\'est pas possible d\'exécuter toutes les fonctions sans erreur.',failure:"Erreur",failure_delete:"Objet n'a pas été supprimé.",failure_connection:"La connexion au serveur a échoué.",failure_nothing_changed:"Aucune modification n'a été apportée.",failure_no_response:"Aucune réponse n'a été reçue du serveur.",failure_redirect:"Redirection automatique a échoué. Pas de connexion au serveur?",failure_login:"Connexion incorrecte ou la connexion au serveur ne peut être établie.",failure_response:"Erreur lors du chargement d'une demande.",failure_copy:"Erreur lors de la copie.",success_copy:"Copié avec succès.",success:"Réussi",success_changed_data:"Des modifications ont été faites avec succès.",success_new_content:"De nouvelles informations ont été enregistrées.",success_login:"Connexion réussie.",loading_editor:"Chargement éditeur.",loading_app:"Chargement de l'application.",loading_folder:"Chargement dossiers.",automatic_redirect_1:"Redirection automatique?",automatic_redirect_2:"Si vous avez déjà ouvert une session sur <b>bid-owl</b>, vous serez automatiquement redirigé vers <br> votre MokoDesk à un moment.",dialog_updater_error:"Une erreur s'est produite lors de l'exécution des mises à jour automatiques."},main:{desktop_title:"Vue d'ensemble",tree_title:"Mon MokoDesk",voice_chat:"Voice Chat",my_site:"Mon Site",edit:"Éditer",item_s:"Entrée",item_p:"Entrées",show:"Montrer",show_as_package:"Afficher sous forme de work package.",refresh_here:"Rafraîchir ici.",logged_in_since:"Connecté depuis ",last_login:"Dernière connexion ",news:"MokoDesk changements",about:"Sur MokoDesk",help:"Aider",retrospection:"rétrospective",hours:"24 heures",week:"Une semaine",desktop_grid:{tabTip:"Ici vous pouvez trouver tous les documents ajoutés ou modifiés depuis la dernière connexion.",loadMask:"Rechere de documents nouveaux et modifiés, de les charger par la suite.",title:"De nouveaux documents",titleBeginning:"De nouveaux documents",timeout_msg_1:"Erreur de connexion",timeout_msg_2:"La connexion au serveur est probablement trop lente pour récupérer tous les nouveaux document dans le délai imparti."},bin:{trash:"Corbeille",empty_trash:"Vider la corbeille.",empty_trash_confirm:"Êtes vous sûr de vouloir vider la corbeille?",delete_irrevocable:"Supprimer définitivement.",delete_confirm:"Supprimer cet object?",del_failure_msg:"L'objet sélectionné n'a pas été supprimé."},send_bug:{text:"Signaler une erreur.",text_tt:"Si une erreur est survenue, vous pouvez transmettre un message d'erreur ici."},chat:{title:"MokoChat",chat_home:"Démarrer une session de chat sur votre propre MokoDesk.",chat_else:"Chat ailleurs."},tree:{package_moved_msg:"Work package a été déplacé.",package_not_moved_msg:"Work package n'a pas été déplacé.",main_directory:"Répertoire principal",root_directory:"Repertoire principal du serveur",home_directory:"Votre répertoire personnel",add_resource_folder:"Inclure un nouveau dossier dans les ressources.",add_to_resources:"Ajouter aux ressources.",add_package_here:"Ajouter work package ici.",add_package:"Ajouter work package.",add_package_advice:"Si vous créez un classeur directement sur un autre bureau, aucune copie ne sera générée dans l'archive <br><i>Copie</i> via Drag & Drop des <i> dossiers <i> liés ou via le click droit de la souris et <i>insertion </i> dans le dossier de destination est la façon courante de générer simultanément une copie de l'archive.",add_folder_here:"Ajouter un dossier ici.",add_folder:"Ajouter un nouveau dossier.",add_link:"Ajouter un nouveau lien.",add_link_here:"Ajouter un lien ici.",folder_properties:"Propriétés du dossier",folder_as_package:"Marquer comme work package.",folder_as_normal:"Marquer comme dossier ordinaire.",download:"Télécharger",show_archive:"Voir archive.",show_bin:"Voir corbeille.",set_rights:"Définir les droits d'accès à votre MokoDesk.",show_package:"Voir work package.",copy_package:"Copier work package.",copy_folder:"Copier le dossier.",del_desktop_link:"Supprimer ce lien MokoDesk.",del_desktop_link_confirm:"Êtes-vous sûr de vouloir supprimer ce lien MokoDesk?",del_link:"Supprimer le lien.",del_confirm_link:"Supprimer ce lien?",del_confirm_package:"Supprimer ce work package?",del_confirm_object:"Supprimer cet objet?",del_failure_msg:"Le work package sélectionné n'a pas été supprimé.",del_failure_msg_folder:"Le dossier sélectionné n'a pas été supprimé.",del_failure_msg_link:"Le lien sélectionné n'a pas été supprimé.",move_to_archive:"Déplacer vers l'archive.",move_to_archive_tt:"Dès que vous avez terminé l'ensemble des travaux, il peut être déplacé à l'archive.",open_learn_process:"Ouvrir l'affichage de la progression des apprentissages.",delete_folder_confirm:"Supprimer ce dossier?",insert_here:"Insérer ici.",copy_confirm_1:"Inserér?",copy_confirm_2_folder:"Voulez-vous insérer le dossier copié?",copy_confirm_2_document:"Voulez-vous insérer le document copié intitulé <b>?",copy_confirm_2:"Voulez-vous insérer le work package copié <b>",copy_confirm_3:"</b> dans <b>",copy_confirm_3_in_package:"</b> dans ce work package?",copy_confirm_4:"</b> être inséré",copy_confirm_5:"<br>Une copie supplémentaire est déposée dans les archives.",copy_progress_1:"Copie le work package",copy_progress_2:"Un moment, s'il vous plaît...",copy_success_msg:"Copié avec succès.",copy_failure_msg:"Erreur lors de la copie.",copy_document:"Copier le document et l'insérer ici.",load_mask_desktops:"Chargement membres.",embed_desktop:"Inclure le MokoDesk de quelqu'un d'autre.",embed_desktop_group:"Inclure un groupe MokoDesk.",package_convert_confirm_1:"Convertir?",package_convert_confirm_2:"Voulez-vous assigner le fichier à un ensemble de travaux pour l'utilisateur? <b> Le fichier d'origine est conservé?",msg_failure_no_package:"Dossier n'appartient pas à la categorie work package. <br> Modifier l'avance via le menu ouvert en cliquant sur le click droit de la souris.",resources_title:"Dossiers liés",internet_links_title:"Signets Internet",desktops_title:"D'autres MokoDesks"},grid:{emptyText:"Il n'y a pas de documents disponibles ici.",loadMask:"Chargement des documents.",count_new_documents:"",edit_tt:"Modifier le contenu.",del_tt:"Supprimer ce document.",del_confirm:"°Etes-vous sûr de vouloir supprimer ce document?",del_failure_msg:"Le document sélectionné n'a pas été supprimé.",solution_attached:"(solution)",open_link_1:"Ouvrir le lien?",open_link_2:"Ouvrir un lien dans une nouvelle fenêtre?",download_1:"Télécharger",download_2:"Voulez-vous télécharger le document?",package_append:" - Work package",columns:{desc:"Nom",content:"Contenu",folder:"Dossier",type:"Type",valueNotFoundText:"Aucune valeur concordante trouvée",last_changed:"Dernière modification de",created:"Établi"},change_state:"Changer d'état.",state_0:"Pas encore débuté",state_1:"En cours",state_2:"Prêt pour la soumission",state_3:"Corrigé",state_4:"Fini",add_text:"Ajouter un nouveau texte pour ce work package.",add_text_title:"Écrire le text.",add_webarena:"Ajouter un nouveau virtual board pour ce work package.",add_webarena_title:"Écrire le virtual board",add_document:"Ajouter un document à ce work package.",add_document_title:"Télécharger un document.",solution:" (solution)"},discussion:{title:"Messages",loadMask:"Chargement des messages.",emptyText:"Pas de messages.",write_new_message:"Rédiger un message.",write_new_message_tt:"Écrire un nouveau message.",show_preview:"Afficher un aperçu des messages.",show_preview_tt:"Le début du message est indiqué ci-dessous la rubrique.",show_preview_tt_title:"Aperçu",expand_preview:"Étendre aperçu.",expand_preview_tt:"Le conenu est affiché directement en dessous de la description.",expand_preview_tt_title:"Voir tout le contenu.",new_message_1:"Message",new_message_2:"Un nouveau message de",save_send:"Enregistrer / Envoyer",columns:{title:"Titre",author:"Auteur",content:"Contenu",date:"Date"},created_of:"Créé par",menu:{edit:"Éditer",edit_tt:"Éditer le contenu.",del:"Supprimer",del_tt:"Supprimer ce message.",del_confirm_1:"Êtes-vous sûr de vouloir supprimer ce message?",del_confirm_2:"Titre:",del_success_msg:"Le message a été supprimé.",del_failure_msg:"Le message sélectionné n'a pas été supprimé."}},editor:{save_info_1:"Reporter un problème lors de l'enregistrement.",save_info_2:"Entretemps, le contenu du document a changé sur le serveur. <br> Vous avez maintenant la possibilité de sauvegarder le contenu dans un nouveau document. <br> Si vous n'avez pas enregistré les modifications dans un nouveau document, ils seront perdus.",document_not_available:"Le document sélectionné n'est pas disponible."},notes:"Remarques",north:{new_documents1:"Nouveaux documents",new_documents:"Nouveaux documents sur mon MokoDesk",new_documents_others:"Nouveaux documents sur les MokoDesks d'autres",new_mymessages:"Mes messages",new_messages:"Nouveaux messages dans sur les MokoDesks d'autres",new_messages_packages:"Nouveaux messages dans mes work package",about:"Sur MokoDesk"},help_and_news_tt:"Aide et mises à jour de MokoDesk",document_subscription:"De ces nouveaux documents montrent?",group_or_user:"Groupe ou utilisateur"},dialog:{assignment:{fieldLabel:"Entrer le nom du work package",emptyText:"Nouveau work package",title:"Ajouter work package.",button_add:"Ajouter work package."},addFolderLinks:{fieldLabel:"Nom du nouveau dossier",title:"Ajouter un dossier.",button_add:"Ajouter un dossier."},addFolder:{fieldLabel:"Nom du nouveau dossier, par exemple <i>Allemand</i> ou <i>Anglais</i>",title:"Ajouter un dossier.",button_add:"Ajouter un dossier."},addLink:{fieldLabel:"Nom du nouveau dossier, par exemple <i>Allemand</i> or <i>Anglais</i>",title:"Ajouter un lien.",button_add:"Ajouter un lien.",adress:"URL",name:"Nom"},addSchueler:{title:"Inclure MokoDesk de quelqu'un.",button_add:"Inclure MokoDesk.",msg_success:"La personne a été ajoutée.",msg_failure:"La personne n'a pas été ajoutée",usernameLabel:"Nom d'utilisateur de la personne"},browseFile:{description:"Description du document",filePath:"Sélectionner le document de votre disque dur local.",title:"Télécharger un document à",button_add:"Ajouter un fichier.",msg_success:"Le fichier a été téléchargé dans le work package.",msg_failure:"Aucun fichier n'a été téléchargé."},changeDesc:{title:"Changer le titre/nom.",fieldLabel:"Titre/Nom",msg_success:"Des modifications ont été faites avec succès.",msg_failure:"Aucun changement n'a été apporté."},comment:{title_1:"Commentaire par",title_2:" Changer",fieldLabel:"Commentaire",button_save:"Sauvegarder commentaire.",msg_success:"Des modifications ont été faites avec succès.",msg_failure:"Aucun changement n'a été aporté."},customPanelTextChange:{fieldLabel:"Nom",title:"Changer le nom."},groups:{username:"Nom d'utilisateur de la personne",add_to_favorites:"Ajouter un utilisateur à vos favoris.",add_user:"Ajouter un utilisateur.",user_added_msg:"La personne a été ajoutée.",user_not_added_msg:"La personne n'a pas été ajoutée.",embed_desktop:"Inclure MokoDesk?",groupname:"Nom du groupe",other_desktops:"D'autres MokoDesks",add_group:"Ajouter un groupe.",add_group_tt:"Ajouter un groupe pour permettre l'accès à votre propre MokoDesk.",add_user_tt:"Ajouter un utilisateur à autoriser l'accès à votre propre MokoDesk.",allow_read:"Permettre la lecture seule?",allow_all:"Laisser tout?",favorite:"Favouris",type:"Type",del_group_user_1:"Supprimer cette personne / ce groupe.",del_group_user_2:"Supprimer?",del_group_user_3:"Supprimer la personne ou le groupe dans la liste?",define_rights:"Definir les droits d'accès à votre MokoDesk.",root_directory:"Répertoire principal",add_group_to_list:"Ajouter un groupe à la liste.",add_group_to_selection:"Ajouter un groupe à la sélection."},rights:{fieldLabel_1:"Seulement vous-même êtes autorisé à visualiser et éditer ce dossier.",fieldLabel_2:"Vous et vos enseignants peuvent consulter et modifier ce dossier.",title_1:"Droits d'accès pour",title_1:"Définir",button_set:"Définir les droits d'accès."},htmlMessage:{fieldLabel:"Titre du message",title:"Créer un nouveau message.",button_create:"Créer un message."},htmlText:{fieldLabel:"Rubrique du nouveau texte",title_1:"Nouveau texte en",title_2:"Créer",button_add:"Créer le text."},webarena:{fieldLabel:"Rubrique du nouveau virtual board",title_1:"Nouveau virtual board en",title_2:"Créer",button_add:"Créer le virtual board."},htmlTextNew:{fieldLabel:"Nouvelle rubrique",title:"Créer un texte dans le même work package?",button_add:"Créer le texte. "},resourcesAddName:{fieldLabel:"Nom de la ressource",title:"Nom du lien",button_add:"Ajouter un lien.",msg_success:"Une nouvelle ressouce a été ajoutée."},resourcesAdd:"Ajouter des ressources.",login:{username:"Nom d'utilisateur",password:"Mot de passe",button_login:"Login",title:"Connectez-vous à votre MokoDesk <i>"},link:{open_both:"Voulez-vous ouvrir cette URL dans l'application ou dans votre navigateur?",open_browser:"Voulez-vous ouvrir cette URL dans une nouvelle fenêtre de votre navigateur?",open_app:"Voulez-vous ouvrir cette URL dans un nouvel onglet de cette application?",button_app:"Dans l'application",button_browser:"Dans le navigateur"},upload_image:{choose_hd:"Choisir l'image de votre disque dur local.",msg_failure:"L'image n'a pas été téléchargé.",msg_success:"L'image a été insérée.",upload:"Télécharger l'image."},imagePanel:{change_picture:"Télécharger une image différente."},upload_file:{choose_hd:"Choisir un document de votre disque dur local.",msg_failure:"Le fichier n'a pas été téléchargé.",msg_success:"Le fichier a été téléchargé.",upload_description:"Descripton du document",button_upload:"Télécharger le fichier.",title:"Télécharger un document à"}}},larsUpdater={},larsUpdaterInterval=1e4,onlineStatusInterval=3e4,timeoutUpdateConnection=18e4;
LarsViewer={},eastCollapsed={},LarsGridConfig={},title={},larsDesktopId={},larsArchivId={},larsBinId={},loginInfo={},lastLogin={};var user={},pass={},larsVoiceChatAllowed=!1,larsVoiceChatEnabled=!0,packageNodeToCopy=!1,fileRecordToCopy=!1;task={};var AScgiloc="/bundles/opensteammokodesk/tools/asciisvg/svgimg.php",AMTcgiloc="http://www.bid-owl.de/cgi-bin/mimetex.cgi",larsNews='<font size="3"><b>Version 1.5.9:<br></b><ul><li>- neue Anmeldeseite</li><li>- Virtuelle Tafel hinzugefügt</li><li>- Datenbackend neu geschreiben</li></ul><b>Version 1.0.2:<br></b><ul><li>- fehlerhafte Links korrigiert</li></ul><b>Version 1.0.1:<br></b><ul><li>- Textannotationen für den Editor</li><li>- Fehlerbehandlung verbessert</li><li>- Fehlende Sprachdateien hinzugefügt</li><li>- Fehlerkorrekturen beim Datenabgleich</li><li>- Quellcode umstrukturiert</li></ul><b>Version 0.986:<br></b><ul><li>- Französisch.<br><b>Version 0.983:<br></b><ul><li>- Fehlerkorrekturen.<br><b>Version 0.972:<br></b><ul><li>- Neuer Login zum MokoDesk.<br><b>Version 0.970:<br></b><ul><li>- Englischer MokoDesk verfügbar.<br><b>Version 0.969:<br></b><ul><li>- Benachrichtigungen für "Eigene Mitteilungen" werden erst ausgeblendet, wenn mit dem Mauszeiger über die Nachricht bewegt wurde.<br><li>- Benachrichtigungen werden nicht angezeigt, wenn die "Eigenen Mitteilungen" geöffnet sind.<br><b>Version 0.967:<br></b><li>- Überarbeitung der Benachrichtigung bei neuen Mitteilungen auf der eigenen Seite.<br><b>Version 0.955:<br></b><li>- Überarbeitung der Oberfläche. Neue Icons auf der Hauptseite.<br><li>- Zwischen neuen Dokumenten und Nachrichten auf dem eigenen MokoDesk und anderen MokoDesks wird unterschieden<br><li>- Es werden nicht mehr standardmäßig Dokumente aller eingebundenen Schreibtische angezeigt. Hierzu muss der eigebundene Schreibtisch in einem Dialog ausgewählt werden. (Zusätzliches Icon unter "Andere MokoDesks")<br><li>- Weitere Änderungen sind demnächst in der Hilfe zu finden<br></ul>';Ext.onReady(function(){function a(){function a(){larsUpdater.store.load({params:{task:"getUpdates",id:Ext.util.JSON.encode(larsUpdater.updateIds)}})}if(!this.started){this.started=!0,Ext.ux.ToastLars.msg(Lars.msg.success_login,Lars.msg.loading_data,2);var b=new LarsTreePanelFolderLinks,c=new LarsTreePanelLinks,d=new LarsResourcesPanel(b,"center","resource-panel","8 8 4 0",Lars.main.tree.resources_title),e=new LarsResourcesPanel(c,"south","links-panel","0 8 8 0",Lars.main.tree.internet_links_title),f=new Ext.Panel({id:"main-east",region:"east",layout:"border",split:!0,width:204,minSize:175,maxSize:400,border:!1,layoutConfig:{animate:!0},margins:"0 0 0 0",cmargins:"8 0 8 0",collapsible:!0,items:[d,e]});f.on("beforeexpand",LarsGridConfig.onCollapseExpand,this),f.on("beforecollapse",LarsGridConfig.onCollapseExpand,this);var g={id:larsDesktopId},h=new MainPanel,i=new LarsDesktopGrid(""),j=new LarsDesktop,k=new LarsDesktopDiscussion(g),l=new LarsDesktopNotes,m=new LarsDesktopNorth;m.add(l);var n=new Ext.TabPanel({id:"lars-desktop-tab-panel",frame:!1,region:"center",activeTab:1,margins:"0 0 0 0",frame:!1,hideBorders:!0,hideLabel:!0,bodyBorder:!1,border:!1,resizeTabs:!0,tabWidth:150,minTabWidth:90,enableTabScroll:!0,viewConfig:{forceFit:!0},listeners:LarsViewer.LinkInterceptor});n.add({xtype:"panel",id:"about-panel",title:Lars.main.about,iconCls:"wand",layout:"accordion",items:[{title:Lars.main.help,iconCls:"help",xtype:"iframepanel",id:"moko_about",tbar:["->",{iconCls:"error",text:Lars.main.send_bug.text,tooltip:Lars.main.send_bug.text_tt,handler:function(){this.win=new LarsDesktopErrorWindow,this.win.show(),this.win.setZIndex(90001)},scope:this}],edit:!1,layout:"fit",autoScroll:!0,defaultSrc:"/bundles/opensteammokodesk/MokoDeskHelp/index.htm",listeners:{domready:LarsViewer.LinkInterceptorIFrame}},{collapsible:!0,iconCls:"about",xtype:"panel",title:Lars.main.news,listeners:LarsViewer.LinkInterceptor,layout:"fit",split:!0,autoScroll:!0,html:larsNews}]}),n.add(k),n.add(i),j.add(n),j.add(m),larsDesktopWrapper=new Ext.Panel({title:Lars.main.desktop_title,id:"lars-desktop",margins:"0 0 0 0",layout:"border",hideMode:Ext.isIE?"display":"nosize",iconCls:"application-home",closable:!1,autoScroll:!1}),larsDesktopWrapper.add(j),larsVoiceChatAllowed&&larsVoiceChatEnabled&&larsDesktopWrapper.add(larsVoiceChat),i.getView().getRowClass=LarsGridConfig.applyRowClassWithout,h.add(larsDesktopWrapper);{var o=new Ext.Panel({id:"main-center",frame:!0,header:!0,layout:"fit",region:"center",margins:"8 5 8 0",autoScroll:!1,items:h}),p=new Ext.Panel({id:"center",header:!1,layout:"border",region:"center",border:!1,autoScroll:!1,margins:"0 0 0 0",items:[o]}),q=new LarsTopicsPanel,r=new LarsCustomImagePanel(title,imageHeight),s=new Ext.Panel({id:"main-west",region:"west",layout:"border",split:!0,width:204,minSize:175,maxSize:400,border:!1,layoutConfig:{animate:!0},margins:"0 0 0 0",cmargins:"8 5 8 0",collapsible:!0,items:[r,q]});new Ext.Viewport({layout:"border",items:[f,p,s]})}"1"==eastCollapsed&&f.collapse(),k.store.load({params:{start:0,limit:10}}),i.store.load(),larsUpdater=new LarsUpdater,larsUpdater.store.proxy.on("loadexception",function(b,c,d){if(d.responseText){var e=Ext.util.JSON.decode(d.responseText);Ext.ux.ToastLars.msg(Lars.msg.failure_connection,e.name,5)}a.defer(larsUpdaterInterval,this,[])},this),larsUpdater.store.on("load",function(){a.defer(larsUpdaterInterval,this,[])},this),a.defer(1e4,this,[]),LarsUpdaterUsers.defer(3e4,this,[]),k.startAutoUpdate("d"+larsDesktopId)}}Ext.QuickTips.init();var b=0;if(Ext.Ajax.timeout=9e4,b);else{this.doLoginBid=function(){Ext.Ajax.request({url:"login/",params:{version:version},success:function(b){var c=Ext.util.JSON.decode(b.responseText);title=c.title,imageHeight=c.imageHeight?c.imageHeight:120,eastCollapsed=c.eastCollapsed?c.eastCollapsed:1,larsDesktopId=c.larsDesktop,larsArchivId=c.larsArchiv,larsBinId=c.larsBin,larsVoiceChatAllowed=c.vc,isTeacher=c.isTeacher,loginTime=c.loginTime,lastLoginUnix=c.lastLoginUnix,lastLogin=c.loginTimeLast,loginInfo=Lars.main.logged_in_since+loginTime+"<br>"+Lars.main.last_login+lastLogin,user=c.user,pass=c.pass,c.success?a():c.version&&Ext.Msg.show({title:Lars.msg.failure,msg:c.name,icon:Ext.MessageBox.ERROR,buttons:Ext.Msg.OK})},failure:function(a,b){"server"===b.failureType?(obj=Ext.util.JSON.decode(b.response.responseText),Ext.Msg.alert(Lars.msg.failure,obj.errors.reason)):Ext.Msg.alert(Lars.msg.failure,Lars.msg.failure_redirect)},scope:this})},this.doLoginBid.defer(10,this);var c=function(){(!Ext.isGecko2&&!Ext.isGecko3||Ext.isSafari||Ext.isSafari2||Ext.isSafari3)&&Ext.ux.ToastLars.msg('<font color="#DD0000">'+Lars.msg.attention,Lars.msg.attention_firefox,7)};c.defer(1e3,this);{new Ext.Window({id:"login-window",width:400,height:134,closable:!1,animate:!0,title:Lars.dialog.login.title+version+")</i>",keys:[{key:[10,13],scope:this,fn:this.doLogin}]})}setTimeout(function(){Ext.get("loading").remove(),Ext.get("loading-mask").fadeOut({remove:!0})},100)}}),LarsViewer.LinkInterceptor={render:function(a){a.body.on({mousedown:function(a,b){b.target="_blank"},click:function(a,b){"_blank"!=String(b.target).toLowerCase()&&(a.stopEvent(),window.open(b.href))},delegate:"a"})}},LarsViewer.LinkInterceptorIFrame=function(a){a.getDoc().on({mousedown:function(b,c){c.href.match(window.location.host)?a.setSrc(c.href):c.target="_blank"},click:function(b,c){"_blank"!=String(c.target).toLowerCase()&&(b.stopEvent(),c.href.match(window.location.host)?a.setSrc(c.href):window.open(c.href))},delegate:"a"})},LarsViewer.getKeyMap=function(a,b){var c={key:Ext.EventObject.ENTER,fn:a,scope:b};return c},LarsViewer.onLoadException=function(){Ext.ux.ToastLars.msg(Lars.msg.failure_response,"",5)},LarsViewer.QuestionTabOrBrowserOpen=function(a){Ext.Msg.show({title:a.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+a.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(b){"ok"==b?Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",a):"no"==b&&window.open(a.attributes.lars_ref)}})},LarsViewer.QuestionBrowserOpen=function(a){Ext.Msg.confirm(a.currentTarget.href,Lars.dialog.link.open_browser,function(b){"yes"==b&&window.open(a.currentTarget.href)},this)},LarsViewer.QuestionBrowserOpenNode=function(a){Ext.Msg.confirm(a.attributes.lars_ref,Lars.dialog.link.open_browser,function(b){"yes"==b&&window.open(a.attributes.lars_ref)},this)},LarsViewer.QuestionBrowserOpenPDF=function(a){Ext.Msg.show({title:a.attributes.lars_ref,msg:Lars.dialog.link.open_both+"<br><i>"+a.attributes.lars_ref+"</i>",buttons:{ok:Lars.dialog.link.button_app,no:Lars.dialog.link.button_browser,cancel:Ext.MessageBox.buttonText.cancel},icon:Ext.MessageBox.QUESTION,animEl:"elId",fn:function(b){"ok"==b?Ext.getCmp("main-tabs").fireEvent("viewIFrameTabAll",a):"no"==b&&window.open(a.attributes.lars_ref)}})},LarsGridConfig={larsObj:Ext.data.Record.create([{name:"id"},{name:"OBJ_NAME",type:"string"},{name:"LARS_CONTENT",type:"string"},{name:"LARS_COMMENT",type:"string"},{name:"OBJ_CREATION_TIME",type:"date",dateFormat:"U"},{name:"OBJ_LAST_CHANGED",type:"date",dateFormat:"U"},{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},{name:"OBJ_DESC",type:"string"},{name:"OBJ_AUTHOR",type:"string"},{name:"type",type:"string"},{name:"LARS_TYPE",type:"string"},{name:"OBJ_TYPE",type:"string"},{name:"is_home",type:"boolean"},{name:"OBJ_PATH",type:"string"},{name:"LARS_FOLDER",type:"string"},{name:"action0",type:"string"},{name:"action1",type:"string"},{name:"action2",type:"string"},{name:"action3",type:"string"},{name:"action4",type:"string"},{name:"action5",type:"string"},{name:"qtip0",type:"string"},{name:"qtip1",type:"string"},{name:"qtip2",type:"string"},{name:"qtip3",type:"string"},{name:"qtip4",type:"string"},{name:"qtip5",type:"string"},{name:"hide1",type:"boolean"},{name:"hide2",type:"boolean"},{name:"hide3",type:"boolean"},{name:"hide4",type:"boolean"},{name:"hide5",type:"boolean"},{name:"container",type:"string"}]),dsType:new Ext.data.SimpleStore({id:0,fields:["id","text"],data:[[0,"-"],[1,"Aufgabe"],[2,"Lösung"],[3,"Info"]]}),expander:new Ext.grid.RowExpander({tpl:new Ext.Template("<p><b>Inhalt:</b><br>{LARS_CONTENT}<br></p>"),lazyRender:!0,enableCaching:!1}),applyRowClass:function(a){switch(a.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";case"1":return"pinkrow x-grid3-row-expanded";case"2":return"greenrow x-grid3-row-collapsed";case"3":return"x-grid3-row-expanded";default:return"x-grid3-row-collapsed"}},applyRowClassWithout:function(a){switch(a.data.LARS_TYPE){case"0":return"x-grid3-row-collapsed";case"1":return"pinkrow x-grid3-row-collapsed";case"2":return"greenrow x-grid3-row-collapsed";case"3":return"x-grid3-row-collapsed";default:return"x-grid3-row-collapsed"}},renderType:function(a,b){switch(a){case"Text":return b.css="type-text",void 0;case"Bild":return b.css="type-picture",void 0;case"Download":return b.css="type-download",void 0;case"Link":return b.css="type-link",void 0}},renderCell:function(a){switch(a){case 0:break;case 1:return"pinkrow";case 2:return"greenrow"}},downloadFile:function(a){var b=Ext.id(),c=document.createElement("iframe");c.id=b,c.name=b,c.className="x-hidden",c.src=a,document.body.appendChild(c)},changeAttribute:function(a,b,c,d){Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:"id",keyValue:a,id:a,field:b,fieldValue:c,originalValue:d},failure:function(){Ext.MessageBox.alert(Lars.msg.failure_connection,"")},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(LArs.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+b.name,4)}})},onCollapseExpand:function(a){Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:123,keyValue:123,id:123,field:"LARS_EAST_COLLAPSED",fieldValue:a.collapsed?0:1,originalValue:a.collapsed?1:0},failure:function(){},success:function(a){Ext.util.JSON.decode(a.responseText)}})}},AssignmentWindow=function(a){this.node=a,this.name=new Ext.form.Field({id:"ass-name",fieldLabel:Lars.dialog.assignment.fieldLabel,emptyText:Lars.dialog.assignment.emptyText,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),AssignmentWindow.superclass.constructor.call(this,{title:Lars.dialog.assignment.title,iconCls:"table-add",id:"add-ass-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.assignment.button_add,id:"myButton",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.addEvents({add:!0}),this.on("show",this.focusFirst,this)},Ext.extend(AssignmentWindow,Ext.Window,{onAdd:function(){if(!a){var a=!0;this.el.mask(Lars.msg.loading,"x-mask-loading");var b=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newAssignment",id:this.node.id,name:b},success:function(a){var c=Ext.util.JSON.decode(a.responseText);c.success?(newId=c.newId,newNode=new Ext.tree.TreeNode({leaf:!0,id:newId,text:b,iconCls:"report",state:0}),newNode.attributes.state=0,newNode.ownerTree=this.node.ownerTree,newNode.attributes.origName=c.origName,this.node.appendChild(newNode),Ext.getCmp("main-tabs").fireEvent("viewPackage",newNode)):Ext.ux.ToastLars.msg(Lars.msg.failure,c.name?c.name:" ",5),this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}}),LarsAddFolderLinksWindow=function(a){this.nodeId=a,this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolderLinks.fieldLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsAddFolderLinksWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolderLinks.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.addFolderLinks.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsAddFolderLinksWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newFolderLinks",name:a,id:this.nodeId},success:this.refreshFolder,failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(){Ext.getCmp("links-tree").root.reload(),this.destroy()}}),LarsAddFolderWindow=function(a){this.node=a,this.nodeId=a?a.id:0,this.name=new Ext.form.Field({id:"folder-name",fieldLabel:Lars.dialog.addFolder.fieldLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsAddFolderWindow.superclass.constructor.call(this,{title:Lars.dialog.addFolder.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.addFolder.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsAddFolderWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newFolder",name:a,type:"LARS_ASSIGNMENT_FOLDER",id:this.nodeId},success:this.refreshFolder,failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})},refreshFolder:function(){this.nodeId?Ext.getCmp("topics-tree-t").root.reload():Ext.getCmp("topics-tree").root.reload(),this.destroy()}}),LarsAddLinkWindow=function(a){this.node={},this.node.id=a?a.id:"",this.name=new Ext.form.Field({id:"link-name",fieldLabel:Lars.dialog.addLink.name,width:450,msgTarget:"under"}),this.url=new Ext.form.Field({id:"link-url",fieldLabel:Lars.dialog.addLink.adress,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name,this.url],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsAddLinkWindow.superclass.constructor.call(this,{title:Lars.dialog.addLink.title,iconCls:"link-add",id:"add-link-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,floating:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.addLink.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this)},Ext.extend(LarsAddLinkWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue(),b=this.url.getValue();Ext.Ajax.request({url:"data/",params:{task:"newLink",name:a,url:b,id:this.node.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(Ext.ux.ToastLars.msg(Lars.msg.success,"",2),Ext.getCmp("links-tree").root.reload()):Ext.ux.ToastLars.msg(Lars.msg.failure,"",5),this.destroy()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2),this.el.unmask()},scope:this})}}),LarsAddSchuelerWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.addSchueler.usernameLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsAddSchuelerWindow.superclass.constructor.call(this,{title:Lars.dialog.addSchueler.title,iconCls:"folder-add",id:"add-user-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.addSchueler.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsAddSchuelerWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newSchueler",name:a},success:function(a){if(a.responseText){var b=Ext.util.JSON.decode(a.responseText);b.success?(Ext.getCmp("topics-tree-t").root.reload(),Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_success,b.name?b.name:" ",3)):Ext.ux.ToastLars.msg(Lars.dialog.addSchueler.msg_failure,b.name?b.name:" ",3)}else Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_response,5);this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsBrowseFileWindow=function(a,b){this.browseField=a,this.node=b,this.id=new Ext.form.Hidden({id:"id",value:b.id,fieldLabel:"ID des Ordners",hidden:!0}),this.bidHidden=new Ext.form.Hidden({id:"bidHidden",value:!0,fieldLabel:"Bild verstecken",hidden:!0}),this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.browseFile.description,width:450,msgTarget:"under"}),this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.browseFile.filePath,inputType:"file",width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:!0,url:"upload/",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.bidHidden],border:!1,timeout:18e5,bodyStyle:"background:transparent;padding:10px;"}),LarsBrowseFileWindow.superclass.constructor.call(this,{title:Lars.dialog.browseFile.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:!0,width:500,resizable:!1,modal:!0,buttons:[{text:Lars.dialog.browseFile.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy();var a=Ext.getCmp("advimage");a.el.setZIndex(89999)},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsBrowseFileWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading"),Ext.getCmp("upload-form").getForm().submit({success:function(a,b){var c={};if(b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),c.success){Ext.ux.ToastLars.msg(Lars.dialog.browseFile.msg_success,c.name?c.name:" ",5),Ext.getCmp(this.node.id+"Grid")&&Ext.getCmp(this.node.id+"Grid").store.load();var d=c.fileName;this.browseField.value=d,this.destroy()}else Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.browseFile.msg_failure+"<br>"+(c.name?c.name:" ... "),10),this.el.unmask()},failure:function(a,b){var c={};b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),Ext.ux.ToastLars.msg(Lars.msg.failure,c.name?c.name:Lars.msg.failure_connection,10),this.el.unmask()},scope:this})}}),LarsChangeDescWindow=function(a){this.node={},a?this.node=a:this.node.id="",this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.changeDesc.fieldLabel,width:450,msgTarget:"under",value:Ext.util.Format.stripTags(a.attributes.text)}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsChangeDescWindow.superclass.constructor.call(this,{title:Lars.dialog.changeDesc.title,iconCls:"page-text",id:"change-desc-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsChangeDescWindow,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:"id",keyValue:this.node.id,id:this.node.id,field:"OBJ_DESC",fieldValue:a,originalValue:this.node.text},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection),this.el.unmask()},success:function(b){var c=Ext.util.JSON.decode(b.responseText);1==c.success?(Ext.ux.ToastLars.msg(Lars.dialog.changeDesc.msg_success,c.name?c.name:" ",3),this.node.setText(a),this.destroy()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.changeDesc.msg_failure+"<br>"+c.name,4),this.el.unmask())}})}}),LarsCommentWindow=function(a){this.primaryKey="id",this.record=a,this.name=new Ext.form.HtmlEditor({id:"document-comment",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:0==this.record.data.LARS_COMMENT?"":this.record.data.LARS_COMMENT,msgTarget:"under",enableAlignments:!1,enableColors:!1,enableFont:!1,enableFontSize:!1,enableLinks:!1,enableLists:!1,enableSourceEdit:!1}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsCommentWindow.superclass.constructor.call(this,{title:Lars.dialog.comment.title_1+a.data.OBJ_DESC+Lars.dialog.comment.title_2,iconCls:"comment-edit",id:"change-com-win",autoHeight:!0,width:400,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.comment.button_save,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsCommentWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:this.primaryKey,keyValue:this.record.data.id,id:this.record.data.id,field:"LARS_COMMENT",fieldValue:a,originalValue:this.record.LARS_COMMENT},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?Ext.ux.ToastLars.msg(Lars.dialog.comment.msg_success,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.comment.msg_failure+"<br>"+b.name,4)}}),this.destroy()}}),LarsCustomImagePanel=function(a,b){LarsCustomImagePanel.superclass.constructor.call(this,{id:"custom-image-panel",region:"north",autoLoad:{url:"data/",params:{task:"customImage"},timeout:Ext.Ajax.timeout},title:a,split:!0,floating:!0,border:!1,frame:!0,height:b,minHeight:5,margins:"8 4 4 8",tools:[{id:"gear",handler:function(){this.win=new LarsCustomPanelTextChange(a),this.win.show(),this.win.setZIndex(9e4)}},{id:"left",handler:function(){Ext.getCmp("main-west").collapse(!0)}}]}),this.on("contextmenu",this.onContextMenu,this),this.on("resize",function(){Ext.Ajax.request({url:"data/",params:{task:"changeHeight",height:this.el.getHeight()},scope:this})},this)},Ext.extend(LarsCustomImagePanel,Ext.Panel,{afterRender:function(){LarsCustomImagePanel.superclass.afterRender.call(this),this.el.on("contextmenu",function(a){a.preventDefault(),this.focus(),this.menu=new Ext.menu.Menu({id:"custom-image-ctx",items:[{text:Lars.dialog.imagePanel.change_picture,id:"add23111",handler:function(){this.win=new UploadCustomImage,this.win.show(),this.win.setZIndex(9e4)},iconCls:"image-edit",scope:this}]}),this.menu.showAt(a.getXY())}),this.el.on("dblclick",function(){this.win=new UploadCustomImage,this.win.show(),this.win.setZIndex(9e4)})}}),LarsCustomPanelTextChange=function(a){this.name=new Ext.form.Field({id:"title-name",fieldLabel:Lars.dialog.customPanelTextChange.fieldLabel,value:a,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSave,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsCustomPanelTextChange.superclass.constructor.call(this,{title:Lars.dialog.customPanelTextChange.title,iconCls:"page-text",id:"add-user-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.button_save,handler:this.onSave,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.addEvents({add:!0})},Ext.extend(LarsCustomPanelTextChange,Ext.Window,{onSave:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"changeTitle",title:a},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(Ext.ux.ToastLars.msg(Lars.msg.success,b.name?b.name:" ",3),Ext.getCmp("custom-image-panel").setTitle(b.title)):Ext.ux.ToastLars.msg(Lars.msg.failure,b.name?b.name:" ",3),this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsDesktop=function(){LarsDesktop.superclass.constructor.call(this,{margins:"0 0 0 0",layout:"border",hideMode:Ext.isIE?"display":"nosize",region:"center",autoScroll:!1})},Ext.extend(LarsDesktop,Ext.Panel,{}),LarsDesktopDiscussion=function(a){this.primaryKey="id",a.parentElement=a.id+"discussion-grid",this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:!0,enableCaching:!1}),this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){a.parentElement=a.id+"discussion-grid",this.win=new LarsMessageWindow(a,"newMessage"),this.win.show(),this.win.setZIndex(9e4)},scope:this},"->",{iconCls:"help",text:"",tooltip:Lars.main.help_and_news_tt,handler:function(){Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},scope:this}];var b=new Ext.data.JsonReader({root:"messages",id:this.primaryKey,totalProperty:"totalCount",remoteSort:!0},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getDiscussion",id:a.id},reader:b,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}}),this.store.on("load",function(){var a=0;this.store.filterBy(function(b){var c=b.data.DOC_LAST_MODIFIED.getTime()/1e3;return c>lastLoginUnix?(a++,!0):!0},this),Ext.getDom("new-messages-count").innerHTML="<b>"+a+"</b> "},this),this.store.on("add",function(a,b){(Ext.getCmp("lars-desktop-tab-panel").activeTab.id!=larsDesktopId+"discussion-grid"||"lars-desktop"!=Ext.getCmp("main-tabs").activeTab.id)&&Ext.Ajax.request({url:"data/",params:{task:"getUserIcon",name:b[0].data.OBJ_AUTHOR},success:function(a){var c=Ext.util.JSON.decode(a.responseText);imageUri=c.imageUri,Ext.ux.ToastLarsDiscussion.msg(imageUri,'<font color="#578d00">'+b[0].data.OBJ_AUTHOR+"</font>: "+b[0].data.OBJ_DESC,b[0].data.LARS_CONTENT,10)},scope:this})}),this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC"),this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:!0,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:!0,sortable:!0},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:!0,sortable:!1},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:!0}],this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:!0}),LarsDesktopDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",split:!0,listeners:LarsViewer.LinkInterceptor,frame:!1,hideHeaders:!0,height:"200",id:a.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),view:new Ext.grid.GridView({forceFit:!0,enableRowBody:!0,showPreview:!0,showAll:!0,getRowClass:this.applyRowClass,emptyText:Lars.main.discussion.emptyText,deferEmptyText:!0})}),this.addEvents({schuelerEditTab:!0}),this.on("rowcontextmenu",this.onContextClick,this),this.on("rowdblclick",this.showContentWindow,this)},Ext.extend(LarsDesktopDiscussion,Ext.grid.GridPanel,{onContextClick:function(a,b,c){var d=(a.getView().getRow(b),a.store.getAt(b)),e={};e.id=d.data.id,e.text=d.data.OBJ_DESC,e.parentElement=a.id,this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(d,"editMessage"),this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC,function(a){"yes"==a&&Ext.Ajax.request({scope:this,url:"data/",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(this.store.remove(this.store.getById(this.ctxRecord.id)),Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}})},this)},scope:this}]}),this.menu.on("hide",this.onContextHide,this),c.stopEvent(),this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null),this.ctxRow=this.view.getRow(b),this.ctxRecord=this.store.getAt(b),Ext.fly(this.ctxRow).addClass("x-node-ctx"),this.menu.showAt(c.getXY())},onContextHide:function(){this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null)},togglePreview:function(a){this.view.showPreview=a,this.view.refresh()
},applyRowClass:function(a,b,c){if(this.showPreview){var d=Ext.util.Format;return c.body=this.showAll?'<font size="2"><p>'+a.data.LARS_CONTENT+"</p>":"<p>"+d.ellipsis(d.stripTags(a.data.LARS_CONTENT),300)+"</p>","x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(a){if(!a)return"";var b=new Date,c=b.clearTime(!0),d=a.clearTime(!0).getTime();return d==c.getTime()?"Heute "+a.dateFormat("d-m-Y H:i"):(c=c.add("d",-6),c.getTime()<=d?a.dateFormat("d-m-Y H:i"):a.dateFormat("d-m-Y H:i"))},formatTitle:function(a,b,c){return String.format('<div class="comment"><b>{0}</b> <span class="author"> '+Lars.main.discussion.created_of+"{1}</span></div>",a,c.data.OBJ_AUTHOR,c.id,c.data.forumid)}}),LarsDesktopErrorWindow=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-error-form",fieldLabel:"Fehlerbeschreibung",name:"Fehlerbeschreibung",height:300,value:"",msgTarget:"under",enableAlignments:!1,enableColors:!1,enableFont:!1,enableFontSize:!1,enableLinks:!1,enableLists:!1,enableSourceEdit:!1}),this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:"Abschicken",handler:this.onAdd,scope:this}],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsDesktopErrorWindow.superclass.constructor.call(this,{title:"Fehlerbericht schicken",width:300,split:!0,id:"lars-desktop-error",iconCls:"error",viewConfig:{forceFit:!0},autoScroll:!0,buttonAlign:"center",items:this.form})},Ext.extend(LarsDesktopErrorWindow,Ext.Window,{onAdd:function(){var a=this.content.getValue();Ext.Ajax.request({scope:this,url:"data/",params:{task:"errorReport",message:a},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?Ext.ux.ToastLars.msg(Lars.msg.success,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure+" <br>"+b.name,4),this.destroy()}})}}),LarsDesktopGrid=function(){this.primaryKey="id",this.tbar=[{text:Lars.main.retrospection,menu:[{text:Lars.main.hours,handler:function(){this.changeTime(24)},scope:this},{text:Lars.main.week,handler:function(){this.changeTime(168)},scope:this}],scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=!1,this.view.renderHeaders(),Ext.getCmp("lars-desktop-grid").store.load()},scope:this},"-"],this.action=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""}]}),this.action.on("action",this.onRowAction,this),this.actionFileTypeDesktop=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]}),this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'}),this.expander.on("expand",function(a,b){switch(b.data.action2){case"page-save":var c=new Ext.Panel({id:"desktop-grid-row-"+b.data.id,html:b.data.LARS_CONTENT,autoHeight:!0,renderTo:"desktop-grid-"+b.data.id});break;case"editPage":var c=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+b.data.id,defaultSrc:"get/"+b.data.id,loadMask:!0,listeners:{domready:LarsViewer.LinkInterceptorIFrame},renderTo:"desktop-grid-"+b.data.id});c.on("documentloaded",function(){var a=c.getFrame();a.setHeight(a.getBody().scrollHeight)},this)}}),this.larsObj=LarsGridConfig.larsObj;var a=(LarsGridConfig.dsState,LarsGridConfig.dsType),b=new Ext.data.JsonReader({root:"newItems",id:this.primaryKey},this.larsObj),c=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST",timeout:12e4}),baseParams:{task:"getNewItems"},reader:b,groupField:"LARS_FOLDER",sortInfo:{field:"OBJ_DESC",direction:"ASC"}});c.on("loadexception",function(){Ext.getDom("new-documents-count").innerHTML="<b>(?)</b> ",Ext.getDom("new-messages-documents-count").innerHTML="<b>(?)</b> ",Ext.getDom("new-documents-other-count").innerHTML="<b>(?)</b> ",Ext.getDom("new-messages-other-count").innerHTML="<b>(?)</b> ",Ext.ux.ToastLars.msg(Lars.main.desktop_grid.timeout_msg_1,Lars.main.desktop_grid.timeout_msg_2,5)},this),c.on("load",function(){var a=Ext.getCmp("lars-desktop-grid");count=0,a.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return!c.test(b)&&e.test(d)?(count++,!0):!1},this),Ext.getDom("new-documents-count").innerHTML=" <b>"+count+"</b>",count=0,a.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return c.test(b)&&!e.test(d)?(count++,!0):!1},this),Ext.getDom("new-messages-other-count").innerHTML="<b>"+count+"</b> ",count=0,a.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return c.test(b)||e.test(d)?!1:(count++,!0)},this),Ext.getDom("new-documents-other-count").innerHTML="<b>"+count+"</b> ",count=0,a.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return c.test(b)&&e.test(d)?(count++,!0):!1},this),Ext.getDom("new-messages-documents-count").innerHTML="<b>"+count+"</b> ",Ext.getCmp("lars-desktop-tab-panel").setActiveTab("about-panel")},this);var d=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:!0,sortable:!0,hidden:!0},this.actionFileTypeDesktop,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:!0,editor:new d.TextField({allowBlank:!1})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:!0,hidden:!0,width:40},{header:Lars.main.grid.columns.folder,dataIndex:"LARS_FOLDER",hidden:!0,readOnly:!0,sortable:!0,width:100},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:!0,fixed:!0,width:80,hidden:!0,editor:new Ext.form.ComboBox({mode:"local",editable:!1,triggerAction:"all",store:a,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(b,c){return c&&(c.css=LarsGridConfig.renderCell(b)),record=a.getById(b),record?record.data.text:""}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:100,fixed:!0,readOnly:!0,sortable:!0,renderer:function(a){return a.dateFormat("d-m-Y H:i")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:!0,width:100,hidden:!0,sortable:!0,renderer:function(a){return a.dateFormat("d-m-Y H:i")}},this.action]),LarsDesktopGrid.superclass.constructor.call(this,{collapsible:!0,tabTip:Lars.main.desktop_grid.tabTip,loadMask:{msg:Lars.main.desktop_grid.loadMask},id:"lars-desktop-grid",hideHeaders:!0,frame:!1,height:200,title:Lars.main.desktop_grid.title,titleBeginning:Lars.main.desktop_grid.titleBeginning,iconCls:"table-go",split:!0,autoScroll:!0,store:c,cm:this.cm,autoSizeColumns:!0,autoExpandColumn:"ID",clicksToEdit:1,listeners:LarsViewer.LinkInterceptor,stripeRows:!0,margins:"0 0 0 0",cmargins:"0 0 0 0",plugins:[this.expander,this.action,this.actionFileTypeDesktop,new Ext.ux.grid.Search({mode:"local",align:"right",position:"top",iconCls:!1,width:150,dateFormat:"d-m-Y H:i",minLength:2})],view:new Ext.grid.GroupingView({emptyText:Lars.main.grid.emptyText,deferEmptyText:!0,forceFit:!0,groupTextTpl:'{text} ({[values.rs.length]} {[values.rs.length > 1 ? "'+Lars.main.item_p+'" : "'+Lars.main.item_s+'"]})'})}),this.addEvents({schuelerEditTab:!0}),this.addEvents({refreshTab:!0}),this.on("rowcontextmenu",this.onContextClick,this),this.on("afteredit",this.handleEdit,this),this.on("beforeadd",this.handleEdit,this)},Ext.extend(LarsDesktopGrid,Ext.grid.EditorGridPanel,{onContextClick:function(a,b,c){var d=(a.getView().getRow(b),a.store.getAt(b)),e={};e.id=d.data.id,e.text=d.data.OBJ_DESC,this.menu=new Ext.menu.Menu({id:"grid-ctx"}),"editPage"==d.data.action2&&this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.main.grid.edit_tt,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e)},scope:this}),this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,e.text+"",function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:e.id,name:e.text,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.store.remove(d):Ext.ux.ToastLars.msg(Lasr.msg.failure,Lars.main.grid.del_failure_msg,5)}})},this)},scope:this}),this.menu.on("hide",this.onContextHide,this),c.stopEvent(),this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null),this.ctxRow=this.view.getRow(b),this.ctxRecord=this.store.getAt(b),Ext.fly(this.ctxRow).addClass("x-node-ctx"),this.menu.showAt(c.getXY())},onContextHide:function(){this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null)},updateDB:function(a){if(a.value instanceof Date)var b=a.value.format("U");else var b=a.value;Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:b,originalValue:a.record.modified},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection),this.store.rejectChanges()},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3),this.store.commitChanges()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4),this.store.rejectChanges())}})},handleEdit:function(a){if(a){{a.field}this.updateDB(a)}else Ext.Msg.alert(Lars.msg.failure_nothing_changed)},onRowAction:function(a,b,c,d){var e={id:b.data.id,text:b.data.OBJ_DESC,attributes:{iconCls:c,lars_ref:b.data.LARS_CONTENT}};switch(c){case"cut":copy3(b.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,b.data.OBJ_DESC+""+Lars.main.grid.solution_attached),this.win.show(),this.win.setZIndex(9e4);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(b),this.win.show(),this.win.setZIndex(9e4);break;case"file-link":e.attributes.lars_ref.match(window.location.host)?LarsViewer.QuestionTabOrBrowserOpen(e):LarsViewer.QuestionBrowserOpenNode(e);break;case"file-webarena":LarsViewer.QuestionTabOrBrowserOpen(e);break;case"page-save":window.open("get/"+b.data.id);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",e);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,b.data.OBJ_DESC+"",function(c){"yes"==c&&Ext.Ajax.request({scope:this,url:"data/",params:{id:b.id,name:b.data.OBJ_NAME,task:"deleteItem"},success:function(c){var d=Ext.util.JSON.decode(c.responseText);d.success?a.store.remove(b):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}})},this)}if(c.match("file"))switch(b.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(d);break;case"pdf":e.attributes={lars_ref:"get/"+e.id,iconCls:e.attributes.iconCls},LarsViewer.QuestionBrowserOpenPDF(e);break;case"page-save":switch(c){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"file-pdf":this.expander.toggleRow(d);break;default:Ext.Msg.confirm(Lars.main.grid.download_1,Lars.main.grid.download_2,function(a){"yes"==a&&LarsGridConfig.downloadFile("get/"+b.data.id)},this)}}},changeState:function(a,b){Ext.Ajax.request({url:"data/",params:{task:"changeState",id:b.id,state:a},success:function(){Ext.getCmp("topics-tree").root.reload()},scope:this})},changeTime:function(a){this.store.load({params:{task:"getNewItems",time:a}})}}),LarsDesktopNorth=function(){var a=function(a,b){return'<div id="hover-'+a+'" class="x-btn-navigation-div-bg"><div id="item-'+a+'" class="item clickable x-btn-navigation-div '+a+'"><span id="'+b+'"><div class="loading-indicator">&nbsp;</div></span></div></div>'};this.center=new Ext.Panel({id:"navigation-panel",layout:"table",region:"center",layoutConfig:{columns:5},defaults:{bodyStyle:"padding:10px 0px 0 0",height:70},items:[{html:a("nav-messages","new-messages-count")},{html:a("nav-documents","new-documents-count")},{html:a("nav-messages-documents","new-messages-documents-count")},{html:a("nav-documents_other","new-documents-other-count")},{html:a("nav-messages-other","new-messages-other-count")}]}),this.center.on("afterlayout",function(){Ext.fly("navigation-panel").on({click:{stopEvent:!0,fn:function(a,c){b(c)}}}),Ext.fly("item-nav-documents").set({qtip:Lars.main.north.new_documents}),Ext.fly("item-nav-messages").set({qtip:Lars.main.north.new_mymessages}),Ext.fly("item-nav-messages-other").set({qtip:Lars.main.north.new_messages}),Ext.fly("item-nav-documents_other").set({qtip:Lars.main.north.new_documents_others}),Ext.fly("item-nav-messages-documents").set({qtip:Lars.main.north.new_messages_packages})},this);var b=function(a){var b=Ext.getCmp("lars-desktop-grid");switch(a.id){case"item-nav-documents":result="lars-desktop-grid",b.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return!c.test(b)&&e.test(d)},this);break;case"item-nav-messages":result=larsDesktopId+"discussion-grid";break;case"item-nav-messages-other":result="lars-desktop-grid",b.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return c.test(b)&&!e.test(d)},this);break;case"item-nav-documents_other":result="lars-desktop-grid",b.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return!c.test(b)&&!e.test(d)},this);break;case"item-nav-messages-documents":result="lars-desktop-grid",b.store.filterBy(function(a){var b=a.data.OBJ_TYPE,c=new RegExp("LARS_MESSAGES","gi"),d=a.data.is_home,e=new RegExp("true","gi");return c.test(b)&&e.test(d)},this);break;case"item-nav-help":result="about-panel";break;default:result=null}null!=result&&Ext.getCmp("lars-desktop-tab-panel").setActiveTab(result)};this.top=new Ext.Panel({id:"navigation-top",height:70,region:"north",html:'<div id="mynavbla" style="text-align: right;"><table width="100%"><tr id="nav-top"><td width="60%" ><img style="margin-top: 0px;" src="/bundles/opensteammokodesk/img/MokoDesk_shadow.png" /><div style="position: absolute; top:0px; left: 0px"><a href="logout/"><img title="abmelden" src="/bundles/opensteammokodesk/img/silk/icons/door.png"></a></div></td><td width="40%"><span id="login-info">'+loginInfo+"</span></td></tr></table></div>",border:!1,bodyStyle:"background:transparent;padding:0px;"}),this.all=new Ext.Panel({split:!0,frame:!1,layout:"border",region:"center",margins:"0 0 0 0",frame:!1,bodyBorder:!1,viewConfig:{forceFit:!0},id:"lars-desktop-center-center",margins:"0 0 0 0",items:[this.center,this.top]}),this.all.on("resize",function(){},this),LarsDesktopNorth.superclass.constructor.call(this,{split:!0,frame:!1,layout:"border",height:150,region:"north",margins:"0 0 0 0",frame:!1,bodyBorder:!1,viewConfig:{forceFit:!0},id:"lars-desktop-north",margins:"0 0 0 0",items:[this.all]})},Ext.extend(LarsDesktopNorth,Ext.Panel,{}),LarsDesktopNotes=function(){this.content=new Ext.form.HtmlEditor({id:"desktop-calendar-form",name:Lars.main.notes,value:"",tbar:"",toolbar:"",enableAlignments:!1,enableColors:!1,hideLabel:!0,enableFormat:!1,enableFont:!1,enableFontSize:!1,enableLinks:!1,enableLists:!1,enableSourceEdit:!1}),this.getContent(),this.form=new Ext.FormPanel({labelAlign:"top",buttonAlign:"center",layout:"fit",items:[this.content],buttons:[{align:"center",text:Lars.button_save,cls:"x-btn button",ctCls:"x-btn button",handler:this.onAdd,scope:this}],border:!1,bodyStyle:"background:transparent;padding:4px 4px 0 0;"}),LarsDesktopNotes.superclass.constructor.call(this,{collapsible:!0,width:200,split:!0,region:"east",layout:"fit",id:"lars-desktop-calendar",margins:"0 0 0 0",viewConfig:{forceFit:!0},autoScroll:!0,buttonAlign:"center",items:this.form})},Ext.extend(LarsDesktopNotes,Ext.Panel,{onAdd:function(){var a=this.content.getValue();Ext.Ajax.request({scope:this,url:"data/",params:{task:"saveAppointments",content:a},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4)}})},getContent:function(){Ext.Ajax.request({scope:this,url:"data/",params:{task:"getAppointments"},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?this.content.setValue(b.content):this.content.setValue(Lars.msg.failure_connection)}})}}),LarsDocumentsSubscriptionGrid=function(){this.primaryKey="id",this.larsObj=Ext.data.Record.create([{name:"id"},{name:"name",type:"string"},{name:"checked",type:"boolean"}]);var a=new Ext.data.JsonReader({id:this.primaryKey},this.larsObj),b=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getDesktopAbo",id:"desktops"},reader:a}),c=(Ext.form,new Ext.grid.CheckColumn({header:Lars.main.document_subscription,dataIndex:"checked",fixed:!0,width:200}));this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:!0,sortable:!0,hidden:!0},{header:Lars.main.group_or_user,dataIndex:"name",sortable:!0},c]),LarsDocumentsSubscriptionGrid.superclass.constructor.call(this,{id:"lars-desktops12-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:!0,store:b,cm:this.cm,autoSizeColumns:!0,frame:!1,autoHeight:!0,viewConfig:{forceFit:!0},plugins:[c],stripeRows:!0}),this.on("afteredit",this.handleEdit,this)},Ext.extend(LarsDocumentsSubscriptionGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"data/",params:{task:"updateSubscription",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection),this.store.rejectChanges()},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3),this.store.commitChanges()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4),this.store.rejectChanges())}})},handleEdit:function(a){if(a){{a.field}this.updateDB(a)}else Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}),LarsDocumentsSubscriptionWindow=function(){LarsDocumentsSubscriptionWindow.superclass.constructor.call(this,{title:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",layout:"border",iconCls:"doc-others",id:"desktops4-win",width:600,height:400,resizable:!0,plain:!0,modal:!0,autoScroll:!0,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsDocumentsSubscriptionGrid})},Ext.extend(LarsDocumentsSubscriptionWindow,Ext.Window,{}),LarsGroupsAddUserWindow=function(){this.name=new Ext.form.Field({id:"user-name",fieldLabel:Lars.dialog.groups.username,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsGroupsAddUserWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_to_favorites,iconCls:"folder-add",id:"add-user-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.groups.add_user,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsGroupsAddUserWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"addBuddy",id:0,name:a},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(Ext.getCmp("lars-rights-grid").store.load(),Ext.ux.ToastLars.msg(Lars.dialog.groups.user_added_msg,b.name?b.name:" ",3)):Ext.ux.ToastLars.msg(Lars.dialog.groups.user_not_added_msg,b.name?b.name:" ",3),this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsGroupsDesktopsGrid=function(){this.primaryKey="id",this.larsObj=Ext.data.Record.create([{name:"id"},{name:"text",type:"string"},{name:"ABO",type:"boolean"}]);var a=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj),b=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getAboGroups",id:"desktops"},reader:a}),c=(Ext.form,new Ext.grid.CheckColumn({header:Lars.dialog.groups.embed_desktop,dataIndex:"ABO",fixed:!0,width:155}));this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:!0,sortable:!0,hidden:!0},{header:Lars.dialog.groups.groupname,dataIndex:"text",sortable:!0},c]),LarsGroupsDesktopsGrid.superclass.constructor.call(this,{id:"lars-desktops-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:!0,store:b,cm:this.cm,autoSizeColumns:!0,frame:!1,autoHeight:!0,viewConfig:{forceFit:!0},plugins:[c],stripeRows:!0}),this.on("afteredit",this.handleEdit,this)},Ext.extend(LarsGroupsDesktopsGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"data/",params:{task:"updateGroup",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection),this.store.rejectChanges()},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3),this.store.commitChanges()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4),this.store.rejectChanges())}})},handleEdit:function(a){if(a){{a.field}this.updateDB(a)}else Ext.Msg.alert(Lars.msg.failure_nothing_changed)}}),LarsGroupsDesktopsGridWindow=function(){LarsGroupsDesktopsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.other_dektops,layout:"border",iconCls:"comment-edit",id:"desktops-win",width:600,height:400,resizable:!0,plain:!0,modal:!0,autoScroll:!0,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsDesktopsGrid})},Ext.extend(LarsGroupsDesktopsGridWindow,Ext.Window,{}),LarsGroupsRightsGrid=function(){this.primaryKey="id",this.tbar=[{iconCls:"group-add",text:Lars.dialog.groups.add_group,tooltip:Lars.dialog.groups.add_group_tt,handler:function(){this.win=new LarsGroupsTreePanelWindow,this.win.show(),this.win.setZIndex(90001)},scope:this},{iconCls:"user-add",text:Lars.dialog.groups.add_user,tooltip:Lars.dialog.groups.add_user_tt,handler:function(){this.win=new LarsGroupsAddUserWindow,this.win.show(),this.win.setZIndex(90001)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.hideHeaders=!1,this.view.renderHeaders(),Ext.getCmp("lars-rights-grid").store.load()},scope:this}],this.larsObj=Ext.data.Record.create([{name:"id"},{name:"group",type:"string"},{name:"fav",type:"string"},{name:"text",type:"string"},{name:"ACCESS_READ",type:"boolean"},{name:"ACCESS_WRITE",type:"boolean"}]);var a=new Ext.data.JsonReader({root:"groups",id:this.primaryKey},this.larsObj),b=new Ext.data.GroupingStore({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getRightsGroups",id:"rights"},reader:a,sortInfo:{field:"text",direction:"ASC"},groupField:"group"}),c=(Ext.form,new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_read,dataIndex:"ACCESS_READ",width:130})),d=new Ext.grid.CheckColumn({header:Lars.dialog.groups.allow_all,dataIndex:"ACCESS_WRITE",width:100});this.cm=new Ext.grid.ColumnModel([{id:"id",header:"ID",dataIndex:this.primaryKey,width:20,readOnly:!0,sortable:!0,hidden:!0},{header:Lars.dialog.groups.groupname,width:290,dataIndex:"text",sortable:!0},c,d,{header:Lars.dialog.groups.favorite,width:50,dataIndex:"fav",sortable:!0},{header:Lars.dialog.groups.type,width:50,hidden:!0,dataIndex:"group",sortable:!0}]),LarsGroupsRightsGrid.superclass.constructor.call(this,{id:"lars-rights-grid",loadMask:{msg:Lars.msg.loading},iconCls:"table-go",region:"center",autoScroll:!0,store:b,cm:this.cm,autoSizeColumns:!0,frame:!1,autoHeight:!0,viewConfig:{forceFit:!0},plugins:[c,d],stripeRows:!0,view:new Ext.grid.GroupingView({groupTextTpl:"{text}"})}),this.on("afteredit",this.handleEdit,this),this.on("rowcontextmenu",this.onContextClick,this)},Ext.extend(LarsGroupsRightsGrid,Ext.grid.EditorGridPanel,{updateDB:function(a){Ext.Ajax.request({scope:this,url:"data/",params:{task:"updateGroup",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:a.value,originalValue:a.record.modified},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection),this.store.rejectChanges()},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3),this.store.commitChanges()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4),this.store.rejectChanges())}})},handleEdit:function(a){if(a){{a.field}this.updateDB(a)}else Ext.Msg.alert(Lars.msg.failure_nothing_changed)},onContextClick:function(a,b,c){var d=(a.getView().getRow(b),a.store.getAt(b));this.menu=new Ext.menu.Menu({id:"grid-ctx"}),"Ja"==d.data.fav&&this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.dialog.groups.del_group_user_1,handler:function(){Ext.Msg.confirm(Lars.dialog.groups.del_group_user_2,Lars.dialog.groups.del_group_user_3,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:d.id,name:d.text,task:"deleteBuddy"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.store.remove(d):Ext.ux.ToastLars.msg(Lars.msg.failure,"---",5)}})},this)},scope:this}),this.menu.on("hide",this.onContextHide,this),c.stopEvent(),this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null),this.ctxRow=this.view.getRow(b),this.ctxRecord=this.store.getAt(b),Ext.fly(this.ctxRow).addClass("x-node-ctx"),this.menu.showAt(c.getXY()),this.menu.el.setZIndex(90010)},onContextHide:function(){this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null)},afterRender:function(){LarsGroupsRightsGrid.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsGroupsRightsGridWindow=function(){LarsGroupsRightsGridWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.define_rights,layout:"border",iconCls:"comment-edit",id:"rights-win",width:600,height:400,resizable:!0,plain:!0,modal:!0,autoScroll:!0,buttons:[{text:Lars.closedown,handler:function(){this.destroy()},scope:this}],items:new LarsGroupsRightsGrid})},Ext.extend(LarsGroupsRightsGridWindow,Ext.Window,{}),LarsGroupsTreePanel=function(){LarsGroupsTreePanel.superclass.constructor.call(this,{id:"groups-tree",region:"center",rootVisible:!1,autoScroll:!0,root:new Ext.tree.AsyncTreeNode({text:Lars.dialog.groups.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"data/",baseParams:{task:"getGroupsTree"}}),id:"source"})}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})}),this.on("contextmenu",this.onContextMenu,this)},Ext.extend(LarsGroupsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(a,b){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.dialog.groups.add_group_to_list,id:"add2312341",handler:function(){Ext.Ajax.request({scope:this,url:"data/",params:{task:"addBuddy",id:a.id},failure:function(){Ext.MessageBox.alert(Lars.msg.warning,Lars.msg.failure_connection)},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,b.name?b.name:" ",3),Ext.getCmp("lars-rights-grid").store.load()):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+" <br>"+b.name,4)}})},iconCls:"group-add"}]}),this.menu.showAt(b.getXY()),this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsGroupsTreePanelWindow=function(){this.treePanel=new LarsGroupsTreePanel,LarsGroupsTreePanelWindow.superclass.constructor.call(this,{title:Lars.dialog.groups.add_group_to_selection,layout:"border",iconCls:"group",id:"",width:200,height:300,autoScroll:!0,items:this.treePanel})},Ext.extend(LarsGroupsTreePanelWindow,Ext.Window,{}),LarsHtmlMessageWindow=function(a){this.node=a,this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsHtmlMessageWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlMessage.title,iconCls:"comments-add",id:"add-message-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.htmlMessage.button_create,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsHtmlMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newMessage",name:a,id:this.node.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);if(1==c.success){var d=c.newID,e={};e.parentElement=this.node.parentElement,e.id=d,e.text=a,Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e)}else 0==c.success&&Ext.ux.ToastLars.msg(Lars.msg.failure,c.name,5);this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsHTMLPanel=function(a){this.tbar=[{iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:this.reload,scope:this}],LarsHTMLPanel.superclass.constructor.call(this,a),b=this.getTopToolbar(),this.addEvents({schuelerEditTab:!0}),this.addEvents({refreshTab:!0})},Ext.extend(LarsHTMLPanel,Ext.Panel,{reload:function(){Ext.Ajax.request({scope:this,waitMsg:Lars.msg.loading_data,url:"data/",params:{id:this.node.id,task:"view"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(this.html=b.html,this.body.dom.innerHTML=b.html):Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}})}}),LarsIFramePanel=function(a){this.tbar=[{iconCls:"editPage",text:"",tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",this.node,this.color)},scope:this},{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()
},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}],LarsIFramePanel.superclass.constructor.call(this,a),this.addEvents({schuelerEditTab:!0})},Ext.extend(LarsIFramePanel,Ext.ux.ManagedIframePanel,{}),LarsIFramePanelInternet=function(a){this.tbar=[{iconCls:"printer",text:"",tooltip:Lars.printer,handler:function(){this.iframe.print()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.setSrc()},scope:this}],LarsIFramePanelInternet.superclass.constructor.call(this,a),this.addEvents({schuelerEditTab:!0})},Ext.extend(LarsIFramePanelInternet,Ext.ux.ManagedIframePanel,{}),LarsJoinChat=function(){this.name=new Ext.form.Field({id:"environment-id",fieldLabel:"ID des Raumes",width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsJoinChat.superclass.constructor.call(this,{title:"Chat beitreten",iconCls:"webcam",id:"join-chat-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:"ok",handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this)},Ext.extend(LarsJoinChat,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();reloadVoiceChat(a),this.destroy()}}),MainPanel=function(){MainPanel.superclass.constructor.call(this,{id:"main-tabs",activeTab:0,margins:"0 0 0 0",frame:!1,bodyBorder:!1,enableTabScroll:!0,plain:!0,resizeTabs:!0,tabWidth:150,minTabWidth:120,enableTabScroll:!0,plugins:new Ext.ux.TabCloseMenu}),this.on("schuelerEditTab",function(a,b){Ext.ux.ToastLars.msg(Lars.msg.loading,Lars.msg.loading_editor,2),this.openTabEdit(a,b)},this),this.on("viewTab",function(a,b){this.openTabView(a,b)}),this.on("viewIFrameTab",function(a,b){this.openTabIFrame(a,b)}),this.on("viewIFrameTabAll",function(a,b){this.openTabIFrameInternet(a,b)}),this.on("viewPackage",this.openTabPackage,this)},Ext.extend(MainPanel,Ext.TabPanel,{openTabEdit:function(a,b){var c,d,e=a.id;(c=this.getItem(e+"editorTab"))||Ext.Ajax.request({scope:this,url:"edit/",params:{id:a.id,task:"edit"},success:function(f){var g=Ext.util.JSON.decode(f.responseText);d=g.html,g.success?(c=new Ext.form.FormPanel({iconCls:"editPage",layout:"fit",title:'<span style="color: '+b+';">'+a.text+"</span>",tabTip:a.text,id:e+"editorTab",height:500,minWidth:200,minHeight:200,autoScroll:!0,bodyBorder:!1,border:!1,resizable:!0,frame:!1,closable:!0,buttons:[{text:Lars.button_save,handler:function(){tinyMCE.triggerSave();var b=Ext.getCmp(a.id+"editor");b.syncValue(),c.getForm().submit({url:"edit/",params:{id:e,task:"saveEdit",origValue:d?d:""},method:"POST",success:function(b,f){var g=Ext.util.JSON.decode(f.response.responseText);if(d=c.getForm().getValues().textField,g.success){Ext.ux.ToastLars.msg(Lars.msg_success_new_content,"",2),Ext.getCmp(e+"editor").destroy(),Ext.getCmp("main-tabs").remove(Ext.getCmp(e+"editorTab")),Ext.getCmp(e+"view")&&Ext.getCmp(e+"view").reload();var h={};if(a.parentElement.match("Grid")){h=Ext.getCmp(a.parentElement);var i=h.store.getById(a.id),j=h.store.indexOf(i)>=0?h.getView().getRow(h.store.indexOf(i)):h.store.indexOf(i);0>j?h.store.load():Ext.fly(j).hasClass("x-grid3-row-expanded")&&i.iFrame&&i.iFrame.setSrc()}a.parentElement.match("discussion-grid")&&(h=Ext.getCmp(a.parentElement),h.store.load({params:Ext.apply({},h.store.lastOptions.params)}))}else Ext.ux.ToastLars.msg(Lars.msg.failure,g.message,5)},failure:function(a,b){var f=Ext.util.JSON.decode(b.response.responseText);if(Ext.ux.ToastLars.msg(Lars.msg.failure,f.message?f.message:"",5),d=c.getForm().getValues().textField,f.changed){var g=f.oldName,h=f.oldId;this.winChanged=new LarsNewHtmlTextWindowNew(h,g,d),this.winChanged.show(),this.winChanged.setZIndex(90003),Ext.getCmp(e+"editor").destroy(),Ext.getCmp("main-tabs").remove(Ext.getCmp(e+"editorTab")),Ext.Msg.show({title:Lars.main.editor.save_info_1,msg:Lars.main.editor.save_info_2,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})}}})}},{text:Lars.closedown,handler:function(){Ext.getCmp(e+"editor").destroy(),Ext.getCmp("main-tabs").remove(Ext.getCmp(e+"editorTab"))}}],items:[{xtype:"tinymce",width:300,height:500,id:a.id+"editor",name:"textField",tinymceSettings:{theme:"advanced",language:Lars.tinyMceLanguage,verify_html:!0,content_css:"/bundles/opensteammokodesk/css/tinyMCE.css",plugins:"table,emotions,searchreplace,asciimath,asciisvg,media,paste,bid_tooltip",theme_advanced_buttons1:"fontselect,formatselect,fontsizeselect,bold,italic,underline,sub,sup,separator,justifyleft,justifycenter,justifyright,separator,forecolor,backcolor",theme_advanced_buttons2:"hr,charmap,separator,emotions,image,media,link,unlink,separator,bullist,numlist,tablecontrols,visualaid,asciimath,asciimathcharmap,asciisvg",theme_advanced_buttons3:"undo,redo,separator,pasteword,separator,removeformat,separator,search,separator,fullscreen,code,bid_tooltip",theme_advanced_fonts:"Times New Roman=times new roman,times,serif;Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;AkrutiKndPadmini=Akpdmi-n",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"none",theme_advanced_resizing:!1,convert_urls:!1,AScgiloc:"/bundles/opensteammokodesk/tools/asciisvg/svgimg.php",ASdloc:"/bundles/opensteammokodesk/js/tiny_mce/plugins/asciisvg/js/d.svg",extended_valid_elements:"embed[*]",file_browser_callback:function(b,c,d,e){this.win=new LarsBrowseFileWindow(e.document.forms[0].elements[b],a),this.win.show(),this.win.setZIndex(90010)}},value:g.html}]}),Ext.getCmp("main-tabs").add(c),Ext.getCmp("main-tabs").setActiveTab(c)):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,"")}}),this.setActiveTab(c)},openTabIFrame:function(a,b){var c,d=a.id+"viewIFrame";(c=this.getItem(d))||(c=new LarsIFramePanel({id:"desktop-grid-row-"+a.id,defaultSrc:"get/"+a.id,loadMask:!0,id:d,iconCls:a.attributes.iconCls||"page",title:'<span style="color: '+b+';">'+a.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:a.text,layout:"fit",closable:!0,autoScroll:!0,node:a}),Ext.getCmp("main-tabs").add(c),Ext.getCmp("main-tabs").setActiveTab(c)),this.setActiveTab(c)},openTabIFrameInternet:function(a,b){var c,d=a.id+"viewIFrame";(c=this.getItem(d))||(c=new LarsIFramePanelInternet({id:"desktop-grid-row-"+a.id,defaultSrc:a.attributes.lars_ref,loadMask:!0,id:d,edit:!1,iconCls:a.attributes.iconCls,title:'<span style="color: '+b+';">'+a.text+"</span>",listeners:{domready:LarsViewer.LinkInterceptorIFrame},tabTip:a.text,layout:"fit",closable:!0,autoScroll:!0,node:a}),c.on("documentloaded",function(a){for(var b=a.getWindow(),d=0,e=b.frames.length;e>d;d++)for(var f=b.frames[d].document.getElementsByTagName("a"),g=0,h=f[g],i=f.length;i>g;g++)h=f[g],h.target="_blank",h.addEventListener("click",function(a){return a.currentTarget.href.match(window.location.host)?c.setSrc(a.currentTarget.href):LarsViewer.QuestionBrowserOpen(a),a.preventDefault(),!1},!1)}),Ext.getCmp("main-tabs").add(c),Ext.getCmp("main-tabs").setActiveTab(c)),this.setActiveTab(c)},openTabView:function(a,b){var c,d=a.id+"view";(c=this.getItem(d))||Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,task:"view"},success:function(e){var f=Ext.util.JSON.decode(e.responseText);f.success?(c=new LarsHTMLPanel({id:d,iconCls:"page",title:'<span style="color: '+b+';">'+a.text+"</span>",tabTip:a.text,bodyStyle:"padding:5px 5px 5px 5px; background:white; border-style:solid;border-color:#99bbe8;border-width:1;",layout:"fit",closable:!0,html:f.html,autoScroll:!0,node:a}),Ext.getCmp("main-tabs").add(c),Ext.getCmp("main-tabs").setActiveTab(c)):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.editor.document_not_available,5)}}),this.setActiveTab(c)},openTabPackage:function(a){var b,c=a.id;if(!(b=this.getItem("package-panel-"+c))){if(a.ownerTree&&0==a.isLeaf()&&a.ownerTree.id.match("topics")&&!a.attributes.iconCls.match("report")){var d=new LarsPackageDiscussion(a,{region:"center",collapsible:!1},a.attributes.groupColor);b=new LarsPackagePanel({iconCls:a.attributes.iconCls,border:!1,bodyBorder:!1,closable:!0,id:"discussion-"+c,listeners:LarsViewer.LinkInterceptor,node:a,tabTip:a.text+Lars.main.grid.package_append,groupColor:a.attributes.groupColor,title:'<span style="color: '+a.attributes.groupColor+';">'+a.text+"</span>",layout:"border",margins:"0 0 0 0",items:[d]}),d.startAutoUpdate("d"+a.id),d.on("destroy",function(){d.stopAutoUpdate("d"+a.id)},this)}else{var d=new LarsPackageDiscussion(a,{region:"south",collapsible:!0},a.attributes.groupColor),e=new PackageGrid(a,a.attributes.groupColor);e.getView().getRowClass=LarsGridConfig.applyRowClass,b=new LarsPackagePanel({defaults:{collapsible:!0,split:!0},iconCls:a.attributes.iconCls,border:!1,bodyBorder:!1,closable:!0,id:"package-panel-"+a.id,node:a,listeners:LarsViewer.LinkInterceptor,node:a,tabTip:a.text+Lars.main.grid.package_append,groupColor:a.attributes.groupColor,title:'<span style="color: '+a.attributes.groupColor+';">'+a.text+"</span>",layout:"border",margins:"0 0 0 0",items:[e,d]}),e.startAutoUpdate("p"+a.id),d.startAutoUpdate("d"+a.id),d.on("destroy",function(){d.stopAutoUpdate("d"+a.id)},this),e.on("destroy",function(){e.stopAutoUpdate("p"+a.id)},this)}b.on("activate",function(a){if(a.node){var b=Ext.getCmp("topics-tree"),c=Ext.getCmp("topics-tree-t"),d=Ext.getCmp("resources-tree"),e=c.getNodeById(a.node.id);e=e?e:b.getNodeById(a.node.id),e&&(c.expandPath(e.getPath()),b.expandPath(e.getPath()),e.select());var f=d.getNodeById(a.node.id);f&&(d.expandPath(f.getPath()),f.select())}}),Ext.getCmp("main-tabs").add(b),Ext.getCmp("main-tabs").setActiveTab(b),Ext.getCmp("main-tabs").syncSize(),a.ownerTree&&0==a.isLeaf()&&a.ownerTree.id.match("topics")||e.store.load({callback:function(){for(var a=0;a<e.store.data.length;a++)("1"==e.store.data.items[a].data.LARS_TYPE||"3"==e.store.data.items[a].data.LARS_TYPE)&&e.expander.expandRow.defer(500,e.expander,[a])}}),d.store.load()}this.setActiveTab(b)},archivePackage:function(a){Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,task:"archivePackage"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}})},archiveGroupPackage:function(a,b){Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,task:"archiveGroupPackage",archiveId:b},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.ux.ToastLars.msg(Lars.main.tree.package_moved_msg,"",5):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.package_moved_msg,5)}})}}),LarsMessageWindow=function(a,b){switch(this.editMessage=!1,b){case"newMessage":this.editMessage=!1,this.folderId=a.id;break;case"editMessage":this.editMessage=!0}this.primaryKey="id",this.record=a,this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlMessage.fieldLabel,value:this.editMessage?this.record.data.OBJ_DESC:"",width:350,msgTarget:"under"}),this.message=new Ext.form.HtmlEditor({id:"message-text",fieldLabel:Lars.dialog.comment.fieldLabel,height:200,width:350,value:this.editMessage?this.record.data.LARS_CONTENT:"",msgTarget:"under",enableAlignments:!1,enableColors:!1,enableFont:!1,enableLinks:!1,enableSourceEdit:!1}),this.form=new Ext.FormPanel({labelAlign:"top",items:[this.name,this.message],border:!1,bodyStyle:"background:transparent;padding:10px;"}),this.title=this.editMessage?Lars.dialog.comment.title_1+a.data.OBJ_DESC+Lars.dialog.comment.title_2:Lars.main.discussion.write_new_message_tt,LarsMessageWindow.superclass.constructor.call(this,{title:this.title,iconCls:"comment-edit",id:"change-com-win",autoHeight:!0,width:400,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.main.discussion.save_send,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsMessageWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue(),b=this.message.getValue();Ext.Ajax.request({url:"edit/",params:{task:"saveTitleAndTextMessage",name:a,textField:b,id:this.record.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success?(this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.success,b.name,5)):0==b.success&&Ext.ux.ToastLars.msg(Lars.msg.failure,b.name,5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsHtmlTextWindow=function(a){this.node=a,this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlText.fieldLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsHtmlTextWindow.superclass.constructor.call(this,{title:Lars.dialog.htmlText.title_1+" "+a.text+" "+Lars.dialog.htmlText.title_2,iconCls:"page-text",id:"add-message-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.htmlText.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsHtmlTextWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newText",name:a,id:this.node.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);if(1==c.success){var d=c.newID,e={};e.parentElement=this.node.parentElement,e.id=d,e.text=a,Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e)}else 0==c.success&&Ext.ux.ToastLars.msg(Lars.msg.failure,c.name,5);this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsWebarenaWindow=function(a){this.node=a,this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.webarena.fieldLabel,width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsWebarenaWindow.superclass.constructor.call(this,{title:Lars.dialog.webarena.title_1+" "+a.text+" "+Lars.dialog.webarena.title_2,iconCls:"page-text",id:"add-message-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.webarena.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsWebarenaWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newWebarena",name:a,id:this.node.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);if(1==c.success){var d=c.newID,e={};e.parentElement=this.node.parentElement,e.id=d,e.text=a,Ext.getCmp(this.node.id+"Grid").store.load()}else 0==c.success&&Ext.ux.ToastLars.msg(Lars.msg.failure,c.name,5);this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),LarsNewHtmlTextWindowNew=function(a,b,c){this.messageId=a,this.oldName=b,this.htmlValue=c,this.name=new Ext.form.Field({id:"message-name",fieldLabel:Lars.dialog.htmlTextNew.fieldLabel,width:450,value:b,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsNewHtmlTextWindowNew.superclass.constructor.call(this,{title:Lars.dialog.htmlTextNew.title,iconCls:"page-text",id:"add-message-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.htmlTextNew.button_add,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsNewHtmlTextWindowNew,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"edit/",method:"POST",params:{task:"saveEditNewName",textField:this.htmlValue,name:a,id:this.messageId},success:function(a){var b=Ext.util.JSON.decode(a.responseText);1==b.success||0==b.success&&Ext.ux.ToastLars.msg(Lars.msg.failure,b.name,5),this.destroy()},failure:function(){this.destroy(),Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_connection,5)},scope:this})}}),Ext.override(Ext.grid.GridPanel,{startAutoUpdate:function(a){larsUpdater.add(a,this,this.store)},stopAutoUpdate:function(a){larsUpdater.remove(a)}}),Ext.util.JSON.decode=function(json){return json?"{"==json[0]?eval("("+json+")"):{success:!1,name:Lars.msg.failure_no_response}:{success:!1,name:Lars.msg.failure_no_response}},Ext.decode=Ext.util.JSON.decode,Ext.override(Ext.Window,{focusFirst:function(a){a.form.items.items[0].focus(!1,100)}}),Ext.override(Ext.grid.GridView,{focusRow:function(){}}),Ext.override(Ext.grid.GroupingView,{focusRow:function(){}}),LarsPackageDiscussion=function(a,b,c){this.groupColor=c,this.primaryKey="id",a.parentElement=a.id+"discussion-grid",this.expander=new Ext.grid.RowExpander({tpl:new Ext.Template("<p> {LARS_CONTENT}</p>"),lazyRender:!0,enableCaching:!1});var d=new Ext.data.JsonReader({root:"messages",id:this.primaryKey},[this.primaryKey,"OBJ_NAME","OBJ_DESC","OBJ_AUTHOR",{name:"DOC_LAST_MODIFIED",type:"date",dateFormat:"U"},"LARS_CONTENT"]);this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getDiscussion",id:a.id,start:0,limit:10},reader:d,sortInfo:{field:"DOC_LAST_MODIFIED",direction:"DESC"}}),this.store.setDefaultSort("DOC_LAST_MODIFIED","DESC"),this.store.on("load",function(){this.store.data.length<1&&this.collapsible&&this.collapse()},this),a.isLeaf()||(this.bbar=new Ext.PagingToolbar({pageSize:10,store:this.store,displayInfo:!0})),this.tbar=[{iconCls:"comments-add",text:Lars.main.discussion.write_new_message,tooltip:Lars.main.discussion.write_new_message_tt,handler:function(){a.parentElement=a.id+"discussion-grid",this.win=new LarsMessageWindow(a,"newMessage"),this.win.show(),this.win.setZIndex(9e4)},scope:this},"->","-",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.store.load()},scope:this},"-"],this.columns=[{id:"Titel",header:Lars.main.discussion.columns.title,dataIndex:"OBJ_DESC",sortable:!0,width:300,renderer:this.formatTitle},{header:Lars.main.discussion.columns.author,dataIndex:"OBJ_AUTHOR",width:100,hidden:!0,sortable:!0},{header:Lars.main.discussion.columns.content,dataIndex:"LARS_CONTENT",width:10,hidden:!0,sortable:!1},{id:"last",header:Lars.main.discussion.columns.date,dataIndex:"DOC_LAST_MODIFIED",width:150,renderer:this.formatDate,sortable:!0}],LarsPackageDiscussion.superclass.constructor.call(this,{title:Lars.main.discussion.title,iconCls:"comments",region:b.region,collapsible:b.collapsible,hideHeaders:!0,collapseMode:"mini",header:!1,height:200,border:!1,id:a.id+"discussion-grid",loadMask:{msg:Lars.main.discussion.loadMask},sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),viewConfig:{forceFit:!0,enableRowBody:!0,showPreview:!0,showAll:!0,getRowClass:this.applyRowClass}}),this.addEvents({schuelerEditTab:!0}),this.on("rowcontextmenu",this.onContextClick,this),this.on("rowdblclick",this.showContentWindow,this)},Ext.extend(LarsPackageDiscussion,Ext.grid.GridPanel,{onContextClick:function(a,b,c){var d=(a.getView().getRow(b),a.store.getAt(b)),e={};e.id=d.data.id,e.text=d.data.OBJ_DESC,e.parentElement=a.id,this.menu=new Ext.menu.Menu({id:"grid-discussion-ctx",items:[{iconCls:"editPage",text:Lars.main.discussion.menu.edit,tooltip:Lars.main.discussion.menu.edit_tt,handler:function(){this.win=new LarsMessageWindow(d,"editMessage"),this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"delete",text:Lars.main.discussion.menu.del,tooltip:Lars.main.discussion.menu.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.discussion.menu.del_confirm_1,Lars.main.discussion.menu.del_confirm_2+" "+this.ctxRecord.data.OBJ_DESC,function(a){"yes"==a&&Ext.Ajax.request({scope:this,url:"data/",params:{id:this.ctxRecord.id,name:this.ctxRecord.data.OBJ_NAME,task:"deleteItem"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(this.store.remove(this.store.getById(this.ctxRecord.id)),Ext.ux.ToastLars.msg(Lars.main.discussion.menu.del_success_msg,"",3)):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.discussion.menu.del_failure_msg,5)}})},this)},scope:this}]}),this.menu.on("hide",this.onContextHide,this),c.stopEvent(),this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null),this.ctxRow=this.view.getRow(b),this.ctxRecord=this.store.getAt(b),Ext.fly(this.ctxRow).addClass("x-node-ctx"),this.menu.showAt(c.getXY())},onContextHide:function(){this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null)},togglePreview:function(a){this.view.showPreview=a,this.view.refresh()},applyRowClass:function(a,b,c){if(this.showPreview){var d=Ext.util.Format;return c.body=this.showAll?'<font size="2"><p>'+a.data.LARS_CONTENT+"</p>":"<p>"+d.ellipsis(d.stripTags(a.data.LARS_CONTENT),300)+"</p>","x-grid3-row-expanded"}return"x-grid3-row-collapsed"},formatDate:function(a){if(!a)return"";var b=new Date,c=b.clearTime(!0),d=a.clearTime(!0).getTime();return d==c.getTime()?Lars.today+" "+a.dateFormat("d-m-Y H:i"):(c=c.add("d",-6),c.getTime()<=d?a.dateFormat("d-m-Y H:i"):a.dateFormat("d-m-Y H:i"))},formatTitle:function(a,b,c){return String.format('<div class="comment"><b>{0}</b> <span class="author">'+Lars.main.discussion.created_of+" {1}</span></div>",a,c.data.OBJ_AUTHOR,c.id,c.data.forumid)}});var larsObj;PackageGrid=function(a,b){this.groupColor=b,this.primaryKey="id",a.parentElement=a.id+"Grid",this.stateAction=new Ext.Action({tooltip:Lars.main.grid.change_state,iconCls:this.getStateIcon(a.attributes.state),menu:[{iconCls:"redIcon",group:"lars-state",text:Lars.main.grid.state_0,handler:function(){this.changeState(0,this.node)},scope:this},{iconCls:"orangeIcon",group:"lars-state",text:Lars.main.grid.state_1,handler:function(){this.changeState(1,this.node)},scope:this},{iconCls:"greenIcon",group:"lars-state",text:Lars.main.grid.state_2,handler:function(){this.changeState(2,this.node)},scope:this},{iconCls:"blueIcon",group:"lars-state",text:Lars.main.grid.state_3,handler:function(){this.changeState(3,this.node)},scope:this},{iconCls:"yellowIcon",group:"lars-state",text:Lars.main.grid.state_4,handler:function(){this.changeState(4,this.node)},scope:this}],scope:this}),this.tobar=a.isLeaf()?new Ext.Toolbar([this.stateAction,{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node),this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node),this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"add-webarena",text:Lars.main.grid.add_webarena_title,tooltip:Lars.main.grid.add_webarena,handler:function(){this.win=new LarsWebarenaWindow(this.node),this.win.show(),this.win.setZIndex(9e4)},scope:this},{text:"Dokument hier einfügen",id:"add23141494723340233",handler:function(){fileRecordToCopy?Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(b){"yes"==b&&Ext.Ajax.request({url:"data/",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:a.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.ux.ToastLars.msg(Lars.msg.success_copy,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,b.name?b.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})},this):Ext.Msg.alert("Fehler","Kein Dokument in der Zwischenablage vorhanden")},iconCls:"paste"},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout,Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}]):new Ext.Toolbar([{iconCls:"add-page",text:Lars.main.grid.add_document_title,tooltip:Lars.main.grid.add_document,handler:function(){this.win=new UploadWindow(this.node),this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"add-page-white",text:Lars.main.grid.add_text_title,tooltip:Lars.main.grid.add_text,handler:function(){this.win=new LarsHtmlTextWindow(this.node),this.win.show(),this.win.setZIndex(9e4)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){this.getView().getRowClass=LarsGridConfig.applyRowClassWithout,Ext.getCmp(this.node.id+"Grid").store.load()},scope:this}]),this.actionPackage=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action1",qtipIndex:"qtip1",hideIndex:"hide1",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action3",qtipIndex:"qtip3",hideIndex:"hide3",iconCls:"whiteIcon",tooltip:""},{iconIndex:"action4",qtipIndex:"qtip4",hideIndex:"hide4",iconCls:"whiteIcon",tooltip:""}]}),this.actionPackage.on("action",this.onRowActionPackage,this),this.actionFileType=new Ext.ux.grid.RowActions({header:"",actions:[{iconIndex:"action0",qtipIndex:"qtip0",iconCls:"file-dll"},{iconCls:"whiteIcon",qtipIndex:"qtip2",hideIndex:"hide2",iconIndex:"action2"},{iconCls:"whiteIcon",qtipIndex:"qtip5",hideIndex:"hide5",iconIndex:"action5"}]}),this.expander=new Ext.grid.RowExpander({tpl:'<div id="desktop-grid-{id}"></div>'}),this.expander.on("expand",function(a,b){switch(b.data.action2){case"page-save":var c=new Ext.Panel({id:"desktop-grid-row-"+b.data.id,html:b.data.LARS_CONTENT,autoHeight:!0,renderTo:"desktop-grid-"+b.data.id});b.panel=c;break;case"editPage":case"pdf":var c=new Ext.ux.ManagedIframePanel({id:"desktop-grid-row-"+b.data.id,defaultSrc:"get/"+b.data.id,listeners:{domready:LarsViewer.LinkInterceptorIFrame},loadMask:!0,renderTo:"desktop-grid-"+b.data.id});c.on("documentloaded",function(){var a=c.getFrame();a.setHeight(a.getBody().scrollHeight)},this),b.iFrame=c}}),this.larsObj=LarsGridConfig.larsObj;var c=(LarsGridConfig.dsState,LarsGridConfig.dsType),d=new Ext.data.JsonReader({root:"ass",id:this.primaryKey},this.larsObj),e=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"data/",method:"POST"}),baseParams:{task:"getAssignment",id:a.id},reader:d,sortInfo:{field:"OBJ_DESC",direction:"ASC"}}),f=Ext.form;this.cm=new Ext.grid.ColumnModel([this.expander,{id:"ID",header:"ID",dataIndex:"id",width:20,readOnly:!0,sortable:!0,hidden:!0},this.actionFileType,{header:Lars.main.grid.columns.desc,dataIndex:"OBJ_DESC",sortable:!0,width:150,editor:new f.TextField({allowBlank:!1})},{header:Lars.main.grid.columns.content,dataIndex:"LARS_CONTENT",readOnly:!0,hidden:!0,width:40},{header:Lars.main.grid.columns.type,dataIndex:"type",hidden:!0,sortable:!0,readOnly:!0,width:60},{header:Lars.main.grid.columns.type,dataIndex:"LARS_TYPE",sortable:!0,fixed:!0,width:70,editor:new Ext.form.ComboBox({mode:"local",editable:!1,triggerAction:"all",store:c,displayField:"text",valueField:"id",valueNotFoundText:Lars.main.grid.columns.valueNotFoundText}),renderer:function(a,b){return b&&(b.css=LarsGridConfig.renderCell(a)),record=c.getById(a),record?record.data.text:""}},{header:Lars.main.grid.columns.last_changed,dataIndex:"OBJ_LAST_CHANGED",width:70,fixed:!0,readOnly:!0,sortable:!0,renderer:function(a){return a.dateFormat("d-m-Y")}},{header:Lars.main.grid.columns.created,dataIndex:"OBJ_CREATION_TIME",readOnly:!0,width:100,hidden:!0,sortable:!0,renderer:function(a){return a.dateFormat("d-m-Y H:i")}},this.actionPackage]),PackageGrid.superclass.constructor.call(this,{region:"center",loadMask:{msg:Lars.main.grid.loadMask},id:a.id+"Grid",boder:!1,bodyBorder:!1,node:a,disableSelection:!0,closable:!0,autoScroll:!0,hideHeaders:!0,cm:this.cm,store:e,autoSizeColumns:!0,autoExpandColumn:"ID",frame:!1,tbar:this.tobar,view:new Ext.grid.GridView({forceFit:!0,enableRowBody:!0,emptyText:Lars.main.grid.emptyText,deferEmptyText:!0}),clicksToEdit:1,stripeRows:!0,plugins:[this.expander,this.actionPackage,this.actionFileType]}),this.addEvents({schuelerEditTab:!0}),this.addEvents({refreshTab:!0}),this.on("rowcontextmenu",this.onContextClick,this),this.on("afteredit",this.handleEdit,this),this.on("beforeadd",this.handleEdit,this),this.on("render",function(a){new Ext.dd.DropZone(a.getEl(),{ddGroup:"TreeDD",onDragDrop:function(){alert("dragdrop")},notifyDrop:function(a,b,c){var d=(b.getTarget("div.x-panel"),this.id);Ext.Ajax.request({scope:this,url:"data/",params:{id:c.node.id,folderId:d,task:"copyIntoPackage"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success&&Ext.getCmp(d).store.load()}})},onContainerOver:function(a,b,c){return 1!=c.node.leaf?this.dropNotAllowed:this.dropAllowed}})})},Ext.extend(PackageGrid,Ext.grid.EditorGridPanel,{onContextClick:function(a,b,c){var d=(a.getView().getRow(b),a.store.getAt(b)),e={};e.id=d.data.id,e.text=d.data.OBJ_NAME,e.parentElement=a.id,this.menu=new Ext.menu.Menu({id:"grid-ctx"}),"editPage"==d.data.action2&&this.menu.add({iconCls:"editPage",text:Lars.edit,tooltip:Lars.edit,handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e,this.groupColor)},scope:this}),this.menu.add({iconCls:"delete",text:Lars.del,tooltip:Lars.main.grid.del_tt,handler:function(){Ext.Msg.confirm(Lars.main.grid.del_confirm,e.text+"",function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:e.id,name:e.text,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.store.remove(d):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed,5)}})},this)},scope:this}),this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(){fileRecordToCopy=d,packageNodeToCopy=!1},scope:this}),fileRecordToCopy&&this.menu.add({text:Lars.main.tree.copy_document,id:"add2314194723340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3_in_package,function(a){"yes"==a&&Ext.Ajax.request({url:"data/",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:e.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.ux.ToastLars.msg(Lars.msg.success_copy,b.name?b.name:" ",3):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,b.name?b.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})},this)},iconCls:"paste"}),this.menu.on("hide",this.onContextHide,this),c.stopEvent(),this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null),this.ctxRow=this.view.getRow(b),this.ctxRecord=this.store.getAt(b),Ext.fly(this.ctxRow).addClass("x-node-ctx"),this.menu.showAt(c.getXY())},onContextHide:function(){this.ctxRow&&(Ext.fly(this.ctxRow).removeClass("x-node-ctx"),this.ctxRow=null)},updateDB:function(a){if(a.value instanceof Date)var b=a.value.format("U");else var b=a.value;Ext.Ajax.request({scope:this,url:"data/",params:{task:"update",key:this.primaryKey,keyValue:a.record.data.id,id:a.record.data.id,field:a.field,fieldValue:b,originalValue:a.record.modified},failure:function(){Ext.MessageBox.alert(Lars.msg.failure,Lars.msg.failure_response),this.store.rejectChanges()
},success:function(c){var d=Ext.util.JSON.decode(c.responseText);1==d.success?(Ext.ux.ToastLars.msg(Lars.msg.success_changed_data,d.name?d.name:" ",3),"OBJ_DESC"==a.field&&(a.record.data.OBJ_NAME=b),this.store.commitChanges()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_nothing_changed+"<br>"+d.name,4),this.store.rejectChanges())}})},handleEdit:function(a){if(a){{a.field}this.updateDB(a)}else Ext.Msg.alert(Lars.msg.failure_nothing_changed)},onRowActionPackage:function(a,b,c,d){var e={id:b.data.id,text:b.data.OBJ_DESC,parentElement:this.node.parentElement,attributes:{iconCls:c,lars_ref:b.data.LARS_CONTENT}};switch(c){case"cut":copy3(b.data.OBJ_PATH);break;case"add-page":this.win=new UploadWindow(this.node,2,b.data.OBJ_DESC+Lars.main.grid.solution),this.win.show(),this.win.setZIndex(9e4);break;case"icon-edit-record":break;case"comment-edit":case"comments":this.win=new LarsCommentWindow(b),this.win.show(),this.win.setZIndex(9e4);break;case"file-link":e.attributes.lars_ref.match(window.location.host)?LarsViewer.QuestionTabOrBrowserOpen(e):LarsViewer.QuestionBrowserOpenNode(e);break;case"file-webarena":LarsViewer.QuestionTabOrBrowserOpen(e);break;case"page-save":Ext.Msg.confirm(Lars.main.grid.open_link_1,Lars.main.grid.open_link_2,function(a){"yes"==a&&window.open("get/"+b.data.id)},this);break;case"editPage":Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",e,this.groupColor);break;case"tab-go":Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",e,this.groupColor);break;case"delete":Ext.Msg.confirm(Lars.main.grid.del_confirm,b.data.OBJ_DESC+"",function(c){"yes"==c&&Ext.Ajax.request({scope:this,url:"data/",params:{id:b.id,name:b.data.OBJ_NAME,task:"deleteItem"},success:function(c){var d=Ext.util.JSON.decode(c.responseText);d.success?a.store.remove(b):Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.grid.del_failure_msg,5)}})},this)}if(c.match("file"))switch(b.data.action2){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":case"editPage":this.expander.toggleRow(d);break;case"page-save":switch(c){case"file-gif":case"file-tiff":case"file-jpeg":case"file-jpg":case"file-png":case"file-bmp":this.expander.toggleRow(d);break;default:e.attributes={lars_ref:"get/"+e.id,iconCls:e.attributes.iconCls},LarsViewer.QuestionBrowserOpenPDF(e)}}},changeState:function(a,b){4==a&&1!=isTeacher?Ext.Msg.alert("",Lars.main.grid.only_teacher):Ext.Ajax.request({url:"data/",params:{task:"changeState",id:b.id,state:a},success:function(){{var c=Ext.getCmp("topics-tree"),d=Ext.getCmp("topics-tree-t");Ext.getCmp("resources-tree")}c.getNodeById(b.id)&&c.root.reload(c.onManualReload),d.getNodeById(b.id)&&d.root.reload(d.onManualReload),this.stateAction.items[0].setIconClass(this.getStateIcon(a))},scope:this})},getStateIcon:function(a){switch(parseInt(a)){case 0:return"redIcon";case 1:return"orangeIcon";case 2:return"greenIcon";case 3:return"blueIcon";case 4:return"yellowIcon";default:return"whiteIcon"}},getStateText:function(a){switch(parseInt(a)){case 0:return Lars.main.grid.state_0;case 1:return Lars.main.grid.state_1;case 2:return Lars.main.grid.state_2;case 3:return Lars.main.grid.state_3;case 4:return Lars.main.grid.state_4}}}),LarsPackagePanel=function(a){LarsPackagePanel.superclass.constructor.call(this,a),this.addEvents({schuelerEditTab:!0})},Ext.extend(LarsPackagePanel,Ext.Panel,{}),LarsResourcesAddNameWindow=function(a){this.node=a,this.name=new Ext.form.Field({id:"folder-link-name",fieldLabel:Lars.dialog.resourcesAddName.fieldLabel,width:450,value:this.node.attributes.text,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.name],border:!1,bodyStyle:"background:transparent;padding:10px;"}),LarsResourcesAddNameWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAddName.title,iconCls:"folder-add",id:"add-folder-win",autoHeight:!0,width:500,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.resourcesAddName.button_add,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(LarsResourcesAddNameWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({scope:this,url:"folder/",params:{node:this.node.id,name:a,task:"setResource"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success&&(Ext.ux.ToastLars.msg(Lars.dialog.resourcesAddName.msg_success,"",5),Ext.getCmp("resources-tree").root.reload(),this.destroy())},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure,"",5),this.destroy()}})}}),LarsResourcesAddWindow=function(a){this.node=a,this.treePanel=new LarsTreePanel(a),LarsResourcesAddWindow.superclass.constructor.call(this,{title:Lars.dialog.resourcesAdd,layout:"border",iconCls:"folder",id:"resources-explorer-win",width:250,height:350,autoScroll:!0,items:this.treePanel})},Ext.extend(LarsResourcesAddWindow,Ext.Window,{}),LarsResourcesPanel=function(a,b,c,d,e){LarsResourcesPanel.superclass.constructor.call(this,{defaults:{collapsible:!0,split:!0},layout:"fit",region:b,id:c,title:e,split:!0,width:200,minSize:175,maxSize:400,height:200,minHeight:150,header:!0,floating:!0,shadow:!0,border:!0,frame:!0,hideBorders:!0,margins:d,cmargins:"8 0 8 0",layoutConfig:{animate:!0},items:[a],tools:[{id:"right",handler:function(){Ext.getCmp("main-east").collapse(!0)}}]})},Ext.extend(LarsResourcesPanel,Ext.Panel,{afterRender:function(){LarsResourcesPanel.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsSetPackageRightsWindow=function(a){this.node=a,this.lehrer=new Ext.form.Radio({id:"leherer",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_1,width:20}),this.schueler=new Ext.form.Radio({id:"schueler",name:"rights",fieldLabel:Lars.dialog.rights.fieldLabel_2,width:20}),this.form=new Ext.FormPanel({labelAlign:"right",keys:LarsViewer.getKeyMap(this.onSet,this),items:[this.lehrer,this.schueler],labelWidth:200,border:!1,autoWidth:!0,bodyStyle:"background:transparent;padding:10px;"}),LarsSetPackageRightsWindow.superclass.constructor.call(this,{title:Lars.dialog.rights.title_1+" "+a.text+" "+Lars.dialog.rights.title_2,iconCls:"key",id:"change-rights-win",autoHeight:!0,width:300,resizable:!1,plain:!0,modal:!0,y:100,autoScroll:!0,buttons:[{text:Lars.dialog.rights.button_set,handler:this.onSet,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.addEvents({add:!0})},Ext.extend(LarsSetPackageRightsWindow,Ext.Window,{onSet:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.lehrer.getValue(),b=this.schueler.getValue();Ext.Ajax.request({url:"data/",params:{task:"changeRights",id:this.node.id,schueler:b,lehrer:a},success:this.refreshFolder,scope:this})},refreshFolder:function(){Ext.getCmp("topics-tree").root.reload(),this.destroy()}}),LarsTopicsPanel=function(){LarsTopicsPanel.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:!0,layout:"accordion",floating:!0,shadow:!0,shim:!1,frame:!0,header:!0,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDesk,new LarsTreePanelDeskOthers]})},Ext.extend(LarsTopicsPanel,Ext.Panel,{}),LarsTopicsPanelTeacher=function(){LarsTopicsPanelTeacher.superclass.constructor.call(this,{region:"center",id:"west-panel",title:"",split:!0,layout:"accordion",floating:!0,shadow:!0,shim:!1,frame:!0,header:!0,minSize:175,maxSize:400,margins:"0 4 8 8",cmargins:"8 0 8 8",items:[new LarsTreePanelDeskOthers,new LarsTreePanelDesk]}),this.on("contextmenu",this.onContextMenu,this),this.on("nodeDrop",function(){},this)},Ext.extend(LarsTopicsPanelTeacher,Ext.Panel,{afterRender:function(){LarsTopicsPanelTeacher.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsTreePanel=function(a){this.node={},this.node.id=a?a.id:"root",LarsTreePanel.superclass.constructor.call(this,{id:"tree",region:"center",width:225,minSize:175,maxSize:400,margins:"0 0 0 0",ddGroup:"resources",border:!1,frame:!0,collapseMode:"mini",enableDD:!0,dropConfig:{appendOnly:!0},rootVisible:!1,lines:!0,split:!0,autoScroll:!0,containerScroll:!0,root:new Ext.tree.TreeNode({text:Lars.main.tree.main_directory,expanded:!0})}),this.root.appendChild([new Ext.tree.AsyncTreeNode({text:Lars.main.tree.root_directory,loader:new Ext.tree.TreeLoader({dataUrl:"folder/",baseParams:{task:"getRoot"}}),id:"root"}),new Ext.tree.AsyncTreeNode({text:Lars.main.tree.home_directory,loader:new Ext.tree.TreeLoader({dataUrl:"folder/",baseParams:{task:"getRoot"}}),id:"home"})]),new Ext.tree.TreeSorter(this,{folderSort:!0}),this.expand(),this.on("contextmenu",this.onContextMenu,this),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})}),this.on({click:{fn:function(a){a.toggle()}}})},Ext.extend(LarsTreePanel,Ext.tree.TreePanel,{onContextMenu:function(a,b){a.isLeaf()||(this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_to_resources,id:"add13452",handler:function(){this.win=new LarsResourcesAddNameWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"link-add"}]}),this.menu.showAt(b.getXY()),this.menu.el.setZIndex(90010))},afterRender:function(){LarsTreePanel.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsTreePanelArchiv=function(a){LarsTreePanelArchiv.superclass.constructor.call(this,{id:"tree-"+a.id,region:"center",rootVisible:!1,autoScroll:!0,border:!1,root:new Ext.tree.AsyncTreeNode({text:"Hauptverzeichnis",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.msg.loading_folder},dataUrl:"data/",baseParams:{task:"getSchuelerTopics",folder:a.id}}),id:"source"})}),this.expand(),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){a.isLeaf()&&Ext.getCmp("main-tabs").fireEvent("viewPackage",a)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})},Ext.extend(LarsTreePanelArchiv,Ext.tree.TreePanel,{onContextMenu:function(a,b){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.del,id:"add1345752443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_object,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}]}),a.isLeaf()&&this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"}),this.menu.showAt(b.getXY()),this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelArchiv.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsTreePanelArchivWindow=function(a){this.node=a,this.treePanel=new LarsTreePanelArchiv(a),new Ext.tree.TreeSorter(this.treePanel,{folderSort:!0,dir:"desc"}),LarsTreePanelArchivWindow.superclass.constructor.call(this,{title:a.text,layout:"border",iconCls:"folder-archiv",id:"custom-tree-win-"+a.id,width:200,height:300,autoScroll:!0,items:this.treePanel}),this.addEvents({add:!0})},Ext.extend(LarsTreePanelArchivWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading");var a=this.name.getValue();Ext.Ajax.request({url:"data/",params:{task:"newAssignment",id:this.node.id,name:a},success:this.refreshFolder,scope:this})},refreshFolder:function(){Ext.getCmp("topics-tree").root.reload(),this.destroy()}}),LarsTreePanelBin=function(){LarsTreePanelBin.superclass.constructor.call(this,{id:"bin-tree",region:"center",margins:"0 0 0 0",bodyBorder:!1,shim:!1,rootVisible:!1,lines:!0,autoScroll:!0,containerScroll:!0,root:new Ext.tree.AsyncTreeNode({text:Lars.main.bin.trash,loader:new Ext.tree.TreeLoader({dataUrl:"folder/",baseParams:{task:"getResources"}}),id:larsBinId}),tbar:[{iconCls:"bin-empty",text:"",tooltip:Lars.main.bin.empty_trash,handler:function(){Ext.Msg.confirm(Lars.main.bin.trash,Lars.main.bin.empty_trash_confirm,function(a){"yes"==a&&Ext.Ajax.request({scope:this,url:"data/",params:{task:"emptyTrash"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?(Ext.ux.ToastLars.msg(Lars.msg.success,"",2),Ext.getCmp("bin-tree").root.reload()):Ext.ux.ToastLars.msg(Lars.msg.failure,"",2)}})},this)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("bin-tree").root.reload()}}]}),new Ext.tree.TreeSorter(this,{folderSort:!0}),this.expand(),this.getSelectionModel().on({selectionchange:function(a,b){b&&this.fireEvent("projectselect",b.attributes.id)},scope:this}),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){a.isLeaf()&&window.open(a.attributes.lars_ref)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})},Ext.extend(LarsTreePanelBin,Ext.tree.TreePanel,{onContextMenu:function(a,b){this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.bin.delete_irrevocable,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.bin.delete_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem",irrevocable:"1"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.parentNode.reload():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.bin.del_failure_msg,5)}})},this)},iconCls:"delete"}]}),a.isLeaf()?this.menu.add({iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(){a.data={OBJ_DESC:a.text},fileRecordToCopy=a,packageNodeToCopy=!1},scope:this}):"folder-link"!=a.attributes.iconCls&&this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=!1,packageNodeToCopy=a},iconCls:"copy"}),this.menu.showAt(b.getXY()),this.menu.el.setZIndex(90010)},afterRender:function(){LarsTreePanelBin.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsTreePanelBinWindow=function(){this.treePanel=new LarsTreePanelBin,LarsTreePanelBinWindow.superclass.constructor.call(this,{title:Lars.main.bin.trash,layout:"border",iconCls:"bin",id:"bin-explorer-win",width:250,height:350,autoScroll:!0,items:this.treePanel})},Ext.extend(LarsTreePanelBinWindow,Ext.Window,{}),LarsTreePanelDesk=function(){LarsTreePanelDesk.superclass.constructor.call(this,{id:"topics-tree",iconCls:"application-home",rootVisible:!1,animate:!1,autoScroll:!0,title:Lars.main.tree_title,root:new Ext.tree.AsyncTreeNode({text:Lars.main.tree.main_directory,loader:new Ext.tree.TreeLoader({dataUrl:"data/",baseParams:{task:"getSchuelerTopics"}}),id:"source"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderWindow,this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"folder-archiv",text:"",tooltip:Lars.main.tree.show_archive,handler:function(){var a={text:"Archiv",id:larsArchivId};(this.win=Ext.getCmp("custom-tree-win-"+a.id))?(this.win.show(),this.win.setZIndex(9e4)):(this.win=new LarsTreePanelArchivWindow(a),this.win.show(),this.win.setZIndex(9e4))},scope:this},{iconCls:"bin",text:"",tooltip:Lars.main.tree.show_bin,handler:function(){(this.win=Ext.getCmp("bin-explorer-win"))?(this.win.show(),this.win.setZIndex(9e4)):(this.win=new LarsTreePanelBinWindow,this.win.show(),this.win.setZIndex(9e4))},scope:this},{iconCls:"key",text:"",tooltip:Lars.main.tree.set_rights,handler:function(){this.win=new LarsGroupsRightsGridWindow,this.win.show(),this.win.setZIndex(9e4),this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree").root.reload()},scope:this}]}),new Ext.tree.TreeSorter(this,{folderSort:!0});this.root;this.root.on("load",function(){this.onReload(this.root)},this),this.expand(),this.getSelectionModel().on({selectionchange:function(a,b){b&&this.fireEvent("projectselect",b.attributes.id)},scope:this}),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){"folder-archiv"==a.attributes.iconCls?(this.win=Ext.getCmp("custom-tree-win-"+a.id))?this.win.setZIndex(9e4):(this.win=new LarsTreePanelArchivWindow(a),this.win.show(),this.win.setZIndex(9e4)):Ext.getCmp("main-tabs").fireEvent("viewPackage",a)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})},Ext.extend(LarsTreePanelDesk,Ext.tree.TreePanel,{onContextMenu:function(a,b){this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[]}),"folder-archiv"==a.attributes.iconCls?this.menu.add({text:Lars.main.tree.show_archive,id:"add2311",handler:function(){(this.win=Ext.getCmp("custom-tree-win-"+a.id))?this.win.setZIndex(9e4):(this.win=new LarsTreePanelArchivWindow(a),this.win.show(),this.win.setZIndex(9e4))},iconCls:"folder-archiv"}):a.isLeaf()?(this.menu.add({text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.main.tree.copy_package,id:"add2334514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);if(c.success){var d=a.id;Ext.getCmp(d)&&Ext.getCmp("main-tabs").remove(Ext.getCmp(d)),a.remove()}else Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg,5)}})},this)},iconCls:"delete"}),4==parseInt(a.attributes.state)&&this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archivePackage(a),this.root.reload()},scope:this})):(this.menu.add({text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add23141",handler:function(){Ext.getCmp("topics-tree").el.mask(Lars.msg.loading,"x-mask-loading"),Ext.Ajax.request({url:"data/",params:{task:"getLernstand",id:a.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);if(htmlValue=b.html,b.success){var c={id:b.id,text:b.text};Ext.getCmp("main-tabs").fireEvent("viewTab",c)}Ext.getCmp("topics-tree").el.unmask()},failure:function(){this.el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}})},this)},iconCls:"delete"}),packageNodeToCopy&&packageNodeToCopy.attributes.iconCls.match("report")&&this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+" ("+packageNodeToCopy.attributes.text+") "+Lars.main.tree.copy_confirm_3+" "+a.attributes.text+" "+Lars.main.tree.copy_confirm_4,function(b){"yes"==b&&Ext.Ajax.request({url:"data/",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?(newId=c.newId,newNode=new Ext.tree.TreeNode({id:newId,text:packageNodeToCopy.text,iconCls:packageNodeToCopy.attributes.iconCls,ownerTree:a.ownerTree,state:0}),newNode.attributes.state=0,newNode.attributes.origName=c.origName,a.appendChild(newNode),Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3)):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})},this)},iconCls:"paste"})),this.menu.showAt(b.getXY())},afterRender:function(){LarsTreePanelDesk.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})},onReload:function(a){a.cascade(function(){this.expand(!1,!1,function(a){a.collapse(!1,!1)})});var b=Ext.getCmp("main-tabs").getActiveTab();b.fireEvent("activate",b)}}),LarsTreePanelDeskOthers=function(){LarsTreePanelDeskOthers.superclass.constructor.call(this,{id:"topics-tree-t",rootVisible:!1,autoScroll:!0,animate:!1,iconCls:"folder-table",title:Lars.main.tree.desktops_title,enableDD:!0,enableDrop:!0,dropConfig:{appendOnly:!0},root:new Ext.tree.AsyncTreeNode({text:"root",loader:new Ext.tree.TreeLoader({loadMask:{msg:Lars.main.tree.load_mask_desktops},timeout:9e4,dataUrl:"data/",baseParams:{task:"getOwnStudents"}}),id:"source"}),tbar:[{iconCls:"user-add",text:"",tooltip:Lars.main.tree.embed_desktop,handler:function(){this.win=new LarsAddSchuelerWindow,this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"group-add",text:"",tooltip:Lars.main.tree.embed_desktop_group,handler:function(){this.win=new LarsGroupsDesktopsGridWindow,this.win.show(),this.win.setZIndex(9e4),this.win.items.items[0].store.load()},scope:this},{iconCls:"doc-others",text:"",tooltip:"Auswahl für die Anzeige neuer Dokumente und Nachrichten",handler:function(){this.win=new LarsDocumentsSubscriptionWindow,this.win.show(),this.win.setZIndex(9e4),this.win.items.items[0].store.load()},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("topics-tree-t").root.reload(this.onManualReload)},scope:this}]}),new Ext.tree.TreeSorter(this,{folderSort:!0,sortType:function(a){return a.attributes.iconCls+" "+Ext.util.Format.stripTags(a.attributes.text).toUpperCase()}});this.root;this.root.on("load",function(){this.onReload(this.root)},this),this.expand(),this.getSelectionModel().on({selectionchange:function(a,b){b&&this.fireEvent("projectselect",b.attributes.id)},scope:this}),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){"folder-archiv"==a.attributes.iconCls?(this.win=Ext.getCmp("custom-tree-win-"+a.id))?this.win.setZIndex(9e4):(this.win=new LarsTreePanelArchivWindow(a),this.win.show(),this.win.setZIndex(9e4)):Ext.getCmp("main-tabs").fireEvent("viewPackage",a)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("beforenodedrop",function(a){var b=a.dropNode.leaf,c=new Ext.tree.TreeNode(Ext.apply({},a.dropNode.attributes));a.dropNode=c,a.dropNode.attributes.iconCls="report",a.dropNode.attributes.groupColor=a.target.attributes.groupColor,a.dropNode.leaf=!0,a.dropNode.attributes.leaf=!0,b?Ext.Msg.confirm(Lars.main.tree.package_convert_confirm_1,Lars.main.tree.package_convert_confirm_2,function(b){"yes"==b&&Ext.Ajax.request({url:"data/",params:{task:"copyFilePackage",sourceId:a.dropNode.id,targetId:a.target.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);htmlValue=c.html,c.success?(Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3),a.dropNode.id=c.newId,a.dropNode.attributes.id=c.newId):(Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",3),a.dropNode.remove()),Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3),Ext.getCmp("topics-tree-t").el.unmask()},scope:this})},this):"ASSIGNMENT_PACKAGE"!=a.dropNode.attributes.OBJ_TYPE?(a.cancel=!0,Ext.Msg.show({title:Lars.msg.failure_copy,msg:Lars.main.tree.msg_failure_no_package,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.ERROR})):Ext.Ajax.request({url:"data/",params:{task:"copyPackage",sourceId:a.dropNode.id,targetId:a.target.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?(Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3),a.dropNode.id=c.newId,a.dropNode.attributes.id=c.newId,a.dropNode.attributes.origName=c.origName):(Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",3),a.dropNode.remove()),Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3),Ext.getCmp("topics-tree-t").el.unmask()},scope:this})},this),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})},Ext.extend(LarsTreePanelDeskOthers,Ext.tree.TreePanel,{onContextMenu:function(a,b){"folder-archiv"==a.attributes.iconCls?this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_archive,id:"add231156",handler:function(){(this.win=Ext.getCmp("custom-tree-win-"+a.id))?this.win.setZIndex(9e4):(this.win=new LarsTreePanelArchivWindow(a),this.win.show(),this.win.setZIndex(9e4))},iconCls:"folder-archiv"}]}):a.isLeaf()?(this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.show_package,id:"add2311",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"table-go"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.main.tree.copy_package,id:"add23345324514561",handler:function(){packageNodeToCopy=a},iconCls:"copy"},{text:Lars.del,id:"add1324423",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_package,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);if(c.success){var d=a.id;Ext.getCmp(d)&&Ext.getCmp("main-tabs").remove(Ext.getCmp(d)),a.remove()}else Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}]}),4==parseInt(a.attributes.state)&&"false"!=a.attributes.archivable&&this.menu.add({iconCls:"database-save",text:Lars.main.tree.move_to_archive,tooltip:Lars.main.tree.move_to_archive_tt,id:"add232453",handler:function(){Ext.getCmp("main-tabs").archiveGroupPackage(a,a.attributes.archiv),this.root.reload()},scope:this})):"user"!=a.attributes.iconCls&&"group"!=a.attributes.iconCls?(this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{text:Lars.main.tree.add_package,id:"add34",handler:function(){this.win=new AssignmentWindow(a),this.win.show(),this.win.setZIndex(9e4),Ext.Msg.show({title:Lars.msg.attention,msg:Lars.main.tree.add_package_advice,buttons:Ext.Msg.OK,animEl:"elId",icon:Ext.MessageBox.INFO})},iconCls:"folder-add"},{text:Lars.main.tree.open_learn_process,id:"add231419703",handler:function(){Ext.getCmp("topics-tree-t").el.mask(Lars.msg.loading,"x-mask-loading"),Ext.Ajax.request({url:"data/",params:{task:"getLernstand",id:a.id},success:function(a){var b=Ext.util.JSON.decode(a.responseText);if(htmlValue=b.html,b.success){var c={id:b.id,text:b.text};Ext.getCmp("main-tabs").fireEvent("viewTab",c)}Ext.getCmp("topics-tree-t").el.unmask()},failure:function(){Ext.getCmp("topics-tree-t").el.unmask()},scope:this})},iconCls:"book-open"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.del,id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}]}),packageNodeToCopy&&packageNodeToCopy.attributes.iconCls.match("report")&&this.menu.add({text:Lars.main.tree.insert_here,id:"add23141970233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4+Lars.main.tree.copy_confirm_5,function(b){"yes"==b&&(Ext.ux.ToastLars.msg(Lars.main.tree.copy_progress_1,Lars.main.tree.copy_progress_2,5),Ext.Ajax.request({url:"data/",params:{task:"copyPackage",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?(newId=c.newId,origName=c.origName,newNode=new Ext.tree.TreeNode({leaf:!0,id:newId,text:packageNodeToCopy.text,iconCls:"report",ownerTree:a.ownerTree,state:0}),newNode.attributes.state=0,newNode.attributes.origName=origName,a.appendChild(newNode),Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3)):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this}))},this)},iconCls:"paste"})):("user"==a.attributes.iconCls||"group"==a.attributes.iconCls)&&(this.menu=new Ext.menu.Menu({id:"topics-tree-ctx",items:[{iconCls:"folder-add",text:Lars.main.tree.add_folder,handler:function(){(this.win=Ext.getCmp("custom-tree-win-"+a.id))?this.win.setZIndex(9e4):(this.win=new LarsAddFolderWindow(a),this.win.show(),this.win.setZIndex(9e4))},scope:this},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.main.tree.del_desktop_link,id:"add23123413",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_desktop_link_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}]})),this.menu.showAt(b.getXY())},afterRender:function(){LarsTreePanelDeskOthers.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})},onReload:function(a){a.cascade(function(){this.expand(!1,!1,function(a){a.collapse(!1,!1)})});var b=Ext.getCmp("main-tabs").getActiveTab();b.fireEvent("activate",b)}}),LarsTreePanelFolderLinks=function(){LarsTreePanelFolderLinks.superclass.constructor.call(this,{id:"resources-tree",margins:"0 0 0 0",enableDD:!0,dropConfig:{appendOnly:!0},bodyBorder:!1,animate:!1,shim:!1,rootVisible:!1,lines:!0,autoScroll:!0,containerScroll:!0,root:new Ext.tree.AsyncTreeNode({text:"ressources",loader:new Ext.tree.TreeLoader({dataUrl:"folder/",baseParams:{task:"getResources"}}),id:"folder"}),tbar:[{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_resource_folder,handler:function(){this.win=new LarsResourcesAddWindow,this.win.show(),this.win.setZIndex(9e4)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("resources-tree").root.reload()
}}]}),new Ext.tree.TreeSorter(this,{folderSort:!0}),this.expand(),this.getSelectionModel().on({selectionchange:function(a,b){b&&this.fireEvent("projectselect",b.attributes.id)},scope:this}),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){a.isLeaf()&&"link"!=a.attributes.iconCls?Ext.getCmp("main-tabs").fireEvent("viewIFrameTab",a):"report"==a.attributes.iconCls?Ext.getCmp("main-tabs").fireEvent("viewPackage",a):a.attributes.lars_ref.match(window.location.host)?LarsViewer.QuestionTabOrBrowserOpen(a):a.attributes.lars_ref.length>5&&!a.attributes.lars_ref.match(window.location.host)&&LarsViewer.QuestionBrowserOpenNode(a)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})}),this.on("render",function(a){new Ext.dd.DropZone(a.getEl(),{ddGroup:"resources",onDragDrop:function(){alert("dragdrop")},notifyDrop:function(a,b,c){b.getTarget("div.x-panel");this.win=new LarsResourcesAddNameWindow(c.node),this.win.show(),this.win.setZIndex(9e4)},onContainerOver:function(){return this.dropAllowed}})})},Ext.extend(LarsTreePanelFolderLinks,Ext.tree.TreePanel,{onContextMenu:function(a,b){a.isLeaf()?(this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.download,id:"add23121",handler:function(){LarsGridConfig.downloadFile("get/"+rec.data.id)},iconCls:"page-save"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.grid.del_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"},{iconCls:"copy",text:Lars.copy_document,tooltip:Lars.copy_document_tt,handler:function(){a.data={OBJ_DESC:a.text},fileRecordToCopy=a,packageNodeToCopy=!1},scope:this}]}),a.attributes.mimeType.match("text")&&this.menu.add({text:Lars.main.show,id:"add2",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewTab",a)},iconCls:"page"},{text:Lars.main.edit,id:"add1",handler:function(){Ext.getCmp("main-tabs").fireEvent("schuelerEditTab",a)},iconCls:"editPage"})):"folder-link"!=a.attributes.iconCls?(this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.show_as_package,id:"add23121",handler:function(){Ext.getCmp("main-tabs").fireEvent("viewPackage",a)},iconCls:"package-go"},{text:Lars.main.tree.add_package_here,id:"add3342344",handler:function(){this.win=new AssignmentWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id),this.win.show(),this.win.setZIndex(9e4)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){a.reload()},iconCls:"icon-refresh"},{text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.main.tree.folder_properties,id:"add2314521",menu:{items:[{text:Lars.main.tree.folder_as_package,id:"add23516721",handler:function(){LarsGridConfig.changeAttribute(a.id,"OBJ_TYPE","ASSIGNMENT_PACKAGE",a.attributes.OBJ_TYPE),a.parentNode.reload()},iconCls:"report"},{text:Lars.main.tree.folder_as_normal,id:"add235121",handler:function(){LarsGridConfig.changeAttribute(a.id,"OBJ_TYPE","",a.attributes.OBJ_TYPE),a.parentNode.reload()},iconCls:"folder"}]},iconCls:"folder-config"},{text:Lars.del,id:"add13452443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.remove():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}]}),"ASSIGNMENT_PACKAGE"==a.attributes.OBJ_TYPE?this.menu.add({text:Lars.main.tree.copy_package,id:"add2334d514561",handler:function(){fileRecordToCopy=!1,packageNodeToCopy=a},iconCls:"copy"}):this.menu.add({text:Lars.main.tree.copy_folder,id:"add2334d54514561",handler:function(){fileRecordToCopy=!1,packageNodeToCopy=a},iconCls:"copy"})):this.menu=new Ext.menu.Menu({}),"folder-link"==a.attributes.iconCls&&this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"},{text:Lars.main.tree.add_package_here,id:"add54634",handler:function(){this.win=new AssignmentWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"report-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id),this.win.show(),this.win.setZIndex(9e4)},scope:this},{text:Lars.main.refresh_here,id:"add223453121",handler:function(){a.reload()},iconCls:"icon-refresh"},{text:Lars.main.tree.del_link,id:"add231231",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_confirm_link,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?a.parentNode.reload():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.failure_delete,5)}})},this)},iconCls:"delete"}),packageNodeToCopy&&!a.isLeaf()&&this.menu.add({text:Lars.main.tree.insert_here,id:"add23141972340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_folder+packageNodeToCopy.attributes.text+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4,function(b){"yes"==b&&Ext.Ajax.request({url:"data/",params:{task:"copyFolder",sourceId:packageNodeToCopy.id,targetId:a.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?(Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3),a.reload()):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})},this)},iconCls:"paste"}),fileRecordToCopy&&!a.isLeaf()&&this.menu.add({text:Lars.main.tree.copy_document,id:"add231419472340233",handler:function(){Ext.Msg.confirm(Lars.main.tree.copy_confirm_1,Lars.main.tree.copy_confirm_2_document+fileRecordToCopy.data.OBJ_DESC+Lars.main.tree.copy_confirm_3+a.attributes.text+Lars.main.tree.copy_confirm_4,function(b){"yes"==b&&Ext.Ajax.request({url:"data/",params:{task:"copyFile",sourceId:fileRecordToCopy.id,targetId:a.id},success:function(b){var c=Ext.util.JSON.decode(b.responseText);c.success?(Ext.ux.ToastLars.msg(Lars.msg.success_copy,c.name?c.name:" ",3),a.reload()):Ext.ux.ToastLars.msg(Lars.msg.failure_copy,c.name?c.name:" ",5)},failure:function(){Ext.ux.ToastLars.msg(Lars.msg.failure_copy,"",3)},scope:this})},this)},iconCls:"paste"}),a.attributes.lars_ref.match(window.location.host)?this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionTabOrBrowserOpen(a)},scope:this,iconCls:"link"}):a.attributes.lars_ref.length>5&&this.menu.add({text:Lars.main.grid.open_link_2,id:"add223453121",handler:function(){LarsViewer.QuestionBrowserOpenNode(a)},scope:this,iconCls:"link"}),this.menu.showAt(b.getXY())},afterRender:function(){LarsTreePanelFolderLinks.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsTreePanelLinks=function(){LarsTreePanelLinks.superclass.constructor.call(this,{id:"links-tree",margins:"0 0 0 0",bodyBorder:!1,shim:!1,ddGroup:"TreeDD",animate:!1,enableDrag:!0,rootVisible:!1,lines:!0,autoScroll:!0,containerScroll:!0,root:new Ext.tree.AsyncTreeNode({text:"",loader:new Ext.tree.TreeLoader({dataUrl:"folder/",baseParams:{task:"getResourcesLinks"}}),id:"links"}),tbar:[{iconCls:"link-add",text:"",tooltip:Lars.main.tree.add_link,handler:function(){this.win=new LarsAddLinkWindow,this.win.show(),this.win.setZIndex(9e4)},scope:this},{iconCls:"folder-add",text:"",tooltip:Lars.main.tree.add_folder,handler:function(){this.win=new LarsAddFolderLinksWindow("root"),this.win.show(),this.win.setZIndex(9e4)},scope:this},"->",{iconCls:"icon-refresh",text:"",tooltip:Lars.refresh,handler:function(){Ext.getCmp("links-tree").root.reload()}}]}),this.expand(),this.getSelectionModel().on({selectionchange:function(a,b){b&&this.fireEvent("projectselect",b.attributes.id)},scope:this}),this.addEvents({schuelerEditTab:!0}),this.on("contextmenu",this.onContextMenu,this),this.on({dblClick:{fn:function(a){a.isLeaf()&&a.attributes.lars_ref.match(window.location.host)?LarsViewer.QuestionTabOrBrowserOpen(a):LarsViewer.QuestionBrowserOpenNode(a)}}}),this.on({click:{fn:function(a){a.toggle()}}}),this.on("render",function(){this.root.on({scope:this.el,beforeload:this.el.mask.createDelegate(this.el,[Lars.msg.loading_data]),load:this.el.unmask,loadexception:this.el.unmask})})},Ext.extend(LarsTreePanelLinks,Ext.tree.TreePanel,{onContextMenu:function(a,b){a.isLeaf()||(this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.main.tree.add_link_here,id:"add142365",handler:function(){this.win=new LarsAddLinkWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"link-add"},{iconCls:"folder-add",text:Lars.main.tree.add_folder_here,handler:function(){this.win=new LarsAddFolderLinksWindow(a.attributes.id),this.win.show(),this.win.setZIndex(9e4)},scope:this},{text:"Löschen",id:"add132443",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.delete_folder_confirm,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.getCmp("links-tree").root.reload():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_folder,5)}})},this)},iconCls:"delete"}]})),a.isLeaf()&&(this.menu=new Ext.menu.Menu({id:"feeds-ctx",items:[{text:Lars.del,id:"add13243",handler:function(){Ext.Msg.confirm(Lars.del,Lars.main.tree.del_link,function(b){"yes"==b&&Ext.Ajax.request({scope:this,url:"data/",params:{id:a.id,name:a.attributes.origName,task:"deleteItem"},success:function(a){var b=Ext.util.JSON.decode(a.responseText);b.success?Ext.getCmp("links-tree").root.reload():Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.main.tree.del_failure_msg_link,5)}})},this)},iconCls:"delete"}]})),this.menu.add({text:Lars.rename,id:"add2314561",handler:function(){this.win=new LarsChangeDescWindow(a),this.win.show(),this.win.setZIndex(9e4)},iconCls:"rename"}),this.menu.showAt(b.getXY())},afterRender:function(){LarsTreePanelLinks.superclass.afterRender.call(this),this.el.on({contextmenu:{fn:function(){return!1},stopEvent:!0}})}}),LarsUpdater=function(a){Ext.apply(this,a),this.myReader=new Ext.data.JsonReader({root:"data",id:"id"},["id","items"]),this.store=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:"update/",method:"POST",timeout:timeoutUpdateConnection}),reader:this.myReader}),this.tmpMyReader=new Ext.data.JsonReader({id:"id"},LarsGridConfig.larsObj),this.tmpStore=new Ext.data.Store({reader:this.tmpMyReader}),this.store.on("load",function(a){a.each(function(a){a.id;this.tmpStore.loadData(a.data.items)},this)},this),this.tmpStore.on("load",function(a,b){for(var c,d=[],e=0,f=b.length;f>e;e++)if(c=b[e],current=this.elements[c.data.container])if(oldRecord=current.store.getById(c.id)){var g=current.grid.view.getRow(current.store.indexOf(oldRecord));Ext.fly(g).hasClass("x-grid3-row-expanded")?(Ext.apply(oldRecord,c),oldRecord.iFrame?oldRecord.iFrame.setSrc():current.expander?(current.grid.expander.toggleRow(g),current.grid.expander.toggleRow.defer(100,current.grid.expander,[g]),current.grid.view.refresh()):current.grid.view.refresh()):(Ext.apply(oldRecord,c),current.grid.getView().refreshRow(oldRecord))}else d.push(c);else Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.msg.dialog_updater_error,10);for(var d,e=0,f=d.length;f>e;e++)current.store.addSorted(d[e])},this)},Ext.extend(LarsUpdater,Ext.util.Observable,{elements:{},updateIds:new Array,add:function(a,b,c){this.elements[a]={id:a,grid:b,store:c},this.updateIds.push(a),Ext.Ajax.request({url:"update/",params:{task:"updateIds",id:Ext.util.JSON.encode(this.updateIds)},success:function(){},scope:this})},remove:function(a){this.elements[a]&&delete this.elements[a];for(var a,b=0,c=this.updateIds.length;c>b;b++)a==this.updateIds[b]&&this.updateIds.splice(b,1)}}),updateUsers=function(){LarsUpdaterUsers.defer(onlineStatusInterval,this,[])},LarsUpdaterUsers=function(){Ext.Ajax.request({url:"update/",params:{task:"getUsersLastLogin"},method:"POST",callback:updateUsers,timeout:timeoutUpdateConnection,success:function(a){var b=Ext.util.JSON.decode(a.responseText);if(b.success){for(var c=b.online,d=b.offline,e='<img class="online" unselectable="on" src="http://extjs.com/s.gif"/>',f=0;f<c.length;f++){var g=Ext.getCmp("topics-tree-t").getNodeById(c[f]);g&&(g.origText?g.setText(g.origText+e):(g.origText=g.text,g.setText(g.text+e)))}for(var f=0;f<d.length;f++){var g=Ext.getCmp("topics-tree-t").getNodeById(d[f]);g&&(g.origText?g.origText!=g.text&&g.setText(g.origText):g.origText=g.text)}}},scope:this})},UploadWindow=function(a,b,c){this.node=a,this.id=new Ext.form.Hidden({id:"id",value:a.id,fieldLabel:"ID des Ordners",hidden:!0}),this.larsType=new Ext.form.Hidden({id:"larsType",value:b,fieldLabel:"Aufgabentyp",hidden:!0}),this.description=new Ext.form.Field({id:"description",fieldLabel:Lars.dialog.upload_file.upload_description,value:c?c:"",width:450,msgTarget:"under"}),this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_file.choose_hd,inputType:"file",width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:!0,url:"upload/",method:"post",id:"upload-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.description,this.filePath,this.id,this.larsType],timeout:18e5,border:!1,bodyStyle:"background:transparent;padding:10px;"}),UploadWindow.superclass.constructor.call(this,{title:Lars.dialog.upload_file.title+this.node.text,iconCls:"add-page",id:"add-download-win",autoHeight:!0,width:500,resizable:!1,modal:!0,buttons:[{text:Lars.dialog.upload_file.button_upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(UploadWindow,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading"),Ext.getCmp("upload-form").getForm().submit({success:function(a,b){var c={};b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),1==c.success?(Ext.ux.ToastLars.msg(Lars.dialog.upload_file.msg_success,c.name?c.name:" ",5),Ext.getCmp(this.node.id+"Grid")&&Ext.getCmp(this.node.id+"Grid").store.load(),this.destroy()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_file.msg_failure+"<br>"+(c.name?c.name:" "),10),this.el.unmask())},failure:function(a,b){var c={};b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),Ext.ux.ToastLars.msg(Lars.msg.failure,c.name?c.name:Lars.msg.failure_connection,10),this.el.unmask()},scope:this})}}),UploadCustomImage=function(){this.id=new Ext.form.Hidden({id:"aktion",value:"image",fieldLabel:"Action",hidden:!0}),this.filePath=new Ext.form.Field({id:"file",fieldLabel:Lars.dialog.upload_image.choose_hd,inputType:"file",width:450,msgTarget:"under"}),this.form=new Ext.FormPanel({labelAlign:"top",fileUpload:!0,url:"upload/",method:"post",timeout:18e5,id:"upload-image-form",keys:LarsViewer.getKeyMap(this.onAdd,this),items:[this.filePath,this.id],border:!1,bodyStyle:"background:transparent;padding:10px;"}),UploadCustomImage.superclass.constructor.call(this,{title:Lars.dialog.upload_image.upload,iconCls:"add-image",id:"add-image-win",autoHeight:!0,width:500,resizable:!1,modal:!0,buttons:[{text:Lars.dialog.upload_image.upload,handler:this.onAdd,scope:this},{text:Lars.button_cancel,handler:function(){this.destroy()},scope:this}],items:this.form}),this.on("show",this.focusFirst,this),this.addEvents({add:!0})},Ext.extend(UploadCustomImage,Ext.Window,{onAdd:function(){this.el.mask(Lars.msg.loading,"x-mask-loading"),Ext.getCmp("upload-image-form").getForm().submit({success:function(a,b){var c={};b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),1==c.success?(Ext.ux.ToastLars.msg(Lars.dialog.upload_image.msg_success,c.name?c.name:" ",5),Ext.getCmp("custom-image-panel").getUpdater().update(Ext.getCmp("custom-image-panel").autoLoad),this.destroy()):(Ext.ux.ToastLars.msg(Lars.msg.failure,Lars.dialog.upload_image.msg_failure+"<br>"+(c.name?c.name:" "),10),this.el.unmask())},failure:function(a,b){var c={};b.response.responseText&&(c=Ext.util.JSON.decode(b.response.responseText)),Ext.ux.ToastLars.msg(Lars.msg.failure,c.name?c.name:Lars.msg.failure_connection,10),this.el.unmask()},scope:this})}});var version="1.5.9",larsVoiceChat={title:Lars.main.chat.title,iconCls:"webcam",collapsible:!0,collapsed:!0,id:"lars-voice-chat",region:"east",xtype:"flashpanel",split:!0,autoScroll:!0,cmargins:"0 0 0 0",tbar:[{iconCls:"house",tooltip:Lars.main.chat.chat_home,handler:function(){reloadVoiceChat(larsDesktopId)},scope:this},{iconCls:"user",tooltip:Lars.main.chat.chat_else,handler:function(){this.win=new LarsJoinChat,this.win.show(),this.win.setZIndex(90005)},scope:this}],mediaCfg:{mediaType:"SWF",id:"flocsOne",renderOnResize:!1,width:275}};reloadVoiceChat=function(a){Ext.getCmp("lars-voice-chat").renderMedia({mediaType:"SWF",url:"/bundles/opensteammokodesk/flash/flocsLars.swf",id:"flocsOne",renderOnResize:!1,visibility:"hidden",autoSize:!0,start:!0,loop:!1,height:"100%",width:275,controls:!0,params:{quality:"high",scale:"exactfit",start:!0,loop:!1,allowScriptAccess:"sameDomain",flashVars:{user:user,pass:pass,server:"www.bid-owl.de",port:"1900",environment:a}}})};